# $Id: Portfile,v 1.4 2004/11/09 23:45:00 mww Exp $

PortSystem 1.0

name			Growl
version			0.5
revision		2
categories		aqua
platforms		darwin
maintainers		mww@opendarwin.org
description		global notification system for Mac OS X
long_description	Growl is a global notification system for Mac OS X. Any \
				application can send a notification to Growl, which will \
				display an attractive message on your screen.

homepage		http://growl.info/
master_sites		${homepage}files/source/
distname 		growl-${version}
use_bzip2		yes
checksums		md5 03ce739aebad504a1a22605c0a076012

use_configure	no

post-build	{
	system "cd ${worksrcpath}/Examples/growlnotify && xcodebuild"
	system "cd ${worksrcpath}/Examples/GrowlTunes && xcodebuild"
	system "cd ${worksrcpath}/Examples/GrowlMail && xcodebuild"
}

destroot	{
	xinstall -m 755 -d ${destroot}/Applications/DarwinPorts/ \
		${destroot}/Library/Frameworks/ \
		${destroot}/Library/Mail/Bundles/ \
		${destroot}/Library/PreferencePanes/
	file copy ${worksrcpath}/build/Growl.prefPane \
		${destroot}/Library/PreferencePanes/
	file copy ${worksrcpath}/build/GrowlAppBridge.framework \
		${destroot}/Library/Frameworks/
	file copy ${worksrcpath}/Examples/GrowlTunes/build/GrowlTunes.app \
		${destroot}/Applications/DarwinPorts/
	file copy ${worksrcpath}/Examples/GrowlMail/build/GrowlMail.mailbundle \
		${destroot}/Library/Mail/Bundles
	xinstall -m 755 ${worksrcpath}/Examples/growlnotify/build/growlnotify \
		${destroot}${prefix}/bin
	xinstall -m 755 ${filespath}/iport ${destroot}${prefix}/bin
	reinplace "s|__PREFIX__|${prefix}|g" ${destroot}${prefix}/bin/iport
}
