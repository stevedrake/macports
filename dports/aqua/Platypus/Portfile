# $Id$

PortSystem		1.0
PortGroup		xcode 1.0

name			Platypus
version			4.4
categories		aqua devel
maintainers		me.com:tsupplis
description		Program for creating application wrappers around scripts.

long_description	Platypus is a program for creating application \
			wrappers around scripts, i.e. creating Mac OS X \
			applications that execute a script they are bundled \
			with. Scripts can thus be run transparently from the \
			graphical window environment without having to \
			resort to using the command line interface. It \
			supports drag and drop on created apps, running as \
			root using Authentication Manager and more.

homepage		http://www.sveinbjorn.org/platypus/
master_sites		http://www.sveinbjorn.org/files/software/platypus/
distname		platypus${version}.src
use_zip			yes

checksums           md5     e6fe23f7037a873394b70bcc62843940 \
                    sha1    31faa5ea5e3e266a213aa3dd3c1fa1173e611110 \
                    rmd160  0708e489de457d79cecb8192f1747459df8402c8

worksrcdir		"${name}-${version}-Source"

# Dummy configure to enable universal variant.
use_configure	yes
configure		{}

if {! [variant_isset universal]} {
	set arch ${os.arch}
	if {! [string compare ${os.arch} powerpc]} {
		set arch ppc
	}

	xcode.build.settings-append		ARCHS=${arch}
	xcode.destroot.settings-append	ARCHS=${arch}
}

build.target platypus ScriptExec Platypus
destroot.target Platypus

post-destroot {
	reinplace "s|/usr/local|${destroot}${prefix}|g" ${worksrcpath}/Scripts/InstallCommandLineTool.sh
	reinplace "s|English.lproj/||g" ${worksrcpath}/Scripts/InstallCommandLineTool.sh
	exec /bin/bash ${worksrcpath}/Scripts/InstallCommandLineTool.sh ${destroot}/${applications_dir}/Platypus.app/Contents/Resources
}

livecheck.type	regex
livecheck.url	${homepage}
livecheck.regex	"${name} (\\d+(?:\\.\\d+)*)"

