# $Id: Portfile,v 1.1 2004/05/24 03:56:57 rshaw Exp $
PortSystem		1.0

name			macsword
version			1.0.1
categories		aqua textproc
maintainers		rshaw@opendarwin.org
description		Aqua application based on the Sword project for Bible reading
long_description	MacSword is a free & open-source application for  \
					research and study of God and His Word. It is  \
					developed specifically for Macintosh computers  \
					running Mac OS X.  \
					MacSword allows you to read and browse many \
					different bibles translations in different languages \
					from Hebrew to Albanian. As well as reading \
					devotionals, commentaries, dictionaries and \
					lexicons, it also supports searching and advanced \
					features such as services so that you can access the \
					Bible in any program. \
					And because MacSword is based on the Sword project, \
					it is compatible with a growing collection of over \
					200 texts available in over 50 languages.
homepage		http://www.macsword.com/
master_sites	sourceforge
checksums		md5 33440f3f14d0305ddc91c5ee7fff9d68

depends_lib		lib:libsword.3:sword \
				path:/Library/Frameworks/AGRegex.framework:agregex

patchfiles		patch-project.pbxproj \
				patch-PrefHandler.m
post-patch {
	reinplace "s|@PREFIX@|${prefix}|" \
		${worksrcpath}/MacSword.xcode/project.pbxproj \
		${worksrcpath}/PrefHandler.m
}

use_configure	no

build.type		pbx
build.target	-project MacSword.xcode -target MacSword
build.args		-buildstyle Deployment

destroot {
	xinstall -d -m 0755 ${destroot}/Applications/DarwinPorts
	system "cp -R ${worksrcpath}/build/MacSword.app \
		${destroot}/Applications/DarwinPorts"
}

variant devel {
	version			1.1b3
	distname		${name}
	checksums		md5 5956cb330600af30d881afb20f1c216c
	build.target	-target MacSword

	patchfiles		patch-project.pbxproj-devel \
					patch-PrefHandler.m \
					patch-SwordManager.mm
	post-patch {
		reinplace "s|1.0.1|${version}|" ${worksrcpath}/Info.plist
	}
}

