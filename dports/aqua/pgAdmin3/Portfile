# $Id$

PortSystem 1.0

name		pgAdmin3
version		1.8.1

categories	aqua
maintainers	jwa

description	An administration program to PostgreSQL
long_description pgAdmin III is a powerful administration and development \
    platform for the PostgreSQL database, free for any use. The \
    application works on several platforms, e.g. GNU/Linux, FreeBSD, \
    OS X and Windows 2000/XP. This port is for OS X.

platforms	macosx
homepage	http://www.pgadmin.org/

master_sites	http://developer.pgadmin.org/ftp/release/v${version}/src/ \
    http://www.postgresql.org/ftp/pgadmin3/release/v${version}/src/

distname	pgadmin3-${version}

checksums	${distname}${extract.suffix} \
    md5 8413ea6f8830b331d2bde671208f0479 \
    sha1 788eccbb6614b3b72add03268f527cf83940c0b8 \
    rmd160 ba7e0591f862bf47e6208cdc062ffce817f68453

depends_lib	port:postgresql82 \
    port:wxWidgets \
    port:openssl \
    port:libxml2 \
    port:libxslt

configure.args	--with-pgsql=${prefix}/lib/postgresql82 \
    --with-wx=${prefix} \
    --with-wx-version=2.8 \
    --with-libxml2=${prefix} \
    --with-libxslt=${prefix} \
    --enable-appbundle

build.target	all install

#destroot.violate_mtree	yes
destroot {
    xinstall -d -m 0755 ${destroot}/Applications/MacPorts
    file copy ${worksrcpath}/${name}.app ${destroot}/Applications/MacPorts/${name}.app
}

variant debug description {provide a debug build in case of difficulties} {
    configure.args-append	--enable-debug
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	pgAdmin III v(1.\[0-9\]+.\[0-9\]+)
