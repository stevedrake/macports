# $Id$

PortSystem 1.0
name		lha
version		1.14i-ac20050924p1
epoch		20061016
categories	archivers sysutils
description	Utility for creating and opening lzh archives
maintainers	jc@crazic.ru
long_description ${description}
homepage	http://lha.sourceforge.jp/
set sfjpid	22231
master_sites	http://keihanna.dl.sourceforge.jp/lha/${sfjpid}/ \
		http://qgpop.dl.sourceforge.jp/lha/${sfjpid}/ \
		http://osdn.dl.sourceforge.jp/lha/${sfjpid}/
checksums	md5 9f52430410928ba4390a73a41a36d56f \
		sha1 2491c8b584c21759f1d3819f57fa0e1cbc235092 \
		rmd160 7603dc93d8afdeed6cfbaa193f68ae4283bea39b

post-build	{
	system "strip ${build.dir}/src/$name"
}

test.run	yes
test.target	check

destroot	{
	xinstall -m 755 -d ${destroot}/${prefix}/bin
	file copy ${build.dir}/src/$name ${destroot}/${prefix}/bin
}

post-destroot	{
	xinstall -m 755 -d \
	  ${destroot}${prefix}/share/doc/${name}/olddoc
	xinstall -m 755 -d \
	  ${destroot}${prefix}/share/doc/${name}/man
	xinstall -m 644 -W ${worksrcpath} 00readme.autoconf ChangeLog \
	  Hacking_of_LHa header.doc.euc \
	  ${destroot}${prefix}/share/doc/${name}
	foreach f {*.txt *.euc *.eng} {
		eval xinstall -m 644 \
		[glob ${worksrcpath}/olddoc/${f}] \
		${destroot}${prefix}/share/doc/${name}/olddoc
	}
	xinstall -m 644 ${worksrcpath}/man/lha.man \
	  ${destroot}${prefix}/share/doc/${name}/man
}
