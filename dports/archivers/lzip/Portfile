# $Id$

PortSystem 1.0

name                lzip
version             1.8-rc1
categories          archivers
platforms           darwin
maintainers         vinc17
description         Compression program based on LZMA similar to gzip or bzip2
long_description    Lzip is a lossless data compressor based on the LZMA    \
                    algorithm, with very safe integrity checking and a      \
                    user interface similar to the one of gzip or bzip2.     \
                    Lzip decompresses almost as fast as gzip and compresses \
                    better than bzip2, which makes it well suited for       \
                    software distribution and data archiving.
homepage            http://www.nongnu.org/lzip/lzip.html
master_sites        http://download.savannah.gnu.org/releases/lzip/
checksums           md5 64043eca358cf2f618b3aeee886c9a62 \
                    sha1 6ef59dbde874cd992ad5c3ea546205fdc9d372a6 \
                    rmd160 39d5f9d9f73ff700c652b9fc3ef8b2eb5792d5d5

post-destroot {
    set docdir ${destroot}${prefix}/share/doc/${name}
    file mkdir ${docdir}
    xinstall -m 644 -v -W ${worksrcpath} \
      AUTHORS ChangeLog COPYING NEWS ${docdir}
}

# The following variant is needed if lzmautils is installed.
variant minimal description {Do not install lzdiff and lzgrep} {
    post-patch {
        reinplace -E "s/\\$\\\(INSTALL_.*lz\(diff|grep\).*/true/" \
            ${worksrcpath}/Makefile.in
    }
}

livecheck.check     regex
livecheck.url       ${master_sites}/?C=M&O=D
livecheck.regex     ${name}-(\[-0-9a-z.\]+)\\.tar\\.gz
