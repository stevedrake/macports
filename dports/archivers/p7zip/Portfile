# $Id$

PortSystem		1.0

name			p7zip
version			4.51
categories		archivers
maintainers		nomaintainer
platforms		darwin
description		7-Zip implementation

long_description \
	p7zip is a port of 7-Zip, a file archiver with \
	highest compression ratio.

homepage		http://p7zip.sourceforge.net/

master_sites	sourceforge
distname		[strsed ${distname} {g/-/_/}]
use_bzip2		yes
distfiles		${distname}_src_all${extract.suffix}

checksums		md5 d7f310fdb530cc1259d7b7ca28162747 \
				sha1 e3708dc69ec44dba554ab15d0cacbc226eae9420 \
				rmd160 af57615cc9d951516891a3f52b169f3d7c262650

patchfiles		patch-install.sh

configure {
	if {${os.platform} == "darwin"} {
		file copy -force ${worksrcpath}/makefile.macosx ${worksrcpath}/makefile.machine
	}
}

post-configure {
	if {[variant_isset universal]} {
		reinplace "s|\$(LOCAL_FLAGS)|${configure.universal_cflags} \$(LOCAL_FLAGS)|g" ${worksrcpath}/makefile.machine
	}
}

destroot.destdir	DEST_HOME=${prefix} \
					DEST_MAN=${prefix}/share/man \
					DEST_DIR=${destroot}
