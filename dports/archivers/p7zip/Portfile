# $Id: Portfile,v 1.9 2005/12/22 00:35:50 toby Exp $

PortSystem 1.0
name             p7zip
version          4.30
revision         1
categories       archivers
maintainers      toby@opendarwin.org
description      7-Zip implementation
long_description \
	p7zip is a port of 7-Zip, a file archiver with \
	highest compression ratio.
homepage         http://p7zip.sourceforge.net/
platforms        darwin

master_sites     sourceforge
distname         ${name}_${version}_src_all
use_bzip2        yes
checksums        sha1 16ea805087e2699106eda6d4adf0d254303e7395

worksrcdir       ${name}_${version}

configure {
	if {${os.platform} == "darwin"} {
		file copy -force ${worksrcpath}/makefile.macosx ${worksrcpath}/makefile.machine
	}
}

destroot.destdir DEST_BIN=${destroot}${prefix}/bin \
                 DEST_SHARE=${destroot}${prefix}/lib/${name} \
                 DEST_MAN=${destroot}${prefix}/share/man

post-destroot {
	file mkdir ${destroot}${prefix}/share/doc
	file copy ${worksrcpath}/DOCS ${destroot}${prefix}/share/doc/${name}
}
