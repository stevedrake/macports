# $Id$

PortSystem      1.0

name            unrar
version         3.7.8
categories      archivers
platforms       darwin freebsd
maintainers     nox
description     Extract, view & test RAR archives

long_description \
    The unRAR utility is a minor part of the RAR archiver and \
    contains RAR uncompression algorithm. unRAR requires very \
    small volume of memory to operate.

homepage        http://www.rarlab.com/
master_sites    ${homepage}rar/
distname        ${name}src-${version}

checksums       md5 b783f1932bc0c73902c6399f7c2c6f43 \
                sha1 b2146b8021274cd6a0a3b816b2ec6f241c62baea \
                rmd160 0cabdd5f3d0698889dddff56669eafdcb922c327

worksrcdir      ${name}

configure {
    reinplace -E "/^CXXFLAGS/s|\$| [join ${configure.cflags} " "]\\\n\
		LDFLAGS=[join ${configure.ldflags} " "]|" \
        ${worksrcpath}/makefile.unix
}

build.args      -f makefile.unix

destroot {
	set docdir ${prefix}/share/doc/${name}-${version}

	xinstall -d ${destroot}${docdir}
	xinstall ${worksrcpath}/${name} ${destroot}${prefix}/bin
	xinstall -m 0644 ${worksrcpath}/license.txt ${destroot}${docdir}
}

livecheck.check regex
livecheck.url   ${master_sites}?C=M&O=D
livecheck.regex "[strsed ${distname} {/[.0-9]*$//}](\\d+(?:\\.\\d+)*)"

