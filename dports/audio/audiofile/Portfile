# $Id$

PortSystem      1.0

name            audiofile
version         0.3.1
categories      audio
platforms       darwin
maintainers     nomaintainer
# libs under LGPL-2+; tools under GPL-2+
license         GPL-2+ LGPL-2+
description     Library for dealing with SGI audio files

long_description \
    The Silicon Graphics Audio File Library provides a uniform \
    programming interface to standard digital audio file formats.

homepage        http://www.68k.org/~michael/audiofile/
master_sites    ${homepage}

checksums           md5     c206b1947c0c560dfe91df5c581597a7 \
                    sha1    39de137a691a7c12ea5dc468566eb7a146880ac3 \
                    rmd160  26126ae4e095bc9d37b5184853fa545283684d03

depends_build   port:libtool

configure.ccache    no

test.run        yes
test.target     check

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath} ACKNOWLEDGEMENTS AUTHORS COPYING \
        COPYING.GPL ChangeLog NEWS NOTES README TODO ${destroot}${docdir}
}

post-configure {
    # Bundled libtool does not understand -arch for linking
    file delete ${worksrcpath}/libtool
    file link -s ${worksrcpath}/libtool ${prefix}/bin/glibtool
}

livecheck.type  regex
livecheck.regex ${name}-(\[0-9.\]+)\\.tar
