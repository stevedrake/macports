# $Id$

PortSystem      1.0

name            audiofile
epoch           20111023
version         0.3.3
categories      audio
platforms       darwin
maintainers     nomaintainer
# libs under LGPL-2+; tools under GPL-2+
license         GPL-2+ LGPL-2+
description     Library for dealing with SGI audio files

long_description \
    The Silicon Graphics Audio File Library provides a uniform \
    programming interface to standard digital audio file formats.

homepage        http://www.68k.org/~michael/audiofile/
master_sites    ${homepage}

checksums           md5     64c7a03023b4b181d997ff0b272d29e4 \
                    sha1    f7b7f007e5c5c478f9bb3fed3534a105cbd1e884 \
                    rmd160  cab2faf6ae42023616de9be4b59c3fb5e3c6eee7

depends_build   port:libtool

configure.ccache    no

if {${configure.compiler} == "clang"} {
    configure.compiler llvm-gcc-4.2
}

test.run        yes
test.target     check

post-destroot {
    set docdir ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath} ACKNOWLEDGEMENTS AUTHORS COPYING \
        COPYING.GPL ChangeLog NEWS NOTES README TODO ${destroot}${docdir}
}

post-configure {
    # Bundled libtool does not understand -arch for linking
    file delete ${worksrcpath}/libtool
    file link -s ${worksrcpath}/libtool ${prefix}/bin/glibtool
}

livecheck.type  regex
livecheck.regex ${name}-(\[0-9.\]+)\\.tar
