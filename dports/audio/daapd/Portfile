# $Id: Portfile,v 1.2 2005/10/01 17:30:38 yeled Exp $

PortSystem 1.0

name			daapd
version			0.2.4
revision		1
categories		audio net
platforms		darwin
maintainers		yeled@opendarwin.org
description		A DAAP server emulating an iTunes server.
long_description	daapd scans a directory for music files (mp3, aac, \
			uncompressed) and makes them available via the Apple \
			proprietary protocol DAAP. DAAP clients can browse \
			the directory and retrieve individual files, either \
			by streaming or by downloading them.

homepage		http://www.deleet.de/projekte/daap/daapd/
master_sites		http://www.deleet.de/projekte/daap/daapd/
extract.suffix		.tgz
checksums		md5 f52df2e6bc4c8b85a38f0cfd2e3c97c2
patchfiles		patch-makefile patch-daapd.cc patch-daapd.8

depends_lib		lib:libz:zlib \
			lib:libid3tag:libid3tag \
			lib:libhowl:howl

post-patch {
	reinplace s|@PREFIX@|${prefix}|g	${worksrcpath}/daapd.cc \
						${worksrcpath}/makefile \
						${worksrcpath}/daapd.8
}

destroot {
	xinstall -m 755 ${worksrcpath}/daapd ${destroot}/${prefix}/sbin/
	xinstall -m 644 ${worksrcpath}/daapd.conf ${destroot}/${prefix}/etc/daapd.conf.dist
	xinstall -m 644 ${worksrcpath}/daapd.8 ${destroot}/${prefix}/share/man/man8/
}

configure {}
