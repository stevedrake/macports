# $Id: Portfile,v 1.14 2005/01/26 04:45:35 rshaw Exp $

PortSystem 1.0
name		libmikmod
version		3.1.11a
categories	audio
maintainers	mij@opendarwin.org
description	portable sound library
platforms	darwin

long_description libmikmod is a portable sound library for Unix systems. \
		 It can play IT, XM, S3M, MTM, 669, STM, ULT, FAR, MED, \
		 AMF, DSM, IMF, GDM, STX, OKT, and MOD module formats.

homepage	http://mikmod.raphnet.net/

master_sites	http://mikmod.raphnet.net/files/

distname		${name}-[strsed ${version} {s/a$//}]
distfiles-append	${name}-[strsed ${version} {s/a$/-a/}].diff
extract.only	${distname}${extract.suffix}

checksums	${name}-[strsed ${version} {s/a$//}].tar.gz md5 705106da305e8de191549f1e7393185c \
			${name}-[strsed ${version} {s/a$/-a/}].diff md5 5e56be5a32eecf3cfa195379a5ecb0ef

depends_lib	lib:libesd.0:esound

post-patch {
	set patchfile "${distpath}/${name}-[strsed ${version} {s/a$/-a/}].diff"
	ui_info "$UI_PREFIX Applying ${patchfile}"
	system "cd ${workpath} && patch -p0 < ${patchfile}"
}

configure.env	CFLAGS="-no-cpp-precomp -Os"
configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info

platform darwin {
	patchfiles-append	patch-configure
}

