# $Id: Portfile,v 1.9 2005/02/02 09:04:40 toby Exp $

PortSystem 1.0
name             libopendaap
version          0.3.0
revision         3
categories       audio
maintainers      toby@opendarwin.org
description      library for connecting to iTunes shares
long_description \
	libopendaap is a library written in C which enables applications to \
	discover, and connect to, iTunes(R) music shares. Unlike all other \
	daap implementations, this library is able to connect to recent \
	iTunes shares which require a special authentication algorithm.
homepage         http://craz.net/programs/itunes/libopendaap.html
platforms        darwin
master_sites     http://craz.net/programs/itunes/files/
use_bzip2        yes
checksums        md5 a722ee6171f946a1f415d7c4d88f150a

configure.args   --mandir=${prefix}/share/man

patchfiles       patch-http_client.c
post-patch {
	reinplace "s|shrext_cmds|shrext|g" ${worksrcpath}/configure
}

post-destroot {
	reinplace "s|#include \"config.h\"||" \
		${destroot}${prefix}/include/daap/portability.h
	reinplace "s|#include \"portability.h\"|#include <daap/portability.h>|" \
		${destroot}${prefix}/include/daap/client.h
}
