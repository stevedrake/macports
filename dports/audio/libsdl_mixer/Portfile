# $Id: Portfile,v 1.12 2006/02/26 17:24:09 ben Exp $

PortSystem 1.0
name				libsdl_mixer
version				1.2.6
revision			4
categories			audio devel
maintainers			blb@opendarwin.org ben@opendarwin.org
description			Audio mixer library for SDL
long_description \
	A sample multi-channel audio mixer library.  It supports any number of \
	simultaneously playing channels of 16 bit stereo audio, plus a single \
	channel of music.

platforms		macosx
homepage		http://www.libsdl.org/projects/SDL_mixer/
master_sites		${homepage}release/
distname		SDL_mixer-${version}

checksums		md5 2b8beffad9179d80e598c22c80efb135

depends_lib		port:libsdl port:smpeg port:libvorbis port:libogg port:libmikmod

variant macosx i386 {
	patchfiles	native_midi_mac.c.patch
}

configure.env		CPPFLAGS="-no-cpp-precomp -I${prefix}/include" \
					LDFLAGS="-L${prefix}/lib"
configure.args		--with-sdl-prefix=${prefix} --disable-sdltest \
		--enable-music-mp3 --with-smpeg-prefix=${prefix} --enable-music-ogg \
		--enable-music-libmikmod

post-destroot	{
	xinstall -m 0755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 0644 -W ${worksrcpath} CHANGES COPYING README \
		${destroot}${prefix}/share/doc/${name}
}

platform darwin 6 {
	depends_lib-append	lib:libdl:dlcompat
}

