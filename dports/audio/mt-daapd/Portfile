# $Id: Portfile,v 1.1 2004/10/27 08:57:45 mww Exp $

PortSystem 1.0

name			mt-daapd
version			0.2.0
categories		audio net
platforms		darwin
maintainers		mww@opendarwin.org
description		A multi-threaded DAAP server emulating an iTunes server.
long_description	${description}

homepage		http://mt-daapd.sourceforge.net/
master_sites	sourceforge
checksums		md5 62465e98dd93cd3553b329298d13399d
patchfiles		patch-mt-daapd.conf

depends_lib		lib:libz:zlib \
				lib:libgdbm:gdbm \
				lib:libid3tag:libid3tag

configure.env	CFLAGS="-I${prefix}/include" \
				CPPFLAGS="-I${prefix}/include" \
				LDFLAGS="-L${prefix}/lib"
post-configure	{
	reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/contrib/mt-daapd.conf
}

post-destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/var/db/mt-daapd/ \
		${destroot}${prefix}/var/log
	xinstall -m 644 ${worksrcpath}/contrib/mt-daapd.conf \
		${destroot}${prefix}/etc/mt-daapd.conf.sample
	xinstall -m 644 ${worksrcpath}/contrib/mt-daapd.playlist \
		${destroot}${prefix}/etc/mt-daapd.playlist.sample
	system "touch ${destroot}${prefix}/var/db/mt-daapd/.turd"
	system "touch ${destroot}${prefix}/var/log/mt-daapd.log"
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING CREDITS ChangeLog \
		INSTALL NEWS README TODO ${destroot}${prefix}/share/doc/${name}
}
