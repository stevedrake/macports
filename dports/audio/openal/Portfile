# $Id: Portfile,v 1.5 2006/02/01 11:49:30 mww Exp $

PortSystem 1.0

name			openal
version			20060131
categories		audio devel
platforms		darwin
maintainers		mww@opendarwin.org
description		OpenAL is a cross-platform 3D audio API
long_description	OpenAL is a cross-platform 3D audio API appropriate for \
					use with gaming applications and many other types of audio \
					applications. 

homepage		http://www.openal.org/
fetch.type		cvs
cvs.root		:pserver:guest@opensource.creative.com:/usr/local/cvs-repository
cvs.password	guest
cvs.args		-D"${version}"
cvs.module		${name}/macosx

worksrcdir		openal/macosx

use_configure	no

build.type		pbx
build.target
build.args		-project al_osx.xcode
post-build	{
	file copy ${filespath}/Makefile ${worksrcpath}
	system "cd ${worksrcpath} && make all PREFIX=${prefix}"
}

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/include/openal
	xinstall -m 644 -W ${worksrcpath}/al al.h alc.h alctypes.h altypes.h \
		alut.h ${destroot}${prefix}/include/openal
	xinstall -m 644 ${worksrcpath}/libopenal1.0.0.dylib \
		${destroot}${prefix}/lib
	system "cd ${destroot}${prefix}/lib \
		&& ln -s libopenal1.0.0.dylib libopenal1.0.dylib \
		&& ln -s libopenal1.0.0.dylib libopenal1.dylib \
		&& ln -s libopenal1.0.0.dylib libopenal.dylib"
}

