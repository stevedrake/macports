# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0
PortGroup xcode 1.0

name            portmidi
version         200
categories      audio devel
maintainers     nomaintainer
homepage        http://portmedia.sourceforge.net/portmidi/

description     Free, cross platform, open-source, real-time MIDI I/O library.
long_description ${description}

master_sites    sourceforge:portmedia
distname        ${name}-src-${version}
use_zip         yes

checksums       md5 26053a105d938395227bb6ae1d78643b \
                sha1 dcd979881a3b16518d33999e529004d7a647c2db \
                rmd160 3f7ab6d173ef860e576eb39cee7b9b17405e1f26

worksrcdir      ${name}

patchfiles      project.pbxproj.diff
post-patch {
    reinplace "s|__DEVELOPER_DIR__|${developer_dir}|g" \
              ${worksrcpath}/portmidi.xcodeproj/project.pbxproj
}

xcode.configuration Release
xcode.destroot.path ${prefix}/lib

post-destroot {
    xinstall -c -m 644 ${worksrcpath}/pm_common/portmidi.h \
                       ${worksrcpath}/porttime/porttime.h \
                       ${destroot}${prefix}/include
    xinstall -c -d  ${destroot}${prefix}/share/doc/${name}
    xinstall -c -m 644 -W ${worksrcpath} \
        README.txt license.txt pm_mac/README_MAC.txt \
            ${destroot}${prefix}/share/doc/${name}
}
