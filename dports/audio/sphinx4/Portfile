# $Id$

PortSystem 1.0
name		    sphinx4
version		    1.0beta4
description	    Speech recognition package
long_description \
                ${description}
maintainers	    singingwolfboy openmaintainer
categories	    audio java
platforms	    darwin freebsd
homepage	    http://cmusphinx.sourceforge.net/sphinx4/
distname        ${name}-${version}-src
worksrcdir      ${name}-${version}
master_sites    sourceforge:cmusphinx
use_zip         yes
checksums       md5     2721534459c674f9cc27816cd1cc113c \
                sha1    ec2115c6cbe4ae5dc6d3717bee9cc4e3ad18ba3f \
                rmd160  a8d6d81a139fb174f54f1328972281006850e1e2
patchfiles      jsapi.sh.diff
pre-build       { system "cd ${worksrcpath}/lib; echo y | sh jsapi.sh"}

build.cmd       ant
use_configure   no
depends_lib     bin:java:kaffe
depends_build   bin:ant:apache-ant

destroot    {
    # make sure directories exist
    xinstall -m 755 -d \
        ${destroot}${prefix}/share/java \
        ${destroot}${prefix}/share/doc
    # move in docs
    file rename ${worksrcpath}/doc ${destroot}${prefix}/share/doc/${worksrcdir}
    # delete useless "doc-files"
    file delete -force ${worksrcpath}/doc-files 
    # copy in the rest
    file copy ${worksrcpath} ${destroot}${prefix}/share/java/${name}
}
