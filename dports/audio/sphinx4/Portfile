# $Id$

PortSystem 1.0
name		    sphinx4
version		    1.0beta3
description	    Speech recognition package
long_description \
                ${description}
maintainers	    singingwolfboy openmaintainer
categories	    audio
platforms	    darwin freebsd
homepage	    http://cmusphinx.sourceforge.net/sphinx4/
distname        ${name}-${version}-src
worksrcdir      ${name}-${version}
master_sites    sourceforge:cmusphinx
use_zip         yes
checksums       md5     37128ad8a5d2d39908662b6228ad4fd7 \
                sha1    89295ed8934967c1aafbbd61d19491412cde1a9e \
                rmd160  91b4f36c550ad1b39c6bed6398e7067e5b8d2e5f
patchfiles      jsapi.sh.diff
pre-build       { system "cd ${worksrcpath}/lib; echo y | sh jsapi.sh"}

build.cmd       ant
use_configure   no
depends_lib     bin:java:kaffe
depends_build   bin:ant:apache-ant

destroot    {
    # make sure directories exist
    xinstall -m 755 -d \
        ${destroot}${prefix}/share/java \
        ${destroot}${prefix}/share/doc
    # move in docs
    file rename ${worksrcpath}/doc ${destroot}${prefix}/share/doc/${worksrcdir}
    # delete useless "doc-files"
    file delete -force ${worksrcpath}/doc-files 
    # copy in the rest
    file copy ${worksrcpath} ${destroot}${prefix}/share/java/${name}
}
