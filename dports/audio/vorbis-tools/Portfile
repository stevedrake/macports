# $Id$

PortSystem       1.0

name             vorbis-tools
version          1.1.1
revision         3
categories       audio
platforms        darwin
maintainers      ram openmaintainer

description      The Ogg Vorbis CODEC tools
long_description \
    Ogg Vorbis is a fully Open, non-proprietary, patent-and-royalty-free, \
    general-purpose compressed audio format for mid to high quality \
    (8kHz-48.0kHz, 16+ bit, polyphonic) audio and music at fixed and \
    variable bitrates from 16 to 128 kbps/channel. This places Vorbis in \
    the same competetive class as audio representations such as MPEG-4 \
    (AAC), and similar to, but higher performance than MPEG-1/2 audio \
    layer 3, MPEG-4 audio (TwinVQ), WMA and PAC.

homepage         http://www.xiph.org/ogg/vorbis/
master_sites     http://downloads.xiph.org/releases/vorbis/

checksums        md5 47845fd76f5f2354a3619c4097575487 \
                 sha1 a1394b39905b389d72f12c2a9f0c86a33d07a487 \
                 rmd160 ed38929b8a81f833f726e489e55e9f62d5ed69ec

# Patches from the Debian vorbis-tools package (version 1.1.1-6) and
# a patch to be able to compile vorbis-tools against the latest curl
# version in MacPorts (7.16.0) [upstream bug #1097].
patchfiles       patch-debian.diff patch-http_transport.c.diff
patch.pre_args   -p1

depends_lib      port:libogg \
                 port:libvorbis \
                 port:curl

configure.cppflags-append "-no-cpp-precomp"
configure.args   --mandir=${prefix}/share/man \
                 --without-ao \
                 --disable-ogg123 \
                 --without-flac \
                 --without-speex \
                 --enable-vcut

variant player description "Build ogg123" {
  depends_lib-append    port:libao
  configure.args-delete --without-ao --disable-ogg123
  configure.args-append --with-ao --enable-ogg123
}

variant flac description "Enable FLAC support" {
  depends_lib-append    port:flac
  configure.args-delete --without-flac
  configure.args-append --with-flac
}

variant speex description "Enable Speex support" {
  depends_lib-append    port:speex
  configure.args-delete --without-speex
  configure.args-append --with-speex
}

post-destroot {
  file delete -force ${destroot}${prefix}/share/locale/locale.alias
  file delete -force ${destroot}${prefix}/lib/charset.alias
}
