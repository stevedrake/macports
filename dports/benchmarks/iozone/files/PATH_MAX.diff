--- fileop.c.orig	2009-01-13 07:49:04.000000000 +1100
+++ fileop.c	2009-01-15 04:08:45.000000000 +1100
@@ -52,6 +52,9 @@
 #include <unistd.h>
 #include <dirent.h>
 #include <string.h>
+#if defined(macosx)
+#include <limits.h>
+#endif
 #if defined(Windows)
 #include <Windows.h>
 #endif
--- makefile.orig	2009-01-13 07:49:04.000000000 +1100
+++ makefile	2009-01-15 04:31:14.000000000 +1100
@@ -779,7 +779,7 @@
 	@echo ""
 	@echo "Building fileop for MAC OS X"
 	@echo ""
-	$(CC) -Wall -c -O $(CFLAGS) fileop.c -o fileop_macosx.o
+	$(CC) -Wall -c -O -Dmacosx $(CFLAGS) fileop.c -o fileop_macosx.o
 
 fileop_linux-ia64.o:	fileop.c
 	@echo ""
