# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=portfile:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               crossgcc 1.0

name                    avr-gcc
crossgcc.setup          avr 4.6.3

maintainers             g5pw
license                 {GPL-3+ Permissive}

distfiles               gcc-${version}.tar.bz2
extract.only            ${distfiles}

checksums               rmd160  9abb2f940d08fc84f2d91b6a6ce8d662ca889269 \
                        sha256  e8f5853d4eec2f5ebaf8a72ae4d53c436aacf98153b2499f8635b48c4718a093

# Download everything to gcc/
dist_subdir             gcc


patchfiles-append       patch-lto-plugin-osx.diff

configure.args-delete   --enable-languages="c,objc,c++,obj-c++"

configure.args-append   --with-included-gettext                \
                        --enable-obsolete                      \
                        --enable-lto                           \
                        --disable-libquadmath                  \
                        --enable-languages="c,c++"

if {$build_arch != "" && ${os.platform} == "darwin"} {
    configure.args-append --build=${build_arch}-apple-darwin${os.major} \
                          --host=${build_arch}-apple-darwin${os.major}
}
