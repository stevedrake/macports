# $Id$

PortSystem 1.0
name			avr-gdb
version			6.3
categories		cross
maintainers		mmoll@cs.rice.edu
description		GDB for the AVR processors
long_description	avr-gdb is a version of the GNU Debugger that \
			through the avarice program can be used to debug \
			code for the AVR processors.
homepage		http://www.gnu.org/software/gdb/gdb.html
master_sites		http://ftp.gnu.org/gnu/gdb/ \
			ftp://mirrors.usc.edu/pub/gnu/gdb \
			ftp://ftp.mcc.ac.uk/pub/gnu/gdb 
distfiles		gdb-${version}.tar.bz2
worksrcdir		gdb-${version}
use_bzip2		yes
checksums		md5 05b928f41fa5b482e49ca2c24762a0ae
depends_run		bin:avarice:avarice

# This actually breaks the build process
#configure.env		CFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
# without --disable-nls the build process also breaks
configure.args		--mandir=${prefix}/share/man --target=avr --disable-nls

post-destroot {
        # Installing (host) libiberty was a mistake.
        file delete "${destroot}/${prefix}/lib/libiberty.a"
}
