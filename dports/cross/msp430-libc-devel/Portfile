# -*- coding: utf-8; mode: portfile; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=portfile:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0

name                    msp430-libc-devel
set name_package        [join [lrange [split ${name} -] 0 1] -]
set name_target         [lindex [split ${name_package} -] 0]
version                 20120125

conflicts               ${name_package}

distname                ${name_package}-${version}

categories              cross
maintainers             g5pw
supported_archs         noarch
license                 GPL-3+

description             C library for the MSP430 series microcontrollers. This is the development version.
long_description        MSP430 Libc is a Free Software project whose goal is \
                        to provide a high quality C library for use with \
                        GCC on TI MSP430 microcontrollers. This is the development version.
platforms               darwin
homepage                http://mspgcc.sourceforge.net/
master_sites            http://downloads.sourceforge.net/project/mspgcc/${name_package}/


depends_lib             port:msp430mcu-devel
depends_build           port:gettext port:msp430-gcc-devel


# installs deliberately files outside regular tree:
destroot.violate_mtree  yes

use_bzip2               yes

checksums               ${name_package}-${version}${extract.suffix} \
                        rmd160  2f530c78a43c4b5ea23345b9a6d886de1dc2b62a \
                        sha256  ebf98c27940360708d0f02481f01b6295e2a2ffe2b341e9db13e41ac2c2d177e
use_configure           no

build.dir               ${worksrcpath}/src

destroot.env            PREFIX=${destroot}${prefix}

post-destroot {
    file delete ${destroot}${prefix}bin/msp430-addr2line
}

livecheck.type          regex
livecheck.url           http://sourceforge.net/projects/mspgcc/files/${name_package}/
livecheck.regex         "${name_package}-((?!.*${name_package}.*|\\${extract.suffix}).*)\\${extract.suffix}"
