# $Id$

PortSystem 1.0

name                couchdb
version             0.7.2
categories          databases
platforms           darwin
description         couchdb is a document database server
maintainers         jwa
long_description    ${description}
homepage            http://couchdb.org/
master_sites        http://couchdb.googlecode.com/files/
checksums           md5 0366a6566d934790ed0e5bf5a834ebe5 \
    sha1 9ddd69fbebe45260600c0ef224d83e928e58b80b \
    rmd160 e3e1f46788816583675745efb2a3d513fa970e2c

depends_lib	port:automake \
    port:autoconf \
    port:libtool \
    port:help2man \
    port:icu \
    port:erlang

platform darwin 8 {
    configure.compiler	gcc-4.0
}

variant server {
    set logdir ${prefix}/var/log
    startupitem.create	yes
    startupitem.type	launchd
    startupitem.name	CouchDB
    startupitem.start	"${prefix}/bin/couchdb -b -o ${logdir}/couchdb.stdout -e ${logdir}/couchdb.stderr"
    startupitem.stop	"${prefix}/bin/couchdb -d"
}

livecheck.check	regex
livecheck.url	http://code.google.com/p/couchdb/downloads/list
livecheck.regex	CouchDB (0.\[0-9\].\[0-9\])
