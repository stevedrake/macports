# $Id: Portfile,v 1.1 2004/05/08 11:21:56 mww Exp $

PortSystem 1.0

name		pqa
version		0.8
categories	databases
platforms	darwin
maintainers	mww@opendarwin.org
description	pqa is a PostgreSQL SQL analysis tool
long_description	${description}

homepage	http://pqa.projects.postgresql.org/
master_sites	http://pgfoundry.org/download.php/7/
checksums	md5 7cb19164cd10ce4e547d0a2bf86c81ac
use_zip		yes

depends_lib	bin:ruby:ruby

configure	{
	reinplace "s|/usr/local/bin/ruby|${prefix}/bin/ruby|g" \
		${worksrcpath}/pqa.rb ${worksrcpath}/test_pqa.rb
}

build		{}

test.run	yes
test.cmd	./test_pqa.rb
test.target

destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples
	xinstall -m 755 ${worksrcpath}/pqa.rb ${destroot}${prefix}/bin/pqa
	xinstall -m 644 -W ${worksrcpath} CHANGELOG LICENSE README \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} pglog_sample.log syslog_sample.log \
		${destroot}${prefix}/share/doc/${name}/examples
}
