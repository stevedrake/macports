# $Id: Portfile,v 1.7 2005/11/05 20:23:31 mww Exp $

PortSystem 1.0

name		pqa
version		1.5
categories	databases
platforms	darwin
maintainers	mww@opendarwin.org
description	pqa is a PostgreSQL SQL analysis tool
long_description	PostgreSQL Query Analyzer produces HTML reports on the \
			most frequent queries, slowest queries, queries by \
			type select/insert/update/delete), and more.

homepage	http://pqa.projects.postgresql.org/
master_sites	http://pgfoundry.org/frs/download.php/155/
checksums	md5 1e1429994a5b46df6558d241422cfc50
use_zip		yes

depends_lib	port:ruby

configure	{
	reinplace "s|/usr/local/bin/ruby|/usr/bin/env ruby|g" \
		${worksrcpath}/pqa.rb \
		${worksrcpath}/test_pqa.rb
}

build		{}

test.run	yes
test.cmd	ruby
test.target	test_pqa.rb

destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples
	xinstall -m 755 ${worksrcpath}/pqa.rb ${destroot}${prefix}/bin/pqa
	xinstall -m 644 -W ${worksrcpath} CHANGELOG LICENSE README \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} pglog_sample.log syslog_sample.log \
		${destroot}${prefix}/share/doc/${name}/examples
}
