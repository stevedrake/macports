# $Id: Portfile,v 1.6 2004/07/28 17:52:17 mww Exp $

PortSystem 1.0

name		pqa
version		1.4
categories	databases
platforms	darwin
maintainers	mww@opendarwin.org
description	pqa is a PostgreSQL SQL analysis tool
long_description	PostgreSQL Query Analyzer produces HTML reports on the \
			most frequent queries, slowest queries, queries by \
			type select/insert/update/delete), and more.

homepage	http://pqa.projects.postgresql.org/
master_sites	http://pgfoundry.org/download.php/52/pqa-1.4.zip
checksums	md5 c06cca1cb63811733d860e5041f2f0b2
use_zip		yes

depends_lib	bin:ruby:ruby

configure	{
	reinplace "s|/usr/local/bin/ruby|${prefix}/bin/ruby|g" \
		${worksrcpath}/pqa.rb \
		${worksrcpath}/test_pqa.rb
}

build		{}

test.run	yes
test.cmd	${prefix}/bin/ruby
test.target	test_pqa.rb

destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples
	xinstall -m 755 ${worksrcpath}/pqa.rb ${destroot}${prefix}/bin/pqa
	xinstall -m 644 -W ${worksrcpath} CHANGELOG LICENSE README \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} pglog_sample.log syslog_sample.log \
		${destroot}${prefix}/share/doc/${name}/examples
}
