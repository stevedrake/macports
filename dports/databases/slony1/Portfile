# $Id$

PortSystem        1.0
name              slony1
version           1.2.10
categories        databases
platforms         darwin
maintainers       wreese@gmail.com jwa
description       A replication system for PostgreSQL
long_description  Slony-I is a trigger-based master to multiple slaves replication system for PostgreSQL being developed by Jan Wieck.
homepage          http://main.slony.info/
master_sites      ${homepage}/downloads/1.2/source
use_bzip2         yes
checksums	  sha1 1fef4cdd9440c5f1078fb815511970c854e51d6a
depends_lib	  port:postgresql82

configure.args	  --with-pgconfigdir="${prefix}/lib/postgresql82/bin/" \
    --with-pgsharedir="${prefix}/share/postgresql82/" \
    --with-pgbindir="${prefix}/lib/postgresql82/bin/" \
    --with-pgincludedir="${prefix}/include/postgresql82/" \
    --with-pgincludeserverdir="${prefix}/include/postgresql82/server/" \
    --with-pglibdir="${prefix}/lib/postgresql82/" \
    --with-pgpkglibdir="${prefix}/lib/postgresql82/" \
    --prefix="${destroot}${prefix}"

destroot.args     -B
post-destroot {
    foreach bin { slon slonik } {
#	system "cd ${destroot}${prefix}/bin && ln -s ../lib/postgresql82/bin/${bin}"
	ln -s ${destroot}${prefix}/lib/postgresql82/bin/${bin} ${destroot}${prefix}/bin
    }
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	RELEASE (1.2.\[0-9\]+)
