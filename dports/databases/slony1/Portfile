# $Id: Portfile,v 1.1 2006/04/16 09:36:30 mww Exp $

PortSystem        1.0
name              slony1
version           1.1.5
categories        databases
platforms         darwin
maintainers       wreese@gmail.com
description       A replication system for PostgreSQL
long_description  Slony-I is a trigger-based master to multiple slaves replication system for PostgreSQL being developed by Jan Wieck.
homepage          http://gborg.postgresql.org/project/slony1/projdisplay.php
master_sites      http://developer.postgresql.org/~wieck/slony1/download/
use_bzip2         yes
checksums	  md5 d3ffff50323f1413b9b81084f906f9f8
depends_lib	  port:postgresql8

configure.args	  --with-pgconfigdir="${prefix}/lib/pgsql8/bin/" \
		  --with-pgsharedir="${prefix}/share/postgresql8/" \
		  --with-pgbindir="${prefix}/lib/pgsql8/bin/" \
		  --with-pgincludedir="${prefix}/include/pgsql8/" \
		  --with-pgincludeserverdir="${prefix}/include/pgsql8/server/" \
		  --with-pglibdir="${prefix}/lib/pgsql8/" \
		  --with-pgpkglibdir="${prefix}/lib/pgsql8/" \
		  --prefix="${destroot}${prefix}"

destroot.args     -B
post-destroot {
	foreach bin { slon slonik } {
		system "cd ${destroot}${prefix}/bin && ln -s ../lib/pgsql8/bin/${bin}"
	}
}
