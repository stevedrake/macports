# $Id$

PortSystem 1.0

name			sqlite3
version			3.7.7
categories		databases
platforms		darwin
license			public-domain
maintainers		mww openmaintainer
description		an embedded SQL database engine
long_description	SQLite3 is an SQL database engine in a C library. \
				Programs that link the SQLite3 library can have SQL \
				database access without running a separate RDBMS \
				process. The distribution comes with a standalone \
				command-line access program (sqlite3) that can be used \
				to administer an SQLite3 database and which serves as \
				an example of how to use the SQLite3 library.

homepage		http://www.sqlite.org/
master_sites	${homepage}
distname		sqlite-autoconf-3070700
checksums           md5     a98df57053adf4c132b6b7ab59e9f333 \
                    sha1    f9b16cb62dac99119c5651bccecfe97761f66c20 \
                    rmd160  6fa540ec8e1f395dd9e2bc0254e72c6c139e329f

depends_lib		port:readline \
				port:ncurses

patchfiles      configure.patch

configure.args	--enable-threadsafe \
			--enable-dynamic-extensions \
			--enable-readline
# search in worksrcpath for sqlite3.h first -- dont pick up an installed one!
configure.cppflags	"-DSQLITE_ENABLE_COLUMN_METADATA=1 -DSQLITE_ENABLE_FTS3=1 -DSQLITE_ENABLE_RTREE=1 -DSQLITE_SECURE_DELETE=1 -DSQLITE_ENABLE_UNLOCK_NOTIFY=1 -I${worksrcpath} -I${prefix}/include"

build.type		gnu

livecheck.type	regex
livecheck.url	http://www.sqlite.org/news.html
livecheck.regex	(3\\.\[0-9\]+\\.\[0-9\]+)

post-destroot {
	xinstall -m 644 ${worksrcpath}/${name}.1 ${destroot}${prefix}/share/man/man1
}

platform darwin 8 {
    configure.cppflags-append -DSQLITE_ENABLE_LOCKING_STYLE=0
}
