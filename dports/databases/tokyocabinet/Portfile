# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            tokyocabinet
version         1.4.36
categories      databases
maintainers     nomaintainer
platforms       darwin
description     Tokyo Cabinet is a library of routines for managing a database.
long_description \
    Tokyo Cabinet is a library of routines for managing a database. The database\
    is a simple data file containing records, each is a pair of a key and a value.\
    Every key and value is serial bytes with variable length. Both binary data and\
    character string can be used as a key and a value. There is neither concept of\
    data tables nor data types. Records are organized in hash table or B+ tree.
homepage        http://1978th.net/tokyocabinet/
master_sites    ${homepage}

checksums       md5     2929dc7b457eda35213b4c36d8734d1a \
                sha1    b376b136121292b49b25139b2e005fa635d2119f \
                rmd160  eb8c2f436d89430aea9288b9ce9a768a720c6799

depends_lib     port:zlib

# To avoid linking against a previously installed version, remove the default
# CPPFLAGS and LDFLAGS. The build scripts already add the
# destination include and lib directories.
configure.cppflags
configure.ldflags

configure.args  --mandir=${prefix}/share/man \
                --datadir=${prefix}/share/doc

test.run yes
test.target check

variant debug conflicts devel profile fastest description {build for debugging} {
    configure.args-append   --enable-debug
}

variant devel conflicts debug profile fastest description {build for development} {
    configure.args-append   --enable-devel
}

variant profile conflicts debug devel fastest description {build for profiling} {
    configure.args-append   --enable-profile
}

variant fastest conflicts debug devel profile description {build for fastest run} {
    configure.args-append   --enable-fastest
}

variant off64 description {build with 64-bit file offset on 32-bit system} {
    configure.args-append   --enable-off64
}

variant swap description {build for swapping byte-orders} {
    configure.args-append   --enable-swap
}

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     "Latest Source Package \\(version (\\d+(?:\\.\\d+)*)\\)"
