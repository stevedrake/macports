# $Id: Portfile,v 1.1 2004/10/25 20:46:36 olegb Exp $
PortSystem 1.0
name		allegro
version		4.1.15
description	A game programming library for C/C++ developers.
long_description	Allegro is a game programming library for \
			C/C++ developers distributed freely, supporting \
			many platforms.
maintainers	olegb@opendarwin.org
categories	devel games
platforms	darwin 
homepage	http://www.talula.demon.co.uk/allegro/
master_sites    sourceforge:alleg
checksums	md5 e125d7665d359f2392b6330c741bdbc6
depends_lib	lib:libX11:XFree86
use_configure	no
pre-configure	{ 
	system "cd ${worksrcpath} && chmod +x fix.sh && ./fix.sh macosx" 

	reinplace "s|INSTALLDIR = /usr/local|INSTALLDIR = ${destroot}${prefix}|g" \
		${worksrcpath}/makefile.osx
	reinplace "s|MAN_DIR = /usr/local/man|MAN_DIR = ${destroot}${prefix}/share/man|g" \
		${worksrcpath}/makefile.osx
}
build.target	{}
post-destroot	{ 
	system "cd ${worksrcpath} && make install-man" 
	file delete ${destroot}${prefix}/share/man/man3/RGB_MAP.3
	file delete ${destroot}${prefix}/share/man/man3/FONT.3
	file delete ${destroot}${prefix}/share/man/man3/COLOR_MAP.3
}
