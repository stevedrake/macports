# $Id: Portfile,v 1.16 2004/08/09 16:33:56 mww Exp $

PortSystem 1.0
name		apache-ant
version		1.6.2
categories	devel java
maintainers	sean@fuzzymagic.com
description	Java opensource build system
long_description	Ant is a Java based build tool. In theory it is kind of like \
			make without make's wrinkles. Ant uses XML build files that defines \
			a set of targets. Each target has dependencies (other targets) and \
			contains a set of tasks to perform.
homepage        http://ant.apache.org/

platforms	darwin freebsd
master_sites    apache:ant/source
checksums	md5 83c3adefdbf90bcbc4b804d4c55c0778
distname 	${name}-${version}-src
use_bzip2	yes

worksrcdir 	${name}-${version}

use_configure	no

build.cmd 	./build.sh
build.args 	-Dchmod.fail=false -Ddist.name=${name}
build.target	dist

variant darwin {
    extract.post_args	| gnutar -x 
    build.env		JAVA_HOME=/Library/Java/Home
}

pre-destroot {
	cd ${worksrcpath}/${name}/bin
	file delete ant.bat ant.cmd antRun.bat antenv.cmd \
		envset.cmd lcp.bat runrc.cmd
}
destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/java
	file copy ${worksrcpath}/${name} ${destroot}${prefix}/share/java/
	system "ln -fs ${prefix}/share/java/${name}/bin/ant \
		${destroot}${prefix}/bin/ant"
}
