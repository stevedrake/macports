# $Id: Portfile,v 1.30 2006/05/14 18:49:11 dluke Exp $

PortSystem 1.0
name		apr-util
version		1.2.7
categories	devel
maintainers	dluke@geeklair.net
description	utilities built with the apache group's portability library

long_description	apr-util is a library of useful utilities built with \
			and intended to be used with the Apache Portable Runtime.

homepage	http://apr.apache.org/
master_sites	apache:apr
use_bzip2	yes
checksums	md5 a4c527f08ae2298e62a88472291bf066

depends_lib	lib:libapr-1:apr port:expat \
		port:libiconv port:db4

configure.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.args	--with-apr=${prefix}/bin/apr-1-config --with-expat=${prefix} \
		--with-iconv=${prefix} --with-berkeley-db=${prefix} \
		--without-mysql --without-pgsql

test.run	yes
test.target	check
test.env	DYLD_LIBRARY_PATH=${worksrcpath}/.libs

variant no_bdb	{
			depends_lib-delete port:db4
			configure.args-delete --with-berkeley-db=${prefix}
			configure.args-append --without-berkeley-db
		}

variant no_sqlite	{
				configure.args-append --without-sqlite2 \
					--without-sqlite3
			}

variant openldap	{
				depends_lib-append port:openldap
				configure.args-append --with-ldap \
					--with-ldap-include=${prefix}/include \
					--with-ldap-lib=${prefix}/lib
			}
