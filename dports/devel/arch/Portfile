# $Id: Portfile,v 1.6 2005/04/06 14:56:42 toby Exp $

PortSystem 1.0
name             arch
version          1.3.1-fix-1
distname         tla-${version}
categories       devel
maintainers      toby@opendarwin.org
description      GNU arch - revision control system
long_description \
	GNU arch is a revision control system, similar in purpose to \
	tools such as CVS, SCCS, and Subversion. It is used to keep \
	track of the changes made to a source tree and to help \
	programmers combine and otherwise manipulate changes made by \
	multiple people or at different times.
homepage         http://www.gnu.org/software/gnu-arch/
platforms        darwin

master_sites     gnu:gnu-arch
checksums        md5 bab3b300176c5d038e190602eac40e86

patchfiles       patch-src__hackerlab__vu__vu-virtual-null.h

configure.dir    ${worksrcpath}/src/=build
build.dir        ${configure.dir}

pre-configure {
	file mkdir ${configure.dir}
}
configure.cmd    ../configure
configure.args   --destdir=${destroot}

test.run         yes

destroot.destdir

variant darwin {
	if {${os.version} < 8} {
		depends_lib           bin:gdiff:diffutils
		configure.args-append --with-gnu-diff=${prefix}/bin/gdiff \
		                      --with-gnu-diff3=${prefix}/bin/gdiff3
	}
}
