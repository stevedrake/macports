# $Id$

PortSystem          1.0

name                automoc
version             0.9.84
revision            1
categories          devel kde kde4
maintainers         illogic-al@macports.org openmaintainer
description         KDE's automoc4 utility
long_description    Complete and utter black magic necessary for building KDE.
platforms           darwin
homepage            http://www.kde.org
master_sites        http://ftp.kde.org/unstable/${name}/${version}/
distname            ${name}-${version}
distfiles           ${distname}.tar.bz2
checksums           md5 6e1167594b8edd0fd2156aad75b4b2b0

depends_build       port:cmake

use_parallel_build  yes
worksrcdir          build
pre-configure       { file mkdir ${worksrcpath} }

configure.cmd	    cmake
configure.ccache    no
configure.args      ../${distname} -DBUILD_SHARED_LIBS=ON \
		-DCMAKE_VERBOSE_MAKEFILE=ON \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SYSTEM_PREFIX_PATH=\"${prefix}\;/usr\" \
		-DCMAKE_INSTALL_PREFIX=${prefix} \
		-DCMAKE_OSX_SYSROOT=${sysroot} \
		-Wno-dev

variant universal description "Compile for ppc and intel architectures" {
    configure.universal_args-delete  --disable-dependency-tracking
    configure.args-append	-DCMAKE_OSX_ARCHITECTURES=\"ppc\;i386\"
}

