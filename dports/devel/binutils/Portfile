# $Id: Portfile,v 1.2 2005/01/09 10:11:06 pguyot Exp $

PortSystem			1.0
name				binutils
version				2.15
revision			1

description			FSF Binutils for native development.
long_description	Free Software Foundation development toolchain ("binutils") \
					for native development. Tools are prefixed with g to avoid \
					conflicts with original tools.
platforms			darwin
categories			devel
maintainers			pguyot@kallisys.net
homepage			http://www.gnu.org/software/binutils/binutils.html
master_sites		gnu:binutils
use_bzip2			yes
checksums			md5 624e6b74983ac6b2960edaf2d522ca58 \
					sha1 9ac6e47be8cd78385d3d5e09c6bb420e357c4c07

# Build in a different directory, as advised in the README file.
pre-configure   	{ system "cd ${workpath} && mkdir -p build"}
configure.dir   	${workpath}/build
configure.cmd   	${worksrcpath}/configure
configure.env   	CC="cc -no-cpp-precomp"
configure.args  	--infodir='${prefix}/share/info' \
					--mandir='${prefix}/share/man' \
					--program-prefix=g
build.dir       	${workpath}/build

# Fix the configure script to build bfd, binutils and opcode.
patchfiles			patch-configure
					
# We don't want the etc module.
post-extract {
	system "rm -rf ${worksrcpath}/etc"
}
