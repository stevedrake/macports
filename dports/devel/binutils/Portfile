# $Id$

PortSystem			1.0
PortGroup			muniversal 1.0

name				binutils
version				2.20

description			FSF Binutils for native development.
long_description	Free Software Foundation development toolchain ("binutils") \
					for native development. Tools are prefixed with g to avoid \
					conflicts with original tools.
platforms			darwin
categories			devel
maintainers			nomaintainer
homepage			http://www.gnu.org/software/binutils/binutils.html
master_sites		gnu:binutils
use_bzip2			yes
checksums			md5     ee2d3e996e9a2d669808713360fa96f8 \
					sha1    747e7b4d94bce46587236dc5f428e5b412a590dc \
					rmd160  284074e2453e517d036ffce2c0f3d56439e2e5c0

depends_lib-append	port:zlib port:libiconv

configure.args  	--infodir='${prefix}/share/info' \
					--mandir='${prefix}/share/man' \
					--disable-werror \
					--program-prefix=g

# The Makefile runs configure again in subdirectories.
# It correcty passes along most configure variables (CFLAGS, LDFLAGS, ...),
#    but seems to neglect CPPFLAGS.
build.env-append	CPPFLAGS='-I${prefix}/include'

# Binutils violates the mtree layout by creating ${prefix}/<arch>/
destroot.violate_mtree	yes

# We don't want the etc module.
post-extract {
	system "rm -rf ${worksrcpath}/etc"
}
