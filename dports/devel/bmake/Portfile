# $Id$

PortSystem          1.0

name                bmake
version             20110909
set mkversion       20110808
categories          devel
platforms           darwin
license             BSD
maintainers         gmail.com:tdflavius mfeiri openmaintainer
homepage            http://www.crufty.net/help/sjg/bmake.html
master_sites        http://www.crufty.net/ftp/pub/sjg/

description         Portable NetBSD make
long_description    bmake is the portable version of NetBSD make.

distfiles           ${distname}${extract.suffix} \
                    mk-${mkversion}${extract.suffix}
checksums           ${distname}${extract.suffix} \
                    rmd160  4d188f7e92fe4259cd5d56c9d68bd5292c0ca4a3 \
                    sha256  7b6ffc4c307ba010c301ec5a54fde79c822252dde0bfbedf986c695894e71f16 \
                    mk-${mkversion}${extract.suffix} \
                    rmd160  4a4d952c40c485f3eff890077eeb5938813d327a \
                    sha256  b2cc3ba726bdb1be602ce0fdaf1f1bd4ae45e46bbc221410c2508b42887c3b8d

use_configure       no
worksrcdir          ${name}
build.cmd           ./boot-strap
build.args          --with-default-sys-path="${prefix}/share/mk"
build.target        

destroot {
    file copy ${worksrcpath}/Darwin/bmake ${destroot}${prefix}/bin
    file copy ${worksrcpath}/bmake.cat1 ${destroot}${prefix}/share/man/cat1/bmake.1
    file mkdir ${destroot}${prefix}/share/mk
    system "${workpath}/mk/install-mk ${destroot}${prefix}/share/mk"
}

livecheck.type      regex
livecheck.url       ${master_sites}
livecheck.regex     "${name}-(\[\\d\]+)${extract.suffix}"
