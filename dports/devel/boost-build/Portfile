# $Id: Portfile,v 1.1 2004/11/02 17:53:18 rshaw Exp $
PortSystem		1.0

name			boost-build
version			2.0-m9.1
categories		devel
maintainers		rshaw@opendarwin.org
description		Build system for large project software construction
long_description 	Boost.Build is a system for large project software \
					construction, which is simple to use and powerfull. \
					Boost.Build V2 is an onging project to rewrite \
					Boost.Build, improving design and making it more \
					extensible.
homepage		http://www.boost.org
master_sites	sourceforge:boost
use_bzip2		yes
checksums		md5 dd923f3d7a95059be8af885c5051892e
platforms		darwin

depends_run		bin:bjam:boost-jam

worksrcdir		${name}

post-patch {
	cd ${worksrcpath}
	reinplace "s|/usr/local|${prefix}|" \
		jam_src/Jambase \
		jam_src/jambase.c
	if {[catch {set python [binaryInPath python]} result] == 0} {
		foreach script [glob test/*.py] {
			reinplace "s|#!/usr/bin/python|#!${python}|" ${script}
		}
	}
}

use_configure	no

build			{}

destroot {
	system "cp -R ${worksrcpath} ${destroot}${prefix}/share/${name}"
}

