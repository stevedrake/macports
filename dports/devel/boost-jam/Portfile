# $Id$

PortSystem 1.0
name             boost-jam
version          3.1.13
categories       devel
maintainers      nomaintainer@macports.org
description      Boost.Jam (BJam) is a build tool based on FTJam
long_description \
	Boost.Jam (BJam) is a build tool based on FTJam, \
	which in turn is based on Perforce Jam. It contains \
	significant improvements made to facilitate its use \
	in the Boost Build System, but should be backward \
	compatible with Perforce Jam.
homepage         http://www.boost.org
master_sites     sourceforge:boost
extract.suffix   .tgz
checksums        md5 81f5ab23de817444f66dc3edf35d5ef5 \
                 rmd160 d9f334f0ea55d711e607132d569d0f5e6e056472 \
                 sha1 a073dfd7864b72afd1b4f6e258a68ed985c43957
platforms        darwin

post-patch {
	reinplace "s|/usr/share/boost-build|${prefix}/share/boost-build|" \
		${worksrcpath}/jambase.c
}

use_configure    no

build.env        LOCATE_TARGET=bin
build.cmd        ./build.sh
build.target

destroot {
	xinstall -d -m 0755 ${destroot}${prefix}/bin
	xinstall -m 0755 ${worksrcpath}/bin/bjam ${destroot}${prefix}/bin

	xinstall -d -m 0755 ${destroot}${prefix}/lib/bjam/bin/
	xinstall -m 0755 ${worksrcpath}/bin/bjam ${destroot}${prefix}/lib/bjam/bin/jam
}
