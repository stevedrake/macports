# $Id: Portfile,v 1.3 2005/08/11 21:33:18 rshaw Exp $
PortSystem		1.0

name			boost-jam
version			3.1.10
revision		1
categories		devel
maintainers		darwinports@opendarwin.org
description		Boost.Jam (BJam) is a build tool based on FTJam
long_description 	Boost.Jam (BJam)  is a build tool based on FTJam, \
					which in turn is  based on Perforce Jam. It contains \
					significant improvements made to  facilitate its use \
					in the Boost Build System, but should be backward \
					compatible with Perforce Jam.
homepage		http://www.boost.org
master_sites	sourceforge:boost
extract.suffix	.tgz
checksums		md5 8fd247425bbd12bb38114fbd8425696c
platforms		darwin

post-patch {
	reinplace "s|/usr/share/boost-build|${prefix}/share/boost-build|" \
		${worksrcpath}/Jambase \
		${worksrcpath}/jambase.c
}

use_configure	no

build.cmd		LOCATE_TARGET=bin /bin/sh ./build.sh
build.target	darwin

destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/bin
	xinstall -m 0755 bin/bjam ${destroot}${prefix}/bin
	# install bjam copy called jam in /lib/bjam/bin/
	xinstall -d -m 0755 ${destroot}${prefix}/lib/bjam/bin/
	xinstall -m 0755 bin/jam ${destroot}${prefix}/lib/bjam/bin/
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	foreach doc [glob *.html *.txt Porting] {
		xinstall -m 0644 $doc ${destroot}${prefix}/share/doc/${name}
	}
}

