# $Id$

PortSystem			1.0
name				cfitsio
version				3.060
categories			devel
maintainers			nomaintainer
description			C/Fortran access to FITS data files
long_description \
	CFITSIO is a library of C and Fortran subroutines for reading and \
	writing data files in FITS (Flexible Image Transport System) data \
	format. CFITSIO simplifies the task of writing software that deals \
	with FITS files by providing an easy to use set of high-level routines \
	that insulate the programmer from the internal complexities of the FITS \
	file format. At the same time, CFITSIO provides many advanced features \
	that have made it the most widely used FITS file programming interface \
	in the astronomical community.

platforms			darwin

homepage			http://heasarc.gsfc.nasa.gov/fitsio/
master_sites		ftp://heasarc.gsfc.nasa.gov/software/fitsio/c/
distname			${name}[strsed ${version} {g/\.//}]

worksrcdir			${name}

checksums \
	${distname}${extract.suffix} \
		md5 b7ab291d227c60b17a19a1c028dc649c \
		sha1 ec92c0d4402d2a7cf13f514c1be77665c43e0147 \
		rmd160 2c85f7fe1ddce8f83d5b2bdbf30c681fe0db0d87

depends_build		port:gcc42

patchfiles			patch-Makefile.in.diff

configure.cflags	-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
configure.fc		${prefix}/bin/gfortran-mp-4.2

build.target		all shared

post-destroot {
	system "ranlib ${destroot}${prefix}/lib/libcfitsio.a"
	set docdir ${destroot}${prefix}/share/doc/${name}-${version}
	xinstall -m 755 -d ${docdir}
	eval xinstall -m 644 ${worksrcpath}/README [glob ${worksrcpath}/*.txt] \
		[glob ${worksrcpath}/*.ps] [glob ${worksrcpath}/*.doc] \
		[glob ${worksrcpath}/*.toc] [glob ${worksrcpath}/*.tex] \
		${docdir}
}

