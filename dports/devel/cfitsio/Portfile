# $Id$

PortSystem			1.0
name				cfitsio
version				2.510
categories			devel
maintainers			darwinports@opendarwin.org
description			C/Fortran access to FITS data files
long_description \
	CFITSIO is a library of C and Fortran subroutines for reading and \
	writing data files in FITS (Flexible Image Transport System) data \
	format. CFITSIO simplifies the task of writing software that deals \
	with FITS files by providing an easy to use set of high-level routines \
	that insulate the programmer from the internal complexities of the FITS \
	file format. At the same time, CFITSIO provides many advanced features \
	that have made it the most widely used FITS file programming interface \
	in the astronomical community.

platforms			darwin

homepage			http://heasarc.gsfc.nasa.gov/fitsio/
master_sites		ftp://heasarc.gsfc.nasa.gov/software/fitsio/c/
distname			${name}2510

worksrcdir			${name}

checksums			md5 ae8e5e7e3d38cf5de7d1228b40faa62d

# For the g77 compiler
depends_build		port:gcc34

patchfiles			patch-configure

configure.env		CFLAGS="-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64" \
					FC="${prefix}/bin/g77-dp-3.4"

build.target		all shared

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} libcfitsio.a libcfitsio.dylib \
		${destroot}${prefix}/lib
	system "ranlib ${destroot}${prefix}/lib/libcfitsio.a"
	xinstall -m 644 -W ${worksrcpath} fitsio.h fitsio2.h longnam.h \
		drvrsmem.h ${destroot}${prefix}/include
	eval xinstall -m 644 README [glob ${worksrcpath}/*.txt] \
		[glob ${worksrcpath}/*.ps] [glob ${worksrcpath}/*.doc] \
		[glob ${worksrcpath}/*.toc] [glob ${worksrcpath}/*.tex] \
		${destroot}${prefix}/share/doc/${name}
}

