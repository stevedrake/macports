# $Id$

PortSystem 1.0
PortGroup	muniversal 1.0

name		cmake
version		2.8.0
categories	devel
maintainers	css
description	Cross-platform make
long_description	\
	An extensible, open-source system that manages the build 	\
	process in an operating system and compiler independent manner. \
	Unlike many cross-platform systems, CMake is designed to be 	\
	used in conjunction with the native build environment.
homepage	http://www.cmake.org/
platforms	darwin freebsd
master_sites	http://www.cmake.org/files/v2.8/
checksums	md5 3b3679b8a6afaedc38a8c15dd7ff4fcf \
		sha1 c35cb0d787c53aee768b154f05b68d3a20eccb3d \
		rmd160 27e80a14b4970d85b12aaf18fbe738c02dc0620f

depends_build	port:libidn \
		port:openssl

configure.args	--mandir=/share/man --docdir=/share/doc/cmake --parallel=${build.jobs}
patchfiles	patch-CMakeFindFrameworks.cmake.diff
post-patch {
	reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/Modules/CMakeFindFrameworks.cmake
}

post-destroot {
	xinstall -d -m 0755 ${destroot}${prefix}/share/emacs/site-lisp
	xinstall -m 0644 ${worksrcpath}/Docs/cmake-mode.el \
		${destroot}${prefix}/share/emacs/site-lisp
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/cmake
	xinstall -m 0644 -W ${worksrcpath}/Docs cmake-indent.vim \
		cmake-syntax.vim ${destroot}${prefix}/share/doc/cmake
}

livecheck.type  regex
livecheck.regex {Latest Release \((\d(?:\.\d+)*)\)}
livecheck.url	${homepage}cmake/resources/software.html
