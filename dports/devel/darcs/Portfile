# $Id$

PortSystem 1.0
name		darcs
version		2.4.0
categories	devel haskell
maintainers	gwright
platforms	darwin
description	A distributed, interactive, smart revision control system
long_description	\
                David's Advanced Revision Control System is yet         \
                another replacement for CVS. It is written in Haskell,  \
                and has been tested on Linux and Mac OS X. Darcs        \
                includes a cgi script, which can be used to view the    \
                contents of your repository.

homepage	http://darcs.net
master_sites	${homepage}/releases/
distname	${name}-2.4

checksums	md5     169a6d245a33da97b2daa0eda60b28e5 \
		sha1    c33e0e5ba9f4a179beba4ed047f5d56dff4a44e9 \
		rmd160  2982f0dff2703a9fff48d737acbb77948f4acd55

depends_build	port:haskell-platform	\
		port:hs-haskeline	\
		port:hs-hashed-storage	\
		port:hs-utf8-string	\
		port:hs-zlib		\
		port:hs-HTTP
depends_lib	port:gmp

configure       {
                  system "cd ${worksrcpath} && runhaskell Setup configure -v --ghc --prefix=${prefix} --with-gcc=${configure.cc}"
                }

build           {
                  system "cd ${worksrcpath} && runhaskell Setup build -v"
                }

destroot        {
                  system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
                }

livecheck.type  regex
livecheck.regex "version (.+) released"
