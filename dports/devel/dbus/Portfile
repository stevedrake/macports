# $Id: Portfile,v 1.11 2006/08/26 00:56:20 rhwood Exp $
PortSystem 1.0
name		dbus
version		0.92
revision		1
description	A message bus system, a simple way for applications to talk to one another.
long_description	${description}
maintainers	macports-dev@lists.macosforge.org
categories	devel
platforms	darwin 
homepage        http://www.freedesktop.org/Software/dbus
master_sites    http://dbus.freedesktop.org/releases/
checksums	md5 ea2be58c80a80631ba5b3c92cffd335c	 \
			sha1 37edf2fd6c471b086261462b8b8d3dd2656e1bb4 \
			rmd160 23de0396bf5565c02e2e710bebd95ad5de1832a8
depends_lib	port:glib2 port:libxml2
configure.args	--mandir=${prefix}/share/man --disable-mono --disable-monodocs \
		--disable-tests
configure.env   CPPFLAGS="-I${prefix}/include -L${prefix}/lib" \
                CFLAGS="-no-cpp-precomp -flat_namespace -L${prefix}/lib"
pre-build {
	reinplace "s|ucred.h|sys/ucred.h|g" ${worksrcpath}/dbus/dbus-sysdeps.c
}
post-destroot {
	file mkdir ${destroot}${prefix}/share/dbus-1/services
}
destroot.keepdirs ${destroot}${prefix}/share/dbus-1/services
variant with-qt {
	depends_lib-append	port:qt4
}
variant with-mono {
	depends_lib-append	port:mono
	configure.args-delete	--disable-mono
}
