# $Id$
PortSystem 1.0
name		dbus
version		0.61
revision	2
description	A message bus system, a simple way for applications to talk to one another.
long_description	${description}
maintainers	macports-dev@lists.macosforge.org
categories	devel
platforms	darwin 
homepage        http://www.freedesktop.org/Software/dbus
master_sites    http://dbus.freedesktop.org/releases/
checksums	md5 cfd4f26004e4304e0dace4d82894e50b	 \
		sha1 fdddc695dad64974fb4138fcb04a77a66f1f47f8 \
		rmd160 67306e1a632c1986460e8ead311ae642447cdcc3
depends_lib	port:glib2 port:libxml2
configure.args	--mandir=${prefix}/share/man --disable-mono --disable-monodocs \
		--disable-tests --enable-glib
configure.env   CPPFLAGS="-I${prefix}/include -L${prefix}/lib" \
                CFLAGS="-no-cpp-precomp -flat_namespace -L${prefix}/lib"
pre-build {
	reinplace "s|ucred.h|sys/ucred.h|g" ${worksrcpath}/dbus/dbus-sysdeps.c
}
post-destroot {
	file mkdir ${destroot}${prefix}/share/dbus-1/services
}
destroot.keepdirs ${destroot}${prefix}/share/dbus-1/services
variant with_qt {
	depends_lib-append	port:qt4
}
variant with_mono {
	depends_lib-append	port:mono
	configure.args-delete	--disable-mono
}
