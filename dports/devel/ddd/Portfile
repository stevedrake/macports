# $Id: Portfile,v 1.10 2004/07/02 07:12:32 jkh Exp $

PortSystem 1.0
name		ddd
version		3.3.9
revision	1
categories	devel
maintainers	jkh@opendarwin.org
description	Data Display Debugger
long_description DDD is a graphical front-end for GDB and other command-line debuggers.
homepage	http://www.gnu.org/software/ddd/
platforms	darwin
master_sites	gnu
checksums	md5 acfca53c62507795f4ceb355cb34e2a2
depends_lib	lib:libXm.4:openmotif
build.args	EXEEXT=.exe
destroot.args	${build.args}

post-configure {
	system "for i in `grep -rl '^#pragma implementation' ${worksrcpath}` ; do sed -e 's:^#pragma implementation:// #pragma implementation:' < \$i > \$i.new && mv \$i.new \$i; done"
	system "for i in `grep -rl '^#pragma interface' ${worksrcpath}` ; do sed -e 's:^#pragma interface:// #pragma interface:' < \$i > \$i.new && mv \$i.new \$i; done"
}

post-destroot {
	file rename ${destroot}${prefix}/bin/ddd.exe ${destroot}${prefix}/bin/ddd
	file mkdir ${destroot}${x11prefix}/lib/X11/app-defaults
	xinstall -c ${destroot}${prefix}/share/${name}-${version}/${name}/Ddd \
		${destroot}${x11prefix}/lib/X11/app-defaults
}
