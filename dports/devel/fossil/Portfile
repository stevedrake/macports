# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                fossil
version             20110301190432
categories          devel
platforms           darwin
maintainers         googlemail.com:ciserlohn

description         Simple, high-reliability, distributed software configuration management

long_description    Fossil is a distributed software configuration management which supports \
                    distributed version control, distributed bug tracking, distributed wiki, \
                    and a distributed blog mechanism all in single integrated package. It provides \
                    an easy-to-use web interface to access and administrate projects over the \
                    built-in webserver or CGI.

homepage            http://www.fossil-scm.org/

master_sites        ${homepage}download/
distname            ${name}-src-${version}

checksums           sha1    4332f6369332e118633c9a7f896b5cd3fd275217 \
                    rmd160  2da55edda4de5f439d0c93b22ad021caf1ac8b32

test.run            yes

depends_build       port:tcl

depends_lib         port:zlib \
                    port:openssl

universal_variant   no

post-extract {
    reinplace s|\$\(INSTALLDIR\)|\$(DESTDIR)/${prefix}/bin|g ${worksrcpath}/src/makemake.tcl
}

configure {
    system "cd ${worksrcpath}/src && tclsh ${worksrcpath}/src/makemake.tcl"
}

livecheck.type      regex
livecheck.url       ${homepage}/download.html
livecheck.regex     ${name}-src-(\\d{14})${extract.suffix}
