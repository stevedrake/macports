# $Id: Portfile,v 1.4 2004/12/11 21:35:57 rshaw Exp $
PortSystem		1.0
PortGroup		ruby 1.0

name			freeride
version			0.6.0
revision		2
description		A Ruby IDE for the Ruby programming language.
long_description	A Ruby IDE written in Ruby using the FOX GUI toolkit. \
					This IDE sports cross platform compatability, \
					with an extensive plugin architecture.
maintainers		dports@otierney.net
categories		devel ruby
homepage		http://freeride.rubyforge.org/wiki/wiki.pl
master_sites	http://rubyforge.org/download.php/256/
extract.suffix	.tgz
checksums		md5 1fc5dbd376437ce6da7df303b0907244
platforms		darwin 

depends_lib		lib:XXX:rb-drb \
				lib:XXX:rb-fxruby \
				lib:XXX:rb-rexml \
				lib:XXX:rb-ripper

use_configure	no
build {
	# create simple execution script
	set fp [open ${workpath}/${name} w]
	puts $fp "#!/bin/sh"
	puts $fp "cd ${prefix}/share/${name}"
	puts $fp "${ruby.bin} ${name}.rb"
	close $fp
	# don't use the included copies of modules, use ports only
	system "rm -rf ${worksrcpath}/redist"
	reinplace {s|^$:.*redist|#&|} ${worksrcpath}/${name}.rb
}
destroot {
	xinstall -d -m 0755 ${destroot}${prefix}/bin
	xinstall -m 0755 ${workpath}/${name} ${destroot}${prefix}/bin
	xinstall -d -m 0755 ${destroot}${prefix}/share
	system "cp -R ${worksrcpath} ${destroot}${prefix}/share/${name}"
	system "chmod 0777 ${destroot}${prefix}/share/${name}/config"
}

