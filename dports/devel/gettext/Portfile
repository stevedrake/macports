# $Id: Portfile,v 1.42 2006/06/24 11:25:08 mww Exp $

PortSystem 1.0
name		gettext
version		0.14.6
categories	devel
maintainers	mij@opendarwin.org
description	GNU gettext package
homepage	http://www.gnu.org/software/gettext/
platforms	darwin freebsd linux

long_description This is the GNU gettext package.  It is interesting for \
		 authors or maintainers of other packages or programs \
		 which they want to see internationalized.  As one \
		 step the handling of messages in different languages \
		 should be implemented.  For this task GNU gettext \
		 provides the needed tools and library functions.

master_sites	gnu

checksums	md5 c26fc7f0a493c5c7c39bbc4e7ed42790 \
		sha1 0d8ce8d9a09a719065a1530399c4f45c15a002c5 \
		rmd160 02138d12fd4d9ce0b3bda2d132f1569b30d16726

patchfiles	patch-gettext-runtime-intl-localcharset.c \
		patch-gettext-tools-lib-localcharset.c

configure.env	LDFLAGS="-fno-common" EMACS=/usr/bin/emacs

pre-configure	{ system "touch ${worksrcpath}/config.cache" }
configure.args	--with-included-gettext --mandir=${prefix}/share/man \
		--cache-file=${worksrcpath}/config.cache \
		--infodir=${prefix}/share/info --with-libiconv-prefix=${prefix} \
		--disable-csharp

depends_lib	port:libiconv

platform darwin 6  { depends_lib-append	lib:libdl:dlcompat }

variant darwin     { configure.env-append CPPFLAGS="-no-cpp-precomp" \
					  LDFLAGS="-fno-common -bind_at_load"
		     configure.env-delete LDFLAGS="-fno-common" }

variant puredarwin { configure.env-delete EMACS=/usr/bin/emacs }

post-destroot	{ file delete ${destroot}${prefix}/lib/charset.alias \
		  ${destroot}${prefix}/share/locale/locale.alias }
