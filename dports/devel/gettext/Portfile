# $Id$

PortSystem          1.0

name                gettext
version             0.16.1
categories          devel
maintainers         ryandesign
homepage            http://www.gnu.org/software/gettext/
master_sites        gnu
platforms           darwin freebsd linux

description \
	GNU gettext package

long_description \
	This is the GNU gettext package. It is interesting for \
	authors or maintainers of other packages or programs \
	which they want to see internationalized. As one \
	step the handling of messages in different languages \
	should be implemented. For this task GNU gettext \
	provides the needed tools and library functions.

checksums \
	md5 3d9ad24301c6d6b17ec30704a13fe127 \
	sha1 8642f4346dfd6a18ecd883329e150bfe9e0886c3 \
	rmd160 0fa96b2d005e2490e8603a0a3612041086d5aea1

# Patching gettext-runtime/configure and gettext-tools/configure fixes
# bug #11756 and it should be possible to remove this in a future version
# of gettext, maybe as soon as 0.16.2.
patchfiles \
	patch-gettext-runtime-configure.diff \
	patch-gettext-tools-configure.diff \
	patch-gettext-tools-Makefile.in

configure.cppflags \
	-no-cpp-precomp

configure.args \
	--disable-csharp \

depends_lib \
	port:libiconv \
	port:expat

test.run            yes
test.target         check

platform darwin 6 {
	depends_lib-append \
		lib:libdl:dlcompat
}

post-destroot {
	if {[file exists ${destroot}${prefix}/lib/charset.alias]} {
		delete ${destroot}${prefix}/lib/charset.alias
	}
	if {[file exists ${destroot}${prefix}/share/locale/locale.alias]} {
		delete ${destroot}${prefix}/share/locale/locale.alias
	}
}

livecheck.check     regex
livecheck.url       http://ftp.gnu.org/gnu/gettext/?C=M&O=D
livecheck.regex     ${name}-(\[0-9.\]+)\\.tar
