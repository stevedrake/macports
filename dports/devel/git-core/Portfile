# $Id: Portfile,v 1.5 2006/03/20 00:40:36 blb Exp $

PortSystem 1.0
name		git-core
version		1.2.4
description	The stupid content tracker.
long_description	A stupid (but extremely fast) directory \
			content manager. It doesn't do a whole lot, \
			but what it _does_ do is track directory contents \
			efficiently. 
maintainers	namely_void@yahoo.co.uk
categories	devel
platforms	darwin
homepage	http://kernel.org/git/
use_bzip2	yes
master_sites    http://www.kernel.org/pub/software/scm/git/
checksums	md5 4ddb476031d76614a0a5ab625c516972
distname	git-${version}
depends_run	bin:curl:curl bin:diff:diffutils bin:merge:rcs bin:wish:tk \
		bin:ssh:openssh bin:python:python24 bin:rsync:rsync \
		bin:sed:gsed
depends_lib	port:curl port:zlib port:openssl port:expat port:libiconv

patchfiles	patch-Makefiles

use_configure	no

build.env	CFLAGS="-Wall -O2 -I${prefix}/include" LDFLAGS="-L${prefix}/lib"
build.args	prefix=${prefix} CURLDIR=${prefix} OPENSSLDIR=${prefix} ICONVDIR=${prefix}

destroot.destdir DESTDIR=${destroot} prefix=${prefix}
destroot.target	install

variant doc {
	depends_build		bin:asciidoc:asciidoc bin:xmlto:xmlto
	build.target-append	doc
	destroot.target-append	install-doc
}

