# $Id$

PortSystem 1.0

name		gnutls
version		1.6.3
categories	devel security
maintainers	sfiera@macports.org openmaintainer@macports.org
description	GNU Transport Layer Security Library
homepage	http://www.gnutls.org/
platforms	darwin

long_description \
	GnuTLS is a portable ANSI C based library which implements the TLS 1.0 and \
	SSL 3.0 protocols. The library does not include any patented algorithms \
	and is available under the GNU Lesser GPL license.

master_sites	gnupg:alpha/${name}

checksums	sha1 7553b9f7ddd4982c0759b814bc6d9bf892cf7347

use_bzip2	yes

depends_lib	port:libgcrypt port:libtasn1 port:opencdk port:lzo

patchfiles      patch-includes_gnutls_gnutlsxx.h patch-lib_gnutlsxx.cpp

configure.env	CPPFLAGS="-D_asn1_find_node=asn1_find_node"
configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
			--with-libtasn1-prefix=${prefix} --with-libreadline-prefix=${prefix}

platform darwin 8 {
	build.env-append MACOSX_DEPLOYMENT_TARGET=10.4
	configure.env-append MACOSX_DEPLOYMENT_TARGET=10.4 \
		CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

livecheck.check	regex
livecheck.url	http://www.gnu.org/software/gnutls/news.html
livecheck.regex	{GnuTLS (\d+\.\d+\.\d+).*stable}
