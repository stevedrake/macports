# -*- Mode: Tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name            gnutls
version         2.2.3
categories      devel security
maintainers     sfiera openmaintainer
description     GNU Transport Layer Security Library
homepage        http://www.gnutls.org/
platforms       darwin

long_description \
    GnuTLS is a portable ANSI C based library which implements the TLS 1.0 and \
    SSL 3.0 protocols. The library does not include any patented algorithms \
    and is available under the GNU Lesser GPL license.

master_sites    ftp://ftp.gnutls.org/pub/gnutls/ \
                http://www.gnu.org/software/gnutls/releases/ \
                ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/ \
                http://josefsson.org/gnutls/releases/

checksums       md5 71d9b7ec32a2a67854940a8848c2b229 \
                sha1 285346586fa67c97c8c3d6f8a6bc22a55b188f76 \
                rmd160 0ee99b61ee03e9beb249d49aa5f6c9458a82afec


use_bzip2       yes

depends_lib     port:libgcrypt \
                port:libtasn1 \
                port:opencdk \
                port:lzo \
                port:zlib \
                port:readline

configure.cppflags  "-D_asn1_find_node=asn1_find_node"
configure.args  --mandir=${prefix}/share/man \
                --infodir=${prefix}/share/info \
                --with-libtasn1-prefix=${prefix} \
                --with-libreadline-prefix=${prefix} \
                --with-libgcrypt-prefix=${prefix} \
                --disable-guile

platform darwin 8 {
    build.env-append MACOSX_DEPLOYMENT_TARGET=10.4
    configure.env-append MACOSX_DEPLOYMENT_TARGET=10.4
}

livecheck.check regex
livecheck.url   http://www.gnu.org/software/gnutls/releases/?C=N\;O=D
livecheck.regex {${name}-(\d+\.[02468]+\.\d+)}
