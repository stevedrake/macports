# $Id: Portfile,v 1.11 2006/02/06 05:26:31 blb Exp $

PortSystem			1.0
name				gpgme
version				1.1.0
categories			devel security crypto
maintainers			blb@opendarwin.org
description			A library for easy acces to GnuPG.
long_description \
	GnuPG Made Easy (GPGME) is a library designed to make access \
	to GnuPG easier for applications. It provides a High-Level \
	Crypto API for encryption, decryption, signing, signature \
	verification and key management. Currently it uses GnuPG \
	as its backend but the API isn't restricted to this engine \
	in fact we have already developed a backend for CMS (S/MIME).

platforms			darwin 

homepage			http://www.gnupg.org/related_software/gpgme/
master_sites		http://mirrors.rootmode.com/ftp.gnupg.org/gpgme/ \
					ftp://ftp.gnupg.org/gcrypt/gpgme/

checksums			md5 dc180e1c2b3b13cf3b16b9586e8509ac

depends_lib			port:gnupg lib:libpth:pth \
					lib:libgpg-error:libgpg-error

patchfiles			patch-configure

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--infodir=${prefix}/share/info \
					--mandir=${prefix}/share/man \
					--with-gpg=${prefix}/bin/gpg --enable-static

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING COPYING.LESSER \
		ChangeLog INSTALL NEWS README THANKS TODO \
		${destroot}${prefix}/share/doc/${name}
}

platform darwin 7 {
	configure.env-append LDFLAGS="-lpth"
}

