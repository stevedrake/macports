# $Id$

PortSystem 1.0

name	        gtk2hs	
version		0.9.12
categories	devel graphics 
platforms	darwin
maintainers	gwright@macports.org

description	portable and native GUI library for Haskell
long_description	\
		gtk2hs is a Haskell binding to GTK, a comprehensive	\
		C GUI library that is portable across many platforms.

homepage	http://www.haskell.org/gtk2hs
master_sites	sourceforge

extract.suffix	.tar.gz
checksums	md5	32752a42c225f55b0280151f8e19a3ed		\
		sha1	401638c5abfc357b648e4aa4b234874c116a52bb	\
		rmd160	bfc3ad81be80fdbbf1694493d93ddf863efbf6d8

depends_build	port:ghc
depends_lib	port:gtk2		\
		port:cairo		\
		port:librsvg		\
		port:libglade2 		\
		port:gtkglext		\
		port:gtksourceview

configure.args	--with-hc=${prefix}/bin/ghc	\
		--enable-profiling		\
		--enable-packager-mode		\
		--enable-libglade		\
		--enable-gconf			\
		--enable-sourceview		\
		--enable-cairo			\
		--enable-svg			\
		--enable-opengl			\
		--without-pkgreg

# Fix gtk.package.conf to allow interoperating with non-MacPorts
# ghc. (MacPorts' ghc adds ${prefix}/lib to the linker path
# automatically.)

post-destroot	{ reinplace "s|library-dirs: |library-dirs: \"${prefix}/lib\",|" \
			${destroot}${prefix}/lib/${name}/gtk.package.conf
		}

# Note that the order of package registration is important: certain
# packages must be registered before the packages that depend on them.

post-activate	{ set pkgs {glib cairo svgcairo gtk gconf glade gtkglext sourceview soegtk}
		  foreach pkg ${pkgs} {
			system "ghc-pkg update ${destroot}${prefix}/lib/${name}/${pkg}.package.conf"
		  }
		}

