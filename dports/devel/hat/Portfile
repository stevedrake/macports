# $Id: Portfile,v 1.3 2005/05/27 17:25:37 gwright Exp $

PortSystem 1.0
name		hat
version		2.04
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin

description	hat is the Haskell Tracer
long_description	\
		Hat is a source-level tracer for Haskell 98, the	\
		standard lazy functional programming language. Hat is	\
		a tool that gives the user access to otherwise		\
		invisible information about a computation.		\
									\
		Hat is portable between compilers: it works with both	\
		ghc and nhc98. It also supports various language	\
		extensions, such as the FFI, multi-parameter type	\
		classes, functional dependencies, and hierarchical	\
		module namespaces.

homepage	http://www.cs.york.ac.uk/fp/hat/
master_sites	${homepage}

checksums	md5 11515d25ed8c760bfe1238fad36ad18f

depends_build	bin:ghc:ghc \
		bin:hmake:hmake

depends_lib	lib:libglib.1:glib1

depends_run	bin:xterm:XFree86

#user_notes	Despite being compatible with both nhc98 and ghc, the \
#		port depends on the more featureful ghc.
#
#		If the message "resize: command not found" appears,
#		you need to restart hat-* command in an xterm
#		(a real X11 xterm, not an OS X terminal application).
#

platform darwin 8 {
		  configure.env	CC=gcc-3.3
}

configure.args	--mandir=${prefix}/share/man/man1

post-destroot	{ file delete ${destroot}/${prefix}/bin/harch }

post-activate	{ set ghcversion [ exec ghc --version | sed "s|^.*version ||" ]
		  system "ranlib ${prefix}/lib/ghc-${ghcversion}/libHShat.a"
		}

