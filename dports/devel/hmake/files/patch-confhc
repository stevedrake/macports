--- script/confhc.sav	Thu Dec  2 06:26:00 2004
+++ script/confhc	Thu Dec  2 06:26:34 2004
@@ -65,8 +65,9 @@
 # Now look for GHC.  Determining the version number here is due to Simon Marlow.
 ghcsym () {
   echo __GLASGOW_HASKELL__ >ghcsym.hs;
-  $1 -E -cpp -optP-P ghcsym.hs -o $2;
-  rm -f ghcsym.hs;
+  $1 -E -cpp -optP-P ghcsym.hs -o ghcsym.out;
+  grep -e '^[0-9]*$' ghcsym.out > $2;
+  rm -f ghcsym.hs ghcsym.out;
 }
 echo -n "  Looking for ghc...   "
 if which ghc >/dev/null 2>&1
