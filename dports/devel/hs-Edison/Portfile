# $Id: Portfile,v 1.3 2006/08/25 15:43:55 gwright Exp $

PortSystem 1.0
name		hs-Edison
set shortname	edison-core
version		1.2.0.1
revision	1
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin

description	A library of purely functional data structures for Haskell
long_description	\
		Edison is a library of purely function data structures	\
		for Haskell originally written by Chris Okasaki.	\
		Conceptually, it consists of two things:		\
									\
   			1. A set of type classes defining data the	\
			   following data structure abstractions:	\
			   sequences, collections and associative	\
			   collections,					\
   			2. Multiple concrete implementations of each	\
			   of the abstractions.

homepage	http://www.eecs.tufts.edu/~rdocki01/edison.html
master_sites	http://www.eecs.tufts.edu/~rdocki01/projects
distname	${shortname}-${version}-source

checksums	md5 8d04b2a5316469da7f0ed35ec823aad7

depends_lib	port:hs-EdisonAPI
depends_build	port:ghc

pre-configure	{ cd ${worksrcpath}/edison-core
		  system "ghc -o Setup Setup.hs -package Cabal"
		}

configure	{ cd ${worksrcpath}/edison-core
		  system "./Setup configure --ghc --prefix=${prefix} --enable-library-profiling"
		}

build		{ cd ${worksrcpath}/edison-core
		  system "./Setup build -v"
		}

destroot	{ cd ${worksrcpath}/edison-core
		  system "./Setup copy --copy-prefix=${destroot}${prefix}"
                  system "./Setup register   --gen-script"
                  system "./Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/edison-core/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/edison-core/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                 }

post-activate	{ system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate	{ system "${prefix}/libexec/${name}/unregister.sh" }
