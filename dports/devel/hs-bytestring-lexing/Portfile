# $Id: Portfile 34731 2008-03-03 23:38:59Z gwright@macports.org $

PortSystem 1.0

name		hs-bytestring-lexing
set canonicalname	bytestring-lexing
version		0.1.2
revision	1
categories	devel haskell
maintainers	nomaintainer
platforms	darwin

description	Parse literals efficiently from ByteStrings
long_description	\
		Parse literals efficiently from GHC's ByteString	\
		type.  At the moment, only Doubles are supported.	\
		Reading Ints and Integers is supported by GHC's		\
		included ByteString module.

homepage	http://code.haskell.org/~dons/code/${canonicalname}
master_sites	http://hackage.haskell.org/packages/archive/${canonicalname}/${version}
distname	${canonicalname}-${version}

checksums	md5     6ce7957ee178f146f1c86e3d64ebc21f		\
		sha1    35fc64a173f34ac9f35c773eb2d61bfac61a072c	\
		rmd160  2524caf891e15e398ce1713313be7dcbe1146e39

depends_build	port:ghc	\
		port:alex

configure       { system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix} --with-compiler=${prefix}/bin/ghc --enable-library-profiling"
                }

build           { system "cd ${worksrcpath} && runhaskell Setup build -v"
                }

destroot        { system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
	          system "cd ${worksrcpath} && runhaskell Setup register   --gen-script"
		  system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                }

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

