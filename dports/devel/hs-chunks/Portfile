# $Id$

PortSystem 1.0
name		hs-chunks
version		2007.4.18
distname	chunks-${version}
categories	devel
maintainers	me@thomaskeller.biz
description	The chunks library for Haskell
long_description	\
		This library supports templates inspired by the Perl \
		HTML::Chunks module, but this Haskell implementation \
		checks at compile time that the templates used exist and \
		are used correctly. The templates are combined within the \
		compiled Haskell, removing the dependency on the external \
		template file.

homepage	http://www.wellquite.org/chunks/
master_sites	http://hackage.haskell.org/packages/archive/chunks/${version}
checksums	md5 783cd887026c2a096aac448ce8bd714b

depends_build	port:ghc

configure {
	system "cd ${worksrcpath} && runghc Setup.hs configure --prefix=${prefix}"
}

build {
	system "cd ${worksrcpath} && runghc Setup.hs build"
}

destroot {
	system "cd ${worksrcpath} && runghc Setup.hs copy --copy-prefix=${destroot}${prefix}"
	system "cd ${worksrcpath} && runghc Setup.hs register   --gen-script"
	system "cd ${worksrcpath} && runghc Setup.hs unregister --gen-script"

	file mkdir ${destroot}${prefix}/libexec/${name}
	file copy ${worksrcpath}/register.sh \
		  ${destroot}${prefix}/libexec/${name}
	file copy ${worksrcpath}/unregister.sh \
		  ${destroot}${prefix}/libexec/${name}
}

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

