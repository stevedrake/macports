# $Id$

PortSystem          1.0
name                hs-digest
set canonicalname   digest
version             0.0.0.1
categories          devel haskell
maintainers         blb openmaintainer
description         Cryptographic hash implementations
long_description \
   This package provides efficient cryptographic hash implementations for \
   strict and lazy bytestrings.  For now, CRC32 and Adler32 are supported, \
   they are implemented as FFI bindings to efficient code from zlib.

platforms           darwin

homepage            http://hackage.haskell.org
master_sites        ${homepage}/packages/archive/${canonicalname}/${version}
distname            ${canonicalname}-${version}

checksums           md5     e65ada5324ef509b1e59734d0868caf7 \
                    sha1    08906c2bffe3f2d296176ec276140346dcdcc377 \
                    rmd160  45ca4a52226c38d6281f0adbea1faaa819b61a30

depends_build       port:ghc

configure.cmd       runhaskell
configure.pre_args
configure.args      Setup configure --prefix=${prefix} --with-compiler=${prefix}/bin/ghc

build.cmd           runhaskell
build.args          Setup build
build.target

destroot.cmd        runhaskell
destroot.destdir
destroot.target     Setup copy --destdir=${destroot}
post-destroot {
   system "cd ${worksrcpath} && runhaskell Setup register --gen-script"
   system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"
   xinstall -m 755 -d ${destroot}${prefix}/libexec/${name}
   xinstall -m 755 -W ${worksrcpath} register.sh unregister.sh \
      ${destroot}${prefix}/libexec/${name}
}

post-activate {
   system "${prefix}/libexec/${name}/register.sh"
}

#pre-deactivate {
#   system "${prefix}/libexec/${name}/unregister.sh"
#}

