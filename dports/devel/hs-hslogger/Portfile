# $Id: Portfile 22478 2007-03-02 05:16:40Z pipping@macports.org $

PortSystem 1.0
name		hs-hslogger
set shortname	hslogger
version		1.0.2
categories	devel
maintainers	gwright@macports.org
platforms	darwin
description	A logging framework for Haskell
long_description	\
		hslogger lets each log message have a priority		\
		and source be associated with it. The programmer	\
		can then define global handlers that route or filter	\
		messages based on the priority and source. hslogger	\
		also has a syslog handler built in.

homepage	http://software.complete.org/${shortname}
master_sites	http://hackage.haskell.org/packages/archive/${shortname}/${version}

distfiles	${shortname}-${version}${extract.suffix}

checksums	md5 402a0000fd59ee437377773cbe723f4f

depends_build	port:ghc

worksrcdir	${shortname}-${version}

configure	{ cd ${worksrcpath}
		  system "runhaskell Setup.hs configure --prefix=${prefix}"
		}

build		{ cd ${worksrcpath}
		  system "runhaskell Setup.hs build"
		}

destroot	{ cd ${worksrcpath}
		  system "runhaskell Setup.hs copy --copy-prefix=${destroot}${prefix}"
                  system "runhaskell Setup.hs register   --gen-script"
                  system "runhaskell Setup.hs unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                }

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

