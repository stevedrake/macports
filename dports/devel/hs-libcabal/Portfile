# $Id: Portfile 32767 2008-01-13 10:36:53Z ryandesign@macports.org $

PortSystem 1.0

name		hs-libcabal
set shortname	Cabal
version		1.4.0.1
categories	devel
maintainers	gwright
platforms	darwin

description	Library for Haskell's Cabal build system.
long_description	\
		Cabal is a system for building and packaging Haskell	\
		libraries and programs It defines a common interface	\
		for package authors and distributors to easily build	\
		their applications in a portable way. Cabal is part of	\
		a larger infrastructure for distributing, organizing,	\
		and cataloging Haskell libraries and programs.		\
		    	       	       		     			\
		This port provides only the library.  The hs-cabal	\
		port provides the "cabal" installer program.

homepage	http://www.haskell.org/cabal/
master_sites	${homepage}/release/latest
distname	${shortname}-${version}

checksums	md5     795d026cff7b63599d4b5ddd920f10db		\
		sha1    ce6c78a779e8b1b8b61b5d27a05e83f3c11e8ab5	\
		rmd160  75b62e57553d1723fbe01016fb1eb9102b80a7d3

depends_build	port:ghc

configure	{ system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix}"
		}

build		{ system "cd ${worksrcpath} && runhaskell Setup build"
		}

destroot	{ system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
                }

post-activate   { catch {system "cd ${worksrcpath} && runhaskell Setup unregister"}
		  system "cd ${worksrcpath} && runhaskell Setup register"
                }

