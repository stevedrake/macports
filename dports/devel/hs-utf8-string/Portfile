# $Id$

PortSystem          1.0
name                hs-utf8-string
set canonicalname   utf8-string
version             0.3.3
categories          devel haskell
maintainers         blb openmaintainer
description         UTF8 layer for IO and Strings
long_description \
   The utf8-string package provides operations for encoding UTF8 strings to \
   Word8 lists and back, and for reading and writing UTF8 without truncation.

platforms           darwin

homepage            http://hackage.haskell.org
master_sites        ${homepage}/packages/archive/${canonicalname}/${version}
distname            ${canonicalname}-${version}

checksums           md5     f311e85aebccffb272ebf3bd49a28c8f \
                    sha1    dd99f348a4da7d6c4a3245c538ed3b8ebe0fbe58 \
                    rmd160  d9dfccdff9a93f0a2cf4453bb1d595ab8da57759

depends_build       port:ghc

configure.cmd       runhaskell
configure.pre_args
configure.args      Setup configure --prefix=${prefix} --with-compiler=${prefix}/bin/ghc

build.cmd           runhaskell
build.args          Setup build
build.target

destroot.cmd        runhaskell
destroot.destdir
destroot.target     Setup copy --destdir=${destroot}
post-destroot {
   system "cd ${worksrcpath} && runhaskell Setup register --gen-script"
   system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"
   xinstall -m 755 -d ${destroot}${prefix}/libexec/${name}
   xinstall -m 755 -W ${worksrcpath} register.sh unregister.sh \
      ${destroot}${prefix}/libexec/${name}
}

post-activate {
   system "${prefix}/libexec/${name}/register.sh"
}

#pre-deactivate {
#   system "${prefix}/libexec/${name}/unregister.sh"
#}

