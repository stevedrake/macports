# $Id$

PortSystem          1.0
name                hs-zip-archive
set canonicalname   zip-archive
version             0.1.1.3
categories          devel haskell
maintainers         blb openmaintainer
description         Zip archive access for Haskell
long_description \
   The zip-archive library provides functions for creating, modifying, and \
   extracting files from zip archives.

platforms           darwin

homepage            http://hackage.haskell.org
master_sites        ${homepage}/packages/archive/${canonicalname}/${version}
distname            ${canonicalname}-${version}

checksums           md5     edf3924c929b5592b1b9dbf4853b754f \
                    sha1    cbba0a5d2bc5efdb3ae6601cb6be3a1a49851609 \
                    rmd160  c4350e34d0a4e62a37880bc23d2bba7c5565b4d8

depends_build       port:ghc

depends_lib         port:hs-binary port:hs-digest port:hs-zlib

configure.cmd       runhaskell
configure.pre_args
configure.args      Setup configure --prefix=${prefix} --with-compiler=${prefix}/bin/ghc

build.cmd           runhaskell
build.args          Setup build
build.target

destroot.cmd        runhaskell
destroot.destdir
destroot.target     Setup copy --destdir=${destroot}
post-destroot {
   system "cd ${worksrcpath} && runhaskell Setup register --gen-script"
   system "cd ${worksrcpath} && runhaskell Setup unregister --gen-script"
   xinstall -m 755 -d ${destroot}${prefix}/libexec/${name}
   xinstall -m 755 -W ${worksrcpath} register.sh unregister.sh \
      ${destroot}${prefix}/libexec/${name}
}

post-activate {
   system "${prefix}/libexec/${name}/register.sh"
}

#pre-deactivate {
#   system "${prefix}/libexec/${name}/unregister.sh"
#}

