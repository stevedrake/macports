# $Id$

PortSystem 1.0

name		hs-zlib
set canonicalname	zlib
version		0.4.0.4
categories	devel haskell
maintainers	nomaintainer
platforms	darwin

description	The Haskell Zlib Binding
long_description	\
		Haskell bindings to the Zlib library for compression \
                and decompression in gzip and zlib format.  The library \
		acts directly on ByteString values.

homepage	http://hackage.haskell.org
master_sites	${homepage}/packages/archive/${canonicalname}/${version}
distname	${canonicalname}-${version}

checksums	md5     414eecee79df7f90f5d51baa335dcca8		\
		sha1    b031c719091a7a26b7486a8b64bb2b2715365df2	\
		rmd160  a3e2a50d30c1f98232156438555384c4cbe175a1

depends_build	port:ghc
depends_lib	port:zlib

configure	{ system "cd ${worksrcpath} && runhaskell Setup configure --ghc --prefix=${prefix} --with-compiler=${prefix}/bin/ghc"
		}

build		{ system "cd ${worksrcpath} && runhaskell Setup build"
		}
destroot        { system "cd ${worksrcpath} && runhaskell Setup copy --copy-prefix=${destroot}${prefix}"
	          system "cd ${worksrcpath} && runhaskell Setup register   --gen-script"
		  system "cd ${worksrcpath} && runhaskell 	Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                }

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

