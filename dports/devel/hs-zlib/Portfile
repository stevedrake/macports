# $Id$

PortSystem 1.0
name		hs-zlib
set shortname	zlib
version		0.2
categories	devel
maintainers	nomaintainer
platforms	darwin

description	The Haskell Zlib Binding
long_description	\
		Haskell bindings to the Zlib library for compression \
                and decompression in gzip and zlib format.  The library \
		acts directly on ByteString values.

homepage	http://www.haskell.org/~duncan/zlib
master_sites	${homepage}
distname	${shortname}

set worksrcdir	${shortname}

fetch		{ system "cd ${workpath} && ${prefix}/bin/darcs get --partial ${homepage}"
		}

extract		{ }

checksum	{ }


depends_build	port:ghc		\
		port:darcs

depends_lib	port:zlib

configure	{ reinplace "s|base.*fps|base|" ${worksrcpath}/zlib.cabal
		  system "cd ${worksrcpath} && runghc Setup configure --ghc --prefix=${prefix}"
		}

build		{ system "cd ${worksrcpath} && runghc Setup build"
		}

destroot	{ system "cd ${worksrcpath} && runghc Setup copy --copy-prefix=${destroot}${prefix}"
                }

post-activate   { catch {system "cd ${worksrcpath} && runghc Setup unregister"}
		  system "cd ${worksrcpath} && runghc Setup register"
                }


 
