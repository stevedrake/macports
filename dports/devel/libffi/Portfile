# $Id$

PortSystem 1.0

name		libffi
version		2.1
revision	20080124
set pyobjc-version	1.4
set checkout-revision	1981
categories	devel
platforms	darwin
maintainers	pguyot@kallisys.net
description	libffi provides a high level api to various calling conventions
long_description	libffi library provides a portable, high level \
			programming interface to various calling conventions. \
			This allows a programmer to call any function \
			specified by a call interface description at run-time. \
			Some programs may not know at the time of compilation \
			what arguments are to be passed to a function. For \
			instance, an interpreter may be told at run-time about \
			the number and types of arguments used to call a given \
			function. Libffi can be used in such programs to \
			provide a bridge from the interpreter program to \
			compiled code.

homepage	http://sources.redhat.com/libffi/
master_sites	macports:pguyot
extract.suffix	.tgz
distname	libffi-src-pyobjc-${pyobjc-version}-r${checkout-revision}
checksums	md5     c24bc3520df16ca060a6b4eafd6e8e1c \
			sha1    36a0977ab8eebf928a561438b4a89ded3ef31352 \
			rmd160  e0aa1cbb4c7d42fd7565868c6ad8eb9d6d2e5b74

patchfiles	patch-libffi-src-Makefile.in

set worksrcpath ${workpath}/libffi-src/src

configure.cmd	../configure
configure.cflags-append	"-DMACOSX"

build.dir	${configure.dir}

post-destroot	{
	file mkdir ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/../ChangeLog \
		${worksrcpath}/../ChangeLog.libgcj \
		${worksrcpath}/../ChangeLog.v1 ${worksrcpath}/../LICENSE \
		${worksrcpath}/../README ${worksrcpath}/../README.pyobjc \
		${destroot}${prefix}/share/doc/${name}
}

livecheck.version	${pyobjc-version}
livecheck.check		regex
livecheck.url		http://pyobjc.sourceforge.net/news/index.php
livecheck.regex		{<span class="news_headline">PyObjC (.*?) released</span>}
