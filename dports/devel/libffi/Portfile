# $Id$

PortSystem 1.0

name		libffi
version		2.1
revision	20040426
set pyobjc-version	1.4
categories	devel
platforms	darwin
maintainers	pguyot@kallisys.net
description	libffi provides a high level api to various calling conventions
long_description	libffi library provides a portable, high level \
			programming interface to various calling conventions. \
			This allows a programmer to call any function \
			specified by a call interface description at run-time. \
			Some programs may not know at the time of compilation \
			what arguments are to be passed to a function. For \
			instance, an interpreter may be told at run-time about \
			the number and types of arguments used to call a given \
			function. Libffi can be used in such programs to \
			provide a bridge from the interpreter program to \
			compiled code.

homepage	http://sources.redhat.com/libffi/
master_sites	http://pyobjc.sourceforge.net/software/ \
				sourceforge:pyobjc
distname	pyobjc-${pyobjc-version}
checksums	md5 c7ec904371aae5714a5a2a07a2c1edbc \
		rmd160 025cfd9b7e23d34d54c49af6897fe3049fb8c449 \
		sha1 6f83b13b78e19f390709eaedf3004c81d983dc5d

patchfiles	patch-libffi-src-Makefile.in

set worksrcpath ${workpath}/pyobjc-${pyobjc-version}/libffi-src/src

configure.cmd	../configure
configure.env	CFLAGS=-DMACOSX

build.dir	${configure.dir}

post-destroot	{
	file mkdir ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/../ChangeLog \
		${worksrcpath}/../ChangeLog.libgcj \
		${worksrcpath}/../ChangeLog.v1 ${worksrcpath}/../LICENSE \
		${worksrcpath}/../README ${worksrcpath}/../README.pyobjc \
		${destroot}${prefix}/share/doc/${name}
}

livecheck.version	${pyobjc-version}
livecheck.check		regex
livecheck.url		http://pyobjc.sourceforge.net/news/index.php
livecheck.regex		{<span class="news_headline">PyObjC (.*?) released</span>}
