# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name                libftd2xx
version             0.1.7
categories          devel
maintainers         gmail.com:ranauei
description         FTDI D2XX Driver
long_description    D2XX Driver: allow direct access to the USB device through \
                    a DLL. Devices supported: FT2232H, FT4232H, FT232R, \
                    FT245R, FT2232, FT232B, FT245B, FT8U232AM, FT8U245AM
                  
homepage            http://www.ftdichip.com/Drivers/D2XX.htm
platforms           macosx
distname            D2XX${version}
master_sites        http://www.ftdichip.com/Drivers/D2XX/MacOSX/UniBin/
checksums           md5 b9822a4125fd5f6f174306b96182c3d8 \
                    sha1 76e843bc33d2d3369ffc5398e2828d627372a607 \
                    rmd160 c85b75817716cc57784568c5873825f2786f846e
use_dmg             yes
use_configure       no

build {}

destroot {
   if { ${os.major}=="8" || ${os.major}=="9" } {
       set os_dir 10.4-10.5
   } elseif { ${os.major}>=10 } {
       set os_dir 10.6
   }

   xinstall ${worksrcpath}/D2XX/bin/${os_dir}/${name}.${version}.dylib ${destroot}${prefix}/lib
   xinstall -m 644 -W ${worksrcpath}/D2XX bin/ftd2xx.h Samples/WinTypes.h ${destroot}${prefix}/include
   ln -s ${name}.${version}.dylib ${destroot}${prefix}/lib/${name}.dylib
   system "install_name_tool -id ${prefix}/lib/${name}.${version}.dylib ${destroot}${prefix}/lib/${name}.${version}.dylib"
}
