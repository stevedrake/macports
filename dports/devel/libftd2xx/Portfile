# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name                libftd2xx
version             1.0.0
categories          devel
maintainers         gmail.com:ranauei
description         FTDI D2XX Driver
long_description    D2XX Driver: allow direct access to the USB device through \
                    a DLL. Devices supported: FT2232H, FT4232H, FT232R, \
                    FT245R, FT2232, FT232B, FT245B, FT8U232AM, FT8U245AM
                  
homepage            http://www.ftdichip.com/Drivers/D2XX.htm
platforms           macosx
distname            D2XX${version}
master_sites        http://www.ftdichip.com/Drivers/D2XX/MacOSX/UniBin/
checksums           md5 44b5ce91bb8e5218a10e5a6a7c9ae02c \
                    sha1 f4599097d4698163f5e9fc7f2855bdce98d4f235 \
                    rmd160 f9b5b7fbb49017affdcc313c9dd7badaf018375a
use_dmg             yes
use_configure       no

build {}

destroot {
   if { ${os.major}=="8" } {
       set os_dir 10.4
   } elseif { ${os.major}>=9 } {
       set os_dir 10.5\ -\ 10.6
   }

   xinstall ${worksrcpath}/D2XX/bin/${os_dir}/${name}.${version}.dylib ${destroot}${prefix}/lib
   xinstall -m 644 -W ${worksrcpath}/D2XX bin/ftd2xx.h Samples/WinTypes.h ${destroot}${prefix}/include
   ln -s ${name}.${version}.dylib ${destroot}${prefix}/lib/${name}.dylib
   system "install_name_tool -id ${prefix}/lib/${name}.${version}.dylib ${destroot}${prefix}/lib/${name}.${version}.dylib"
}

livecheck.type      regex
livecheck.regex     D2XX(\[0-9.\]+)${extract.suffix}
