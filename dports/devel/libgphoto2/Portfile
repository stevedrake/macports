# $Id$
PortSystem		1.0
name			libgphoto2
version			2.3.1
categories		devel
maintainers		nomaintainer@macports.org
description		The gphoto2 digital camera library 
long_description	The gphoto2 library can be used by applications to \
			access various digital camera models. 
homepage		http://www.gphoto.org/proj/libgphoto2/ 
master_sites		sourceforge:gphoto
checksums		md5 37f85e34e5b6031ddf6cac8b8782ac4f
use_bzip2		yes
depends_build		port:pkgconfig 
depends_lib		port:libusb \
			port:jpeg \
			port:gettext \
			port:libiconv
configure.env	CFLAGS="-I${prefix}/include -no-cpp-precomp" \
		LDFLAGS="-L${prefix}/lib"
configure.args		--without-exif --mandir=${prefix}/share/man --with-drivers=all	


variant exif {
	configure.args-delete --without-exif
	depends_lib-append	port:libexif
}

platform darwin 6 {
	depends_lib-append port:dlcompat
	post-configure {
		reinplace "s|#define HAVE_WCHAR_T 1|#undef HAVE_WCHAR_T|" \
			${worksrcpath}/config.h
		reinplace "s|#define HAVE_WCHAR_T 1|#undef HAVE_WCHAR_T|" \
			${worksrcpath}/libgphoto2_port/config.h
	}
}
