# $Id$
PortSystem		1.0
name			libgphoto2
version			2.3.1
revision		1
categories		devel
maintainers		nomaintainer
description		The gphoto2 digital camera library 
long_description	The gphoto2 library can be used by applications to \
			access various digital camera models. 
homepage		http://www.gphoto.org/proj/libgphoto2/ 
master_sites		sourceforge:gphoto
checksums		md5 37f85e34e5b6031ddf6cac8b8782ac4f
use_bzip2		yes
patchfiles		patch-configure
depends_lib		port:dbus \
			port:gettext \
			port:jpeg \
			port:libexif \
			port:libiconv \
			port:libusb \
			port:pkgconfig

configure.cflags-append	-I${prefix}/include -no-cpp-precomp
configure.args	--mandir=${prefix}/share/man \
		--with-drivers=all --with-libexif=auto

variant without_libexif {
	depends_lib-delete	port:libexif
	configure.args-delete --with-libexif=auto
	configure.args-append --with-libexif=no
}

variant with_doxygen {
	depends_build		port:doxygen
	patchfiles-delete	patch-configure
}

platform darwin 6 {
	depends_lib-append port:dlcompat
	post-configure {
		reinplace "s|#define HAVE_WCHAR_T 1|#undef HAVE_WCHAR_T|" \
			${worksrcpath}/config.h
		reinplace "s|#define HAVE_WCHAR_T 1|#undef HAVE_WCHAR_T|" \
			${worksrcpath}/libgphoto2_port/config.h
	}
}
