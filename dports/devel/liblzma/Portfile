# $Id$

PortSystem      1.0

name            liblzma
version         4.42.0alpha6
categories      devel
platforms       darwin
maintainers     afb@macports.org openmaintainer
description     LZMA encoder/decoder library

long_description \
    liblzma is a LZMA encoder/decoder library with support for multiple \
    filters (algorithms). It was written in C (C99). It has a very similar \
    API to that of zlib.

homepage        http://tukaani.org/lzma/
master_sites    ${homepage}
distname        lzma-${version}
checksums       md5 a22b0c661472e88942f683dd0f1852f0

depends_lib     port:libiconv port:gettext

patchfiles      lzma-4.42.0alpha6-presets.patch lzma-4.42.0alpha6-lzmadec.patch
patch.args      -p1

configure.args  --with-libiconv-prefix=${prefix} --with-libintl-prefix=${prefix}

# the internal "check.h" header conflicts with port check's <check.h>
configure.cppflags -I${worksrcpath}/src/liblzma/check -I${prefix}/include

destroot.dir    ${worksrcpath}/src/liblzma

# currently the headers are missing from the make install, so add them
post-destroot {
     xinstall ${worksrcpath}/src/liblzma/common/lzma.h ${destroot}${prefix}/include
     xinstall ${worksrcpath}/src/liblzma/common/lzma_adv.h ${destroot}${prefix}/include
}
