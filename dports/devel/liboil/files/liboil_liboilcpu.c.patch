--- liboil/liboilcpu.c~	2007-07-26 05:10:57.000000000 -0400
+++ liboil/liboilcpu.c	2007-07-26 05:12:47.000000000 -0400
@@ -42,7 +42,7 @@
 #include <sys/time.h>
 #include <time.h>
 
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__APPLE__)
 #include <sys/types.h>
 #include <sys/sysctl.h>
 #endif
@@ -578,7 +578,7 @@
 static void
 oil_cpu_detect_kernel_support (void)
 {
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__APPLE__)
   int ret, enabled;
   size_t len;
 
