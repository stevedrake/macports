# $Id$

PortSystem      1.0
PortGroup       xcode 1.0

name            libsdl-framework
version         1.2.11
categories      devel multimedia
maintainers     n.oxyde@gmail.com
description     Cross-platform multi-media development API

long_description \
                Simple DirectMedia Layer is a cross-platform \
                multimedia library designed to provide fast access \
                to the graphics framebuffer and audio device. It is \
                used by MPEG playback software, emulators, and many \
                popular games, including the award winning Linux \
                port of "Civilization: Call To Power." Simple \
                DirectMedia Layer supports Linux, Win32, BeOS, \
                MacOS, Solaris, IRIX, and FreeBSD.

homepage        http://www.libsdl.org/
master_sites    ${homepage}release/
distname        SDL-${version}
dist_subdir     libsdl

checksums       md5 418b42956b7cd103bfab1b9077ccc149 \
                sha1 2259134d714e35ab1469d513674a3cd02510d198 \
                rmd160 91dc8877224415a4ba59e1de57c31861e550d644

platforms       macosx

worksrcdir      ${distname}/Xcode/SDL

xcode.target        "Framework Without X11 Stuff (for those who didn't install the X11 headers with Xcode)"
xcode.destroot.type framework

post-extract {
    system "cd ${workpath}/${distname} && tar -xvzf Xcode.tar.gz"
}

post-patch {
    reinplace "s|10\.2;|10.3;|" ${worksrcpath}/SDL.xcodeproj/project.pbxproj
    reinplace "s|10\.2\.8|10.3.9|" ${worksrcpath}/SDL.xcodeproj/project.pbxproj
}

variant x11 {
    xcode.target Framework
}

platform darwin i386 {
    if {! [variant_isset universal]} {
        xcode.build.settings ARCHS=i386
    }
}

platform darwin powerpc {
    if {! [variant_isset universal]} {
        xcode.build.settings ARCHS=ppc
    }
}
