# $Id: Portfile,v 1.14 2006/02/14 05:20:29 ben Exp $

PortSystem 1.0
name			libsdl
version			1.2.9
revision		1
categories		devel multimedia
maintainers		ben@opendarwin.org
description		Cross-platform multi-media development API
long_description	Simple DirectMedia Layer is a cross-platform \
			multimedia library designed to provide fast access \
			to the graphics framebuffer and audio device. It is \
			used by MPEG playback software, emulators, and many \
			popular games, including the award winning Linux \
			port of "Civilization: Call To Power." Simple \
			DirectMedia Layer supports Linux, Win32, BeOS, \
			MacOS, Solaris, IRIX, and FreeBSD.
platforms		darwin freebsd
master_sites		http://www.libsdl.org/release/
distname		SDL-${version}
checksums		md5 80919ef556425ff82a8555ff40a579a0

post-patch {
	# This include causes a compile error on tiger, and doesn't seem to be needed on panther
	reinplace "s| -I/System/Library/Frameworks/Kernel.framework/Headers/||" ${worksrcpath}/src/joystick/darwin/Makefile.in
}

configure.args	--enable-shared \
			--mandir=${prefix}/share/man

post-destroot	{
	xinstall -m 0755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 0644 -W ${worksrcpath} BUGS COPYING CREDITS INSTALL README \
		README-SDL.txt README.MacOSX TODO docs.html \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 0755 -d ${destroot}${prefix}/share/doc/${name}/docs
	xinstall -m 0644 -W ${worksrcpath}/docs index.html \
		${destroot}${prefix}/share/doc/${name}/docs
	system "cp -R ${worksrcpath}/docs/html ${destroot}${prefix}/share/doc/${name}/docs"
}

platform darwin 6 {
	depends_lib-append	lib:libdl:dlcompat
	configure.env		CPPFLAGS="-I${prefix}/include" \
						LDFLAGS="-L${prefix}/lib"
}

platform darwin 8 {
	patchfiles patch-configure
	configure.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
	build.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

