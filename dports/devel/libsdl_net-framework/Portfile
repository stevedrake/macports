# $Id$
PortSystem		1.0
PortGroup		xcode 1.0

name			libsdl_net-framework
set my_name		SDL_net
version			1.2.7
platforms		macosx
categories		devel net
maintainers		nox openmaintainer
description		cross-platform networking library

long_description	This is a small sample cross-platform networking \
			library, with a sample chat client and server \
			application. The chat client uses the GUIlib GUI \
			framework library.

homepage		http://www.libsdl.org/projects/SDL_net/
master_sites		${homepage}/release/
distname		${my_name}-${version}
dist_subdir             libsdl_net

checksums		md5 6bd4662d1423810f3140d4da21b6d912 \
				sha1 b46c7e3221621cc34fec1238f1b5f0ce8972274d \
				rmd160 5c95cf28f35ceb796188323666b92cafa60fba25

depends_lib		port:libsdl-framework

worksrcdir		${distname}/Xcode

xcode.target		Framework
xcode.destroot.type	framework

post-extract {
	system "cd ${workpath}/${distname} && tar -xvzf Xcode.tar.gz"
}

post-patch {
	reinplace "s|~/Library/Frameworks|./build/Frameworks|g" \
		${worksrcpath}/SDL_net.xcodeproj/project.pbxproj
	reinplace "s|\$(HOME)/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_net.xcodeproj/project.pbxproj
	reinplace "s|\$HOME/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_net.xcodeproj/project.pbxproj
}

platform darwin i386 {
		if {! [variant_isset universal]} {
		xcode.build.settings-append 	ARCHS=i386
		xcode.destroot.settings-append	ARCHS=i386
	}
}

platform darwin powerpc {
	if {! [variant_isset universal]} {
		xcode.build.settings-append 	ARCHS=ppc
		xcode.destroot.settings-append	ARCHS=ppc
	}
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	"${my_name}-(\\d+(?:\\.\\d+)*)"

