# $Id$

PortSystem	1.0
PortGroup	xcode 1.0

name		libsdl_ttf-framework
set my_name	SDL_ttf
version		2.0.9
categories	devel graphics
maintainers	nox openmaintainer
platforms	macosx
description	add on library for libSDL for rendering TrueType fonts

long_description	This library is a wrapper around the excellent \
			FreeType 2.0 library allowing to render TrueType fonts \
			in SDL applications.
	
homepage	http://www.libsdl.org/projects/SDL_ttf/
master_sites	${homepage}release/
distname	${my_name}-${version}
dist_subdir	libsdl_ttf

checksums	md5 6dd5a85e4924689a35a5fb1cb3336156 \
			sha1 6bc3618b08ddbbf565fe8f63f624782c15e1cef2 \
			rmd160 4e0b0f727f73b5d8a579e3e615ab4f50ec992b82

depends_lib	port:libsdl-framework \
			port:freetype \
			port:zlib

worksrcdir	${distname}/Xcode

xcode.target		Framework
xcode.destroot.type	framework

post-extract {
	system "cd ${workpath}/${distname} && tar -xvzf Xcode.tar.gz"
}

post-patch {
	reinplace "s|~/Library/Frameworks|./build/Frameworks|g" \
		${worksrcpath}/SDL_ttf.xcodeproj/project.pbxproj
	reinplace "s|\$(HOME)/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_ttf.xcodeproj/project.pbxproj
	reinplace "s|\$HOME/Library/Frameworks|/Library/Frameworks|g" \
		${worksrcpath}/SDL_ttf.xcodeproj/project.pbxproj
	reinplace "s|freetype/include|${prefix}/include,${prefix}/include/freetype2|g" \
		${worksrcpath}/SDL_ttf.xcodeproj/project.pbxproj
	reinplace "s|freetype/lib|${prefix}/lib|g" \
		${worksrcpath}/SDL_ttf.xcodeproj/project.pbxproj
}

platform darwin i386 {
    if {! [variant_isset universal]} {
        xcode.build.settings-append		ARCHS=i386
		xcode.destroot.settings-append	ARCHS=i386
    }
}

platform darwin powerpc {
    if {! [variant_isset universal]} {
        xcode.build.settings-append		ARCHS=ppc
		xcode.destroot.settings-append	ARCHS=ppc
    }
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	"${my_name}-(\\d+(?:\\.\\d+)*)"
