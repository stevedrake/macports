# $Id$

PortSystem      1.0

name            libsigcxx2
set my_name     libsigc++
version         2.0.18
categories      devel
platforms       darwin
maintainers     nomaintainer
description     C++ signal callback system

long_description \
    libsigc++ implements a typesafe callback system for standard C++. It allows you to define signals and to \
    connect those signals to any callback function, either global or a member function, regardless of whether it is \
    static or virtual.

homepage        http://libsigc.sourceforge.net/
master_sites    gnome:sources/libsigc++/2.0/
distname        libsigc++-${version}
use_bzip2       yes

checksums       md5 ddebf5aafc8525d10366a8724abc9f28 \
                sha1 75df46c977a3418bda4d5ae7e21c9ede28993835 \
                rmd160 314e5fd243dbaf49974130bd9d2692766f0116f5

set docdir      ${prefix}/share/doc/${my_name}-${version}

post-patch {
    if {! [variant_isset doc]} {
        reinplace -E "/^SUBDIRS/s/docs//" ${worksrcpath}/Makefile.in
    }
}

post-destroot {
    if {! [variant_isset doc]} {
        xinstall -d ${destroot}${docdir}
    }
    xinstall -m 0644 -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README TODO \
        ${destroot}${docdir}
}

platform darwin 8 {
    configure.compiler  gcc-4.0
}

variant doc description {Install extra documentation} {
    destroot.args  libsigc_docdir=${docdir}/html
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/GNOME/sources/${my_name}/2.0/?C=M&O=D
livecheck.regex {libsigc\+\+-(\d+(?:\.\d+)*)}

