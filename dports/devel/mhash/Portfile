# $Id$

PortSystem			1.0
name				mhash
version				0.9.8.1
categories			devel security
maintainers			ryandesign@macports.org openmaintainer@macports.org
description			provides easy access strong hashes
long_description \
	Libmhash is a library which implements some hash algorithms like crc32, \
	md5 and sha-1.

platforms			darwin freebsd

homepage			http://mhash.sourceforge.net/
master_sites		sourceforge
use_bzip2			yes

checksums			md5 f2b5e7b659fabd64de37df0872f401ab \
					sha1 b0c1deb74ab6d997a0264e30a38307e1720e6a07 \
					rmd160 33fb6f71834e5d7e0c2c5155f178a47d4ce50180

configure.args		--mandir=${prefix}/share/man

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

test.run			yes
test.target			check

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README \
		THANKS TODO ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath}/doc \
		skid2-authentication ${destroot}${prefix}/share/doc/${name}
}

variant universal {
	configure.args-append --disable-dependency-tracking
	configure.env-append CFLAGS="-isysroot /Developer/SDKs/MacOSX10.4u.sdk -arch i386 -arch ppc" LDFLAGS="-Wl,-syslibroot,/Developer/SDKs/MacOSX10.4u.sdk -arch i386 -arch ppc"
}
