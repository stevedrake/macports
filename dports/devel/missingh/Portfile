# $Id: Portfile,v 1.1 2006/08/15 16:36:35 gwright Exp $

PortSystem 1.0
name		missingh
version		0.14.4
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin
description	Haskell utility functions
long_description	\
		MissingH is a library of Haskell utility functions,	\
		including ones for working with lists, logging, I/O	\
		and strings.

homepage	http://quux.org/devel/${name}
master_sites	${homepage}

distfiles	${name}_${version}${extract.suffix}

checksums	md5 b0ebb0963d47438748749863d327daa9

depends_build	bin:ghc:ghc

worksrcdir	${name}

pre-configure	{ cd ${worksrcpath}
		  system "make setup"
		}

configure	{ cd ${worksrcpath}
		  system "./setup configure --prefix=${prefix}"
		}

build		{ cd ${worksrcpath}
		  system "./setup build"
		}

test.run	yes
test		{ cd ${worksrcpath}
		  system "make test-ghc6"
		}

destroot	{ cd ${worksrcpath}
		  system "./setup copy --copy-prefix=${destroot}${prefix}"
		}

post-activate	{ cd ${worksrcpath}
		  catch {system "./setup unregister"}
		  system "./setup register"
		}

