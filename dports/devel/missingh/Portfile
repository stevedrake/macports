# $Id$

PortSystem 1.0
name		missingh
version		0.16.0
categories	devel
maintainers	gwright@opendarwin.org
platforms	darwin
description	Haskell utility functions
long_description	\
		MissingH is a library of Haskell utility functions,	\
		including ones for working with lists, logging, I/O	\
		and strings.

homepage	http://quux.org/devel/${name}
master_sites	${homepage}

distfiles	${name}_${version}${extract.suffix}

checksums	md5 6f77f7a45be9c01992ed852b9179c9f9

depends_build	port:ghc

worksrcdir	${name}

pre-configure	{ cd ${worksrcpath}
		  system "make setup"
		}

configure	{ cd ${worksrcpath}
		  system "./setup configure --prefix=${prefix}"
		}

build		{ cd ${worksrcpath}
		  system "./setup build"
		}

test.run	yes
test		{ cd ${worksrcpath}
		  system "make test-ghc6"
		}

destroot	{ cd ${worksrcpath}
		  system "./setup copy --copy-prefix=${destroot}${prefix}"
                  system "./Setup register   --gen-script"
                  system "./Setup unregister --gen-script"

                  file mkdir ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/register.sh \
                            ${destroot}${prefix}/libexec/${name}
                  file copy ${worksrcpath}/unregister.sh \
                            ${destroot}${prefix}/libexec/${name}
                }

post-activate   { system "${prefix}/libexec/${name}/register.sh" }

#pre-deactivate { system "${prefix}/libexec/${name}/unregister.sh" }

