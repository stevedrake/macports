# $Id: Portfile,v 1.5 2005/04/25 13:34:16 mww Exp $

PortSystem 1.0

name		mpfr
version		2.1.1
revision	1
categories	devel math
platforms	darwin 
maintainers	leimy@opendarwin.org

description	The MPFR library is a C library for multiple-precision floating-point computations 
long_description	 The MPFR library is a C library for multiple-precision \
			 floating-point computations with exact rounding (also called \
			 correct rounding). It is based on the GMP multiple-precision \
			 library and should replace the MPF class in further releases \
			 of GMP.

homepage	http://www.mpfr.org
master_sites	http://www.mpfr.org/mpfr-current
checksums	md5 b7eb5932ab86c78d13ed0569ad26af38
patchfiles	patch-Makefile.in

depends_lib	lib:libgmp.3:gmp

configure.args	--infodir=\\\${prefix}/share/info --with-gmp=${prefix}
configure.env	CFLAGS="-fno-common" LDFLAGS="-L${prefix}/lib"

build.args	all libmpfr.${version}.dylib

post-destroot	{
		xinstall -d -m 755 ${destroot}${prefix}/share/${name}
		xinstall -m 644 -v -W ${worksrcpath} mpfr.texi texinfo.tex \
		${destroot}${prefix}/share/${name}
		system "ranlib ${destroot}${prefix}/lib/libmpfr.a" 
		xinstall -m 644 ${worksrcpath}/libmpfr.${version}.dylib \
		${destroot}${prefix}/lib
		set ln "ln -s libmpfr.${version}.dylib"
		system "cd ${destroot}${prefix}/lib && ${ln} libmpfr.2.1.dylib && ${ln} libmpfr.2.dylib && ${ln} libmpfr.dylib"
}

variant darwin x86	{
			configure.args-append	--host=none-apple-darwin
}
