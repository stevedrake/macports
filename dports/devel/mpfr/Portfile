# $Id$

PortSystem 1.0

# Although mpfr builds without a custom universal variant,
# it is not the same as builing the archs differently
# due to the variable HAVE_LDOUBLE_IEEE_EXT_LITTLE.
PortGroup  muniversal 1.0

name                mpfr
set base_version    3.0.0
set patch_level     8
version             ${base_version}-p${patch_level}
#version             ${base_version}
categories          devel math
platforms           darwin
maintainers         vinc17

description     C library for multiple-precision floating-point computations
long_description \
    MPFR is a portable C library for arbitrary-precision binary \
    floating-point computation with correct rounding, based on the GMP \
    multiple-precision library. The computation is both efficient and \
    has a well-defined semantics. It copies the good ideas from the \
    ANSI/IEEE-754 standard for fixed-precision floating-point arithmetic.

distname            ${name}-${base_version}
homepage            http://www.mpfr.org/
master_sites        http://www.mpfr.org/${distname}/

use_bzip2           yes

checksums \
    patch01 \
        md5     a11aad097d688737c2f796a3de2190c7 \
        sha1    906e7a111ffcfb488307067e295af6a35a5a9d14 \
        rmd160  34696d29a854c4d5a56dbb6a81991b088ab30091 \
    patch02 \
        md5     1e0cf19e8f47881d9edb8dcb451da928 \
        sha1    8d692a797f848b9b3e9b886f9e68285885fe00b0 \
        rmd160  06c763e58524b6e5ff96e538a70ae725fe97d615 \
    patch03 \
        md5     e125480be61ad2f20bd75a25e43a54f4 \
        sha1    f30cf103229b85137a5f3f368e174209ff4fa8e3 \
        rmd160  79712f3b0d1cb1607a2a5988c980376cd6d23f10 \
    patch04 \
        md5     05bd04f54ffcdb3cbffb6da9e7989427 \
        sha1    b41b1f26ddd0917c024c573d9612b2af1451299f \
        rmd160  44a2c624382d98b605d0ab6b09c94e691725d906 \
    patch05 \
        md5     6043bd3a144d19109e52ed7060c7e914 \
        sha1    9ef3d433b82be498e9a34fb149d2d3682e83180f \
        rmd160  2d20602975cc1dd1a954992af7a459d2bf9b4bfc \
    patch06 \
        md5     392ed630778ad8a1bbbc8050d11de68c \
        sha1    9a53b5a646e2ccf6bf46a18641aff32062035c01 \
        rmd160  1d65d68e59741f4adcec5f4a401c98e69c57a874 \
    patch07 \
        md5     67a2dcf24c30d75fdbe62563edf58901 \
        sha1    f34e0b4bc0b719e0a427cbef7c41e4853d7fe9da \
        rmd160  0b5053f4f77a970701dd4a6048b7bb0533fe1cf6 \
    patch08 \
        md5     737d88627f6f90af1fc0afa930f1e962 \
        sha1    ba47fc128717ee71b4a46a067ae4b29eed2c6b82 \
        rmd160  1e379f1bbb67e5b5c9f2bf45f9e41a91b0571e95 \
    [suffix ${distname}] \
        md5     f45bac3584922c8004a10060ab1a8f9f \
        sha1    8ae8bc72ac26a0f17ad9f57c520264c056c64770 \
        rmd160  6862412d09e1da3e1f4b023b8cfdee4d440d903e

use_parallel_build  yes

depends_lib     port:gmp

dist_subdir     ${name}/${base_version}

patch_sites     ${master_sites}
patch.args      -p1

for {set i 1} {${i} <= ${patch_level}} {incr i} {
    patchfiles-append patch[format %02d ${i}]
}

test.run        yes
test.target     check

livecheck.url    http://www.mpfr.org/mpfr-current/
livecheck.regex  "mpfr-(\\d+(?:\\.\\d+)*)${extract.suffix}"
