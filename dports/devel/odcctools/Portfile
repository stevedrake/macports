# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

name            odcctools
version         20061117
categories      devel
maintainers     nomaintainer
homepage        http://odcctools.macosforge.org/
platforms       darwin

description     Darwin cctools build system.
long_description \
    The odcctools project is geared towards improving the \
    Darwin cctools build system and code base to support \
    Darwin development. Darwin cctools has several \
    components, including the assembler odas(1), the \
    static linker odld(1), various tools for manipulating \
    and analyzing Mach-O and fat files, and support \
    libraries.

fetch.type      svn
svn.revision    150
svn.url         http://svn.macosforge.org/repository/${name}/trunk ${name}

worksrcdir      ${name}/${name}

patchfiles      patch-extract.sh

pre-extract {
    system "patch -p0 -d ${workpath}/${name} -i ${filespath}/patch-extract.sh"
}

set od_extract  ""
extract {
    system "cd ${workpath}/${name} && ./extract.sh $od_extract"
}

configure.args  --mandir=${prefix}/share/man \
                --program-prefix=od

build.target    default

use_parallel_build  yes

post-destroot {
    set mandir ${destroot}${prefix}/share/man/man1
    foreach manpage [glob -d ${mandir} *.1] {
        file rename ${manpage} [strsed ${manpage} "s%${mandir}/%${mandir}/od%"]
    }
}

variant nosdk description {Without SDK} {
    set od_extract "--nosdk"
}

livecheck.type  none
