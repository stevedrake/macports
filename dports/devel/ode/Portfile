# $Id: Portfile,v 1.4 2004/06/16 09:23:55 mww Exp $

PortSystem 1.0

name		ode
version		0.5
categories	devel
platforms	darwin
maintainers	mww@opendarwin.org
description	library for simulating articulated rigid body dynamics
long_description	ODE is a free, industrial quality library for \
			simulating articulated rigid body dynamics - for \
			example ground vehicles, legged creatures, and moving \
			objects in VR environments. It is fast, flexible, \
			robust and platform independent, with advanced joints, \
			contact with friction, and built-in collision detection.

homepage	http://opende.sourceforge.net/
master_sites	sourceforge:opende
checksums	md5 b33b21e04ee9661f27802b6b6c8eefd2
extract.suffix	.tgz
patchfiles	patch-drawstuff.cpp.diff \
		patch-user-settings.diff

depends_lib	lib:libGL:XFree86

use_configure	no

build.type	gnu

destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/include \
		${destroot}${prefix}/lib
	file copy ${worksrcpath}/include/ode ${destroot}${prefix}/include
	file copy ${worksrcpath}/include/drawstuff ${destroot}${prefix}/include
	xinstall -m 644 -W ${worksrcpath}/lib libode.a libdrawstuff.a \
		${destroot}${prefix}/lib
	system "ranlib ${destroot}${prefix}/lib/libode.a"
	system "ranlib ${destroot}${prefix}/lib/libdrawstuff.a"
}

variant opcode	{
	patchfiles-append	patch-user-settings-opcode.diff
}
