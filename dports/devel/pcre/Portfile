# $Id$

PortSystem      1.0

name            pcre
version         7.5
categories      devel
platforms       darwin freebsd
maintainers     nox
description     Perl Compatible Regular Expressions Library

long_description \
    The PCRE library is a set of functions that implement regular \
    expression pattern matching using the same syntax and semantics as \
    Perl 5. PCRE has its own native API, as well as a set of wrapper \
    functions that correspond to the POSIX regular expression API.

homepage        http://www.pcre.org/
use_bzip2       yes

master_sites    ftp://ftp.fu-berlin.de/unix/misc/${name}/ \
                ftp://ftp.tin.org/pub/libs/${name}/ \
                ftp://ftp.csx.cam.ac.uk/pub/software/programming/${name}/ \
                sourceforge

checksums       md5 66253d006b528d0e0a6ed635fb5df1a1 \
                sha1 561fe413d42664e0acea4695ccb67f7fe7b9e33c \
                rmd160 803e7ec1eb00f7790f83c2882642872d4f0170b8

configure.args  --docdir=${prefix}/share/doc/${name}-${version} \
                --enable-unicode-properties

post-configure {
    if {! [variant_isset doc]} {
        reinplace -E "/^install-data-am:/s/install-dist_htmlDATA//" ${worksrcpath}/Makefile
        reinplace -E "/install-man/s/install-htmlDATA//" ${worksrcpath}/Makefile
    }
}

test.run        yes

variant doc description {Install extra documentation} {}

# PCRE offers libz, libbz2 and libreadline support, maybe it would be nice
# to write some variants or include them by default.
