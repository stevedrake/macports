# $Id$

PortSystem          1.0
name                quickfix
version             1.12.4
categories          devel finance
maintainers         blb openmaintainer
description         FIX engine implementation
long_description \
   QuickFIX is a full-featured open source FIX engine, currently compatible \
   with the FIX 4.0-4.4 spec.

platforms           darwin

homepage            http://www.quickfixengine.org/
master_sites        sourceforge
worksrcdir          ${name}

checksums           md5     359fd12942d7e876275a116787fdd284 \
                    sha1    367a035bae39062da6dd01f1f3c2254165bac061 \
                    rmd160  c03fd64e13bfbffcf02b60936010cbc9fd6c9b09

depends_lib         port:libxml2

patchfiles          patch-configure.diff patch-threadfix.diff \
                    patch-destdir.diff patch-src_python_QuickfixPython.cpp.diff
post-patch {
   reinplace "s|@@PREFIX@@|${prefix}|g" ${worksrcpath}/configure
}

configure.args      --with-java
configure.env       "JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home"

variant python description {Include python support} {
   depends_lib-append      port:python26
   configure.args-append   --with-python=${prefix}
}

variant postgresql84 description {Include PostGreSQL 8.4 support} {
   depends_lib-append      port:postgresql84
   configure.args-append   --with-postgresql=${prefix}
   patchfiles-append       patch-postgresql84.diff
}

