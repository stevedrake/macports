# $Id$

PortSystem 1.0
name            readline
 set milestone  5.2
 set patchlevel 001
version         ${milestone}.${patchlevel}
distname        ${name}-${milestone}
categories      devel
maintainers     nomaintainer@macports.org
description     Library that provides command line editing
long_description \
    The GNU Readline library provides a set of functions for use by         \
    applications that allow users to edit command lines as they are typed   \
    in. Both Emacs and vi editing modes are available. The Readline library \
    includes additional functions to maintain a list of previously-entered  \
    command lines, to recall and perhaps reedit those lines, and perform    \
    csh-like history expansion on previous commands.

homepage        http://cnswww.cns.cwru.edu/~chet/readline/rltop.html
platforms       darwin freebsd

master_sites    gnu ftp://ftp.cwru.edu/pub/bash/

patch_sites     gnu:${name}/${distname}-patches/ \
                ftp://ftp.cwru.edu/pub/bash/${distname}-patches/
patchfiles      ${name}52-001

checksums       ${distfiles} md5 e39331f32ad14009b9ff49cc10c5e751 \
                ${distfiles} sha1 18f3412c73068509d5f491b7b4535aeaf9522834 \
                ${distfiles} rmd160 983cbb25192e0a376b80cb2428fe8ee254a041c7 \
                ${name}52-001 sha1 8de77c2de3926893cbf2688912768bed48a2456b

configure.args  --mandir=${prefix}/share/man \
                --infodir=${prefix}/share/info \
                --with-curses
configure.env   CPPFLAGS="-I${prefix}/include" \
                LDFLAGS="-L${prefix}/lib"

depends_lib     port:ncurses

post-destroot {
    delete ${destroot}${prefix}/share/info/dir
    # on darwin, keep incorrectly linked ports from breaking
    if {[variant_isset darwin]} {
        cd ${destroot}${prefix}/lib
        foreach f {history readline} {
            foreach v {0 1} {
                system "ln -s ${prefix}/lib/lib${f}.${milestone}.dylib \
                lib${f}.5.${v}.dylib"
            }
        }
    }
}

platform darwin {}
