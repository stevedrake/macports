# $Id$

PortSystem			1.0
PortGroup			xcode 1.0

name				sentestingkit
set my_name			SenTestingKit
version				41
categories			devel
maintainers			nomaintainer
description			Unit testing framework for Objective-C

long_description	OCUnit is a testing framework for Objective C in the Mac OS X, \
					Mac OS X Server, YellowBox/Cocoa and WebObjects environments. \
					This Objective C testing framework is a based on SUnit, Kent \
					Beck's Smalltalk unit testing framework, also available for Java \
					under the name JUnit, and is distributed as open source.

homepage            http://sente.epfl.ch/software/ocunit/
master_sites		http://www.sente.ch/pub/software/OCUnit/
distname			OCUnitHome-v${version}
dist_subdir			otest
extract.suffix		.tgz

checksums			md5 292cc78f477ca75890f455b5d9f9d04d \
					sha1 4ce07d4688a2dacfa37e2b315f8e849d6d5d17c1 \
					rmd160 40ae3553853c83de96a221f1d779fea0a5fdecf4

worksrcdir			[strsed ${distname} {/-.*$//}]/OCUnit/SourceCode/${my_name}

xcode.project		${my_name}.xcode
xcode.target		${my_name}
xcode.configuration	RootDeployment
xcode.destroot.type	framework

# Dummy configure to enable universal variant
use_configure	yes
configure		{}

post-patch {
	reinplace "s/~//" ${worksrcpath}/${xcode.project}/project.pbxproj
}

test.run yes

test {
	cd ${worksrcpath}
	system "${build.cmd}	-project ${xcode.project} \
							-target ${xcode.target}_UnitTests \
							-configuration ${xcode.configuration} \
							${build.args}"
}

variant universal {
	build.args		"ARCHS=\"i386 ppc\""
	destroot.args	"ARCHS=\"i386 ppc\""
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	{New in Release v(\d+)}

