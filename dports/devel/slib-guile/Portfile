# $Id$

PortSystem 1.0
name		slib-guile
version		1.0
revision	1
categories	devel
maintainers	nomaintainer@macports.org
platforms	darwin
description	Wrapper port to properly set up slib and guile together
long_description	${description}
depends_lib	lib:slib:slib lib:guile:guile
distfiles

configure {}
build {}
destroot {
	system "mkdir -p ${workpath}/destroot/${prefix}/share/guile"
	system "mkdir -p ${workpath}/destroot/${prefix}/share/guile/`guile-config info guileversion | cut -d . -f 1-2`"
	system "ln -s ${prefix}/lib/slib ${workpath}/destroot/${prefix}/share/guile/`guile-config info guileversion | cut -d . -f 1-2`/slib"
	file link -s ${workpath}/destroot/${prefix}/share/guile/slib ${prefix}/lib/slib
}
post-activate {
	system "${prefix}/bin/guile -c \"(use-modules (ice-9 slib)) (require 'new-catalog)\""
}
