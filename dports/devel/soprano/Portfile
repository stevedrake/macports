# $Id$

PortSystem          1.0

name                soprano
version             2.1.1
revision            1
categories          devel
maintainers         illogic-al@macports.org openmaintainer
description         The Qt-based RDF framework.
long_description    Soprano is a software library that provides an \
                    object-oriented C++/Qt4 framework for RDF data.
platforms           darwin
homepage            http://soprano.sourceforge.net
master_sites        sourceforge:soprano
use_bzip2           yes
distname            ${name}-${version}
distfiles           ${distname}.tar.bz2
checksums           md5 dc590aa42d832cea5ed13145d359c9f2

depends_build       port:cmake
depends_lib         port:clucene port:strigi port:redland

use_parallel_build  yes
worksrcdir          build
pre-configure       { file mkdir ${worksrcpath} }

configure.cmd       cmake
configure.ccache    no
configure.args      ../${distname} -DBUILD_SHARED_LIBS=ON \
		-DCMAKE_VERBOSE_MAKEFILE=ON \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SYSTEM_PREFIX_PATH=\"${prefix}\;/usr\" \
		-DCMAKE_INSTALL_PREFIX=${prefix} \
		-DCMAKE_OSX_SYSROOT=${universal_sysroot} \
		-Wno-dev

variant universal description {
    configure.universal_args-delete  --disable-dependency-tracking
    configure.args-append	-DCMAKE_OSX_ARCHITECTURES=\"[strsed ${configure.universal_archs} "g| |;|"]\"
}

variant debug description "Enable debug binaries" {
	configure.args-delete		-DCMAKE_BUILD_TYPE=Release
	configure.args-append		-DCMAKE_BUILD_TYPE=debugFull
}
