# $Id: Portfile,v 1.12 2006/04/18 18:54:03 dluke Exp $

PortSystem 1.0
PortGroup python 1.0

name			trac
version			0.9.5
categories		devel python
platforms		darwin
maintainers		dluke@geeklair.net
description		Wiki and issue tracking system.
long_description	Trac is an enhanced wiki and issue tracking system for \
			software development projects. Trac uses a minimalistic approach to \
			web-based software project management.

homepage	http://projects.edgewall.com/trac/
master_sites	http://ftp.edgewall.com/pub/trac/
distname	trac-${version}
checksums	md5 3b7d708eaf905cc6ba2b6b10a09a8cf4

depends_lib	port:subversion-pythonbindings port:clearsilver \
		port:py-sqlite bin:${prefix}/bin/python:python24 \
		port:sqlite3

use_configure	no
build.cmd	${prefix}/bin/python setup.py
build.target	build

destroot.cmd	${prefix}/bin/python setup.py
destroot.destdir	--prefix=${prefix} --root=${destroot}

post-install {	ui_msg "See http://projects.edgewall.com/trac/wiki/TracInstall for information on setting up a new trac environment."
		}

variant postgres	{	depends_lib-delete port:sqlite3 port:py-sqlite
				depends_lib-append port:py-pgsql \
					port:py-egenix-mx-base
			}

post-destroot	{	file copy ${worksrcpath}/contrib ${destroot}${prefix}/share/trac/contrib
		}
