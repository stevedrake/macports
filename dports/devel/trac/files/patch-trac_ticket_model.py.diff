--- trac/ticket/model.py.orig	2007-04-20 07:41:46.000000000 -0600
+++ trac/ticket/model.py	2008-03-15 17:45:40.000000000 -0600
@@ -283,7 +283,7 @@
                            "SELECT time,author,'comment',null,description,0 "
                            "FROM attachment WHERE id=%s AND time=%s "
                            "ORDER BY time",
-                           (self.id, when, str(self.id), when, self.id, when))
+                           (self.id, when, str(self.id), when, str(self.id), when))
         else:
             cursor.execute("SELECT time,author,field,oldvalue,newvalue,1 "
                            "FROM ticket_change WHERE ticket=%s "
@@ -293,7 +293,7 @@
                            "UNION "
                            "SELECT time,author,'comment',null,description,0 "
                            "FROM attachment WHERE id=%s "
-                           "ORDER BY time", (self.id,  str(self.id), self.id))
+                           "ORDER BY time", (self.id,  str(self.id), str(self.id)))
         log = []
         for t, author, field, oldvalue, newvalue, permanent in cursor:
             log.append((int(t), author, field, oldvalue or '', newvalue or '',
