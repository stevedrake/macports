--- trac/versioncontrol/cache.py.orig	2007-04-20 07:41:47.000000000 -0600
+++ trac/versioncontrol/cache.py	2008-03-15 17:38:28.000000000 -0600
@@ -244,7 +244,7 @@
         self.authz = authz
         cursor = self.db.cursor()
         cursor.execute("SELECT time,author,message FROM revision "
-                       "WHERE rev=%s", (rev,))
+                       "WHERE rev=%s", (str(rev),))
         row = cursor.fetchone()
         if row:
             date, author, message = row
@@ -256,7 +256,7 @@
         cursor = self.db.cursor()
         cursor.execute("SELECT path,node_type,change_type,base_path,base_rev "
                        "FROM node_change WHERE rev=%s "
-                       "ORDER BY path", (self.rev,))
+                       "ORDER BY path", (str(self.rev),))
         for path, kind, change, base_path, base_rev in cursor:
             if not self.authz.has_permission(path):
                 # FIXME: what about the base_path?
