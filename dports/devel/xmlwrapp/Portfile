# $Id: Portfile,v 1.1 2005/07/29 14:25:49 mww Exp $

PortSystem 1.0
name              xmlwrapp
version           0.5.0
categories        devel
maintainers       andre@splunk.com
description       xmlwrapp is a modern style C++ library for working with XML data
long_description  xmlwrapp is a modern style C++ library for working with XML data. \
                  It provides a simple and easy to use interface for the very \
                  powerful libxml2 XML parser and the libxslt XSLT engine.
homepage          http://pmade.org/software/xmlwrapp/
master_sites      http://pmade.org/distfiles/oss-releases/
depends_build     bin:perl5:perl5.8
depends_lib       lib:libxml2:libxml2 \
                  bin:xml2-config:libxml2 \
                  lib:libxslt:libxslt \
                  bin:xslt-config:libxslt
checksums         md5 b8a07e77f8f8af9ca96bccab7d9dd310

patch.pre_args    -p1
patchfiles        patch-mkmf

configure.env \
	CPPFLAGS="-I${prefix}/include -I${prefix}/include/libxml2"

configure {
	cd ${worksrcpath}
	system "perl configure.pl --xml2-config=${prefix}/bin/xml2-config --xslt-config=${prefix}/bin/xslt-config --prefix=${prefix}"
	reinplace "s#POST_LDFLAGS=#POST_LDFLAGS=-L${prefix}/lib -lxml2 -lz -lpthread -liconv -lm -lxslt#" src/libxml/Makefile
	reinplace "s#POST_LDFLAGS=#POST_LDFLAGS=-L${prefix}/lib -lxml2 -lz -lpthread -liconv -lm -lxslt -lexslt -L../libxml -lxmlwrapp#" src/libxslt/Makefile
}
