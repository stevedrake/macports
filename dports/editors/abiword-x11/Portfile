# $Id$

PortSystem 1.0

name		abiword-x11
version		2.4.6
description	A word processor with gnome support.
long_description        A word processor with gnome support.
maintainers	nomaintainer
categories	editors textproc gnome
platforms	darwin
homepage	http://www.abisource.com/
master_sites    \
	http://www.abisource.org/downloads/abiword/${version}/source \
	http://distro.ibiblio.org/pub/linux/distributions/gentoo/distfiles
checksums	md5 8ed5fb282b9741aca75b9e47500d39a1 \
		sha1 3011d221d09336f09f4bb0732add3405961a8623 \
		rmd160 ca56800d811b3aca0af6b2fb6cd70cbea29ab792
distname	abiword-${version}
use_bzip2	yes
dist_subdir	abiword
worksrcdir	${distname}/abi
depends_lib	\
	port:gnome-platform-suite \
	port:zlib \
	port:fribidi \
	port:fontconfig \
	port:libgnomeprintui

configure.cppflags-append	"-L${prefix}/lib"
configure.cflags-append		"-no-cpp-precomp"

configure.args	\
	--disable-Cocoa \
	--disable-Carbon \
	--mandir=${prefix}/share/man \
	--without-epath \
	--enable-gnome
	
build.target	{}

variant without_gnome description {Disable GNOME support} {
	configure.args-delete	--enable-gnome
	depends_lib-delete	\
		port:gnome-platform-suite \
		port:libgnomeprintui
}

platform darwin 9 {
	post-patch {
		reinplace "s|#define ICONV_CONST const|#define ICONV_CONST|g" ${worksrcpath}/src/af/util/xp/ut_iconv.cpp
	}
}
