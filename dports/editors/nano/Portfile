# $Id$

PortSystem      1.0

name            nano
version         2.0.7
categories      editors
platforms       darwin freebsd
maintainers     nox
description     Nano's ANOther editor - enhanced free Pico Clone

long_description \
    GNU nano is a small and friendly text editor. Besides basic text \
    editing, nano offers many extra features like an interactive search \
    and replace, goto line number, auto-indentation, feature toggles, \
    internationalization support, and filename tab completion.

homepage        http://www.nano-editor.org/
master_sites    ${homepage}dist/v[strsed ${version} {/\.[0-9]*$//}]/ gnu

checksums       md5 16187fed2bdefec6275ece6401ce4cd2 \
                sha1 6616c6496e6f21e61df6bb991c0be84eda5c6a0c \
                rmd160 96ff5a88288451ed24f679d88d59a752616ce94c

depends_lib     port:ncursesw \
    		port:gettext \
    		port:libiconv

configure.args  --enable-nanorc \
                --disable-wrapping-as-root \
                --disable-mouse \
                --disable-wrapping \
                --disable-speller

destroot.target install-strip

set docdir      ${prefix}/share/doc/${name}-${version}

post-destroot {
    xinstall -m 0755 -d ${destroot}${docdir}/html
    xinstall -m 0644 -W ${worksrcpath} AUTHORS BUGS COPYING ChangeLog INSTALL NEWS \
        README THANKS TODO doc/nanorc.sample ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath}/doc faq.html texinfo/nano.html ${destroot}${docdir}/html
}

post-install {
    ui_msg "A sample configuration file is available at ${docdir}/nanorc.sample ."
}

variant wrap description \
    {Enable wrapping (lines will be splitted to fit into the terminal width)} {
    configure.args-delete   --disable-wrapping
}

variant spell description \
    {Add spell-checking support (needs a spellchecker (e.g. aspell, ispell...)} {
    configure.args-delete   --disable-speller
}

variant mouse description {Add mouse support} {
    configure.args-delete   --disable-mouse

    post-install {
        ui_msg "Mouse support is enabled. ${name} need to be launched inside an x11 console to use it."
    }
}

variant multibuffer description \
    {Add multibuffer support (allow multiple files to be opened in a single nano instance)} {
    configure.args-append   --enable-multibuffer
}

variant color description {Enable color syntax highlighting} {
    configure.args-append   --enable-color

    post-install {
        ui_msg "Color syntax is enabled."
        ui_msg "You should take a look at the syntax definitions in ${prefix}/share/${name} ."
    }
}

livecheck.check regex
livecheck.url   http://ftp.gnu.org/gnu/${name}/?C=M&O=D
livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)
