# $Id$

PortSystem 1.0
name             nano
version          2.0.5
revision         1
categories       editors
maintainers      n.oxyde@gmail.com
description      Nano's ANOther editor - enhanced free Pico Clone
long_description \
    GNU nano is a small and friendly text editor. Besides basic text \
    editing, nano offers many extra features like an interactive search \
    and replace, goto line number, auto-indentation, feature toggles, \
    internationalization support, and filename tab completion.

homepage         http://www.nano-editor.org/
master_sites     ${homepage}dist/v[strsed ${version} {/\.[0-9]*$//}]/ gnu
checksums        md5 8daee919fe29b4fd8213c9e2c021acc6 \
                 sha1 76b1770d8703cbbf44d9f72da260e0c724714b0f \
                 rmd160 4836cfcab3e63691064c168904abb5ac5bc20d40

platforms        darwin freebsd
depends_lib      port:ncurses

configure.args   --infodir=${prefix}/share/info \
                 --mandir=${prefix}/share/man \
                 --enable-nanorc \
                 --disable-nls \
                 --disable-wrapping-as-root \
                 --disable-mouse \
                 --disable-largefile \
                 --disable-utf8

destroot.target  install-strip

post-destroot {
    copy ${worksrcpath}/doc/nanorc.sample ${destroot}${prefix}/etc
}

post-install {
    ui_msg "A sample configuration file is available at ${prefix}/etc/nanorc.sample"
}

variant nls {
    configure.args-delete   --disable-nls
    depends_lib-append      port:gettext \
                            port:libiconv
}

variant utf8 {
    configure.args-append   --enable-utf8
    configure.args-delete   --disable-utf8
    depends_lib-append      port:ncursesw
    depends_lib-delete      port:ncurses
}

variant no_wrap {
    configure.args-append   --disable-wrapping
}

variant no_spell {
    configure.args-append   --disable-spell
}

variant mouse {
    configure.args-delete   --disable-mouse
}

variant multibuffer {
    configure.args-append   --enable-multibuffer
}

variant color {
    configure.args-append   --enable-color
}

variant largefile {
    configure.args-delete   --disable-largefile
}

livecheck.check regex
livecheck.url   http://ftp.gnu.org/gnu/${name}/?M=D
livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)
