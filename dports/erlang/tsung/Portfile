# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem       1.0

name             tsung
version          1.3.3
revision         2
categories       erlang devel
maintainers      nomaintainer
supported_archs  noarch

description      Load test tool for HTTP, PostgreSQL, Jabber and others.
long_description Tsung (formerly IDX-Tsunami) is a distributed load testing tool. \
	It is protocol-independent and can currently be used to stress HTTP, SOAP, \
	PostgreSQL, and Jabber servers. It is distributed under the GNU General \
	Public License version 2.
homepage         http://tsung.erlang-projects.org/
platforms        darwin
master_sites     ${homepage}dist/

checksums           sha1    eefd8a2f698169b8c86b620a0248f775ecbfd6fa \
                    rmd160  6181f2c917bfe191ccc97055f61d100b268bf6db

depends_lib      port:erlang \
	port:mochiweb \
	port:gnuplot \
	port:p5.12-template-toolkit \
	port:rrdtool

build.target     all doc

post-patch {
    reinplace "s|/usr/bin/perl|${prefix}/bin/perl5.12|" \
        ${worksrcpath}/src/tsung-rrd.pl.in \
        ${worksrcpath}/src/tsung_stats.pl.in
    reinplace "s|/usr/bin/env perl|${prefix}/bin/perl5.12|" \
        ${worksrcpath}/src/log2tsung.pl.in
    reinplace "s| /usr/bin/python|${prefix}/bin/python2.7|" \
        ${worksrcpath}/src/tsung-plotter/tsung/tsung.py
}
