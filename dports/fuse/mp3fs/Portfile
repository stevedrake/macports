# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                mp3fs
version             0.13
categories          fuse
platforms           darwin

maintainers         mail@uwe-arzt.de

description         A flac to mp3 (read-only) filesystem for FUSE
long_description    This is a file system for converting flac files \
                    to mp3 files on the fly. This is useful, if you \
                    archive your music in flac format, but some \
                    program (i.e. iTunes) are not capable reading \
                    flac, but mp3.

homepage            http://mp3fs.sourceforge.net/

distname            mp3fs-${version}
master_sites        sourceforge:mp3fs
checksums           ${distfiles} md5 fb9b5eb4fb6f69f35430ff7e93a84e0b \
                                 sha1 b246bd747a32256cb8364b7ac0cc8b7a4e1d3f74

livecheck.distname  mp3fs

depends_lib         port:macfuse \
                    port:flac \
                    port:pkgconfig \
                    port:lame \
                    port:libid3tag


configure.post_args-append  "id3tag_CFLAGS=-I/opt/local/include id3tag_LIBS='-L/opt/local/lib /opt/local/lib/libid3tag.dylib'"

platform darwin {
    patch_sites         http://www.uwe-arzt.de/files/mp3fs
    patchfiles          mp3fs-${version}-macosx.patch
    checksums-append    mp3fs-${version}-macosx.patch md5 3c14c714c9ff9fc39586cfb50ac6f3d2 \
                                                      sha1 3f46e4292a0dac0b0f9d3b8f01b76ff3315b3169
    
    # override patch.pre_args since it defaults to -p0
    patch.pre_args -R -p1
}
