# $Id$

PortSystem              1.0

name                    atanks
version                 2.6
categories              games
platforms               darwin
maintainers             nomaintainer

description             atanks is a multi-platform Scorched Earth clone
long_description        ${description}

homepage                http://atanks.sourceforge.net/
master_sites            sourceforge
checksums               md5     3399323f7e18033a422074508bc4b8f6 \
                        sha1    939db882b128e33129250f86df3aefb8ce5d1b53 \
                        rmd160  8aba18312d9f79cf95d9338b68db3498f70a925e
worksrcdir              ${name}

depends_lib             port:allegro

patchfiles              patch-Makefile \
                        patch-src-Makefile

post-patch {
    reinplace s|@PREFIX@|${prefix}|g        ${worksrcpath}/Makefile
    reinplace s|@DESTROOT@|${destroot}|g    ${worksrcpath}/Makefile
}

use_configure           no

build.env               CFLAGS=-I${prefix}/include \
                        LDFLAGS=-L${prefix}/lib
build.args              PREFIX=${prefix}

# Can be removed once MacPorts 1.7.0 is released
if {![info exists applications_dir]} {
    set applications_dir /Applications/MacPorts
}

platform darwin {
    post-destroot {
        xinstall -d ${destroot}${applications_dir}/ATanks.app/Contents/MacOS
        ln -s ${prefix}/bin/atanks \
            ${destroot}${applications_dir}/ATanks.app/Contents/MacOS/ATanks
    }
}

livecheck.regex         <title>${name} ${name}-(.*) released.*</title>
