# $Id$

PortSystem              1.0

name                    atanks
version                 2.3
categories              games
platforms               darwin
maintainers             nomaintainer

description             atanks is a multi-platform Scorched Earth clone
long_description        ${description}

homepage                http://atanks.sourceforge.net/
master_sites            sourceforge
checksums               md5 9b717e7922a7ff2bdc55abc42f76e88e
worksrcdir              ${name}

depends_lib             port:allegro

patchfiles              patch-src-Makefile

use_configure           no

build.env               CFLAGS=-I${prefix}/include \
                        LDFLAGS=-L${prefix}/lib
build.args              PREFIX=${prefix}

destroot {
    xinstall -m 755 ${worksrcpath}/atanks ${destroot}${prefix}/bin
    xinstall -m 755 -d ${destroot}${prefix}/share/atanks
    xinstall -m 644 -W ${worksrcpath} \
        button.dat \
        misc.dat \
        missile.dat \
        sound.dat \
        stock.dat \
        tank.dat \
        tankgun.dat \
        title.dat \
        Help.txt \
        credits.txt \
        gloat.txt \
        instr.txt \
        revenge.txt \
        ${destroot}${prefix}/share/atanks
}

# Can be removed once MacPorts 1.7.0 is released
if {![info exists applications_dir]} {
    set applications_dir /Applications/MacPorts
}

platform darwin {
    post-destroot {
        xinstall -d ${destroot}${applications_dir}/ATanks.app/Contents/MacOS
        ln -s ${prefix}/bin/atanks \
            ${destroot}${applications_dir}/ATanks.app/Contents/MacOS/ATanks
    }
}

livecheck.regex         <title>${name} ${name}-(.*) released.*</title>
