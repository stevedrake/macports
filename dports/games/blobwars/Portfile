# $Id$

PortSystem              1.0

name                    blobwars
version                 0.96
categories              games
platforms               darwin
maintainers             nomaintainer

description             jump and run game featuring a Blob as main character
long_description        In Blob Wars : Metal Blob Solid, you take on the role \
                        of a fearless Blob agent, Bob. Bob's mission is to \
                        infiltrate the various enemy bases around the Blobs' \
                        homeworld and rescue as many MIAs as possible. But \
                        standing in his way are many vicious aliens, other \
                        Blobs who have been assimilated and the evil alien \
                        leader, Galdov.

homepage                http://www.parallelrealities.co.uk/blobWars.php
master_sites            http://www.opendarwin.org/~mww/files
use_bzip2               yes

checksums               md5 cdfe1231a9f6966c0d5189c1706000fe

depends_lib             bin:sdl-config:libsdl \
                        lib:libSDL_image:libsdl_image \
                        lib:libSDL_ttf:libsdl_ttf \
                        lib:libSDL_mixer:libsdl_mixer \
                        lib:libzzip:libzzip

patchfiles              patch-makefile.diff

use_configure           no

build.args              PREFIX=${prefix}
build.env               CFLAGS=-I${prefix}/include \
                        LDFLAGS=-bind_at_load

destroot.destdir        PREFIX=${destroot}${prefix}

post-destroot {
    file delete -force ${destroot}${prefix}/share/applnk \
        ${destroot}${prefix}/share/gnome ${destroot}${prefix}/share/icons
}

platform darwin {
    pre-destroot {
        xinstall -d ${destroot}/Applications/MacPorts/BlobWars.app/Contents/MacOS
        system "ln -s ${prefix}/bin/blobwars \
            ${destroot}/Applications/MacPorts/BlobWars.app/Contents/MacOS/BlobWars"
    }
}
