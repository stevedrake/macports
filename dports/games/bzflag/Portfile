# $Id$

PortSystem 1.0
name		bzflag
version		2.0.4.20050930
platforms	darwin
categories	games
maintainers	darwinports@opendarwin.org
description	3D tank game, multiplayer and internet gaming aviable
long_description 	BZFlag is a free multiplayer multiplatform 3D tank \
			battle game. The name stands for Battle Zone capture \
			Flag. It runs on Irix, Linux, *BSD, Windows, Mac OS X \
			and other platforms. It's one of the most popular \
			games ever on Silicon Graphics machines.
homepage	http://bzflag.org/
master_sites	http://ftp.bzflag.org/bzflag/ sourceforge
use_bzip2	yes
checksums	sha1 18a435e0c7d297718a5c1b6766749eb7cbfde3ef

depends_lib	port:curl port:libsdl port:c-ares

patchfiles	patch-src__bzflag__bzflag.cxx
post-patch {
	reinplace "s|SDL/||g" \
		${worksrcpath}/include/bzfSDL.h \
		${worksrcpath}/src/platform/MacOSX/SDLMain.m
}

configure.args	--mandir=${prefix}/share/man --libdir=${prefix}/lib/${name} \
		--includedir=${prefix}/include/${name} \
		--with-sdl-exec-prefix=${prefix}/ --disable-sdl-test \
		--without-x
configure.env	CFLAGS=-I${prefix}/include/ CPPFLAGS=-I${prefix}/include \
		LDFLAGS=-L${prefix}/lib

platform darwin 8 {
	configure.env-append CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}
