# $Id: Portfile,v 1.2 2005/02/09 00:59:36 mww Exp $

PortSystem 1.0

name			criticalmass
version			0.9.10
categories		games
platforms		darwin
maintainers		mww@opendarwin.org
description		Critical Mass is an SDL/OpenGL space shoot'em up game.
long_description	${description}

homepage		http://criticalmass.sourceforge.net/critter.php
master_sites	sourceforge:criticalmass
distname		CriticalMass-${version}
checksums		md5 e2e17fca8d026c993723f12097003f64
use_bzip2		yes

depends_lib		bin:sdl-config:libsdl \
				lib:libSDL_mixer:libsdl_mixer \
				lib:libSDL_image:libsdl_image \
				lib:libpng:libpng \
				lib:libz:zlib

post-patch {
	reinplace "s|/Contents/Resources/|/../share/${name}/|g" \
		${worksrcpath}/game/Makefile.in
}
configure.args	--mandir=${prefix}/share/man
post-configure	{
	reinplace "s|-I${prefix}/include/SDL|-I${prefix}/include -I${prefix}/include/SDL|g" \
		${worksrcpath}/game/Makefile \
		${worksrcpath}/utilssdl/Makefile \
		${worksrcpath}/utilsgl/Makefile
}

post-destroot	{
	cd ${destroot}${prefix}/share
	file rename Critical_Mass ${name}
}
