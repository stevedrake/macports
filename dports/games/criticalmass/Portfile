# $Id: Portfile,v 1.1 2004/08/18 18:20:00 mww Exp $

PortSystem 1.0

name			criticalmass
version			0.99
categories		games
platforms		darwin
maintainers		mww@opendarwin.org
description		Critical Mass is an SDL/OpenGL space shoot'em up game.
long_description	${description}

homepage		http://criticalmass.sourceforge.net/critter.php
master_sites	sourceforge:criticalmass
distname		CriticalMass-${version}
checksums		md5 e9a96039dde38caaa5d25f1cdaff8a6e

use_bzip2		yes

depends_lib		bin:sdl-config:libsdl \
				lib:libSDL_mixer:libsdl_mixer \
				lib:libSDL_image:libsdl_image \
				lib:libpng:libpng \
				lib:libz:zlib

configure.args	--mandir=${prefix}/share/man
post-configure	{
	reinplace "s|-I${prefix}/include/SDL|-I${prefix}/include -I${prefix}/include/SDL|g" \
		${worksrcpath}/game/Makefile \
		${worksrcpath}/utilssdl/Makefile \
		${worksrcpath}/utilsgl/Makefile
}

variant darwin	{
	post-destroot	{
		xinstall -m 755 -d ${destroot}/Applications/DarwinPorts/CriticalMass.app/Contents/MacOS
		system "ln -s ${prefix}/bin/critter ${destroot}/Applications/DarwinPorts/CriticalMass.app/Contents/MacOS/CriticalMass"
	}
}
