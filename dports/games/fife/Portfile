# $Id$

PortSystem              1.0

name                    fife
version                 0.2.999
revision                2
maintainers             tommyd
categories              games python
platforms               darwin
homepage                http://www.fifengine.de/

description             The FIFE game engine
long_description        FIFE stands for Flexible Isometric Free Engine and \
                        is a cross platform game creation framework.

master_sites            http://thomaskeller.biz/stuff
use_bzip2               yes

checksums               md5     9704aa6d1bdc21d3be810035c9156c93 \
                        sha1    854a6e3e6cbada6dd60e038f7b67781a50944f58 \
                        rmd160  f828f8e43440375ba93a758e1b51f13488e39b90

depends_build           port:scons

depends_lib             port:python26 \
                        port:libsdl \
                        port:libsdl_image \
                        port:libsdl_ttf \
                        port:boost \
                        port:libogg \
                        port:libvorbis \
                        port:libguichan \
                        port:swig-python

use_configure           no
use_parallel_build      no

pre-build {
     if { ![string equal [string trim [ exec ${prefix}/bin/python_select -s] ] "python26" ] } {
        ui_error "#################################################"
        ui_error "Python 2.6 is currently not selected as default, "
        ui_error "so fife's binary module will probably not load   "
        ui_error "correctly into this version of Python.           "
        ui_error "Please execute                                   "
        ui_error "    sudo ${prefix}/bin/python_select python26    "
        ui_error "and try again.                                   "
        ui_error "#################################################"
        return -code error "wrong python version selected"
    }
}

build.cmd               scons
build.target            fife
build.args              --prefix=${prefix} \
                        --python-prefix=${prefix}/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/ \
                        --release
build.env               CC=${configure.cc} CXX=${configure.cxx} \
                        CPP=${configure.cpp} SWIG=${prefix}/bin/swig

destroot.cmd            scons
destroot.target         install-all
destroot.args           --prefix=${prefix} \
                        --python-prefix=${prefix}/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/ \
                        --release
destroot.env            DESTDIR=${destroot}
