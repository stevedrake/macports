# $Id$

PortSystem              1.0

name                    fife
version                 0.3.0
maintainers             tommyd
categories              games python
platforms               darwin
homepage                http://www.fifengine.de/

description             The FIFE game engine
long_description        FIFE stands for Flexible Isometric Free Engine and \
                        is a cross platform game creation framework.

master_sites            sourceforge

checksums               md5     99c8fcd6b3e5210bcd88d22ceda510e8 \
                        sha1    09e19342979666e347fc3ebbccf55d3ee652fc87 \
                        rmd160  bcf9d950189b7ddd3959289702d2584e6e6e1ca1

depends_build           port:scons

depends_lib             port:python26 \
                        port:libsdl \
                        port:libsdl_image \
                        port:libsdl_ttf \
                        port:boost \
                        port:libogg \
                        port:libvorbis \
                        port:libguichan \
                        port:swig-python

use_configure           no
use_parallel_build      no

pre-build {
     if { ![string equal [string trim [ exec ${prefix}/bin/python_select -s] ] "python26" ] } {
        ui_error "#################################################"
        ui_error "Python 2.6 is currently not selected as default, "
        ui_error "so fife's binary module will probably not load   "
        ui_error "correctly into this version of Python.           "
        ui_error "Please execute                                   "
        ui_error "    sudo ${prefix}/bin/python_select python26    "
        ui_error "and try again.                                   "
        ui_error "#################################################"
        return -code error "wrong python version selected"
    }
}

build.cmd               scons
build.target            fife
build.args              --prefix=${prefix} \
                        --python-prefix=${prefix}/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/
build.env               CC=${configure.cc} CXX=${configure.cxx} \
                        CPP=${configure.cpp} SWIG=${prefix}/bin/swig

destroot.cmd            scons
destroot.target         install-all
destroot.args           --prefix=${prefix} \
                        --python-prefix=${prefix}/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/
destroot.env            DESTDIR=${destroot}
