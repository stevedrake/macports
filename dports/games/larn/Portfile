# $Id: $

PortSystem 1.0
name		larn
version             4.6.2
revision            4
categories	games
maintainers	aschenke@tampabay.rr.com
description	Text-based cavern exploring game
long_description    Larn is a text-based fantasy role-playing game similar to Rogue, \
            Nethack, etc.
platforms	darwin
use_bzip2	yes
master_sites	opendarwin
distname            ${name}-${version}-RELEASE
checksums	md5 cea96f48caa057793f6bcaf3394ca388
build.type	bsd
build.args	LDADD+=-L${prefix}/lib\\ -lcompat\\ -lcurses
worksrcdir	${portname}
patchfiles	patch-diag.c \
            patch-display.c \
            patch-global.c \
            patch-help.c \
            patch-io.c \
            patch-main.c \
            patch-monster.c \
            patch-moreobj.c \
            patch-movem.c \
            patch-object.c \
            patch-scores.c \
            patch-store.c

depends_lib port:libcompat

configure           { 
                        reinplace "s|MAN|MAN6|" ${worksrcpath}/Makefile
                        reinplace "s|/usr/share/games|${prefix}/share|g" ${worksrcpath}/pathnames.h
                        reinplace "s|/var/games|${prefix}/var/games|g" ${worksrcpath}/pathnames.h
                    }

destroot            {
                        xinstall -m 755 -d ${destroot}${prefix}/share/larn
                        xinstall -m 755 -c ${worksrcpath}/larn ${destroot}${prefix}/bin
                        xinstall -m 644 -c ${worksrcpath}/larn.6.gz ${destroot}${prefix}/share/man/man6
                        xinstall -m 644 -c ${worksrcpath}/datfiles/larn.help ${destroot}${prefix}/share/larn
                        xinstall -m 644 -c ${worksrcpath}/datfiles/larnmaze ${destroot}${prefix}/share/larn
                        xinstall -m 775 -d ${destroot}${prefix}/var/games/larn
                        xinstall -m 660 -c /dev/null ${destroot}${prefix}/var/games/larn/lscore12.0
                        xinstall -m 660 -c /dev/null ${destroot}${prefix}/var/games/larn/llog12.0
                    }