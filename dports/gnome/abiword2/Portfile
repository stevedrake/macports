# $Id: Portfile,v 1.10 2004/04/30 04:11:55 olegb Exp $
PortSystem 1.0
name		abiword2
version		2.0.6
description	A word processor with gnome support.
long_description        A word processor with gnome support.
maintainers	gnome-darwinports@opendarwin.org
categories	gnome editors textproc
platforms	darwin 
homepage	http://www.abisource.com/
master_sites    sourceforge:abiword
checksums	md5 80379d6a61ec0faad0665e9b83f47e62
distname	abiword-${version}
worksrcdir	${distname}/abi
depends_lib	lib:libz.1:zlib lib:libglade-2:libglade2 lib:libfribidi:fribidi \
			lib:libfontconfig.1.0.4:fontconfig
configure.env	CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp"
configure.args	--disable-Cocoa --disable-Carbon --mandir=${prefix}/share/man 
use_bzip2	yes
patchfiles	patch_wvMakefile.in patch_abiword.sh
build.target	{}

post-destroot	{
		system "cd ${worksrcpath}/../wv && \
			mv  xml/wvDocbook.xml xml/wvDocBook.xml &&
			make install prefix=${destroot}${prefix}" 
		}
		
variant gnome 	{ 
		configure.args-append   --enable-gnome
                depends_lib-append	lib:libgnomeprintui-2:libgnomeprintui
		}
