# $Id$

PortSystem 1.0

name                at-spi
version             1.24.0
set branch          [join [lrange [split ${version} .] 0 1] .]
description         Gnome Accesibility Technology Service
long_description \
   'at-spi' is a part of the Gnome Accessibility Project.  It provides a \
   Service Provider Interface for the Assistive Technologies available on \
   the GNOME platform, and a library against which applications can be linked.
maintainers         nomaintainer
categories          gnome
platforms           darwin
homepage            http://www.gnome.org/
master_sites        gnome:sources/at-spi/${branch}/

checksums           md5     e546a35e21d127b502a3c57550a189a0 \
                    sha1    9c1349e27617d7a2006e76101e5b12c721e07e1a \
                    rmd160  dcc78e63823ffd6be0fcccacf3152986506d5510

depends_build       port:p5-xml-parser \
                    port:pkgconfig

depends_lib         port:atk \
                    port:gtk2 \
                    port:libbonobo \
                    port:python25

use_bzip2           yes

configure.args      --enable-static --enable-platform-gnome-2 --disable-xevie

configure.env       PYTHON=${prefix}/bin/python2.5

variant x11 conflicts quartz description {Use X11 (default)} {
   configure.args-append     --with-x
   configure.cflags-append   -I${x11prefix}/include
}

variant quartz conflicts x11 description {Use Quartz (broken)} {
   pre-fetch {
      return -code error "The +quartz variant of ${name} does not work. See http://trac.macports.org/ticket/15013"
   }
   configure.args-append   --without-x
}

if {![variant_isset quartz]} {
   default_variants +x11
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}

