# $Id$

PortSystem 1.0

name                at-spi
version             1.24.1
set branch          [join [lrange [split ${version} .] 0 1] .]
description         Gnome Accesibility Technology Service
long_description \
   'at-spi' is a part of the Gnome Accessibility Project.  It provides a \
   Service Provider Interface for the Assistive Technologies available on \
   the GNOME platform, and a library against which applications can be linked.
maintainers         nomaintainer
categories          gnome
platforms           darwin
homepage            http://www.gnome.org/
master_sites        gnome:sources/${name}/${branch}/

checksums           md5     8e98aadfaca757799cb18ea92f40d21a \
                    sha1    b67852af63d33c77d633490ce717d7c98249ef9a \
                    rmd160  fc6b666a3fe2dcbc1c7ea61cbc1e9ae7c881e254

depends_build       port:p5-xml-parser \
                    port:pkgconfig

depends_lib         port:atk \
                    port:gtk2 \
                    port:libbonobo \
                    port:python25

use_bzip2           yes

configure.args      --enable-static --enable-platform-gnome-2 --disable-xevie

configure.env       PYTHON=${prefix}/bin/python2.5

variant x11 conflicts quartz description {Use X11 (default)} {
   configure.args-append     --with-x
   configure.cflags-append   -I${x11prefix}/include
}

variant quartz conflicts x11 description {Use Quartz (broken)} {
   pre-fetch {
      return -code error "The +quartz variant of ${name} does not work. See http://trac.macports.org/ticket/15013"
   }
   configure.args-append   --without-x
}

if {![variant_isset quartz]} {
   default_variants +x11
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}

