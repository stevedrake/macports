# $Id$
PortSystem 1.0
name		evince
version		0.6.1
description	Evince is a document viewer for multiple document formats like pdf, and many others.
long_description   	${description}
maintainers	nomaintainer@macports.org
categories	gnome print
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/evince/0.6/
use_bzip2	yes
checksums	md5 55a1d4af3cac209c7cfbe83b7ffcee1d
depends_lib	\
	bin:gs:ghostscript \
	lib:libgnomeprintui-2:libgnomeprintui \
	lib:libpoppler:poppler \
	port:libgnomeui \
	port:dbus \
	port:dbus-glib
depends_build	\
	bin:gnome-doc-prepare:gnome-doc-utils
configure.args	--disable-scrollkeeper
configure.env   CPPFLAGS="-no-cpp-precomp -L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp -flat_namespace -undefined suppress" \
		LDFLAGS="-lstdc++"
pre-build	{
	# remove Russian translation since it botches the build for now
	file delete ${worksrcdir}/help/ru
}

post-activate	{
	system "scrollkeeper-update"
}
