# $Id$
PortSystem 1.0
name		gconf
set my_name GConf
version		2.20.0
set branch  [join [lrange [split ${version} .] 0 1] .]
revision    1
description	GConf is a configuration database system.	
long_description        GConf is a configuration database system, \
			functionally similar to the Windows registry \
			but lots better. :-) It's being written for \
			the GNOME desktop but does not require GNOME.
maintainers	rhwood openmaintainer@macports.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/projects/gconf/
distname        ${my_name}-${version}
master_sites    gnome:sources/${my_name}/${branch}/
checksums	md5 a6d82dee79df11b6e38b19cb42197d32 \
		sha1 4f0b8e308470ffd95742e0221c1867d62d7bcef6 \
		rmd160 54948f0df79fa1bd68cebb5aae97cace0c21d642

depends_build   port:pkgconfig \
                port:perl5.8 \
                port:p5-xml-parser \
                port:intltool

depends_lib	\
        port:glib2 \
        port:gettext \
        port:libxml2 \
		port:gtk2 \
		port:orbit2

use_bzip2 	yes

configure.cppflags-append "-L${prefix}/lib" 

pre-destroot {
	destroot.keepdirs ${destroot}${prefix}/etc/gconf/gconf.xml.mandatory ${destroot}${prefix}/etc/gconf/gconf.xml.defaults
}

platform darwin 7 { configure.cflags-append "-DBIND_8_COMPAT=1" }

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${my_name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}

