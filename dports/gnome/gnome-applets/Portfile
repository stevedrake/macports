# $Id$
PortSystem 1.0
name		gnome-applets
version		2.16.2
description	GNOME panel applets.
long_description        This package contains applets for use with the \
			GNOME panel.  
maintainers	rhwood@macports.org openmaintainer@macports.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gnome-applets/2.16/
checksums	md5 1a46b8557ff05ca75e7db6adb4dd6707 \
			sha1 8b912c21e7c390c9aae96bb81fe017fa1f9bf006 \
			rmd160 b8706c57b37702b0bfc64cb549fc594b05da5e5b

depends_lib \
        lib:libatk-1.0:atk bin:gconftool-2:gconf lib:libgettextlib:gettext \
        lib:libglib-2.0:glib2 lib:libgnomevfs-2:gnome-vfs lib:libgtk-x11-2.0:gtk2 \
        lib:libgnomecanvas-2:libgnomecanvas lib:libart_lgpl_2:libart_lgpl \
        lib:libbonobo-2:libbonobo lib:libbonoboui-2:libbonoboui port:Xft2 \
        lib:libglade-2.0:libglade2 lib:libgnome-2:libgnome lib:libgnomeui-2:libgnomeui \
        bin:orbit-idl-2:orbit2 port:libxml2 port:libxslt bin:perl:perl5.8 \
        lib:libpangoft2-1.0:pango bin:pkg-config:pkgconfig lib:libexpat:expat \
        port:fontconfig port:freetype port:gnome-doc-utils lib:libjpeg:jpeg \
        lib:libiconv:libiconv lib:libpng:libpng lib:libtiff:tiff port:xrender \
        port:audiofile port:esound port:gnome-keyring port:cairo port:zlib \
	port:gail port:gnome-panel port:libwnck port:libxklavier port:p5-xml-parser \
	port:popt port:startup-notification port:libxklavier-2-2 \
	port:dbus \
	port:dbus-glib

use_bzip2 	yes

patchfiles \
        patch-libgweather-weather.c \
        patch-libgweather-weather-met.c

#patchfiles \
#	patch-Makefile.in \
#	patch-configure \
#	patch-libgweather-weather.c \
#	patch-libgweather-weather-met.c

configure.env	GMSGFMT=${prefix}/bin/msgfmt \
		CFLAGS="-I${prefix}/lib/libxklavier-2.2/include -I${prefix}/include -I/usr/include" \
		CPPFLAGS="-L${prefix}/lib/libxklavier-2.2/lib -I${prefix}/lib/libxklavier-2.2/include -I${prefix}/include -I/usr/include" \
		PKG_CONFIG_PATH="${prefix}/lib/libxklavier-2.2/lib/pkgconfig:${prefix}/lib/pkgconfig:${prefix}/share/pkgconfig"

configure.args  --mandir=${prefix}/share/man \
		--with-gstreamer=0.10 \
		--without-hal \
		--disable-weather \
		--disable-scrollkeeper

post-activate {
	system "scrollkeeper-update"
}
