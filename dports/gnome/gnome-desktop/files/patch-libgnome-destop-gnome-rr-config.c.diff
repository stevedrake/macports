--- libgnome-desktop/gnome-rr-config.c.orig	2008-11-01 15:21:40.000000000 +0100
+++ libgnome-desktop/gnome-rr-config.c	2008-11-01 15:27:04.000000000 +0100
@@ -28,6 +28,7 @@
 #include <string.h>
 #include <glib.h>
 #include <glib/gstdio.h>
+#include <gdk/gdk.h>
 #include "libgnomeui/gnome-rr-config.h"
 #include "edid.h"
 
@@ -58,6 +59,8 @@
  *   </monitors>
  */
 
+#ifndef GDK_WINDOWING_QUARTZ
+
 /* A helper wrapper around the GMarkup parser stuff */
 static gboolean parse_file_gmarkup (const gchar *file,
 				    const GMarkupParser *parser,
@@ -1319,7 +1322,6 @@
 	    }
 	}
     }
-
     return FALSE;
 }
 
@@ -1474,9 +1476,11 @@
     if (success)
     {
 	gnome_rr_screen_set_size (assign->screen, width, height, width_mm, height_mm);
-	
+
 	g_hash_table_foreach (assign->info, configure_crtc, NULL);
     }
 
     return success;
 }
+
+#endif
