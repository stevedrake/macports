--- libgnome-desktop/gnome-rr.c.orig	2008-11-01 15:05:28.000000000 +0100
+++ libgnome-desktop/gnome-rr.c	2008-11-01 15:20:41.000000000 +0100
@@ -26,12 +26,16 @@
 
 #include "libgnomeui/gnome-rr.h"
 #include <string.h>
+#include <gtk/gtk.h>
+#include <gdk/gdk.h>
+#ifndef GDK_WINDOWING_QUARTZ
 #include <X11/Xlib.h>
 #include <X11/extensions/Xrandr.h>
-#include <gtk/gtk.h>
 #include <gdk/gdkx.h>
 #include <X11/Xatom.h>
+#endif
 
+#ifndef GDK_WINDOWING_QUARTZ
 #define DISPLAY(o) ((o)->info->screen->xdisplay)
 
 typedef struct ScreenInfo ScreenInfo;
@@ -1170,3 +1174,4 @@
     g_free (mode->name);
     g_free (mode);
 }
+#endif
