# $Id$
PortSystem 1.0
name		gnome-keyring
version		2.20.0
set branch  [join [lrange [split ${version} .] 0 1] .]
description	GNOME program for storing passwords.
long_description        gnome-keyring is a program that keep \
			password and other secrets forusers. \
			It is run as a damon in the session, \
			similar to ssh-agent, andother applications \
			can locate it by an environment variable.
maintainers	rhwood openmaintainer
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/${name}/${branch}/

checksums       md5 effc946bf3fa05d70b1251801383efd2 \
                sha1 2d0089848d21d78303c19dd32fb5a1505275c5a5 \
                rmd160 e6af5c03eef1a972f5b6d42da8360f2faade253f

depends_lib \
        port:glib2 \
        port:gtk2 \
        port:gettext \
        port:libiconv \
        port:libgcrypt
depends_build \
        port:p5-xml-parser \
        port:pkgconfig

use_bzip2 	yes

configure.cppflags-append "-L${prefix}/lib"

test.run        yes
test.target     check

pre-test {
    if {! [variant_isset test]} {
        return -code 1 "You must enable test variant to test this port."
    }
}

variant test description {Enable build of tests} {
    configure.args-append   --enable-tests
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}

