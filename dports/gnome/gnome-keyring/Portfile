# $Id$
PortSystem 1.0
name		gnome-keyring
version		2.20.1
set branch  [join [lrange [split ${version} .] 0 1] .]
description	GNOME program for storing passwords.
long_description        gnome-keyring is a program that keep \
			password and other secrets forusers. \
			It is run as a damon in the session, \
			similar to ssh-agent, andother applications \
			can locate it by an environment variable.
maintainers	rhwood openmaintainer
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/${name}/${branch}/

checksums       md5 16eb73c4a23db11ee8f20a731cf2a92b \
                sha1 7026d22cd457c99bb0c973a79b7bc0d08430e739 \
                rmd160 770a9633d67b205b61148e5acc6d55d0b3f3d285

depends_lib \
        port:glib2 \
        port:gtk2 \
        port:gettext \
        port:libiconv \
        port:libgcrypt
depends_build \
        port:p5-xml-parser \
        port:pkgconfig

use_bzip2 	yes

configure.cppflags-append "-L${prefix}/lib"

test.run        yes
test.target     check

pre-test {
    if {! [variant_isset test]} {
        return -code 1 "You must enable test variant to test this port."
    }
}

variant test description {Enable build of tests} {
    configure.args-append   --enable-tests
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/${branch}/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}

