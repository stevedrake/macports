# $Id: Portfile,v 1.22 2005/01/16 18:22:10 olegb Exp $
PortSystem 1.0
name		gnome-vfs
version		2.8.2
revision	1
description	This is the GNOME Virtual File System.
long_description        This is the GNOME Virtual File System. \
			GNOME VFS is currently used as one of the \
			foundations of the Nautilus file manager.
maintainers	gnome-darwinports@opendarwin.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gnome-vfs/2.8/
checksums	md5 d2bd8d9a5fb7ddad68c5e878ba269a5c
depends_lib	lib:gnome-mime-magic:gnome-mime-data lib:libiconv.2:libiconv
patchfiles	patch_gnome-vfs-cdrom.c patch_gnome-vfs-utils.c \
		patch_file-metod.c patch_bzip2-method.c patch_pty-open.c
use_bzip2 	yes
configure.args  --mandir=${prefix}/share/man --enable-ipv6 --disable-static
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include"

post-patch {
	reinplace "s|data_dirs = \"/usr|data_dirs = \"${prefix}/share:/usr|g" \
		${worksrcpath}/libgnomevfs/xdgmime.c \
		${worksrcpath}/libgnomevfs/gnome-vfs-mime-info.c \
		${worksrcpath}/libgnomevfs/eggdirfuncs.c
}

platform darwin 7 {
                configure.env-append LDFLAGS="-lresolv" 
}
