# $Id$

PortSystem        1.0
name              gnucash-devel
version		  svn
revision	  0
categories        gnome x11
maintainers       mas@seligma.com
description       a personal and small-business financial-accounting software
long_description  GnuCash is a personal and small-business \
		  financial-accounting software, freely licensed under the \
		  GNU GPL.  Designed to be easy to use, yet powerful and \
		  flexible, GnuCash allows you to track bank accounts, \
		  stocks, income and expenses. As quick and intuitive to \
		  use as a checkbook register, it is based on professional \
		  accounting principles to ensure balanced books and \
		  accurate reports. \
		  GnuCash is supposed to run as root once after initial \
		  installation.  This port does not work around this \
		  decision at the moment. -- \
		  gnucash-devel fetches the current developer version from \
		  subversion, then tries to build and install it.  This \
		  may or may not work.  It cannot be installed along the \
		  regular (stable) version.  If you want to try it, it is \
		  recommended that you `port deactivate gnucash', then \
		  `port install gnucash-devel', so that you can go back \
		  to a working copy in case anything goes wrong.
homepage          http://www.gnucash.org/
depends_lib	  lib:XML/Parser.pm:p5-xml-parser \
		  port:glib1 \
		  port:glib2 \
		  port:gconf \
		  lib:libguile:slib-guile \
		  bin:g-wrap-config:g-wrap \
		  lib:libpopt:popt \
		  lib:libgnomeui:libgnomeui \
		  lib:libgnomeprintui:libgnomeprintui \
		  lib:libgtkhtml-3:libgtkhtml3 \
		  lib:libgsf:libgsf \
		  lib:libgoffice:goffice \
		  port:gnucash-docs
depends_build	  bin:glibtoolize:libtool port:automake bin:swig:swig

fetch.type	  svn
svn.url		  http://svn.gnucash.org/repo/gnucash/trunk/
distname	  trunk

pre-configure {	system "cd ${worksrcpath} && LIBTOOLIZE=glibtoolize ./autogen.sh" }

configure.env	  CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
		  CFLAGS="-L${prefix}/lib -I${prefix}/include" \
		  LDFLAGS=-L${prefix}/lib
configure.args	  --disable-glibtest --disable-debug --disable-profile \
		  --disable-dependency-tracking

variant enable_quotes {
	depends_lib-append	lib:Finance/Quote.pm:p5-finance-quote
}

variant enable_hbci {
	depends_lib-append	lib:aqbanking:aqbanking
	configure.args-append	--enable-hbci
}

variant enable_ofx {
	depends_lib-append	lib:libofx:libofx
	configure.args-append	--enable-ofx
}

variant without_docs {
	depends_lib-delete	port:gnucash-docs
}
