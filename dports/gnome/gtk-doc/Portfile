# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            gtk-doc
version         1.10
revision        2
categories      gnome devel
platforms       darwin freebsd linux
maintainers     nomaintainer
description     documentation tool for gnome libraries

long_description \
    ${description}

homepage        http://www.gnome.org/
master_sites    gnome:sources/${name}/${version}/
use_bzip2       yes

checksums       md5 cbd4be396b0cf8b8ce1fc9b927cdf451 \
                sha1 861c977b011efd1bf91957d1a02fb792f39e5509 \
                rmd160 b7f7563ddec9ff140fc6fc6feea5b7f49cb1ff32

depends_build   port:rarian \
                port:gnome-doc-utils \
                port:pkgconfig \
                port:docbook-xml-4.1.2 \
                port:docbook-xsl

depends_lib     port:libxml2 \
                path:bin/perl:perl5 \
                port:python25

configure.perl ${prefix}/bin/perl
configure.python ${prefix}/bin/python2.5
configure.args  --with-xml-catalog=${prefix}/etc/xml/catalog

# TODO Enable test support.

post-activate {
    ui_debug "Updating scrollkeeper database..."
    system "${prefix}/bin/scrollkeeper-update"
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/?C=M&O=D
livecheck.regex {(\d+(?:\.\d+)*)/}
