# $Id$

PortSystem      1.0

name            gtk-doc
version         1.9
revision        1
categories      gnome devel
platforms       darwin freebsd linux
maintainers     nomaintainer
description     documentation tool for gnome libraries

long_description \
    ${description}

homepage        http://www.gnome.org/
master_sites    gnome:sources/${name}/${version}/
use_bzip2       yes

checksums       md5 bcd002f381385812737a05538eb8b21e \
                sha1 be74d08ddd720ba94321d0212d9f3ebc952e325e \
                rmd160 f72bca3d37c9704fedf98bb9148522d4723ebdf6

depends_build   port:scrollkeeper \
                port:pkgconfig \
                port:docbook-xml-4.1.2 \
                port:docbook-xsl \
                port:perl5.8

depends_lib     port:libxml2

depends_run     port:scrollkeeper \
                port:docbook-xml-4.1.2 \
                port:docbook-xsl \
                port:perl5.8

configure.args  --with-xml-catalog=${prefix}/etc/xml/catalog

# TODO Enable test support.

post-destroot {
    delete ${destroot}${prefix}/var/scrollkeeper
}

post-activate {
    ui_debug "Updating scrollkeeper database..."
    system "${prefix}/bin/scrollkeeper-update"
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/${name}/?C=M&O=D
livecheck.regex {(\d+(?:\.\d+)*)/}
