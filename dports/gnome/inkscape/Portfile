# $Id$

PortSystem 1.0
name		inkscape
version		0.45
revision	0
maintainers	rhwood@macports.org openmaintainer@macports.org
categories	gnome graphics
platforms	darwin
homepage	http://www.inkscape.org

description	Inkscape is an open source SVG editor.
long_description\
	Inkscape is an open source SVG editor with \
	capabilities similar to Illustrator, CorelDraw, \
	Visio, etc. Supported SVG features include basic \
	shapes, paths, text, alpha blending, transforms, \
	gradients, node editing, svg-to-png export, \
	grouping, and more.

master_sites    sourceforge
checksums       md5 82d7cff90a7de42460e65d289e0d4d33 \
		sha1 8a8259509b323277bc47b11d665acec9f2532b79

depends_lib	\
		port:libgnomeprintui \
		port:boehmgc \
		port:gtkmm \
		port:gnome-vfs \
		port:libxslt \
		port:lcms \
		port:dbus \
		port:dbus-glib \
		port:py-xml \
		port:libcroco

post-patch {
	reinplace "s|USE_NLS=yes|USE_NLS=no|g" ${worksrcpath}/configure
}

configure.args	\
	--mandir=${prefix}/share/man \
	--with-xft \
	--with-gnome-print \
	--with-gnome-vfs \
	--with-perl \
	--with-python \
	--enable-lcms \
	--enable-inkboard
configure.env \
	CPPFLAGS="-L${prefix}/lib -I${prefix}/include -no-cpp-precomp" \
	CFLAGS="-flat_namespace -undefined suppress -L${prefix}/lib" \
	LDFLAGS="-L${prefix}/lib"
default_variants \
    disable_debugging

variant disable_debugging conflict enable_debugging {
    # this variant strips the executables saving @200MB of disk space
    # at the cost of not being able to get meaningful debugging information
    # in the event of an application crash
    post-destroot {
        system "strip ${destroot}${prefix}/bin/inkscape"
        system "strip ${destroot}${prefix}/bin/inkview"
    }
}

variant enable_debugging conflicts disable_debugging {
    # does nothing but offer a counter-point to disable_debugging
}
