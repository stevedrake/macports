# $Id: Portfile,v 1.4 2004/05/29 10:12:41 olegb Exp $

PortSystem 1.0
name		libgtkhtml3	
version		3.1.12
description	GTK HTML rendering engine.
long_description	GtkHTML is a lightweight HTML rendering/printing/editing \
			engine. It was originally based on KHTMLW, part of the \
			KDE project, but is now being developed independently.
maintainers	olegb@opendarwin.org
categories	gnome 
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/gtkhtml/3.1/
distname	gtkhtml-${version}
use_bzip2	yes
checksums	md5 42bbd796cab1f1c3de7297cef462823a
depends_lib	lib:libgal:gal2
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
                CFLAGS="-no-cpp-precomp -flat_namespace -undefined suppress" 

post-extract   {
		file copy -force ${worksrcpath}/components/html-editor/spell.h \
			${worksrcpath}/components/html-editor/spellslikahorse.h
		file delete -force ${worksrcpath}/components/html-editor/spell.h 
                reinplace "s|spell.h|spellslikahorse.h |g" \
			${worksrcpath}/components/html-editor/Makefile.in
	        reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/spell.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/control-data.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/control-data.h
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/editor-control-factory.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/engine.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/gnome-gtkhtml-editor.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/menubar.c
		reinplace "s|\"spell.h\"|\"spellslikahorse.h\"|g" \
                        ${worksrcpath}/components/html-editor/popup.c
		}
