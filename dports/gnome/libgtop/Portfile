# $Id$

PortSystem 1.0

name		libgtop
version		2.24.0
revision	1
description	A library for gtop2
long_description \
		This is library for the gtop2, the GNOME 2.0 \
		version of top command. The top command is a tool \
		to display and update information about the top \
		cpu processes.
maintainers	nomaintainer
categories	gnome
platforms	darwin
homepage	http://www.gnome.org/
master_sites    gnome:sources/libgtop/[join [lrange [split ${version} .] 0 1] .]/
checksums	md5     f0e3584b9157d3425184a9e21e3ac482 \
		sha1    934b9a83f8042dbbacdfb02cf85f4078d8b6fd14 \
		rmd160  f007316559118c02acd7f0eafba79b7c8dfd28f3

depends_build   port:autoconf port:automake port:libtool \
                port:pkgconfig port:gtk-doc
depends_lib     path:lib/pkgconfig/glib-2.0.pc:glib2 \
		port:gettext
use_bzip2 	yes

patchfiles	patch-sysdeps_darwin_glibtop_server.h.diff \
			patch-sysdeps_darwin_proclist.c.diff \
			patch-sysdeps_darwin_Makefile.am.diff

post-patch {
    copy ${filespath}/procaffinity.c ${worksrcpath}/sysdeps/darwin/
}

pre-configure {
    system "cd ${worksrcpath} && LIBTOOLIZE=${prefix}/bin/glibtoolize ./autogen.sh"
}

configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
		--disable-static
