# $Id: Portfile,v 1.12 2005/09/12 16:36:58 olegb Exp $
PortSystem 1.0
name		nautilus
version		2.12.0
description	The GNOME filemanager
long_description       	Nautilus is the official file manager for the \
			GNOME desktop. It is designed to be primarly a file manager, \
			but there are support for web and file viewing too.  
maintainers	gnome-darwinports@opendarwin.org
categories	gnome
platforms	darwin 
homepage	http://www.gnome.org/
master_sites    gnome:sources/nautilus/2.12/
checksums	rmd160 61d5c4050900cd50f1933f5ac5813d0092f0e252

depends_lib	lib:libeel-2:eel lib:libexif.12:libexif

use_bzip2 	yes

configure.args  --mandir=${prefix}/share/man
configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" 

post-extract {
	reinplace "s|-no-undefined||g"  \
		${worksrcpath}/libnautilus-private/Makefile.in \
		${worksrcpath}/libnautilus-extension/Makefile.in
}

pre-build {
	reinplace "s|-lesd||g" ${worksrcpath}/libnautilus-extension/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/cut-n-paste-code/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/cut-n-paste-code/widgets/gimphwrapbox/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/cut-n-paste-code/libegg/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/cut-n-paste-code/gsequence/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/libbackground/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/src/file-manager/Makefile
	reinplace "s|-lesd||g" ${worksrcpath}/libnautilus-private/Makefile
}

platform darwin 8 {
	pre-configure {
		reinplace "s|-flat_namespace -undefined suppress||g" \
			${worksrcpath}/configure
	}
}
