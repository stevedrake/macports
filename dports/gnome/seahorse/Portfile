# $Id: Portfile,v 1.11 2006/08/26 10:21:30 rhwood Exp $

PortSystem 1.0
name		seahorse
version		0.8.2
revision		2
description	Seahorse is a Gnome interface for GnuPG.
long_description        Seahorse is a Gnome interface for GnuPG. It's main \
			purpose is to be a PGP/GPG Key Manager, though it has other \
			components including a text editor and file manager.
maintainers	macports-dev@lists.macosforge.org rhwood@macports.org
categories	gnome 
platforms	darwin 
homepage		http://seahorse.sourceforge.net/
master_sites    gnome:sources/seahorse/0.8/
use_bzip2	yes
checksums	md5 24d9a8c3564700d105847934020920bd \
			sha1 d97db00a07f4e059a22e1d304e0cc2142ae4ec36 \
			rmd160 722f060a2d54ff028c7dfcf3e935153ca4996803
depends_lib	\
			port:dbus \
			port:gpgme \
			port:gnome-session
depends_build	\
			port:p5-xml-parser \
			port:shared-mime-info

configure.env   CPPFLAGS="-L${prefix}/lib -I${prefix}/include" \
		LDFLAGS="-L${prefix}/lib -lpth"
configure.args	--disable-update-mime-database
pre-configure {
	reinplace "s|chmod u+s \$(bindir)/seahorse-agent|chmod u+s ${destroot}${prefix}/bin/seahorse-agent|g" \
		${worksrcpath}/agent/Makefile.in
}
post-install {
	system "update-mime-database ${prefix}/share/mime"
}

variant use-sys-deps {
	depends_lib \
		lib:libgpgme:gpgme \
	 	lib:gnome-session:gnome-session
	depends_build \
	 	bin:update-mime-database:shared-mime-data
}
