# $Id: Portfile,v 1.2 2006/04/29 19:48:22 yves Exp $

PortSystem			1.0
name            	gnustep-make
version         	1.12.0
revision            2
categories          gnustep devel cross
platforms       	darwin
maintainers     	yves@opendarwin.org

description     	GNUstep makefile package
long_description \
    The GNUstep makefile package is a simple, powerful and extensible way to \
	write makefiles for a GNUstep-based project.  It allows the user to \
	write a project without having to deal with the complex issues \
	associated with configuration, building, installation, and packaging. \
	It also allows the user to easily create cross-compiled binaries.

master_sites \
    http://ftp.easynet.nl/mirror/GNUstep/pub/gnustep/core/ \
	ftp://ftp.easynet.nl/mirror/GNUstep/pub/gnustep/core/ \
	http://www.peanuts.org/peanuts/Mirrors/GNUstep/gnustep/core/ \
	http://ftpmain.gnustep.org/pub/gnustep/core/ \
	ftp://ftp.gnustep.org/pub/gnustep/core/ \
	http://archive.progeny.com/gnustep/core/ \
	ftp://archive.progeny.com/gnustep/core/

checksums   md5 1883a6387405e51ff4c384fb5cc547a7

depends_lib     port:gcc41

patchfiles  patch-GNUmakefile.in \
            patch-documentation.make \
            patch-palette.make \
            patch-target.make

configure.pre_args  --prefix=${prefix}/GNUstep
configure.args \
    --with-library-combo=gnu-gnu-gnu CC=gcc-dp-4.1 \
    --with-config-file=${prefix}/GNUstep/System/Library/GNUstep.conf

destroot.destdir    special_prefix=${destroot}
destroot.keepdirs   ${destroot}${prefix}/GNUstep/Local

post-destroot {
    xinstall -d ${destroot}${portresourcepath}/group
    xinstall -m 644 ${filespath}/gnustep-1.0.tcl \
        ${destroot}${portresourcepath}/group
}

post-install {
    ui_msg "\n\n\
        To have a fully working GNUstep make system, please add \n\
        '. ${prefix}/GNUstep/System/Library/Makefiles/GNUstep.sh' \n\
        to your shell login (in ~/.profile) \n\
        You may also want to set up your MANPATH and INFOPATH : \n\
        export MANPATH=\$GNUSTEP_LOCAL_ROOT/Library/Documentation/man:\$GNUSTEP_SYSTEM_ROOT/Library/Documentation/man:${prefix}/share/man:/usr/share/man:/usr/X11R6/man \n\
        export INFOPATH=\$GNUSTEP_LOCAL_ROOT/Library/Documentation/info:\$GNUSTEP_SYSTEM_ROOT/Library/Documentation/info:${prefix}/share/info:/usr/share/info \n\n"
}
