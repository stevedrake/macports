# $Id$

PortSystem  1.0
PortGroup   gnustep 1.0

name        gworkspace
version     0.8.5
platforms   darwin
maintainers yves@macports.org
homepage    http://www.gnustep.it/enrico/gworkspace/
description  GNUstep's Workspace Manager.
long_description \
    GWorkspace is a clone of the NeXT workspace manager \
    with some added features as spatial viewing, \
    real-time auditing of the file-system, \
    an advanced database based search system, etc.

depends_lib-append port:system-preferences

master_sites  ${homepage}
checksums     md5 b4de57d8310df98fb4f6e3c752138785

worksrcdir    GWorkspace-${version}

array set gnustep.post_flags {
    DBKit "-lgnustep-base"
    FSNode "-lgnustep-base -lgnustep-gui"
    Inspector "-lgnustep-base -lgnustep-gui -lFSNode"
    Operation "-lgnustep-base -lgnustep-gui"
}

use_configure yes

gnustep.domain  System
post-destroot {
    xinstall -d ${destroot}${prefix}/GNUstep/Local/Applications
    cd ${worksrcpath}/Apps_wrappers
    system "cp -R *.app ${destroot}${prefix}/GNUstep/Local/Applications"
}

variant with_pdfkit {
	depends_lib-append	port:PDFKit
	post-patch {
		reinplace "s|-lOperation|-lOperation -lPDFKit|" \
        	${worksrcpath}/GWorkspace/GNUmakefile.in
	}
}

