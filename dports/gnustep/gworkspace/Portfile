# $Id$

PortSystem  1.0
PortGroup   gnustep 1.0

name        gworkspace
version     0.8.4
platforms   darwin
maintainers yves@macports.org
homepage    http://www.gnustep.it/enrico/gworkspace/
description  GNUstep's Workspace Manager.
long_description \
    GWorkspace is a clone of the NeXT workspace manager \
    with some added features as spatial viewing, \
    real-time auditing of the file-system, \
    an advanced database based search system, etc.

depends_lib-append  port:pdfkit port:system-preferences

master_sites  ${homepage}
checksums     md5 562017f6f2f889203a18586853ca6700

worksrcdir    GWorkspace-${version}

array set gnustep.post_flags {
    DBKit "-lgnustep-base"
    FSNode "-lgnustep-base -lgnustep-gui"
    Inspector "-L../FSNode/FSNode.framework/Versions/Current/. \
        -lgnustep-base -lgnustep-gui -lFSNode"
    Operation "-lgnustep-base -lgnustep-gui"
}

post-patch {
    reinplace "s|ADDITIONAL_TOOL_LIBS +=|ADDITIONAL_LIB_DIRS += -L\$(GNUSTEP_LOCAL_ROOT)/Library/Frameworks|" \
        ${worksrcpath}/GWorkspace/GNUmakefile.preamble
    reinplace "s|-lOperation|-lOperation -lPDFKit|" \
        ${worksrcpath}/GWorkspace/GNUmakefile.in
}
use_configure yes

gnustep.domain  System
post-destroot {
    xinstall -d ${destroot}${prefix}/GNUstep/Local/Applications
    cd ${worksrcpath}/Apps_wrappers
    system "cp -R *.app ${destroot}${prefix}/GNUstep/Local/Applications"
}
