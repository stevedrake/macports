# $Id$

PortSystem		1.0

name			Coin
version			3.1.2
description		cross platform C++ OpenGL scene graph library
long_description	Coin is a high-level 3D graphics library with a   \
	C++ Application Programming Interface. Coin uses scene-graph data \
	structures to render real-time graphics suitable for mostly all   \
	kinds of scientific and engineering visualization applications.

categories		graphics devel
homepage		http://www.coin3d.org/lib/coin/
platforms		darwin
maintainers		css
master_sites		http://ftp.coin3d.org/coin/src/all/
checksums		md5 7282fd27f1b0f70a9d729eae342889d0 \
			sha1 5cf0018da2e67e0fa2858f094bb170acb20f3055 \
			rmd160 8b357238ed8f9d718b240911ee9c6fc7d1881213

depends_lib		port:simage \
			port:xorg-libsm \
			port:xorg-libXext

use_configure		yes
configure.args		--with-simage=${prefix} --mandir=${prefix}/share/man

platform darwin {
	configure.args-append	--disable-framework --enable-darwin-x11
}

variant aqua requires darwin {
	configure.args-delete	--disable-framework --enable-darwin-x11
	configure.args-append	--with-framework=${destroot}/Library/Frameworks  --without-x
	depends_lib-delete	port:xorg-libsm \
				port:xorg-libXext
}

variant devel description {Activate developer features, including debug libraries.} {
	configure.args-append	--enable-next-minor --enable-debug
}

variant manpages description {Include API documentation in manpages.} {
	depends_build-append	port:doxygen
	configure.args-append	--enable-man --mandir=${prefix}/share/man
	post-destroot {
		file rename ${destroot}${prefix}/share/man/man3/threads.3 \
			${destroot}${prefix}/share/man/man3/threads-coin.3
		file rename ${destroot}${prefix}/share/man/man3/manips.3 \
			${destroot}${prefix}/share/man/man3/manips-coin.3
	}
}

variant threadsafe description {Allow threadsafe scene graph traversals.} {
	configure.args-append	--enable-threadsafe
}
