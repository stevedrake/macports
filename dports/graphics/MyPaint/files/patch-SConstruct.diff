--- SConstruct.orig	2011-11-22 14:27:03.000000000 -0600
+++ SConstruct	2011-11-24 21:28:56.000000000 -0600
@@ -6,7 +6,7 @@
 
 # FIXME: sometimes it would be good to build for a different python
 # version than the one running scons. (But how to find all paths then?)
-python = 'python%d.%d' % (sys.version_info[0], sys.version_info[1])
+python = 'python2.6'
 print 'Building for', python
 
 if sys.platform == "win32":
@@ -21,10 +21,7 @@
 
 SConsignFile() # no .scsonsign into $PREFIX please
 
-if sys.platform == "darwin":
-    default_prefix = '/opt/local/'
-else:
-    default_prefix = '/usr/local/'
+default_prefix = '@PREFIX@/'
 
 opts = Variables()
 opts.Add(PathVariable('prefix', 'autotools-style installation prefix', default_prefix, validator=PathVariable.PathIsDirCreate))
@@ -51,9 +48,6 @@
     from distutils import sysconfig
     pre,inc = sysconfig.get_config_vars('exec_prefix', 'INCLUDEPY')
     env.Append(CPPPATH=inc, LIBPATH=pre+'\libs', LIBS='python'+sys.version[0]+sys.version[2])
-elif sys.platform == "darwin":
-    env.ParseConfig('python-config --cflags')
-    env.ParseConfig('python-config --ldflags')
 else:
     # some distros use python2.5-config, others python-config2.5
     try:
@@ -81,7 +75,7 @@
 
 def burn_python_version(target, source, env):
     # make sure we run the python version that we built the extension modules for
-    s =  '#!/usr/bin/env ' + python + '\n'
+    s =  '#!@PREFIX@/bin/' + python + '\n'
     s += 5*'#\n'
     s += '# DO NOT EDIT - edit %s instead\n' % source[0]
     s += 5*'#\n'
