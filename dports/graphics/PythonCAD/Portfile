# $Id: Portfile,v 1.4 2004/04/29 20:05:25 blb Exp $

PortSystem			1.0
name				PythonCAD
version				DS1-R13
categories			graphics x11 python
maintainers			blb@pobox.com
description			Python-based CAD package
long_description \
	PythonCAD is an open-source CAD package designed around Python. As \
	such, it aims to be a fully scriptable and customizable CAD program. It \
	is initially designed to run under Linux, one of the BSD flavors, or Unix.

homepage			http://www.pythoncad.org/
master_sites		${homepage}/releases/

platforms			darwin
use_bzip2			yes
checksums			md5 f54669c3fad433748a17adc9ba312386

depends_lib			lib:XXX:py-gtk2

post-patch {
	reinplace "s|#!/usr/bin/env python|#!${prefix}/bin/python|" \
		${worksrcpath}/gtkpycad.py
}

use_configure		no

build.cmd			${prefix}/bin/python setup.py
build.target		build

destroot.cmd		${build.cmd}
destroot.destdir	--prefix=${destroot}/${prefix}
post-destroot {
	xinstall -m 755 -W ${worksrcpath} gtkpycad.py ${destroot}/${prefix}/bin
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} NEWS PKG-INFO INSTALL README prefs.py \
		${destroot}/${prefix}/share/doc/${name}
}

