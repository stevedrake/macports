# $Id: Portfile,v 1.1 2004/10/16 12:58:54 olegb Exp $

PortSystem		1.0
name            	ale
version         	0.7.1

description     	antilamenessing engine
long_description	ALE is a free software program that renders \
			high-fidelity images of real scenes by aligning \
			and combining many similar images from a camera \
			or scanner. The correct similarity between images \
			is roughly that achieved by a somewhat unsteady \
			hand holding a camera.
homepage		http://auricle.dyndns.org/ALE/
platforms       	darwin
categories      	graphics
maintainers     	shadow@dementia.org
master_sites		http://auricle.dyndns.org/ALE/download/:ale \
			http://auricle.dyndns.org/ALE/bugs/:alepatch
distfiles		ale-${version}.tar.gz:ale \
			ale-${version}.patch1:alepatch \
			ale-${version}.patch2:alepatch 

configure		{}
extract.only		ale-${version}.tar.gz 
worksrcdir		ale-${version}
checksums		ale-${version}.tar.gz md5 90b39eed7e03afbee8ff071762bca78b \
			ale-${version}.patch1 md5 7f22fc0f2d5cd0f4943df285684704b1 \
			ale-${version}.patch2 md5 c99d2346c13ccf367d308779b41984fd 

pre-patch {
        # Additional patches for rtems.
        system "cd ${workpath}/ale-${version} && \
                patch -p1 < ${distpath}/ale-${version}.patch1"
        system "cd ${workpath}/ale-${version} && \
                patch -p1 < ${distpath}/ale-${version}.patch2"
}

depends_lib		lib:Magick:ImageMagick 

build.args		IMAGEMAGICK=1 

destroot        {
	xinstall -m 755 -d ${destroot}${prefix}/bin
	xinstall -s -m 755 ${worksrcpath}/ale ${destroot}${prefix}/bin/
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
        xinstall -m 644 -W ${worksrcpath} Changelog COPYING README \
                ${destroot}${prefix}/share/doc/${name}
}
