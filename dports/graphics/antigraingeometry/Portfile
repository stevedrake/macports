# $Id$

PortSystem          1.0
name                antigraingeometry
version             2.5
categories          graphics devel
maintainers         nomaintainer@macports.org
description         A high quality rendering engine for C++
long_description \
    Anti-Grain Geometry (AGG) is a general purpose graphical toolkit \
    written completely in standard and platform independent C++.  It can be \
    used in many areas of computer programming where high quality 2D \
    graphics is an essential part of the project.  For example, if you \
    render 2D geographic maps AGG is a must.  AGG uses only C++ and standard \
    C runtime functions, such as memcpy, sin, cos, sqrt, etc.  The basic \
    algorithms don't even use C++ Standard Template Library.  Thus, AGG can \
    be used in a very large number of applications, including embedded \
    systems.

platforms           darwin

homepage            http://www.antigrain.com/
master_sites        ${homepage}
distname            agg-${version}

checksums           md5 ddc67cbdc7d51e1ec984c2ac2724c08a \
                    sha1 9d49403027cd2444aa72c557c58c236b201adf43 \
                    rmd160 62cfda6a73e49d82e2fc857544564d493d655c3d

depends_lib         port:freetype lib:libX11:XFree86
depends_build       port:automake port:autoconf port:pkgconfig

# These patchfiles hack out sdl support, it can't be done with a
# configure flag because of some autoconf/automake issues...
patchfiles          configure.in.diff src-platform-Makefile.am.diff

use_autoconf        yes
use_automake        yes
automake.args       --foreign --add-missing --ignore-deps

pre-configure {
    cd ${worksrcpath}
    system "autoheader"
    if {[variant_isset darwin]} {
        system "aclocal -I /usr/share/aclocal"
        system "glibtoolize --force"
    } else {
        system "aclocal"
        system "libtoolize --force"
    }
}

configure.env       CXXFLAGS=-I${prefix}/include

# Empty so it gets set for pre-configure
variant darwin {
}

variant sdl {
    patchfiles-delete   configure.in.diff src-platform-Makefile.am.diff
    depends_lib-append  port:libsdl
}
