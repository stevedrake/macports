# $Id$

PortSystem	1.0

name		asymptote
version		1.51
categories	graphics
maintainers	loshea@gmail.com
description	a vector graphics language
long_description Asymptote is a powerful descriptive \
                 vector graphics language that provides a natural \
                 coordinate-based framework for technical drawing. \
                 Labels and equations are typeset with LaTeX, for \
                 high-quality PostScript output.
homepage	http://asymptote.sourceforge.net
platforms	darwin
configure.args  --with-latex=${prefix}/share/texmf-local/tex/latex \
                --mandir=${prefix}/share/man
distfiles	${distname}.src.tgz:main gc-7.1.tar.gz:gc
master_sites	sourceforge::main \
  http://www.hpl.hp.com/personal/Hans_Boehm/gc/gc_source:gc
checksums	${distname}.src.tgz md5 14c7bfd713adb3d2b70a202228bb7d8d \
		gc-7.1.tar.gz          md5 2ff9924c7249ef7f736ecfe6f08f3f9b
depends_lib	port:readline \
                port:texlive \
                port:ghostscript \
                port:fftw-3 \
                port:gsl \
                port:libsigsegv \
                port:ncurses
extract.only	${distname}.src.tgz

post-extract {
  file copy ${distpath}/gc-7.1.tar.gz ${worksrcpath}
}

# Already fixed upstream, can be removed after next version.
patchfiles-append patch-leopard.diff

post-activate {
  # run `mktexlsr` to make sure the asymptote files are found:
  system "mktexlsr"
}
