# $Id: Portfile,v 1.1 2005/12/04 11:58:34 pkern Exp $

PortSystem 1.0
name		cairo-devel
version		1.2.0
categories	graphics
maintainers	pkern@opendarwin.org
description	Cairo is a vector graphics library with cross-device \
		output support.
long_description \
		${description} It is designed to produce identical \
		output on all output media while taking advantage of \
		display hardware acceleration when available \
		(eg. through the X Render Extension).
homepage	http://cairographics.org/
platforms	darwin

fetch.type	cvs
cvs.root	:pserver:anoncvs@cvs.cairographics.org:/cvs/cairo
cvs.module	cairo
worksrcdir	cairo

# We are building a CVS checkout, so we need to build the configure script
# on our own...
depends_build	port:autoconf port:automake port:libtool
configure.cmd	"LIBTOOLIZE='${prefix}/bin/glibtoolize' ./autogen.sh"
configure.args	--disable-xlib --enable-atsui --enable-quartz

depends_lib	lib:libpixman.1:libpixman port:fontconfig \
		port:freetype lib:libpng:libpng port:zlib \
		lib:libexpat:expat

post-configure {
	reinplace "s/-dynamiclib/-dynamiclib -flat_namespace/" ${worksrcpath}/libtool

	reinplace "s/#error Not yet implemented//g" ${worksrcpath}/test/cairo-test.c
}

