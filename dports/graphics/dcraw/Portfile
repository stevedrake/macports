# $Id: Portfile,v 1.11 2006/03/31 08:05:09 blb Exp $

PortSystem			1.0
name				dcraw
version				8.10
categories			graphics
maintainers			blb@opendarwin.org
description			Raw Digital Photo Decoding, supporting 205 cameras
long_description	${description}

platforms			darwin

homepage			http://www.cybercom.net/~dcoffin/dcraw/
# dcraw is provided as raw source and man page (no tarball/zipfile), so
# a tarball is placed here to avoid the regular checksum issues when the .c
# file is updated to a new version
master_sites		http://www.opendarwin.org/~blb/
use_bzip2			yes

checksums			md5 902142155dbd5e12297caacfd40bce93 \
					sha1 cc11e3928f1223422358ff628d8eed0b4b8e9045 \
					rmd160 e4d1a3a72a5ff6a52f971752d5f90eeffe2cc43b

depends_lib			port:jpeg port:lcms

use_configure		no

build {
	cd ${worksrcpath}
	system "cc -o dcraw -O3 dcraw.c -ljpeg -llcms -I${prefix}/include \
		-L${prefix}/lib"
}

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/bin \
		${destroot}${prefix}/share/man/man1
	xinstall -m 755 -W ${worksrcpath} dcraw ${destroot}${prefix}/bin
	xinstall -m 644 -W ${worksrcpath} dcraw.1 \
		${destroot}${prefix}/share/man/man1
}

