# $Id$

PortSystem 1.0

name             exiv2
version          0.20
homepage         http://www.exiv2.org/
description      EXIF and IPTC metadata manipulation library and tools
categories       graphics
platforms        darwin
maintainers      vafer.org:tcurdt openmaintainer

master_sites     http://www.exiv2.org/

checksums           md5     3173d08a4313dc94b7bd1b7cdbda2093 \
                    sha1    3ebab0acd114a463fe11881bd95f1c3e258c7c0c \
                    rmd160  f318cc45e0b512cbe508c19bf5bee7397b0ba15a

long_description Exiv2 comprises of a C++ library and a command line utility \
                 which allows you to manipulate EXIF and IPTC image metadata.

configure.ccache no

configure.args   --with-libiconv-prefix=${prefix}	\
                 --with-libintl-prefix=${prefix}	\
                 --with-zlib=${prefix}				\
                 --with-expat=${prefix}

depends_build    port:libtool

depends_lib      port:expat \
                 port:gettext \
                 port:libiconv \
                 port:zlib

destroot.destdir prefix=${destroot}${prefix}

post-configure {
	# It's too much of a PITA to autoreconf
	delete ${worksrcpath}/libtool
	ln -s ${prefix}/bin/glibtool ${worksrcpath}/libtool
	reinplace -E {s|-arch [a-z0-9_]+||g} ${worksrcpath}/config/exiv2.pc
}

livecheck.regex "(?i)<title>${name} (\\d+(?:\\.\\d+)*)</title>"
