# $Id: Portfile,v 1.29 2006/07/09 15:44:06 takanori Exp $

PortSystem		1.0
name			fontconfig
version			2.3.2
revision		2
categories		graphics
maintainers		blb@opendarwin.org
description		An XML-based font configuration API for X Windows
long_description \
	Fontconfig is a library for configuring and customizing font access.

platforms		darwin

homepage		http://fontconfig.org/
master_sites	${homepage}release/

checksums		md5 7354f9f125ea78a8f2851cb9c31d4866

depends_lib		port:expat port:freetype

configure.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.args	--mandir=${prefix}/share/man \
				--with-add-fonts=${x11prefix}/lib/X11/fonts

post-activate	{
	system "${prefix}/bin/fc-cache -fv /usr/share/fonts /Library/Fonts /System/Library/Fonts ${x11prefix}/lib/X11/fonts ${prefix}/share/fonts"
}

variant vera {
	depends_build-append	path:${prefix}/share/fonts/Vera.ttf:bitstream-vera
	post-destroot {
		xinstall -m 644 ${prefix}/share/doc/bitstream-vera/local.conf \
			${destroot}/${prefix}/etc/fonts
	}
}

platform macosx {
	configure.args-delete	--with-add-fonts=${x11prefix}/lib/X11/fonts
	configure.args-append	--with-add-fonts=/Library/Fonts,/Network/Library/Fonts,/System/Library/Fonts,${x11prefix}/lib/X11/fonts,${prefix}/share/fonts
}

