# $Id$

PortSystem			1.0
name				fontforge
version				20060125
categories			graphics fonts
maintainers			darwinports@opendarwin.org
description			Outline and bitmap font editor/converter for many formats
long_description \
	FontForge allows you to edit outline and bitmap fonts.  You may create \
	new ones or modify old ones.  It is also a format converter and can \
	interconvert between PostScript (ascii & binary Type1, some Type3, \
	some Type0), TrueType, OpenType (Type2), CID, SVG.  Previously known as \
	pfaedit.

platforms			darwin

homepage			http://fontforge.sourceforge.net/
master_sites		${homepage}
distname			${name}_full-${version}
use_bzip2			yes

checksums			md5 831ac5225b1a9b00b0b7bcf622c62fee

worksrcdir			${name}-${version}

depends_lib			port:libpng port:libungif port:tiff port:jpeg \
					port:libuninameslist port:freetype port:gettext \
					lib:libX11:XFree86

patchfiles			patch-configure patch-Makefile.dynamic.in \
					patch-gdraw_Makefile.dynamic.in \
					patch-fontforge_Makefile.dynamic.in \
					patch-Unicode_Makefile.dynamic.in patch-po_Makefile.in
post-patch {
	reinplace "s|@@PREFIX@@|${prefix}|g" ${worksrcpath}/configure
}

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--mandir=${prefix}/share/man

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHORS INSTALL LICENSE README-Mac.html \
		README-Unix.html README-unix ${destroot}/${prefix}/share/doc/${name}
}

variant svg {
	depends_lib-append		port:libxml2
	configure.args-append	--with-multilayer
}

