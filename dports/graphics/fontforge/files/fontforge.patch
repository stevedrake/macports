diff -Naur fontforge-20070511.orig/Makefile.dynamic.in fontforge-20070511/Makefile.dynamic.in
--- fontforge-20070511.orig/Makefile.dynamic.in	2006-11-21 05:09:56.000000000 +0900
+++ fontforge-20070511/Makefile.dynamic.in	2007-05-13 15:35:31.000000000 +0900
@@ -92,7 +92,6 @@
 	$(INSTALL_DATA) $(srcdir)/fontforge/fontimage.1 $(mandir)/man1
 #explicit use of sh to make sure we don't invoke csh with different "if" syntax
 	sh -c "if test -d $(srcdir)/htdocs >/dev/null ; then $(MAKE) install_docs ; fi"
-	sh < systemspecific
 
 uninstall:
 	-rm $(bindir)/fontforge
diff -Naur fontforge-20070511.orig/configure fontforge-20070511/configure
--- fontforge-20070511.orig/configure	2007-04-30 10:53:16.000000000 +0900
+++ fontforge-20070511/configure	2007-05-13 15:35:31.000000000 +0900
@@ -2664,7 +2664,7 @@
 
 fi;
 
-LDFLAGS="$LDFLAGS -L/usr/local/lib"
+LDFLAGS="$LDFLAGS"
 
 case "$host" in
 *-apple-darwin*)
@@ -2684,9 +2684,9 @@
  gww_define_caps_for_alt="1"
 
 
- CPPFLAGS="$CPPFLAGS -I/sw/include"
- LDFLAGS="$LDFLAGS -L/sw/lib"
- gww_rpath="-rpath /sw/lib"
+ CPPFLAGS="$CPPFLAGS -I@@PREFIX@@/include"
+ LDFLAGS="$LDFLAGS -L@@PREFIX@@/lib"
+ gww_rpath="-rpath @@PREFIX@@/lib"
  LIBS="-Wl,/System/Library/Frameworks/CoreServices.framework/CoreServices $LIBS"
 
  ;;
@@ -19075,46 +19075,25 @@
 
 fi
 
-echo "$as_me:$LINENO: checking for /usr/include/libxml2/libxml" >&5
-echo $ECHO_N "checking for /usr/include/libxml2/libxml... $ECHO_C" >&6
-if test "${ac_cv_file__usr_include_libxml2_libxml+set}" = set; then
+ echo "$as_me:$LINENO: checking for @@PREFIX@@/include/libxml2/libxml" >&5
+echo $ECHO_N "checking for @@PREFIX@@/include/libxml2/libxml... $ECHO_C" >&6
+if test "${ac_cv_file__opt_local_include_libxml2_libxml+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   test "$cross_compiling" = yes &&
   { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
 echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
    { (exit 1); exit 1; }; }
-if test -r "/usr/include/libxml2/libxml"; then
-  ac_cv_file__usr_include_libxml2_libxml=yes
+if test -r "@@PREFIX@@/include/libxml2/libxml"; then
+  ac_cv_file__opt_local_include_libxml2_libxml=yes
 else
-  ac_cv_file__usr_include_libxml2_libxml=no
+  ac_cv_file__opt_local_include_libxml2_libxml=no
 fi
 fi
-echo "$as_me:$LINENO: result: $ac_cv_file__usr_include_libxml2_libxml" >&5
-echo "${ECHO_T}$ac_cv_file__usr_include_libxml2_libxml" >&6
-if test $ac_cv_file__usr_include_libxml2_libxml = yes; then
-  CFLAGS="$CFLAGS -I/usr/include/libxml2/"
-else
-
- echo "$as_me:$LINENO: checking for /usr/local/include/libxml2/libxml" >&5
-echo $ECHO_N "checking for /usr/local/include/libxml2/libxml... $ECHO_C" >&6
-if test "${ac_cv_file__usr_local_include_libxml2_libxml+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  test "$cross_compiling" = yes &&
-  { { echo "$as_me:$LINENO: error: cannot check for file existence when cross compiling" >&5
-echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
-   { (exit 1); exit 1; }; }
-if test -r "/usr/local/include/libxml2/libxml"; then
-  ac_cv_file__usr_local_include_libxml2_libxml=yes
-else
-  ac_cv_file__usr_local_include_libxml2_libxml=no
-fi
-fi
-echo "$as_me:$LINENO: result: $ac_cv_file__usr_local_include_libxml2_libxml" >&5
-echo "${ECHO_T}$ac_cv_file__usr_local_include_libxml2_libxml" >&6
-if test $ac_cv_file__usr_local_include_libxml2_libxml = yes; then
-  CFLAGS="$CFLAGS -I/usr/local/include -I/usr/local/include/libxml2/"
+echo "$as_me:$LINENO: result: $ac_cv_file__opt_local_include_libxml2_libxml" >&5
+echo "${ECHO_T}$ac_cv_file__opt_local_include_libxml2_libxml" >&6
+if test $ac_cv_file__opt_local_include_libxml2_libxml = yes; then
+  CFLAGS="$CFLAGS -I@@PREFIX@@/include -I@@PREFIX@@/include/libxml2/"
 else
   cat >>confdefs.h <<\_ACEOF
 #define _NO_LIBXML 1
@@ -19122,9 +19101,6 @@
 
 fi
 
-fi
-
-
 
 echo "$as_me:$LINENO: checking for DGifOpenFileName in -lgif" >&5
 echo $ECHO_N "checking for DGifOpenFileName in -lgif... $ECHO_C" >&6
diff -Naur fontforge-20070511.orig/fontforge/start.c fontforge-20070511/fontforge/start.c
--- fontforge-20070511.orig/fontforge/start.c	2007-05-08 05:33:23.000000000 +0900
+++ fontforge-20070511/fontforge/start.c	2007-05-13 15:39:46.000000000 +0900
@@ -207,7 +207,6 @@
     /*  install image libs. For some reason fink installs in a place */
     /*  the dynamic loader doesn't find */
     /* (And fink's attempts to set the PATH variables generally don't work */
-    setenv("DYLD_LIBRARY_PATH","/sw/lib",0);
 #endif
 }
 
diff -Naur fontforge-20070511.orig/gdraw/dynamic.c fontforge-20070511/gdraw/dynamic.c
--- fontforge-20070511.orig/gdraw/dynamic.c	2007-01-05 00:49:03.000000000 +0900
+++ fontforge-20070511/gdraw/dynamic.c	2007-05-13 15:35:31.000000000 +0900
@@ -140,8 +140,8 @@
     if (( lib!=NULL && lib!=(void *) -1) || name==NULL || *name=='/' )
 return( lib );
 
-    temp = galloc( strlen("/sw/lib/") + strlen(name) +1 );
-    strcpy(temp,"/sw/lib/");
+    temp = galloc( strlen("@@PREFIX@@/lib/") + strlen(name) +1 );
+    strcpy(temp,"@@PREFIX@@/lib/");
     strcat(temp,name);
     lib = NSAddImage(temp,options);
     free(temp);
