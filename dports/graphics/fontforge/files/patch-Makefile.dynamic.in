--- Makefile.dynamic.in.orig	2005-04-19 10:36:16.000000000 -0600
+++ Makefile.dynamic.in	2005-06-11 18:34:10.000000000 -0600
@@ -14,6 +14,8 @@
 LIBTOOL = @LIBTOOL@
 INSTALL = @INSTALL@
 
+DESTDIR=
+
 all: fontforge
 
 libs: libgunicode libgdraw
@@ -42,53 +44,53 @@
 
 install_libs: libs
 # You may need to be root to do the install
-	mkdir -p $(libdir)
+	mkdir -p $(DESTDIR)$(libdir)
 	#-rm $(libdir)/libgdraw.so* $(libdir)/libgunicode.so.*
-	$(LIBTOOL) $(INSTALL) -c libgdraw.la $(libdir)/libgdraw.la
-	$(LIBTOOL) $(INSTALL) -c libgunicode.la $(libdir)/libgunicode.la
+	$(LIBTOOL) $(INSTALL) -c libgdraw.la $(DESTDIR)$(libdir)/libgdraw.la
+	$(LIBTOOL) $(INSTALL) -c libgunicode.la $(DESTDIR)$(libdir)/libgunicode.la
 	#cp .libs/*.so.*.* $(libdir)
-	$(LIBTOOL) --finish $(libdir)
-	mkdir -p $(libdir)/pkgconfig
-	$(LIBTOOL) $(INSTALL) -c fontforge.pc $(libdir)/pkgconfig
+	$(LIBTOOL) --finish $(DESTDIR)$(libdir)
+	mkdir -p $(DESTDIR)$(libdir)/pkgconfig
+	$(LIBTOOL) $(INSTALL) -c fontforge.pc $(DESTDIR)$(libdir)/pkgconfig
 
 install_docs:
-	mkdir -p $(docdir)
-	mkdir $(docdir)/flags
+	mkdir -p $(DESTDIR)$(docdir)
+	mkdir $(DESTDIR)$(docdir)/flags
 #explicit use of sh to make sure we don't invoke csh with different "if" syntax
-	-sh -c "if test -d htdocs/ja >/dev/null ; then mkdir -p $(docdir)/ja ; fi"
-	-cp htdocs/*.{html,png,gif,pdf} $(docdir)
-	-cp htdocs/flags/* $(docdir)/flags
-	-cp htdocs/ja/* $(docdir)/ja
+	-sh -c "if test -d htdocs/ja >/dev/null ; then mkdir -p $(DESTDIR)$(docdir)/ja ; fi"
+	-cp htdocs/*.{html,png,gif,pdf} $(DESTDIR)$(docdir)
+	-cp htdocs/flags/* $(DESTDIR)$(docdir)/flags
+	-cp htdocs/ja/* $(DESTDIR)$(docdir)/ja
 
-install: $(sharedir) all install_libs
+install: $(DESTDIR)$(sharedir) all install_libs
 # You may need to be root to do the install
-	mkdir -p $(bindir)
-	mkdir -p $(mandir)/man1
-	mkdir -p $(sharedir)
-	$(LIBTOOL) $(INSTALL) -c fontforge/fontforge $(bindir)
-	$(LIBTOOL) $(INSTALL) -c fontforge/sfddiff $(bindir)
-	-rm -f $(bindir)/pfaedit
-	(cd $(bindir) ; ln -s fontforge pfaedit)
-	cp fontforge/pfaedit-*.ui $(sharedir)
+	mkdir -p $(DESTDIR)$(bindir)
+	mkdir -p $(DESTDIR)$(mandir)/man1
+	mkdir -p $(DESTDIR)$(sharedir)
+	$(LIBTOOL) $(INSTALL) -c fontforge/fontforge $(DESTDIR)$(bindir)
+	$(LIBTOOL) $(INSTALL) -c fontforge/sfddiff $(DESTDIR)$(bindir)
+	-rm -f $(DESTDIR)$(bindir)/pfaedit
+	(cd $(DESTDIR)$(bindir) ; ln -s fontforge pfaedit)
+	cp fontforge/pfaedit-*.ui $(DESTDIR)$(sharedir)
 #The next line will fail for most installs. If you have downloaded the cidmaps
 # this will install them. If you haven't it won't. You only need the cidmaps
 # if you are editing CID keyed files (and even then you can live without them
-	-cp $(srcdir)/cidmap/*.cidmap $(sharedir) >/dev/null 2>&1
-	cp $(srcdir)/fontforge/fontforge.1 $(mandir)/man1
-	cp $(srcdir)/fontforge/sfddiff.1 $(mandir)/man1
+	-cp $(srcdir)/cidmap/*.cidmap $(DESTDIR)$(sharedir) >/dev/null 2>&1
+	cp $(srcdir)/fontforge/fontforge.1 $(DESTDIR)$(mandir)/man1
+	cp $(srcdir)/fontforge/sfddiff.1 $(DESTDIR)$(mandir)/man1
 #explicit use of sh to make sure we don't invoke csh with different "if" syntax
 	sh -c "if test -d htdocs >/dev/null ; then $(MAKE) install_docs ; fi"
 
 uninstall:
-	-rm $(bindir)/fontforge
-	-rm $(bindir)/sfddiff
-	-rm $(sharedir)/pfaedit-*.ui
-	-rm $(mandir)/man1/fontforge.1
-	-rm $(mandir)/man1/sfddiff.1
-	-rm $(libdir)/libgdraw.so*
-	-rm $(libdir)/libgunicode.so*
-	-rm $(sharedir)/*.cidmap
-	-rm -rf $(docdir)/*
+	-rm $(DESTDIR)$(bindir)/fontforge
+	-rm $(DESTDIR)$(bindir)/sfddiff
+	-rm $(DESTDIR)$(sharedir)/pfaedit-*.ui
+	-rm $(DESTDIR)$(mandir)/man1/fontforge.1
+	-rm $(DESTDIR)$(mandir)/man1/sfddiff.1
+	-rm $(DESTDIR)$(libdir)/libgdraw.so*
+	-rm $(DESTDIR)$(libdir)/libgunicode.so*
+	-rm $(DESTDIR)$(sharedir)/*.cidmap
+	-rm -rf $(DESTDIR)$(docdir)/*
 
-$(sharedir):
-	mkdir -p $(sharedir)
+$(DESTDIR)$(sharedir):
+	mkdir -p $(DESTDIR)$(sharedir)
