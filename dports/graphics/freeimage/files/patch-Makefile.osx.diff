Index: Makefile.osx
===================================================================
RCS file: /cvsroot/freeimage/FreeImage/Makefile.osx,v
retrieving revision 1.9
diff -d -u -r1.9 Makefile.osx
--- Makefile.osx	11 Dec 2006 14:30:13 -0000	1.9
+++ Makefile.osx	31 Dec 2006 03:22:16 -0000
@@ -5,23 +5,23 @@
 include Makefile.srcs
 
 # General configuration variables:
-CC_PPC = gcc-3.3
+CC_PPC = gcc-4.0
 CC_I386 = gcc-4.0
-CPP_PPC = g++-3.3
+CPP_PPC = g++-4.0
 CPP_I386 = g++-4.0
-COMPILERFLAGS = -O3
+COMPILERFLAGS = -Os
 COMPILERFLAGS_PPC = -arch ppc
 COMPILERFLAGS_I386 = -arch i386
 COMPILERPPFLAGS = -Wno-ctor-dtor-privacy
 INCLUDE += 
-INCLUDE_PPC = -nostdinc -isystem /Developer/SDKs/MacOSX10.3.9.sdk/usr/include/gcc/darwin/3.3 -isystem /Developer/SDKs/MacOSX10.3.9.sdk/usr/include -I/Developer/SDKs/MacOSX10.3.9.sdk/usr/include/gcc/darwin/3.3/c++ -I/Developer/SDKs/MacOSX10.3.9.sdk/usr/include/gcc/darwin/3.3/c++/ppc-darwin
+INCLUDE_PPC = -isysroot /Developer/SDKs/MacOSX10.3.9.sdk
 INCLUDE_I386 = -isysroot /Developer/SDKs/MacOSX10.4u.sdk
 CFLAGS_PPC = $(COMPILERFLAGS) $(COMPILERFLAGS_PPC) $(INCLUDE) $(INCLUDE_PPC)
 CFLAGS_I386 = $(COMPILERFLAGS) $(COMPILERFLAGS_I386) $(INCLUDE) $(INCLUDE_I386)
 CPPFLAGS_PPC = $(COMPILERPPFLAGS) $(CFLAGS_PPC)
 CPPFLAGS_I386 = $(COMPILERPPFLAGS) $(CFLAGS_I386)
-LIBRARIES_PPC = -L/Developer/SDKs/MacOSX10.3.9.sdk/usr/lib/gcc/darwin/3.3 -lc -lgcc -lstdc++
-LIBRARIES_I386 = -L/Developer/SDKs/MacOSX10.4u.sdk/usr/lib/gcc/i686-apple-darwin8/4.0.0 -lc -lgcc -lstdc++
+LIBRARIES_PPC = -Wl,-syslibroot /Developer/SDKs/MacOSX10.3.9.sdk
+LIBRARIES_I386 = -Wl,-syslibroot /Developer/SDKs/MacOSX10.4u.sdk
 LIBTOOL = libtool
 LIPO = lipo
 
@@ -65,10 +65,10 @@
 	$(LIPO) -create $(SHAREDLIB)-ppc $(SHAREDLIB)-i386 -output $(SHAREDLIB)
 
 $(SHAREDLIB)-ppc: $(MODULES_PPC)
-	$(LIBTOOL) -arch_only ppc -dynamic $(LIBRARIES_PPC) -o $@ $(MODULES_PPC)
+	$(CPP_PPC) -arch ppc -dynamiclib $(LIBRARIES_PPC) -o $@ $(MODULES_PPC)
 
 $(SHAREDLIB)-i386: $(MODULES_I386)
-	$(CPP_I386) -arch_only i386 -dynamiclib $(LIBRARIES_I386) -o $@ $(MODULES_I386)
+	$(CPP_I386) -arch i386 -dynamiclib $(LIBRARIES_I386) -o $@ $(MODULES_I386)
 
 .c.o-ppc:
 	$(CC_PPC) $(CFLAGS_PPC) -c $< -o $@
