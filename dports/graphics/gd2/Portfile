# $Id$

PortSystem 1.0
name            gd2
version         2.0.34
categories      graphics
maintainers     ryandesign openmaintainer@macports.org
description     GD creates PNG and JPEG images, among other formats
long_description    gd is a graphics library. It allows your code to \
            quickly draw images complete with lines, arcs, text, \
            multiple colors, cut and paste from other images, and \
            flood fills, and write out the result as a .PNG file. \
            This is particularly useful in World Wide Web applications, \
            where .PNG is the format used for inline images. \
            gd is not a paint program. If you are looking for a paint \
            program, you are looking in the wrong place. \
            If you are not a programmer, you are looking in the wrong \
            place. 
homepage        http://www.libgd.org/
platforms       darwin

master_sites    ${homepage}releases/ \
                ${homepage}releases/oldreleases/
distname        gd-${version}
use_bzip2       yes
checksums       md5 8c25c322f12030b1c24488efd577fec0

depends_lib     port:zlib \
                port:libpng \
                port:jpeg \
                port:freetype \
                port:fontconfig \
                port:libiconv \
                port:expat \
                lib:libX11.6:XFree86

patchfiles      gdft.c.diff

platform darwin 6 {
    depends_lib lib:libdl:dlcompat
}

platform darwin {
	post-configure {
		reinplace "s/^\\(hardcode_direct=\\)yes/\\1no/" ${worksrcpath}/libtool
	}
}

variant no_x11 description {Do not include X11 support} {
	depends_lib-delete \
		lib:libX11.6:XFree86
	configure.args-append \
		--without-x
}

livecheck.check     regex
livecheck.url       ${homepage}Downloads
livecheck.regex     gd-(\[0-9\.\]+)\.tar
