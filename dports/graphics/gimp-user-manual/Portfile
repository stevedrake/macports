# $Id$

PortSystem 1.0

name            gimp-user-manual
version         2.4.2
categories      graphics
maintainers     devans
description     A multilingual user manual for the Gimp (broken).
long_description \
	The GIMP User Manual is a newly written User Manual for the GIMP. \
	It is written for the GIMP Help Browser, but can produce the Help \
	pages or other mediums as well.
homepage        http://docs.gimp.org/
platforms       darwin

# FIXME : build is done in destroot phase because
# everything was getting rebuilt during destroot anyway

build {}

default_variants    +en

#
# Disable fetch variant for now
#
variant fetch description {fetch prebuilt documentation} {
#    distname        gimp-help-html-${version}
#    master_sites    macports
#    use_bzip2       yes
#    checksums       md5     e550026ee90e7de0caf9b7081a081b2a \
#                    sha1    24e5cdd4923399c40de48a29a620f56b59272027 \
#                    rmd160  2e38068ca788041a0a98dbdd5f3fe510561a94f6
#
#    extract         {}
#    use_configure   no
#    destroot {
#        system "cd ${destroot}${prefix}/share &&
#            tar jvxf ${distpath}/${distfiles}"
#    }
}


variant build conflicts fetch description {build documentation from scratch} {
    distname        gimp-help-${version}
    master_sites    ftp://ftp.gimp.org/pub/gimp/help/ \
                    http://gimp.mirrors.hoobly.com/gimp/help/ \
                    http://mirror.umoss.org/gimp/help/ \
                    http://www.mirrorservice.org/sites/ftp.gimp.org/pub/gimp/ \
                    http://ftp.sunet.se/pub/gnu/gimp/
    use_bzip2       yes
    checksums       md5     497e1212cbd1499d151b85dabaa3875c \
                    sha1    461ac31e8299185d3f16c658c5008090691e45ef \
                    rmd160  368c9c75b1a28637091de57edcd26722cf6e199a

    depends_build \
        port:coreutils \
        port:docbook-xsl \
        port:docbook-xml-4.3 \
        port:libxslt \
        port:pkgconfig \
        path:${prefix}/lib/pkgconfig/gimp-2.0.pc:gimp2

    post-patch {
        reinplace "s|cp|gcp|g" ${worksrcpath}/Makefile.in
    }

    configure.args  --enable-build
    destroot.env    XML_CATALOG_FILES=${prefix}/etc/xml/catalog
}

variant without_gimp requires build description {Build without GIMP installed} {
    configure.args-append   --without-gimp
    depends_build-delete    path:${prefix}/lib/pkgconfig/gimp-2.0.pc:gimp2
}

variant cs requires build description {Build cs locale} {
    configure.env-append ALL_LINGUAS=cs
}

variant de requires build description {Build de locale} {
    configure.env-append ALL_LINGUAS=de
}

variant en requires build description {Build en locale} {
    configure.env-append ALL_LINGUAS=en
}

variant es requires build description {Build es locale} {
    configure.env-append ALL_LINGUAS=es
}

variant fr requires build description {Build fr locale} {
    configure.env-append ALL_LINGUAS=fr
}

variant hr requires build description {Build hr locale} {
    configure.env-append ALL_LINGUAS=hr
}

variant it requires build description {Build it locale} {
    configure.env-append ALL_LINGUAS=it
}

variant ko requires build description {Build ko  locale} {
    configure.env-append ALL_LINGUAS=ko
}

variant nl requires build description {Build nl locale} {
    configure.env-append ALL_LINGUAS=nl
}

variant no requires build description {Build no locale} {
    configure.env-append ALL_LINGUAS=no
}

variant ru requires build description {Build ru locale} {
    configure.env-append ALL_LINGUAS=ru
}

variant sv requires build description {Build sv locale} {
    configure.env-append ALL_LINGUAS=sv
}

variant zh_CN requires build description {Build zh_CN locale} {
    configure.env-append ALL_LINGUAS=zh_CN
}
