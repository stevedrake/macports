# $Id: Portfile,v 1.24 2005/08/04 14:30:26 gwright Exp $

PortSystem 1.0
name		graphviz
version		2.2.1
revision	3
categories	graphics
maintainers	gwright@opendarwin.org
description	Graph visualization software from AT&T and Bell Labs
long_description \
		Graph Visualization Software from AT&T Laboratories and \
		Bell Laboratories (Lucent Technologies).		\
									\
		The package contains:					\
    		dotty  - customizable X windows graph viewer written in	\
			 the Lefty editor				\
    		dot    - batch program for drawing directed graphs as	\
			 hierarchies					\
    		neato  - batch program for drawing undirected graphs	\
			 using Kamada-Kawai spring models.		\
									\
		Users wishing to have only the graph layout		\
		programs (for noninteractive use) can use the +nox11	\
		and +notk variants to build graphiviz without its	\
		display routines.  Users on OS X can use the		\
		operating system's native rendering by invoking the	\
		+quartz variant.

platforms	darwin

homepage	http://www.graphviz.org/
master_sites	http://www.graphviz.org/pub/graphviz/ARCHIVE/

checksums	md5 bb46d8ada39436cb672922f0c8b1339c

platform darwin 6 {
			patchfiles-append	patch-Makefile.in
			ui_msg "On Jaguar (OS X 10.2), the gxl2dot and dot2gxl tools do not build."
			ui_msg "Sorry."
		}

depends_lib	lib:libX11.6:XFree86		\
		lib:libjpeg.62:jpeg		\
		lib:libpng.3:libpng		\
		lib:libfreetype.6:freetype	\
		lib:libexpat:expat		\
		port:tk

configure.env	CPPFLAGS=-I${prefix}/include	\
		LDFLAGS=-L${prefix}/lib

configure.args	--mandir=${prefix}/share/man

variant quartz	{ pre-patch	{ file copy ${worksrcpath}/mac/dotneato/quartzgen.c \
					    ${worksrcpath}/dotneato/common/
				}

		  patchfiles	patch-config.h.in		\
				patch-configure			\
				patch-emit.c			\
				patch-fontmetrics.c		\
				patch-gdft.c			\
				patch-quartz-Makefile.in	\
				patch-quartzgen.c		\
				patch-renderprocs.h
		}

variant nox11	{ depends_lib-delete	lib:libX11.6:XFree86	\
					port:tk
					
		  configure.args-append	--without-x		\
					--without-tclsh
		}

variant notk	{ depends_lib-delete	port:tk
		  configure.args-append	--without-tclsh
		}
