# $Id: Portfile,v 1.4 2005/11/24 09:06:24 blb Exp $

PortSystem			1.0
name				libwmf
version				0.2.8.4
categories			graphics
maintainers			blb@opendarwin.org
description			Library for converting WMF (Window Metafile Format) files
long_description \
	libwmf is a library for reading vector images in Microsoft's native \
	Windows Metafile Format (WMF) and for either (a) displaying them in, \
	e.g., an X window, or (b) converting them to more standard/open file \
	formats.

platforms			darwin

homepage			http://wvware.sourceforge.net/libwmf.html
master_sites		sourceforge:wvware

checksums			md5 d1177739bf1ceb07f57421f0cee191e0

depends_lib			lib:libz:zlib lib:libpng:libpng lib:libjpeg:jpeg \
					lib:libfreetype:freetype

post-patch {
	reinplace "s|@LIBWMF_GDK_PIXBUF_TRUE@|#|g" ${worksrcpath}/src/Makefile.in
	reinplace "s|@LIBWMF_GDK_PIXBUF_FALSE@||g" ${worksrcpath}/src/Makefile.in
}

configure.env	CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib" \
				PKG_CONFIG_PATH="${prefix}/lib/pkgconfig:${x11prefix}/lib/pkgconfig"

configure.args	--with-jpeg --without-x

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING CREDITS ChangeLog \
		NEWS README TODO ${destroot}${prefix}/share/doc/${name}
}

variant expat conflicts xml2 {
	depends_lib-append		lib:libexpat:expat
	configure.args-append	--with-expat
}

variant x11 {
	depends_lib-append		lib:libX11.6:XFree86
	configure.args-delete	--without-x
	configure.args-append	--with-x
}

variant xml2 conflicts expat {
	depends_lib-append		lib:libxml2:libxml2
	configure.args-append	--with-libxml2
}

