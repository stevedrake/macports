# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                makeicns
version             1.4.6
categories          graphics
maintainers         mk pixilla
platforms           darwin
license             MIT

description         This program lets you convert all kinds of images to Apple icns format on the command line.
long_description    ${description}

homepage            http://bitbucket.org/mkae/makeicns
master_sites        ${homepage}/downloads

livecheck.type      regex
livecheck.url       ${homepage}/downloads
livecheck.regex     "/mkae/makeicns/src/.*>(1\\.\\d+.\\d+)<"

use_bzip2           yes

worksrcdir          ${name}

checksums           md5     8ef56005a873399f54d3caaa1df4a3c5 \
                    sha1    29f467456412563f8d9ad4556f6e8dcdf3e45cb3 \
                    rmd160  7a8762e04bf50e180934c95f9037273e9a99e368

use_configure       no

variant universal {
}

if {[variant_isset universal]} {
    set archflags ${configure.universal_cflags}
} else {
    set archflags ${configure.cc_archflags}
}

build.env-append    CC=${configure.cc} \
                    CXX=${configure.cxx} \
                    CFLAGS="${configure.cflags} ${archflags}" \
                    CXXFLAGS="${configure.cxxflags} ${archflags}" \
                    LDFLAGS="[join ${configure.ldflags}] ${archflags}"

if {${configure.sdkroot} != ""} {
    build.env-append SDK=${configure.sdkroot}
}

destroot {
    xinstall ${worksrcpath}/${name} ${destroot}${prefix}/bin/${name}
}
