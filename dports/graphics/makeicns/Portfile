# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                makeicns
version             1.4.9
categories          graphics
maintainers         mk pixilla
platforms           darwin
license             MIT

description         This program lets you convert all kinds of images to Apple icns format on the command line.
long_description    ${description}

homepage            http://bitbucket.org/mkae/makeicns
master_sites        ${homepage}/downloads

livecheck.type      regex
livecheck.url       ${homepage}/downloads
livecheck.regex     "/mkae/makeicns/src/.*>(1\\.\\d+.\\d+)<"

use_bzip2           yes

worksrcdir          ${name}

checksums           md5     795ec620f15bfcebb5246319c1a96eab \
                    sha1    02d393bad00a138dbba7b08d741e8d40a79e6c0f \
                    rmd160  a8b30f785dc5ede73946bdb8786644d0867c0e1d

use_configure       no

variant universal {
}

if {[variant_isset universal]} {
    set archflags ${configure.universal_cflags}
} else {
    set archflags ${configure.cc_archflags}
}

build.env-append    CC=${configure.cc} \
                    CXX=${configure.cxx} \
                    CFLAGS="${configure.cflags} ${archflags}" \
                    CXXFLAGS="${configure.cxxflags} ${archflags}" \
                    LDFLAGS="[join ${configure.ldflags}] ${archflags}"

if {${configure.sdkroot} != ""} {
    build.env-append SDK=${configure.sdkroot}
}

destroot {
    xinstall ${worksrcpath}/${name} ${destroot}${prefix}/bin/${name}
}
