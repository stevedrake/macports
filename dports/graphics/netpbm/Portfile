# $Id: Portfile,v 1.8 2005/06/22 20:56:43 yves Exp $
PortSystem 1.0
name            netpbm
version         10.28
categories      graphics
maintainers     yves@opendarwin.org
description     Image manipulation
long_description \
    A whole bunch of utilities for primitive manipulation \
    of graphic images.  Wide array of converters from one \
    graphics format to another.  E.g. from g3 fax format to \
    jpeg.  Many basic graphics editing tools such as \
    magnifying and cropping.

homepage        http://netpbm.sourceforge.net/
master_sites    sourceforge:netpbm
platforms       darwin

depends_lib     port:zlib port:jpeg port:tiff \
                port:libpng port:jasper
extract.suffix  .tgz
checksums       md5 18ed6d0f1adf75a748df55d5e924fabb

patchfiles      patch-lib-Makefile patch-libpm.c

configure {
    system "cd ${worksrcpath} &&
        cat Makefile.config.in ${filespath}/Makefile.config.darwin |
        sed -e '/@PREFIX@/s@@${prefix}@' >Makefile.config";
}

build.target    "messages=yes"

destroot {
    file delete -force ${destroot}${prefix}
    system "cd ${worksrcpath} && make package pkgdir=${destroot}${prefix}"
    xinstall -m 755 -d ${destroot}${prefix}/share/netpbm
    system "cd ${destroot}${prefix} &&
        mv misc/* share/netpbm &&
        mv man share &&
        rm -rf README VERSION config_template link misc pkginfo share/man/web"
}
