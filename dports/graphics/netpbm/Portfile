# $Id: Portfile,v 1.5 2005/04/09 22:29:11 jmpp Exp $
PortSystem 1.0
name            netpbm
version		10.26.7
categories      graphics
maintainers     yves@gnu-darwin.org
description     Image manipulation
long_description \
	A whole bunch of utilities for primitive manipulation 	\
                    of graphic images.  Wide array of converters from one \
                    graphics format to another.  E.g. from g3 fax format to \
                    jpeg.  Many basic graphics editing tools such as \
                    magnifying and cropping.
homepage        http://netpbm.sourceforge.net/
master_sites	sourceforge:netpbm
platforms	darwin
depends_lib     lib:libz.1:zlib lib:libjpeg.6:jpeg lib:libtiff.3:tiff \
		lib:libpng.1:libpng lib:libjasper:jasper
extract.suffix  .tgz
checksums	md5 ad584702b0f8893ee2b3a9a054f69188

patchfiles	patch-lib-Makefile

configure {
	system "cd ${worksrcpath} &&
		cat Makefile.config.in ${filespath}/Makefile.config.darwin |
		    sed -e '/@PREFIX@/s@@${prefix}@' >Makefile.config";
}

build.target	""

destroot {
	# netpbm has its own destroot-ish procedure.
	system "rm -rf ${destroot}${prefix} &&
		cd ${worksrcpath} &&
		make package pkgdir=${destroot}${prefix}"
	system	"cd ${destroot}${prefix} &&
		mkdir -p share/netpbm &&
		mv misc/* share/netpbm &&
		mv man share &&
		rm -rf README VERSION link misc pkginfo share/man/web"
}
