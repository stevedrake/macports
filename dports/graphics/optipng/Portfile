# $Id: Portfile,v 1.1 2006/03/31 08:28:06 blb Exp $

PortSystem			1.0
name				optipng
version				0.5
categories			graphics
maintainers			blb@opendarwin.org
description			PNG file optimizer
long_description \
	OptiPNG is a PNG optimizer that recompresses the image files to a \
	smaller size, without losing any information.

platforms			darwin

homepage			http://www.cs.toronto.edu/~cosmin/pngtech/optipng/
master_sites		${homepage}

checksums			md5 3964fdf24e6de62fc994850c548dd13f \
					sha1 c724e52802ea7419874ba7b4d3dfa55abf964ed6 \
					rmd160 6bd7594856b31f42aef4811b4b6a52d18e7803c5

# Doesn't depend on libpng or zlib since it uses its own, modified versions

worksrcdir			${name}-${version}/src

use_configure		no

build.cmd			make -f scripts/gcc.mak
build.target		""

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/bin \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 755 -W ${worksrcpath} optipng ${destroot}${prefix}/bin
	eval xinstall -m 644 [glob ${worksrcpath}/../doc/*] \
		${worksrcpath}/../README.txt ${destroot}${prefix}/share/doc/${name}
}

