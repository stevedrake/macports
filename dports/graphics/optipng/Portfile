# $Id$

PortSystem 1.0
name		optipng
version		0.5.4
categories	graphics
maintainers	vincent-opdarw@vinc17.org
description	PNG file optimizer
long_description \
	OptiPNG is a PNG optimizer that recompresses the image files to a \
	smaller size, without losing any information.  The idea has been \
	inspired from pngcrush (http://pmt.sourceforge.net/pngcrush), and \
	is explained in detail in the PNG-Tech article 'A guide to PNG \
	optimization'.  The implementation is carried forward in OptiPNG, \
	which offers a faster execution per trial, and a wider search space.

platforms	darwin

homepage	http://optipng.sourceforge.net/
master_sites	sourceforge

checksums	md5 8d989971e674a06b55e17fc5b70c41aa \
		sha1 c9d2d2d9b75b8feae71c424224e50f2e3b449050 \
		rmd160 04afd1ef56eb34dc5bba652d9e2bc48a0dc56d61

# Doesn't depend on libpng or zlib since it uses its own, modified versions

worksrcdir	${name}-${version}/src

use_configure	no

build.cmd	make -f scripts/gcc.mak
build.target	""

destroot {
	xinstall -m 755 -d ${destroot}${prefix}/bin \
		${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/share/man/man1
	xinstall -m 755 -W ${worksrcpath} optipng ${destroot}${prefix}/bin
	eval xinstall -m 644 [glob ${worksrcpath}/../doc/*] \
		${worksrcpath}/../README.txt ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/../man/optipng.1 \
		${destroot}${prefix}/share/man/man1
}
