# $Id$

PortSystem 1.0

name             plotutils
version          2.4.1
revision         2
categories       graphics
platforms        darwin
maintainers      ram openmaintainer

description      GNU plotting utilities
long_description \
  GNU plotting utilities package, including GNU libplot: a thread-safe \
  function library for exporting two-dimensional vector graphics files, \
  and for displaying animated vector graphics under the X Window System.

homepage         http://www.gnu.org/software/plotutils/
master_sites     gnu macports:lt:lt

depends_lib      port:libpng \
                 port:zlib

checksums        ${distname}${extract.suffix} sha1 e39ce89048a578683ad76f3284bb79adfb0adc22

patchfiles       patch-libplot_g_write.c.diff \
                 patch-libplot_n_write.c.diff \
                 patch-libplot_i_rle.c.diff \
                 patch-libplot_z_write.c.diff

configure.args   --without-x \
                 --enable-libplotter \
                 --mandir=${prefix}/share/man \
                 --infodir=${prefix}/share/info

variant x11 description "Enable X11 support" {
  depends_lib-append      lib:libX11:XFree86
  configure.args-delete   --without-x
  configure.args-append   --with-x
}

platform darwin {
  distfiles-append   ltconfig13:lt ltmain13:lt
  checksums-append   ltconfig13 sha1 f48ac8711e15b81e4c67ec276fa58f1da4668b6e \
                     ltmain13 sha1 e5cb21161c8377f77f0725c7ede672c0f8167783
  extract.only       ${distname}${extract.suffix}

  post-patch {
    xinstall -m 644 ${distpath}/ltconfig13 ${worksrcpath}/ltconfig
    xinstall -m 644 ${distpath}/ltmain13 ${worksrcpath}/ltmain.sh
  }
}
