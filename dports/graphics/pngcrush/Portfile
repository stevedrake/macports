# $Id$

PortSystem          1.0
name                pngcrush
version             1.6.12
categories          graphics
maintainers         nomaintainer
description         optimizer for PNG files
long_description \
   pngcrush reads in a PNG image, and writes it out again, with the optimum \
   filter_type and zlib_level.  It uses brute force (trying filter_type \
   none, and libpng adaptive filtering, with compression levels 3 and 9).  \
   It does the most time-consuming method last in case it turns out to be \
   the best. Optionally, it can remove unwanted chunks or add gAMA and sRGB \
   chunks.

platforms           darwin freebsd

homepage            http://pmt.sourceforge.net/pngcrush/
master_sites        sourceforge:pmt
use_bzip2           yes

checksums           md5     95b7f0f495bf5913591a380f2d58616b \
                    sha1    7faf34bbf614b58c186c3f6e5b9583a2b55d41e4 \
                    rmd160  4685428f2e3f3add6c8931a4020febddf0d4807f

use_configure       no

build.args-append   LD="/usr/bin/gcc-4.0"

destroot {
   xinstall -m 755 -d ${destroot}${prefix}/bin
   xinstall -m 755 ${worksrcpath}/${name} ${destroot}${prefix}/bin
}

platform darwin 8 {
   build.args-append CC="/usr/bin/gcc-4.0 -DPNG_NO_ASSEMBLER_CODE"
}

platform darwin 9 {
   build.args-append CC="/usr/bin/gcc-4.0 -DPNG_NO_ASSEMBLER_CODE"
}

