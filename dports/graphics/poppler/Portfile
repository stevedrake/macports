# $Id$

PortSystem 1.0

name        poppler
version     0.8.3
maintainers nomaintainer
categories  graphics
platforms   darwin
homepage    http://${name}.freedesktop.org/

description	Poppler is a PDF rendering library based on the xpdf-3.0 code base.
long_description \
    ${description}

master_sites    ${homepage}
checksums       md5 d5631bdbde9dda89ff20796005ece4d4 \
				rmd160 f6553fdf468bd67ec8a7f943ba2cc7f141052302 \
				sha1 763d18d9f0e625a936b3a3fbbcd00b58ddd2f84f
depends_lib     port:cairo port:gtk2 port:poppler-data

post-patch {
    reinplace "s|-flat_namespace -undefined suppress||g" \
        ${worksrcpath}/configure
    reinplace "s|\$includedir|${prefix}/include|g" \
        ${worksrcpath}/configure
    reinplace "s|tests||" \
        ${worksrcpath}/qt4/Makefile.in
}

configure.args \
    --disable-poppler-qt4 \
    --enable-xpdf-headers \
    --enable-zlib \
    --mandir=${prefix}/share/man

variant quartz {
    configure.args-append --disable-gtk-test --without-x
}

test.run		yes
test.dir		${worksrcpath}/test
test.target		all

