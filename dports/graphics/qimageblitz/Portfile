# $Id$

PortSystem          1.0

name                qimageblitz
version             0.0.5
revision            2
categories          graphics kde kde4
maintainers         illogic-al@macports.org openmaintainer
description         Graphical effects library for KDE4
long_description    QImageBlitz is a graphical effect and filter library \
                    for KDE4 with MMX/SSE support.
homepage            http://www.kde.org
platforms           darwin
master_sites        http://www.kde.org
distname            ${version}

fetch.type          svn 
svn.url             svn://anonsvn.kde.org/home/kde/tags/${name}/${version}

depends_lib         port:qt4-mac

depends_build       port:cmake port:automoc

use_parallel_build  yes
worksrcdir          build
pre-configure       { file mkdir ${worksrcpath} }

configure.env-append  QTDIR=${prefix}/libexec/qt4-mac
configure.cmd       cmake
configure.ccache    no
configure.compiler  gcc-4.2

configure.args      ../${distname} -DBUILD_SHARED_LIBS=ON \
		-DCMAKE_VERBOSE_MAKEFILE=ON \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SYSTEM_PREFIX_PATH=\"${prefix}\;/usr\" \
		-DCMAKE_INSTALL_PREFIX=${prefix} \
		-DCMAKE_OSX_SYSROOT=${universal_sysroot} \
		-Wno-dev

variant universal {
    configure.universal_args-delete  --disable-dependency-tracking
    configure.args-append	-DCMAKE_OSX_ARCHITECTURES=\"[strsed ${configure.universal_archs} "g| |;|"]\"
}

variant debug description "Enable debug binaries" {
	configure.args-delete		-DCMAKE_BUILD_TYPE=Release
	configure.args-append		-DCMAKE_BUILD_TYPE=debugFull
}

