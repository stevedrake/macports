# $Id$

PortSystem 1.0
name            sane-backends
version         1.0.18
categories      graphics
maintainers     hama@hamazone.de
description     Backends for scanner access
homepage        http://www.sane-project.org/
platforms       darwin

long_description These are the backends for the Scanner Access Now Easy \
                 project. They allow you to access various scanners either \
                 locally or remote using saned.

master_sites    http://alioth.debian.org/frs/download.php/1669/ \
                http://gd.tuwien.ac.at/hci/sane/${distname}/ \
                ftp://ftp.sane-project.org/pub/sane/${distname}/ \
                ftp://ftp.sane-project.org/pub/sane/old-versions/${distname}/

checksums       md5 7ca7e2908e24721471de92cf40c75e60 \
                sha1 f4c360b87ced287e4015a0dafd766ad885c539e1 \
                rmd160 aa863adff417d7c33cbb85c193878aa54a056100

patchfiles      patch-configure \
                patch-backend_dell1600n_net.c

depends_lib     port:jpeg \
                port:libusb \
                port:tiff \
                port:zlib

configure.cppflags-append -no-cpp-precomp -fno-common
configure.args  --mandir=${prefix}/share/man \
                --enable-local-backends --enable-libusb \
                --without-gphoto2

#turn off compilation of all backends but net
variant disable_localbackends conflicts enable_pnmbackend with_gphoto2 {
    depends_lib-delete      port:libusb
    configure.args-delete   --enable-local-backends --enable-libusb
    configure.args-append   --disable-local-backends --disable-libusb
}

#enable the pnm backend for testing frontends
#(possible security risk, see PROBLEMS file)
variant enable_pnmbackend conflicts disable_localbackends {
    configure.args-append   --enable-pnm-backend
}

#include the gphoto2 backend
variant with_gphoto2 conflicts disable_localbackends {
    depends_lib-append      port:libexif \
                            port:libgphoto2 \
                            port:pkgconfig
    configure.args-delete   --without-gphoto2
    configure.args-append   --with-gphoto2
}
