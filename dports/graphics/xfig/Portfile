# $Id: Portfile,v 1.8 2005/02/25 05:44:59 pguyot Exp $

PortSystem		1.0
name			xfig
version			3.2.4
revision		4
categories		graphics x11
maintainers		pguyot@kallisys.net
description		Facility for Interactive Generation of figures under X11
long_description	\
				Xfig is a menu-driven tool that allows the user to draw and \
				manipulate objects interactively in an X window.  The \
				resulting pictures can be saved, printed on postscript \
				printers or converted to a variety of other formats (e.g. to \
				allow inclusion in LaTeX documents).
homepage		http://www.xfig.org/
platforms		darwin
master_sites	${homepage}/xfigdist/ \
				ftp://www-epb.lbl.gov/xfig/
distname		${name}.${version}
distfiles		${distname}.full${extract.suffix}
checksums		${distname}.full${extract.suffix} md5 1911fc0f733cb2f40336a8d0e82513de \
				xfig-3.2.4-Xaw3d-1.5E.udiff md5 d7585496ec07b42f03fce98b432ac22e
depends_lib		lib:libXaw3d:Xaw3d \
				lib:libpng:libpng \
				lib:libjpeg:jpeg
depends_run		bin:gs:ghostscript \
				bin:fig2dev:transfig
use_xmkmf		yes
patch_sites		ftp://ftp.visi.com/users/hawkeyd/X/
patchfiles		xfig-3.2.4-Xaw3d-1.5E.udiff \
				patch-Imakefile
post-patch {
	reinplace "s|__PREFIX|${prefix}|g" ${worksrcpath}/Imakefile
	reinplace "s|__DESTROOT|${destroot}|g" ${worksrcpath}/Imakefile
}
destroot.target	install.all install.man
post-destroot {
	# Remove the /usr/X11R6/lib/X11/app-defaults symlink
	# (this could be done by handling symlinks better on images)
	file delete "${destroot}/usr/X11R6/lib/X11/app-defaults"
}
