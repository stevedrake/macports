# $Id: $

PortSystem 1.0
name		iphone-zlib
version		1.2.3
revision	1
categories	iphone cross
maintainers	landonf@macports.org openmaintainer@macports.org
description	ZLib headers and libraries for iPhone cross-compiliation

long_description	iPhone cross-compile libraries and headers of ZLib. \
			zlib is designed to be a free, general-purpose, \
			legally unencumbered, lossless data-compression \
			library for use on virtually any computer hardware \
			and operating system.

homepage	http://www.zlib.net/
platforms	darwin

distname	zlib-${version}
master_sites	${homepage} \
		http://www.gzip.org/zlib/ \
		sourceforge:libpng

use_bzip2	yes
checksums	md5 dee233bf288ee795ac96a98cc2e369b6 \
		sha1 967e280f284d02284b0cd8872a8e2e04bfdc7283 \
		rmd160 cfba9984b354dcc38da49331457e6bfc861c6f51

patchfiles	patch-Makefile-static \
		patch-configure

depends_lib	port:arm-apple-darwin-runtime \
		port:arm-apple-darwin-cc

configure.env	PATH=${prefix}/arm-iphone/bin:$env(PATH) CC=cc CFLAGS="-dynamiclib"
configure.args	--shared --prefix=${prefix}/arm-iphone

build.env	PATH=${prefix}/arm-iphone/bin:$env(PATH)
build.target	libz.${version}.dylib

destroot.violate_mtree	yes
destroot.destdir prefix=${destroot}${prefix}/arm-iphone/

livecheck.check regex
livecheck.url   ${homepage}
livecheck.regex "${name}-(\\\\d+(?:\\\\.\\\\d+)*)\\\\.tar\\\\.bz2"
