# $Id: Portfile,v 1.6 2005/04/21 15:57:51 jberry Exp $

PortSystem 1.0
name             epic5
version          0.0.4
categories       irc
maintainers      toby@opendarwin.org
description      (E)nhanced (P)rogrammable (I)RC-II (C)lient 5
homepage         http://www.epicsol.org/
platforms        darwin
long_description \
	EPIC5 is the new development branch of EPIC, which is a \
	new direction in ircII development. No longer is EPIC 100% \
	backwards compatable with ircII, but instead we have chosen \
	to find those things where compatability is undesirable, \
	and fix them. No gratuitous incompatabilities have been \
	added, but lots of new code has been added to make EPIC the \
	best ircII client we could make.

master_sites     ftp://ftp.epicsol.org/pub/epic/EPIC5-ALPHA/
use_bzip2        yes
checksums        md5 94dc966f06e2d3c43dcbea9822d4ebd6

patchfiles       patch-configure \
                 patch-configure.in \
                 patch-source__dcc.c \
                 patch-source__hook.c \
                 patch-source__who.c

post-patch {
	reinplace s|__PREFIX__|${prefix}| ${worksrcpath}/configure
}

configure.args   --mandir=\\\${prefix}/share/man \
                 --without-ssl \
                 --without-ipv6 \
                 --without-socks \
                 --without-socks5 \
                 --without-perl \
                 --without-tcl

destroot.destdir IP=${destroot}

variant ssl {
	configure.args-delete --without-ssl
	configure.args-append --with-ssl
	depends_lib-append    port:openssl
}

variant ipv6 {
	configure.args-delete --without-ipv6
	configure.args-append --with-ipv6
}
