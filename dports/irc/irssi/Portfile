# $Id$

PortSystem 1.0
name		irssi
version		0.8.10a
revision	2
categories	irc
maintainers	toby@opendarwin.org
description	modular IRC client
long_description	\
	Irssi is a modular IRC client that currently has only text mode user \
	interface, but 80-90% of the code isn't text mode specific, so other \
	UIs could be created pretty easily. Also, Irssi isn't really even \
	IRC specific anymore, there's already a working SILC module \
	available. Support for other protocols like ICQ could be created \
	some day too.
homepage	http://irssi.org/
platforms	darwin
master_sites	${homepage}files/
checksums	md5 38e616bccb6a34ff6d91690317c2fa19 \
		sha1 c27c3aa19f7e54e4295c9e78f522194b296e9f7f \
		rmd160 02ea076da7100bd81ce2ff66188ff81854b7bcba
use_bzip2	yes
depends_lib 	port:gettext port:glib2 port:libiconv port:ncurses \
		port:openssl port:zlib
# Patch fixes coredump on exit; it is upstream so it can be removed after next
# release
patchfiles	patch-src-irc-dcc-dcc.c

worksrcdir	${name}-0.8.10
configure.env	CPPFLAGS=-no-cpp-precomp
configure.args  \
	--without-socks --without-bot --without-proxy \
	--with-modules --enable-ipv6 --enable-ssl \
	--with-perl=no --with-glib-prefix=${prefix} \
	--mandir=${prefix}/share/man

platform darwin 6 {
	depends_lib-append lib:libdl:dlcompat
}

variant perl {
	configure.args-delete --with-perl=no
	configure.args-append \
		--with-perl=yes --with-perl-lib=${prefix}/lib/perl5/darwin 
}
