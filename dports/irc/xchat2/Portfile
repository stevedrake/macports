# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                xchat2
version             2.8.8
revision            1
set branch          [join [lrange [split ${version} .] 0 1] .]
categories          irc
maintainers         afb openmaintainer
description         GTK+2 IRC client
homepage            http://www.xchat.org/
platforms           darwin

long_description \
    XChat2 is a graphical IRC client based on GTK2 that has \
    many features and can be scripted with Perl and/or Python.

master_sites        http://xchat.org/files/source/${branch}/
patch_sites         http://xchat.org/files/source/${branch}/patches/

distname            xchat-${version}

patchfiles          patch-gtk2.19.7.diff

checksums           xchat-${version}.tar.bz2 \
                    md5     6775c44f38e84d06c06c336b32c4a452 \
                    sha1    a4ac161e4e40f4bbabc492675a1ff4380dba8d68 \
                    rmd160  1bc3e0ff00e15c83588dd21a3ef3e8e34f953331 \
                    sha256  0d6d69437b5e1e45f3e66270fe369344943de8a1190e498fafa5296315a27db0

use_bzip2           yes

depends_lib         port:gtk2 path:bin/perl:perl5

patch.pre_args      -p1

configure.cppflags-append   -no-cpp-precomp

configure.args      --disable-python --disable-mmx --enable-ipv6

variant xft conflicts quartz { 
    configure.args-append --enable-xft
}

variant ssl { 
    configure.args-append --enable-openssl
    depends_lib-append port:openssl
}

variant quartz conflicts xft {
    configure.args-append --disable-xlib
}

livecheck.url       http://www.xchat.org/files/source/${branch}/?S=D
livecheck.regex     xchat-(\[0-9.\]+)${extract.suffix}
