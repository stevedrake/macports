# $Id$

PortSystem 1.0
name		gnu-classpath
version		0.93
description	Essential libraries for Java.
long_description	GNU Classpath, Essential Libraries for Java, \
			is a GNU project to create free core class \
			libraries for use with virtual machines and \
			compilers for the java programming language.
maintainers	mww@macports.org
categories	java
platforms	darwin 
homepage	http://www.gnu.org/software/classpath/classpath.html
master_sites	gnu:classpath
distname	classpath-${version}
checksums	sha1 336cae589ec91a4fe212c2149c57b51dab2ca002
patchfiles	patch-native-jni-java-nio-Makefile.in
depends_lib	port:libiconv

configure.args	--mandir=${prefix}/share/man --infodir=${prefix}/share/info \
		--disable-gtk-peer --disable-gconf-peer --with-jikes --disable-plugin
configure.env   CPPFLAGS="-I${prefix}/include -L${prefix}/lib" 

variant gtk {
	configure-delete --disable-gtk-peer --disable-gconf-peer
	depends-lib-append port:gtk2 port:gconf
}

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/java
	file rename ${destroot}${prefix}/share/classpath/glibj.zip \
		${destroot}${prefix}/share/java/glibj.jar
}

platform darwin 7 {
	# jikes on 10.3 is < 1.22
	depends_build	port:jikes
}

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

livecheck.check	regex
livecheck.url	http://ftp.gnu.org/gnu/classpath/?M=D
livecheck.regex	classpath-(\[0-9\.\]+)\.

