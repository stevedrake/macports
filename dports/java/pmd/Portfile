# $Id: Portfile,v 1.1 2004/10/07 18:09:13 mww Exp $

PortSystem 1.0

name			pmd
version			1.9
categories		java lang
platforms		darwin
maintainers		mww@opendarwin.org
description		PMD is a Java source code analyzer
long_description	PMD is a Java source code analyzer. It finds unused \
					variables, empty catch blocks, unnecessary object \
					creation, and so forth.

homepage		http://pmd.sourceforge.net/
master_sites	sourceforge
distname		${name}-src-${version}
checksums		md5 a4bc2036ed7af33c82285da9d6eedc6e
use_zip			yes

depends_build	bin:ant:apache-ant
depends_lib		bin:java:kaffe
depends_run		lib:XXX:jaxen \
				lib:XXX:xercesj \
				lib:XXX:saxpath

worksrcdir		${name}-${version}

use_configure	no

build.cmd		ant
build.target	jar
build.dir		${worksrcpath}/etc

destroot	{
	xinstall -m 755 ${filespath}/pmd ${destroot}${prefix}/bin
	reinplace "s|_PREFIX_|${prefix}|g" ${destroot}${prefix}/bin/pmd
	xinstall -m 755 -d ${destroot}${prefix}/share/java \
		${destroot}${prefix}/share/doc
	xinstall -m 644 ${worksrcpath}/lib/pmd-1.9.jar \
		${destroot}${prefix}/share/java/pmd.jar
	file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/rulesets ${destroot}${prefix}/share/${name}
}
