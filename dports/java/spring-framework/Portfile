# $Id: Portfile,v 1.1 2004/10/21 00:13:21 jberry Exp $

PortSystem 1.0

name				spring-framework
version				1.1.1

categories			java
maintainers			jberry@opendarwin.org
platforms			darwin

description			Spring application framework for Java
long_description	Spring is a layered Java/J2EE application framework.
homepage			http://www.springframework.org/

distname			${name}-${version}-with-dependencies
master_sites		sourceforge:springframework
checksums			md5 e5494dc74124c13227ace2ca4eb440e1

use_zip				yes

depends_build		bin:ant:apache-ant
depends_lib			bin:java:kaffe
				
use_configure		no

worksrcdir			${name}-${version}

build.cmd			ant
build.target		alljars

destroot	{
	# Ensure needed directories
	xinstall -m 755 -d ${destroot}${prefix}/share/java \
		${destroot}${prefix}/share/doc \
		${destroot}${prefix}/share/examples
		
	# Install the framework
	file copy ${worksrcpath}/dist \
		${destroot}${prefix}/share/java/${name}
		
	# Add symlinks to jars
	foreach f [glob -tails -directory ${destroot}${prefix}/share/java ${name}/*.jar] {
		system "cd ${destroot}${prefix}/share/java && ln -s ${f}"
	}
	
	# Install the docs
	file copy ${worksrcpath}/docs \
		${destroot}${prefix}/share/doc/${name}

	# Install samples
	file copy ${worksrcpath}/samples \
		${destroot}${prefix}/share/examples/${name}
}
