# $Id$

PortSystem 1.0

name			spring-framework3
version			3.0.0
revision		2

categories		java
maintainers		blair
platforms		darwin

description		Spring application framework for Java
long_description	Spring is a layered Java/J2EE application framework.
homepage		http://www.springsource.org/about

distname		spring-framework-${version}.RC1-with-docs
master_sites		http://s3.amazonaws.com/dist.springframework.org/milestone/SPR
checksums		md5 d70d8298bc9c85a9ed1e66ed5c1af7ba \
			sha1 101efff60f4d7b0c3cdac57c6ff90d9b43e1dc26 \
			rmd160 a426d9b5946ed2a442da11b68f4ff95db54992e1

use_zip			yes

depends_lib		bin:java:kaffe

use_configure		no

worksrcdir		spring-framework-${version}.RC1

build.cmd		true

destroot {
	# Ensure needed directories
	xinstall -m 755 -d ${destroot}${prefix}/share \
		${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/share/examples

	# Install the framework
	file copy ${worksrcpath}/dist ${destroot}${prefix}/share/java
	foreach f [glob ${destroot}${prefix}/share/java/*.jar] {
		file rename ${f} [strsed ${f} {s/-3.0.0.RC1//}]
	}

	# Install the docs
	foreach f {changelog.txt license.txt notice.txt readme.txt} {
		file copy ${worksrcpath}/${f} \
			${destroot}${prefix}/share/doc/${name}/${f}
	}
	file copy ${worksrcpath}/docs/javadoc-api \
		${destroot}${prefix}/share/doc/${name}/api
	file copy ${worksrcpath}/docs/spring-framework-reference \
		${destroot}${prefix}/share/doc/${name}/reference
}
