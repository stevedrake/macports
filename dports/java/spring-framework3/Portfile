# $Id$

PortSystem 1.0

name			spring-framework3
version			3.0.0

categories		java
maintainers		blair
platforms		darwin

description		Spring application framework for Java
long_description	Spring is a layered Java/J2EE application framework.
homepage		http://www.springsource.org/about

distname		spring-framework-${version}.M3-with-docs
master_sites		http://s3.amazonaws.com/dist.springframework.org/milestone/SPR
checksums		md5 7a5cdda7285f2d46407045c329ca817e \
			sha1 c2dc7fc7088ea5436da9716e34c91bee16ba3b58 \
			rmd160 c6eb1daaa961f7a02f330260fb8322f7e08bc752

use_zip			yes

depends_lib		bin:java:kaffe

use_configure		no

worksrcdir		spring-framework-${version}.M3

build.cmd		true

destroot {
	# Ensure needed directories
	xinstall -m 755 -d ${destroot}${prefix}/share \
		${destroot}${prefix}/share/doc/${name} \
		${destroot}${prefix}/share/examples

	# Install the framework
	file copy ${worksrcpath}/dist ${destroot}${prefix}/share/java
	foreach f [glob ${destroot}${prefix}/share/java/*.jar] {
		file rename ${f} [strsed ${f} {s/-3.0.0.M3//}]
	}

	# Install the docs
	foreach f {changelog.txt license.txt notice.txt readme.txt} {
		file copy ${worksrcpath}/${f} \
			${destroot}${prefix}/share/doc/${name}/${f}
	}
	file copy ${worksrcpath}/docs/javadoc-api \
		${destroot}${prefix}/share/doc/${name}/api
	file copy ${worksrcpath}/docs/spring-framework-reference \
		${destroot}${prefix}/share/doc/${name}/reference
}
