# $Id: Portfile,v 1.3 2006/01/12 14:59:52 jberry Exp $

PortSystem 1.0

name				woodstox
version				2.8.2
revision			1

categories			java
maintainers			jberry@opendarwin.org
platforms			darwin

description			Woodstox StAX XML parser
long_description	Woodstox is a fast Open Source fully-validating StAX-compliant \
					(JSR-173) XML-processor written in Java (processor meaning it \
					handles both input (== parsing) and output (== writing, serialization)).
homepage			http://woodstox.codehaus.org/

# I'm hosting woodstox source on opendarwin server, since it's not 
# nicely archived for release
master_sites		http://www.opendarwin.org/~jberry/hosted/woodstox
checksums			md5 fd70df036a279a5dafaa609f796b4ae3

worksrcdir			.

depends_build		bin:ant:apache-ant
depends_lib			bin:java:kaffe \
					port:jakarta-bcel

use_configure		no

post-patch {
	# msv isn't one of our ports, so stub it out and disable it
	file mkdir ${worksrcpath}/lib/msv
	file delete -force ${worksrcpath}/src/java/com/ctc/wstx/msv
}

build.cmd			ant
build.target		dist
build.env			CLASSPATH=${prefix}/share/java/jakarta-bcel.jar

destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/share/java \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/dist/wstx-asl-${version}.jar \
		${destroot}${prefix}/share/java/woodstox.jar
	xinstall -m 644 ${worksrcpath}/dist/wstx-api-${version}.jar \
		${destroot}${prefix}/share/java/woodstox-api.jar
	xinstall -m 644 ${worksrcpath}/dist/stax2.jar \
		${destroot}${prefix}/share/java/
		
	file copy \
		${worksrcpath}/dist/javadoc \
		${worksrcpath}/dist/release-notes \
		${destroot}${prefix}/share/doc/${name}
}
