# $Id$

PortSystem          1.0
PortGroup           kde4    1.0

name                amarok
version             2.2.0
categories          kde kde4
maintainers         illogic-al openmaintainer
description         Amarok, the world-renowned media player.
long_description    Amarok is a music player and manager with an intuitive \
                    interface. It provides a variety of feature which helps \
                    to discover and manage your music.
platforms           darwin
homepage            http://amarok.kde.org
master_sites        kde:stable/${name}/${version}/src/
use_bzip2           yes
checksums           md5 5a0188c5eb7d343109b82964942d8eb5

depends_lib-append  port:kdebase4-runtime port:kdelibs4 \
                    port:qtscriptgenerator port:liblastfm \
                    port:taglib port:taglib-extras \
                    port:loudmouth \
                    path:lib/mysql5/libmysqld.a:mysql5

patchfiles          patch-src-app-mac.patch
patch.dir           ${workpath}/${distname}
patch.pre_args      -p1

configure.env           QTDIR=${prefix}/libexec/qt4-mac
configure.args-append	../${distname}

post-destroot {
    # Place bundle icons in correct location
	system "mv ${destroot}${prefix}/bin/amarok.app/Contents/Resources/* ${destroot}${applications_dir}/KDE4/Amarok.app/Contents/Resources/"
	system "rm -rf ${destroot}${prefix}/bin"
}

