# $Id$

PortSystem      1.0
name            kdebase4
version         4.1.3
revision        1
categories      kde kde4
maintainers     illogic-al@macports.org openmaintainer
description     KDE4 applications and libraries from the base package
long_description Core desktop applications and libraries for the KDE4 desktop. This port installs the file manager dolphin file manager.
homepage        http://www.kde.org
platforms      	darwin
master_sites    http://anonsvn.kde.org/
distname        kdebase

fetch.type      svn 
svn.url         svn://anonsvn.kde.org/home/kde/tags/KDE/${version}/${distname}

depends_lib     port:kdelibs4 \
                port:qimageblitz \
	            port:kdepimlibs4 \
                port:antigraingeometry \
                port:samba


depends_build   port:cmake \
                port:automoc

use_parallel_build  yes

worksrcdir      build

pre-configure { file mkdir ${worksrcpath} }

configure.cmd		cmake

configure.args	../${distname} -DBUILD_SHARED_LIBS:BOOL=ON \
		-DCMAKE_VERBOSE_MAKEFILE=ON \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SYSTEM_PREFIX_PATH=\"/opt/local\;/usr\" \
		-DCMAKE_INSTALL_PREFIX=${prefix} \
		-DCMAKE_BUILD_WITH_INSTALL_RPATH=ON \
		-DPHONON_INCLUDE_DIR=${prefix}/include \
		-DPHONON_LIBRARY=${prefix}/lib/libphonon.dylib \
        -DCMAKE_OSX_SYSROOT=${sysroot} \
		-Wno-dev 

variant universal description "Compile for ppc and intel architectures" {
    configure.universal_args-delete  --disable-dependency-tracking
    configure.args-append	-DCMAKE_OSX_ARCHITECTURES=\"ppc\;i386\"
}

variant debug description "Enable debug binaries" {
	configure.args-delete		-DCMAKE_BUILD_TYPE=Release 
	configure.args-append		-DCMAKE_BUILD_TYPE=debugFull 

}

variant xine description "enable phonon_xine engine" {
	depends_build       port:xine-lib
}

