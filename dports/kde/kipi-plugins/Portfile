# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           kde4 1.0

name                kipi-plugins
version             1.1.0
categories          kde kde4
maintainers         hyper-world.de:jan

description         KDE Image Plugin Interface
long_description    KIPI is an effort to develop a common plugin structure for \
                    Digikam, KPhotoAlbum, Showimg and GwenView. Its aim is to \
                    share image plugins among graphic applications. Kipi is \
                    based on the old digiKam plugins implementation.

homepage            http://www.kipi-plugins.org/
platforms           darwin
master_sites        sourceforge:kipi
distname            kipi-plugins-${version}
checksums           md5     f1a92d0fe29bd68de08551a5e607015e \
                    sha1    e65c9b6df70651c5cc10a1c7ec16e167b33a991f

use_bzip2           yes

depends_lib         port:kdelibs4 \
                    port:kdebase4-runtime \
                    port:kdegraphics4 \
                    port:ImageMagick \
                    port:mesa \
                    port:libgpod \
                    port:gdk-pixbuf
#port:opencv # This package does not build at the moment on Snow Leopard. If it is not installed, the removeRedEyes plugin will not get build automatically.
configure.args-append ../${distname}
configure.pkg_config_path-append ${qt_dir}/lib/pkgconfig

post-extract {
    # change #include <Phonon...> to <phonon...> in all files that
    # contain that header.
    foreach item [exec grep -lr "Phonon" ${workpath}/${distname}] {
        reinplace "/#include/s@Phonon@phonon@" ${item}
    }
}
