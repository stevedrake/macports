# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

# See dports/_resources/port1.0/group/kde4-1.1.tcl for more info.
PortGroup           kde4    1.1

name                kmymoney4
version             4.5.1
revision            1

categories          kde finance
maintainers         mk pixilla.com:brad openmaintainer

description         kmymoney version 4 (THIS IS STILL AN EXPERIMENTAL PORT.)
long_description    KMyMoney is the personal finance manager for KDE. (THIS IS STILL AN EXPERIMENTAL PORT.)
platforms           darwin

homepage            http://kmymoney2.sourceforge.net/index-home.html
master_sites        sourceforge:kmymoney2

livecheck.type      regex
livecheck.url       http://sourceforge.net/projects/kmymoney2/files/
livecheck.regex     "kmymoney-(4\\.\\d+?(\\.\\d+))\\.tar"

distname            kmymoney-${version}
use_bzip2           yes

checksums           md5     b84e4871019a7f44848e65702c4ce3a2 \
                    sha1    e480ff5546f0796bcb5e922459dabaad9b52cb99 \
                    rmd160  c8861183280608233528a1ec98960d4f82a6ac3f

depends_lib-append  port:libofx \
                    port:aqbanking5 \
                    port:kdepimlibs4 \
                    port:oxygen-icons
# Actually, we don't need this port anymore, since kmymoney 4.5 already gets shipped with an icns
#                    port:makeicns

pre-fetch {
	ui_msg \
"  ============================================== \n \
This port is still EXPERIMENTAL.               \n \
============================================== \n \
                                               \n \
So far known problems are:                     \n \
 - ledger's date input field crashes app       \n \
 - some reports let the app hang               \n \
 - some fonts seem to be missing, since        \n \
\ \ layout looks a little inhomogenious        \n \
                                               \n \
============================================== \n \
"
}

#patchfiles        patch_for_kbanking.diff
#patchfiles        patch_to_r1197025.diff
patchfiles        patch-kMyMoneyDateInput_eventFilter.diff

patch.dir         ${workpath}/${distname}
patch.pre_args    -p1

#configure.args-append   -DENABLE_KBANKING=ON

