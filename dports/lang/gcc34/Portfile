# $Id: Portfile,v 1.1 2004/10/11 17:24:46 gwright Exp $

PortSystem 1.0
name            gcc34
version         3.4.2
description     The GNU C compiler
platforms       darwin
categories      lang
maintainers     gwright@opendarwin.org

master_sites    gnu

#user_notes	This port is intended to be used by other ports		\
#		requiring the features of the latest released gcc or	\
#		g++. For example, covariant returns in g++ are not	\
#		supported by the standard Apple g++-3.3, but are by	\
#		this version. Generally speaking, you'll know if you	\
#		need this.						\
#									\
#		The libraries are moved from their standard location	\
#		so as not to conflict with the libraries installed	\
#		by the system's gcc. It is necessary below to specify	\
#		the C++ include path explicitly (using the		\
#		--with-gxx-include-dir configure argument) because	\
#		of a bug in gcc-3.4.2 that causes incorrect include	\
#		paths to be generate if the library directory is	\
#		changed.


use_bzip2	yes
dist_subdir	gcc
distfiles	gcc-${version}${extract.suffix}

checksums       md5 2fada3a3effd2fd791df09df1f1534b3

worksrcdir	gcc-${version}

pre-configure   { cd ${workpath}
		  file mkdir build
		}

configure.dir   ${workpath}/build
configure.cmd   ${worksrcpath}/configure
configure.args  --enable-languages=c,c++		\
		--libdir=${prefix}/lib/gcc-${version}	\
		--infodir=${prefix}/share/info		\
                --mandir=${prefix}/share/man		\
		--with-system-zlib			\
		--disable-nls				\
		--program-suffix=-${version}		\
		--with-gxx-include-dir=${prefix}/include/gcc-${version}/c++/${version}

build.dir       ${workpath}/build
build.target    bootstrap-lean

post-destroot   { cd ${destroot}${prefix}
		  file delete -force share/man/man7
		  file delete -force share/info
		}

