# $Id: Portfile,v 1.2 2005/04/08 06:02:08 mww Exp $

PortSystem 1.0

name			gcc40
version			4.0-20050402
revision		1
platforms		darwin
categories		lang
maintainers		mww@opendarwin.org
description		The GNU compiler collection, beta version
long_description	${description}

homepage		http://gcc.gnu.org/
master_sites    ftp://ftp.gwdg.de/pub/linux/gcc/snapshots/${version} \
				ftp://ftp.nluug.nl/mirror/languages/gcc/snapshots/${version} \
				http://mirrors.rcn.net/pub/sourceware/gcc/snapshots/${version}

distname		gcc-${version}
checksums		md5 638325368cd4e7a37dae40bb4eeee902
use_bzip2		yes

set major		4.0

worksrcdir		build

pre-configure {
	file mkdir ${worksrcpath}
}

configure.cmd	${workpath}/gcc-${version}/configure
configure.args	--enable-languages=c,objc \
				--libdir=${prefix}/lib/gcc-${major} \
				--infodir=${prefix}/share/info \
				--mandir=${prefix}/share/man \
				--with-system-zlib \
				--disable-nls \
				--with-local-prefix=${prefix} \
				--program-suffix=-${major}

build.target	bootstrap-lean

post-destroot {
	cd ${destroot}${prefix}
	file delete -force share/man/man7
	file delete -force share/info
}
