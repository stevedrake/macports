--- libraries/network/Network/Socket.hsc.sav	2008-08-08 21:12:59.000000000 -0700
+++ libraries/network/Network/Socket.hsc	2008-08-08 19:32:52.000000000 -0700
@@ -524,7 +524,7 @@
 #if defined(darwin_TARGET_OS)
 	zeroMemory p (#const sizeof(struct sockaddr_in6))
 #endif
-#if defined(netbsd_TARGET_OS)
+#if defined(SIN6_LEN)
 	(#poke struct sockaddr_in6, sin6_len) p ((#const sizeof(struct sockaddr_in6)) :: Word8)
 #endif
 	(#poke struct sockaddr_in6, sin6_family) p ((#const AF_INET6) :: CSaFamily)
