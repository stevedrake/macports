# $Id$

PortSystem		1.0

name			icon
version			9.4.3
categories		lang
maintainers		michael.grunewald@laposte.net
description		The Icon Programming Language
long_description	Icon is a high-level, general-purpose programming \
			language with a large repertoire of features for \
			processing data structures and character strings. \
			Icon is an imperative, procedural language with a \
			syntax reminiscent of C and Pascal, but with \
			semantics at a much higher level.
homepage		http://www.cs.arizona.edu/icon/
platforms		darwin
master_sites		${homepage}ftp/packages/unix/
distname		icon.v[strsed ${version} {g/\.//}]src
extract.suffix		.tgz
checksums		md5 4740b1fc5caf2fe7409367923dffe607 \
			sha1 92bd3347807b333fb903edf61a2805f2e1159577 \
			rmd160 af75af7f106920cd59a7f8ac85954aa472ae78e7

configure {
  cd ${worksrcpath}
  system "make X-Configure name=macintosh"
}

build.target		All

destroot {
  set icon_dir "${destroot}${prefix}/libexec/${name}"
  set iconbin_dir "../libexec/${name}/bin"
  set icondoc_dir "../libexec/${name}/doc"
  set portbin_dir "${destroot}${prefix}/bin"
  set portdoc_dir "${destroot}${prefix}/share/doc"
  xinstall -d "${portbin_dir}"
  xinstall -d "${portdoc_dir}"
  cd ${worksrcpath}
  system "make Install dest=${icon_dir}"
  cd "${portbin_dir}"
  system "ln -s ${iconbin_dir}/icon"
  system "ln -s ${iconbin_dir}/icont"
  system "ln -s ${iconbin_dir}/iconx"
  system "ln -s ${iconbin_dir}/vib"
  cd "${portdoc_dir}"
  system "ln -s ${icondoc_dir} ${name}-${version}"
}
