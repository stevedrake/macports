# $Id: Portfile,v 1.2 2005/04/16 19:43:17 toby Exp $

PortSystem 1.0
name             moscow_ml
version          2.01
categories       lang
maintainers      toby@opendarwin.org
description      lightweight SML implementation
long_description \
	Moscow ML is a light-weight implementation of \
	Standard ML (SML), a strict functional language \
	widely used in teaching and research. Version \
	2.00 implements the full SML language, including \
	SML Modules, and much of the SML Basis Library.
homepage         http://www.dina.dk/~sestoft/mosml.html
platforms        darwin
master_sites     http://www.dina.kvl.dk/~sestoft/mosml/
distname         mos201src
checksums        md5 74aaaf988201fe92a9dbfbcb1e646f70

worksrcdir       mosml

patchfiles       patch-src__Makefile \
                 patch-src__Makefile.inc \
                 patch-src__mosmlyac__Makefile
post-patch {
	reinplace "s|__PREFIX__|${prefix}|" \
		${worksrcpath}/src/Makefile.inc
}

configure        {}

build.dir        ${worksrcpath}/src
build.target     world

post-destroot {
	file delete ${destroot}${prefix}/lib/moscow_ml/camlrunm
	system "ln -s ../../bin/camlrunm ${destroot}${prefix}/lib/moscow_ml/camlrunm"
	reinplace "s|${destroot}||" ${destroot}${prefix}/lib/moscow_ml/header
}
