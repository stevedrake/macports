--- asmcomp/amd64/proc.ml.orig	2009-03-29 00:52:13.000000000 +0900
+++ asmcomp/amd64/proc.ml	2009-10-01 19:29:29.000000000 +0900
@@ -10,7 +10,7 @@
 (*                                                                     *)
 (***********************************************************************)
 
-(* $Id: proc.ml,v 1.5.4.1 2009/03/28 15:52:13 xleroy Exp $ *)
+(* $Id: proc.ml,v 1.5.4.2 2009-09-18 13:49:21 xleroy Exp $ *)
 
 (* Description of the AMD64 processor *)
 
@@ -92,7 +92,6 @@
 let rax = phys_reg 0
 let rcx = phys_reg 5
 let rdx = phys_reg 4
-let r11 = phys_reg 9
 let rxmm15 = phys_reg 115
 
 let stack_slot slot ty =
@@ -170,7 +169,7 @@
   | Iop(Istore(Single, _)) -> [| rxmm15 |]
   | Iop(Ialloc _ | Iintop(Icomp _) | Iintop_imm((Idiv|Imod|Icomp _), _))
         -> [| rax |]
-  | Iswitch(_, _) when !pic_code || !Clflags.dlcode -> [| r11 |]
+  | Iswitch(_, _) -> [| rax; rdx |]
   | _ -> [||]
 
 let destroyed_at_raise = all_phys_regs
