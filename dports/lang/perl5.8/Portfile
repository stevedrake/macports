# $Id: Portfile,v 1.33 2004/07/12 06:19:02 rshaw Exp $

PortSystem		1.0
name			perl5.8
version			5.8.4
revision		1
categories		lang
maintainers		rshaw@opendarwin.org michaelm@opendarwin.org
description		Perl 5.8.x - Practical Extraction and Report Language
long_description \
	Perl is a general-purpose programming language originally developed \
	for text manipulation and now used for a wide range of tasks including \
	system administration, web development, network programming, GUI \
	development, and more.
platforms		darwin freebsd
distname		perl-${version}
master_sites	http://www.cpan.org/src/5.0/
checksums		md5 912050a9cb6b0f415b76ba56052fb4cf

variant darwin {
	pre-configure {
		reinplace "s|ld=\"MACOSX_DEPLOYMENT_TARGET=10.3|ld=\"env MACOSX_DEPLOYMENT_TARGET=10.3|g" "${worksrcpath}/hints/darwin.sh"
	}
}

configure.env		LC_ALL=C
configure.cmd		sh Configure
configure.pre_args	
configure.post_args	-des -Dprefix='${prefix}' -Dccflags="-I'${prefix}/include'"\
					-Dldflags=-L'${prefix}/lib' \
					-Dvendorprefix='${prefix}'

test.run			yes

post-destroot {
	foreach man3File [glob ${destroot}/${prefix}/share/man/man3/*] {
		file rename ${man3File} ${man3File}pm
	}
}

variant threads		{ configure.args-append -Dusethreads }

variant devel {
	version			5.8.5-RC2
	master_sites	ftp://ftp.cpan.org/pub/CPAN/authors/id/N/NW/NWCLARK/
	checksums		md5 9560f243adf257964d71bceab737280b
	distname		perl-${version}
}

