--- Makefile.orig	2009-01-29 17:33:22.000000000 -0600
+++ Makefile	2009-02-01 20:39:26.000000000 -0600
@@ -54,14 +54,14 @@
 all: ffi$(DLL)
 
 ffi$(DLL): ffi.c
-	gcc $(shared) -o $@ $< $(FLAGS) -lffi -lpure -lgmp $(LIBS)
+	$(CC) $(shared) -o $@ $< $(FLAGS) -lffi -lpure -lgmp $(LIBS)
 
 clean:
 	rm -f *$(DLL) *~ *.a *.o
 
 install:
-	test -d "$(DESTDIR)$(libdir)/pure" || mkdir -p "$(DESTDIR)$(libdir)/pure"
-	cp ffi.pure ffi$(DLL) "$(DESTDIR)$(libdir)/pure"
+	test -d "$(DESTDIR)`readlink $(libdir)/pure`" || mkdir -p "$(DESTDIR)`readlink $(libdir)/pure`"
+	cp ffi.pure ffi$(DLL) "$(DESTDIR)`readlink $(libdir)/pure`"
 
 uninstall:
 	rm -f "$(DESTDIR)$(libdir)/pure/ffi.pure" "$(DESTDIR)$(libdir)/pure/ffi$(DLL)"
