# $Id: Portfile,v 1.10 2004/05/29 19:22:05 blb Exp $

PortSystem			1.0
name				python23
version				2.3.4
categories			lang
maintainers			blb@pobox.com
description			An interpreted, object-oriented programming language
long_description	${description}

platforms			darwin freebsd sunos

homepage			http://www.python.org/
master_sites		ftp://ftp.python.org/pub/python/${version}/ \
					http://www.python.org/ftp/python/${version}/
distname			Python-${version}
use_bzip2			yes
checksums			md5 a2c089faa2726c142419c03472fc4063

# Should be depends_extract, but that isn't implemented
depends_build		bin:gnutar:gnutar

extract.post_args	| gnutar -xf -

patchfiles			patch-Makefile.pre.in

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--mandir=${prefix}/share/man

variant nothreads {
	configure.args-append	--without-threads
}

variant puredarwin {
	configure.args-append	--disable-toolbox-glue
}

variant pydebug {
	configure.args-append	--with-pydebug
}

variant shared {
	configure.args-append	--enable-shared
	if {[variant_isset darwin]} {
		configure.env-append	LIBS="-framework CoreServices \
								-framework Foundation"
	}
	patchfiles-append		patch-configure.in
	post-patch {
		reinplace "s|@@VERSION@@|${version}|g" \
			${worksrcpath}/Makefile.pre.in
	}
	use_autoconf			yes
}

variant darwin {
	patchfiles-append		patch-Modules_getpath.c
}

