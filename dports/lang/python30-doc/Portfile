# $Id$

PortSystem 1.0

categories              lang
depends_lib             port:py25-docutils port:python30
use_configure   	no

name			python30-doc
version			3.0a3
platforms		darwin
maintainers		mww
description		Python 3.0 Docs
long_description	${description}

homepage		http://docs.python.org/
master_sites		http://www.python.org/ftp/python/3.0/
distname		Python-${version}
dist_subdir		python30
checksums		md5 ec525b7e7fe4383e8394fab721663252
extract.suffix		.tgz

worksrcdir		${worksrcdir}/Doc
build.target		html
extract.post_args	"| tar -xf - ${distname}/Doc"

set mydest /Library/Frameworks/Python.framework/Versions/3.0/Resources/English.lproj/Documentation

destroot {
	file mkdir ${destroot}${prefix}/${mydest}
	file copy ${worksrcpath}/build/html ${destroot}${prefix}/${mydest}
	file mkdir ${destroot}${prefix}/share/doc/$name
	system "cd ${destroot}${prefix}/share/doc/$name && \
		ln -sf ${prefix}/${mydest}/html"
}

post-activate {
ui_msg "\n\n\nPlease note that python-3.0a3 is alpha software.\nThe current docs are broken and unfinished, so many topics mentioned by\n\npydoc3.0 topics\n\nwill not work.\nYou will find the docs in:\n"
ui_msg "${prefix}/${mydest}\n\n\n"
}

livecheck.check	regex
livecheck.url	http://www.python.org/download/releases/3.0/
livecheck.regex	/3.0/Python-(\[0-9a-z.\]+)\\.tgz
