# $Id$

PortSystem 1.0

name			python30
version			3.0a3
categories		lang
platforms		darwin
maintainers		mww
description		An interpreted, object-oriented programming language
long_description	Python is an interpreted, interactive, object-oriented \
			programming language. This version is an ALPHA release!

homepage		http://www.python.org
master_sites		http://www.python.org/ftp/python/3.0/
distname		Python-${version}
extract.suffix		.tgz
checksums		md5 ec525b7e7fe4383e8394fab721663252
patchfiles		patch-setup.py \
			patch-Makefile.pre.in.diff

depends_lib		port:gettext
configure.args		--without-readline --enable-shared --enable-ipv6 --disable-tk --enable-framework=${prefix}/Library/Frameworks

destroot.target		frameworkinstall maninstall libpython3.0.dylib

post-destroot {
	system "cd ${destroot}${prefix}/bin && \
		rm idle pydoc python python-config pythonw smtpd.py"
	system "cd ${destroot}${prefix}/share/man/man1 && \
	ln -sf ${prefix}/Library/Frameworks/Python.framework/Versions/3.0/share/man/man1/python.1 python3.0.1"
	system "cd ${destroot}${prefix}/lib && \
	ln -sf ${prefix}/Library/Frameworks/Python.framework/Versions/3.0/libpython3.0.dylib"

	xinstall -m 755 -d ${destroot}${prefix}/etc/select/python
	xinstall -m 644 ${filespath}/python30 ${destroot}${prefix}/etc/select/python/

}

livecheck.check		regex
livecheck.url		http://www.python.org/download/releases/3.0/
livecheck.regex		/3.0/Python-(\[0-9a-z.\]+)\\.tgz
 
