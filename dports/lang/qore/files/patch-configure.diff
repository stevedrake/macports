--- configure.orig	2008-12-03 06:51:39.000000000 -0600
+++ configure	2008-12-12 05:28:49.000000000 -0600
@@ -21048,6 +21048,11 @@
    fi
 fi
 
+# set find prefix
+if test -n "$prefix" -a "$prefix" != "NONE"; then
+   find_prefix="$prefix"
+fi
+
 #AC_CANONICAL_HOST
 # get CPU family
 case "${host_cpu}" in
@@ -21440,7 +21445,7 @@
 
 { echo "$as_me:$LINENO: checking for zlib libraries and header files" >&5
 echo $ECHO_N "checking for zlib libraries and header files... $ECHO_C" >&6; }
-for dir in "${with_zlib_dir}" /usr / /usr/local /opt/gnu /opt/zlib /usr/local/zlib /opt/local /sw /usr/sfw /opt/sfw; do
+for dir in "${with_zlib_dir}" "${find_prefix}" /usr / /usr/local /opt/gnu /opt/zlib /usr/local/zlib /opt/local /sw /usr/sfw /opt/sfw; do
     find_zlib $dir
     if test -n "$ZLIB_LDFLAGS"; then
         break
@@ -21530,7 +21535,7 @@
 
 { echo "$as_me:$LINENO: checking for pcre libraries and header files" >&5
 echo $ECHO_N "checking for pcre libraries and header files... $ECHO_C" >&6; }
-for dir in "${with_pcre_dir}" /usr / /usr/local /opt/gnu /opt/pcre /usr/local/pcre /opt/local /sw /usr/sfw /opt/sfw; do
+for dir in "${with_pcre_dir}" "${find_prefix}" /usr / /usr/local /opt/gnu /opt/pcre /usr/local/pcre /opt/local /sw /usr/sfw /opt/sfw; do
     find_pcre $dir
     if test -n "$PCRE_LDFLAGS"; then
         break
@@ -21642,7 +21647,7 @@
 
 { echo "$as_me:$LINENO: checking for libxml2 libraries and header files" >&5
 echo $ECHO_N "checking for libxml2 libraries and header files... $ECHO_C" >&6; }
-for dir in "${with_libxml2_dir}" /usr / /usr/local /opt/gnu /opt/libxml2 /usr/local/libxml2 /opt/local /sw /usr/sfw /opt/sfw; do
+for dir in "${with_libxml2_dir}" "${find_prefix}" /usr / /usr/local /opt/gnu /opt/libxml2 /usr/local/libxml2 /opt/local /sw /usr/sfw /opt/sfw; do
     find_libxml2 $dir
     if test -n "$LIBXML2_LDFLAGS"; then
         break
@@ -21745,7 +21750,7 @@
 
 { echo "$as_me:$LINENO: checking for bz2lib libraries and header files" >&5
 echo $ECHO_N "checking for bz2lib libraries and header files... $ECHO_C" >&6; }
-for dir in "${with_bz2lib_dir}" /usr / /usr/local /opt/gnu /opt/bzlib /usr/local/bzlib /opt/local /sw /usr/sfw /opt/sfw; do
+for dir in "${with_bz2lib_dir}" "${find_prefix}" /usr / /usr/local /opt/gnu /opt/bzlib /usr/local/bzlib /opt/local /sw /usr/sfw /opt/sfw; do
     find_bz2lib $dir
     if test -n "$BZ2_LDFLAGS"; then
         break
@@ -21831,7 +21836,7 @@
 
 { echo "$as_me:$LINENO: checking for openssl libraries and header files" >&5
 echo $ECHO_N "checking for openssl libraries and header files... $ECHO_C" >&6; }
-for dir in "${with_openssl_dir}" /usr / /usr/local /opt/gnu /opt/openssl /usr/local/openssl /opt/local /sw /usr/sfw /opt/sfw; do
+for dir in "${with_openssl_dir}" "${find_prefix}" /usr / /usr/local /opt/gnu /opt/openssl /usr/local/openssl /opt/local /sw /usr/sfw /opt/sfw; do
     find_openssl $dir
     if test -n "$OPENSSL_LDFLAGS"; then
         break
