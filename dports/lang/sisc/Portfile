# $Id: Portfile,v 1.1 2004/04/25 00:26:24 blb Exp $
PortSystem	1.0
name		sisc
version		1.8.8
categories	lang java
platforms	darwin
maintainers	sleepinghead@netzero.net
description	Second Interpreter of Scheme Code
long_description	SISC is a Java based interpreter of Scheme.
homepage	http://sisc.sourceforge.net/
master_sites	sourceforge
distfiles	${name}-${version}.jar
checksums	md5 d6ac6795f0f3256a93bba9c88735c868
worksrcdir	${name}
use_zip		yes
use_configure	no
depends_build	bin:ant:apache-ant path:${prefix}/share/xsl:docbook-xsl
pre-build	{
	reinplace "s|/usr/share/sgml/docbook/stylesheet/xsl/nwalsh|${prefix}/share/xsl/docbook-xsl|" ${worksrcpath}/build.xml
}
build.cmd	ant
build.target	full-dist
destroot	{
	xinstall -m 755 ${worksrcpath}/dist/full/sisc/sisc \
		${destroot}${prefix}/bin/sisc
	reinplace "s|\"`dirname \$0`\"|\"${prefix}/share/java/sisc\"|" \
		${destroot}${prefix}/bin/sisc

	xinstall -m 755 ${worksrcpath}/dist/full/sisc/install-srfi22.sh \
		${destroot}${prefix}/bin/install-srfi22.sh
	reinplace "s|/usr/local/bin|${prefix}/bin|" \
		${destroot}${prefix}/bin/install-srfi22.sh
	reinplace "s|scheme-src|${prefix}/share/java/sisc/scheme-src|" \
		${destroot}${prefix}/bin/install-srfi22.sh

	xinstall -d ${destroot}${prefix}/share/java/sisc/scheme-src/srfi-22
	system "cp -r ${worksrcpath}/dist/full/sisc/scheme-src \
		${destroot}${prefix}/share/java/sisc"
	system "cp ${worksrcpath}/dist/full/sisc/*.jar \
		${worksrcpath}/dist/full/sisc/*.shp \
		${destroot}${prefix}/share/java/sisc"

	xinstall -d ${destroot}${prefix}/share/doc/sisc
	system "cp ${worksrcpath}/dist/full/sisc/ChangeLog \
		${worksrcpath}/dist/full/sisc/COPYING \
		${worksrcpath}/dist/full/sisc/GOALS \
		${worksrcpath}/dist/full/sisc/README \
		${worksrcpath}/dist/full/sisc/TODO \
		${worksrcpath}/dist/full/sisc/doc/* \
		${destroot}${prefix}/share/doc/sisc"
}
