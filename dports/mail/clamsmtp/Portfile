# $Id: Portfile,v 1.6 2004/10/11 20:09:59 mww Exp $

PortSystem 1.0

name			clamsmtp
version			0.9.6
categories		mail security
platforms		darwin
maintainers		mww@opendarwin.org
description		SMTP filter checking for viruses using the ClamAV anti-virus
long_description	ClamSMTP is an SMTP filter that allows you to check for \
					viruses using the ClamAV anti-virus software. It accepts \
					SMTP connections and forwards the SMTP commands and \
					responses to another SMTP server. The 'DATA' email body is \
					intercepted and scanned before forwarding.

homepage		http://memberwebs.com/nielsen/software/${name}/
master_sites	${homepage}
checksums		md5 f9eae7fd8ce1b5ecabd0e680b1cfb6d3

depends_run		bin:clamd:clamav

configure.args	--mandir=${prefix}/share/man

build.args		CFLAGS=-I${prefix}/include \
				LDFLAGS=-L${prefix}/lib

post-destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/etc/rc.d/ \
		${destroot}${prefix}/share/doc/${name}/
	xinstall -m 644 ${filespath}/clamsmtpd.sh ${destroot}${prefix}/etc/rc.d/
	xinstall -m 644 ${filespath}/clamsmtpd.conf ${destroot}${prefix}/etc/
	reinplace "s|__PREFIX__|${prefix}|g" \
		${destroot}${prefix}/etc/rc.d/clamsmtpd.sh \
		${destroot}${prefix}/etc/clamsmtpd.conf
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README \
		${destroot}${prefix}/share/doc/${name}
}
