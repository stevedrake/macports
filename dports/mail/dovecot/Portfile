# $Id: Portfile,v 1.5 2004/05/23 05:03:56 yeled Exp $

PortSystem			1.0
name				dovecot 
version				0.99.10.4
categories			mail
description			(more) secure imap server
maintainers			yeled@opendarwin.org
long_description	Dovecot is an IMAP and POP3 server for Linux/UNIX-like \
					systems, written with security primarily in mind. Although \
					it's written in C, it uses several coding techniques to \
					avoid most of the common pitfalls.
homepage			http://dovecot.org/
platforms			darwin
master_sites		${homepage}
checksums			${name}-${version}.tar.gz md5 \
						81eda7985e99d28acd6d286aa0e13e07
configure.args		--sysconfdir=${prefix}/etc/${name}

post-destroot	{
	set rcDir ${destroot}${prefix}/etc/rc.d
	xinstall -m 755 -d ${rcDir}
	xinstall -m 755 -c ${filespath}/dovecot.sh ${rcDir}
	reinplace "s|__PREFIX|${prefix}|g" \
		${rcDir}/dovecot.sh
}

variant postgres	{	
	depends_lib-append	lib:plpgsql:postgresql 
	configure.args-append	--with-pgsql
}

variant rawlog	{	configure.args-append	--with-rawlog	}

variant ldap	{	configure.args-append	--with-ldap	}

variant test	{
		version	1.0-test11
		master_sites	${homepage}/test/
		checksums-append	${name}-${version}.tar.gz md5 \
								30071f8af0abd0570addd4252c99fdf3
}
