# $Id$
PortSystem	1.0
name		hypermail
version		2.2.0
categories	mail textproc
maintainers	nomaintainer
description	Hypermail, mail to cross-referenced HTML converter
long_description	Hypermail is a program that takes a file of mail \
		messages in UNIX mailbox format and generates a set of \
		cross-referenced HTML documents.

homepage	http://www.hypermail.org
master_sites    sourceforge

platforms	darwin
checksums   md5     a064e36780ee41409c8c973f9c69927f \
            sha1    311b38625d8688da5665cc60c5310588bd07dfcf \
            rmd160  d2c75e04312b15d4e578663ca9b1fae3f56a4fa6

patchfiles	patch-src-proto.h \
            patch-src-file.c.diff \
            patch-configure.diff \
            patch-config.h.in.diff \
            patch-src-Makefile.in.diff

# Rename INSTALL as make gets confused otherwise (on HFS+ where INSTALL and
# install are the same file)
post-patch {
		system "mv ${worksrcpath}/INSTALL ${worksrcpath}/INSTALL.txt"
}

# enable-static/disable-shared are here as they need to be passed to the
# internal PCRE stuff, otherwise it'll build PCRE shared, but not install
# which is a bit bad...
configure.args	--enable-static --disable-shared --without-gdbm \
		--mandir=\\\${prefix}/share/man \
		--with-cgidir=\\\${prefix}/share/hypermail/cgi-bin \
		--with-htmldir=\\\${prefix}/share/doc/hypermail \

destroot.args	prefix=${destroot}${prefix}

variant gdbm {
    depends_lib             port:gdbm
    configure.args-delete	--without-gdbm
    configure.args-append	--with-gdbm=${prefix}
}

