# $Id: Portfile,v 1.3 2005/11/12 17:41:27 mww Exp $

PortSystem 1.0

name			imapfilter
version			1.1.1
categories		mail
platforms		darwin
maintainers		mww@opendarwin.org
description		IMAP message processor/filter
long_description	IMAPFilter connects to remote IMAP mail servers and \
				processes messages according to defined filters (rules). It is \
				intended to be executed before a user accesses his/her \
				mailboxes.

homepage		http://imapfilter.hellug.gr/
master_sites	${homepage}/source/
checksums		md5 b23dedae7546991d2387df402a923e92
use_bzip2		yes

depends_lib		lib:liblua:lua

configure.pre_args	-d \\\${DEST}${prefix}
configure.args		-m \\\${DEST}${prefix}/share/man

post-configure	{
	reinplace "s|CFLAGS =|CFLAGS +=|g" ${worksrcpath}/Makefile
	reinplace "s|LDFLAGS =|LDFLAGS +=|g" ${worksrcpath}/Makefile
}

build.env		CFLAGS=-I${prefix}/include \
				LDFLAGS=-L${prefix}/lib

destroot.destdir	DEST=${destroot}

platform darwin 8 { build.args	CC=/usr/bin/gcc-4.0 }

