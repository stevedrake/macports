# $Id$

PortSystem 1.0

name			imapsync
version			1.315
categories		mail
platforms		darwin
maintainers		mww
description		imapsync is an IMAP synchronization, copy or migration tool.
long_description	imapsync is an IMAP synchronization, copy or migration \
				tool. Synchronize mailboxes between two imap servers. It is \
				especially good at IMAP migration.

homepage		http://www.linux-france.org/prj/imapsync/
master_sites	${homepage}/dist/ freebsd
extract.suffix	.tgz
checksums           md5     35032428a47fcba2adbf4ba532b68a99 \
                    sha1    816a3f68185364244f999d88631821351f87f887 \
                    rmd160  648913dd61fc8cb2c43de49f86b6dd25e6c50e27

depends_run		path:bin/perl:perl5 \
				port:p5-digest-md5 \
				port:p5-mail-imapclient \
				port:p5-term-readkey \
				port:p5-io-socket-ssl \
				port:p5-datemanip \
				port:p5-digest-hmac

configure {
	reinplace "s|^#!.*|#!${prefix}/bin/perl|g" ${worksrcpath}/imapsync
}

build			{}

destroot {
	xinstall -m 755 ${worksrcpath}/imapsync ${destroot}${prefix}/bin/imapsync.pl
	system "cd ${destroot}${prefix}/bin && ln -s imapsync.pl imapsync"
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} CREDITS ChangeLog FAQ COPYING INSTALL README \
		TODO VERSION ${destroot}${prefix}/share/doc/${name}
}

livecheck.type	regex
livecheck.url	${homepage}/dist/?M=D
livecheck.regex	${name}-(\[.0-9\]+)\\.tgz
