# $Id: Portfile,v 1.4 2005/02/14 17:53:39 mij Exp $

PortSystem 1.0
name		mutt-devel
version		1.5.8
categories	mail
maintainers	mij@opendarwin.org
description	Mongrel of Mail User Agents (part Elm, Pine, Mush, mh, etc)
homepage	http://www.mutt.org/
platforms	darwin linux

long_description Mutt -- "The Mongrel of Mail User Agents" (part Elm, part \
		 Pine, part mh, part slrn, part everything else) is an \
		 interactive screen-oriented mailer program that supersedes \
		 Elm, Pine, mail and mailx.  Features include color support, \
		 message threading, MIME support (including RFC1522 support \
		 for encoded headers), customizable key bindings, POP3, \
		 Delivery Status Notification (DSN) support, and PGP/MIME.

master_sites	ftp://ftp.mutt.org/mutt/devel/
distname	mutt-${portversion}i
checksums	${distfiles} md5 9b9bdef4ef7107332f8782b3a910d00e

patch.args	-p1

worksrcdir	mutt-${portversion}

depends_build	bin:XXX:autoconf

configure.args	--disable-warnings \
		--mandir=${prefix}/share/man \
		--with-docdir=${prefix}/share/doc/mutt \
		--without-wc-funcs

variant darwin {
    configure.args-append	--with-libiconv-prefix=${prefix}
    depends_lib			lib:libiconv.2:libiconv lib:libintl.3:gettext
}

variant idn {
    configure.args-append	--with-idn=${prefix}
    depends_lib			lib:libidn.11:libidn
}

variant linux {
    configure.env		CFLAGS=-I/usr/kerberos/include
}

variant pop	{ configure.args-append --enable-pop }
variant imap	{ configure.args-append --enable-imap }
variant ssl	{ configure.args-append --with-ssl }
variant debug	{ configure.args-append --enable-debug }

variant cvs {
    fetch.type 		cvs
    cvs.root 		:pserver:anonymous@cvs.mutt.org:/home/roessler/cvs
    cvs.module 		mutt
    cvs.password	anonymous 
    worksrcdir		mutt
    configure.cmd	${worksrcpath}/prepare
}

variant compress {
    configure.args-append	--enable-compressed
    patch_sites-append		http://www.spinnaker.de/mutt/compressed/
    patchfiles-append		patch-1.5.8.rr.compressed.1.gz
    checksums-append		patch-1.5.8.rr.compressed.1.gz md5 \
					a45bd30996f98ba725bf479111cc9579
}

variant headercache {
    configure.args-append	--enable-hcache
    patchfiles-append		patch-maildir-header-cache
    depends_lib			lib:libdb-4:db4
    configure.env-append	CPPFLAGS="-I${prefix}/include/db4" \
    					LDFLAGS="-L${prefix}/lib -L/usr/lib"
    use_autoconf		yes
}

variant nntp conflicts compress {
    configure.args-append	--enable-nntp
    patch_sites-append		http://www.mutt.org.ua/download/mutt-1.5.8/
    patchfiles-append		patch-1.5.8.vvv.nntp.gz
    checksums-append		patch-1.5.8.vvv.nntp.gz md5 \
					b439b7cf7b7c83f4d392cc3e0cbe7aa2
}
