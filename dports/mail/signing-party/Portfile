# $Id$

PortSystem	1.0
name		signing-party
version		0.4.9
categories	mail security
maintainers	ehainry@free.fr
platforms	darwin
description	Various OpenPGP related tools
long_description	\
	signing-party is a collection for all kinds of PGP/GnuPG related things, \
	including signing scripts, party preparation scripts, etc.
homepage	http://pgp-tools.alioth.debian.org/
master_sites	http://ftp.debian.org/debian/pool/main/s/signing-party/
distname		${name}_${version}
worksrcdir		${name}-${version}
extract.suffix	.orig.tar.gz
checksums		md5 422b4d27ea38b4dbac6e011bd56e072d
use_configure	no
depends_lib	port:perl5.8 \
		port:p5-gnupg-interface \
		port:p5-text-iconv \
		port:p5-text-template \
		port:p5-mime-tools
depends_run	bin:gpg:gnupg
pre-build	{ 
		reinplace "s|/usr/bin/perl|${prefix}/bin/perl|" \
		${worksrcpath}/caff/caff ${worksrcpath}/caff/pgp-clean \
		${worksrcpath}/caff/pgp-fixkey ${worksrcpath}/gpg-key2ps/gpg-key2ps \
		${worksrcpath}/gpglist/gpglist ${worksrcpath}/gpgsigs/gpgsigs \
		${worksrcpath}/keylookup/keylookup
		}
destroot	{
		xinstall -m 0755 ${worksrcpath}/caff/caff ${worksrcpath}/caff/pgp-clean ${worksrcpath}/caff/pgp-fixkey ${destroot}${prefix}/bin
		xinstall -m 0755  ${worksrcpath}/gpg-key2ps/gpg-key2ps ${worksrcpath}/gpg-mailkeys/gpg-mailkeys ${worksrcpath}/gpglist/gpglist ${worksrcpath}/gpgsigs/gpgsigs ${worksrcpath}/keylookup/keylookup ${destroot}${prefix}/bin
		xinstall -m 0644 ${worksrcpath}/caff/caff.1 ${worksrcpath}/caff/pgp-clean.1 ${worksrcpath}/caff/pgp-fixkey.1 ${destroot}${prefix}/share/man/man1
		xinstall -m 0644 ${worksrcpath}/gpg-key2ps/gpg-key2ps.1 ${worksrcpath}/gpg-mailkeys/gpg-mailkeys.1 ${worksrcpath}/gpglist/gpglist.1 ${worksrcpath}/gpgsigs/gpgsigs.1 ${worksrcpath}/keylookup/keylookup.1 ${destroot}${prefix}/share/man/man1
		xinstall -d ${destroot}${prefix}/share/doc/signing-party
		xinstall -m 0644 ${worksrcpath}/caff/caffrc.sample ${destroot}${prefix}/share/doc/signing-party
}

variant dialog {
	depends_run-append	port:dialog
}

livecheck.check	regex
livecheck.url	http://packages.debian.org/unstable/misc/${name}
livecheck.regex	${name} .(\[0-9.\]+)
