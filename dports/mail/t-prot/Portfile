# $Id: Portfile,v 1.2 2005/06/29 00:02:22 yeled Exp $

PortSystem 1.0
name		t-prot
version		2.0
revision	1
categories	mail
maintainers	yeled@opendarwin.org
description	TOFU protection script (MUA display filter)
homepage	http://www.escape.de/users/tolot/mutt/
platforms	darwin

long_description isync is a command line utility for synchronizing a remote \
IMAP mailbox with a local maildir-style mailbox. This is useful for working in\
disconnected mode, such as on a laptop. Modifications made locally and\
remotely are synchronized so that no message status flags are lost.

master_sites	http://www.escape.de/users/tolot/mutt/t-prot/downloads/

checksums      md5 baa171d737731cd30469c9e10858f102	

use_configure no
depends_lib port:p5-getopt-mixed

build {
		cd ${worksrcpath}
		reinplace "s|/usr|${prefix}|g" t-prot
}

destroot	{
	xinstall -m 755 ${worksrcpath}/t-prot ${destroot}${prefix}/bin
	xinstall -m 644 ${worksrcpath}/t-prot.1 \
		${destroot}${prefix}/share/man/man1
	xinstall -m 755 -d ${destroot}${prefix}/share/${name}
	xinstall -m 644 -W ${worksrcpath}/contrib README.examples \
	t-prot-r1.238-gpg126.diff README.patches t-prot-r1.240-mutt157.diff \
	filter_innd.pl t-prot.sl muttrc.t-prot ${destroot}${prefix}/share/${name}/
}

post-install {
		ui_msg ""
		ui_msg "to start TOFU protection, add this to your ~/.muttrc:"
		ui_msg "source ${prefix}/share/t-prot/muttrc.t-prot"
		ui_msg ""
		ui_msg "..and switch it off and on with Esc-0, Esc-1"
		ui_msg ""
}


