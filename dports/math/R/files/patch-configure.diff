--- configure.orig	2009-06-15 09:22:20.000000000 -0600
+++ configure	2009-07-07 23:51:35.000000000 -0600
@@ -31854,10 +31854,10 @@
     DYLIB_EXT=".dylib"
     dylib_ldflags="${darwin_dylib_ldflags}"
     MAJR_VERSION=`echo "${PACKAGE_VERSION}" | sed  -e "s/[\.][1-9]$/.0/"`
-    LIBR_LDFLAGS="-install_name libR.dylib -compatibility_version ${MAJR_VERSION}  -current_version ${PACKAGE_VERSION}  -headerpad_max_install_names"
-    RLAPACK_LDFLAGS="-install_name libRlapack.dylib -compatibility_version ${MAJR_VERSION} -current_version ${PACKAGE_VERSION}  -headerpad_max_install_names"
+    LIBR_LDFLAGS="-install_name \$(libdir)/R/lib/libR.dylib -compatibility_version ${MAJR_VERSION}  -current_version ${PACKAGE_VERSION}  -headerpad_max_install_names"
+    RLAPACK_LDFLAGS="-install_name \$(libdir)/R/lib/libRlapack.dylib -compatibility_version ${MAJR_VERSION} -current_version ${PACKAGE_VERSION}  -headerpad_max_install_names"
     ## don't use version in libRblas so we can replace it with any BLAS implementation
-    RBLAS_LDFLAGS="-install_name libRblas.dylib -headerpad_max_install_names"
+    RBLAS_LDFLAGS="-install_name \$(libdir)/R/lib/libRblas.dylib -headerpad_max_install_names"
     ;;
   hpux*)
     ## Needs to avoid embedding a relative path ../../../bin.
@@ -38329,20 +38329,6 @@
 fi
 
 
-case "${host_os}" in
-  darwin*)
-    ## In order to allow the R build to be relocatable, we strip paths
-    ## from all shlibs and rely on DYLD_LIBRARY_PATH. Unfortunately
-    ## Darwin linker ignores it at build-time and doesn't use -L to
-    ## resolve dylib dependencies, so libRblas will not be found unless
-    ## we tell ld where it lives. I don't know of any more elegant solution :/
-    if test "x${use_blas_shlib}" = xyes; then
-      LIBR="${LIBR} -dylib_file libRblas.dylib:\$(R_HOME)/lib\$(R_ARCH)/libRblas.dylib"
-    fi
-  ;;
-esac
-
-
 ## This version is used to build a shared BLAS lib
 BLAS_LIBS0=${BLAS_LIBS}
 
