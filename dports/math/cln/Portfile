# $Id: Portfile,v 1.11 2005/11/24 22:58:13 gwright Exp $

PortSystem 1.0
name		cln
version		1.1.11
categories	math
platforms	darwin
maintainers	gwright@opendarwin.org
description	Class Library for Numbers
long_description	\
		CLN is a C++ library providing a rich library of 	\
		numeric functions.

use_bzip2	yes

homepage	http://www.ginac.de/CLN/
master_sites	ftp://ftpthep.physik.uni-mainz.de/pub/gnu/

checksums	md5 7313dc20608ddc5dcfdae4d2f9138762

depends_lib	port:gmp

platform darwin 7 {
		depends_build	port:gcc40

		configure.env	CC="gcc-dp-4.0"				\
				CXX="g++-dp-4.0"			\
				LDFLAGS="-lstdc++ -L${prefix}/lib"	\
				CPPFLAGS="-I${prefix}/include"		\
				CFLAGS="-O2 -fno-exceptions -finline-limit=1000 -I../include -I${prefix}/include"	\
				CXXFLAGS="-O2 -fno-exceptions -finline-limit=1000 -I../include -I${prefix}/include -L${prefix}/lib"
}

platform darwin 8 {
		configure.env	LDFLAGS="-lstdc++ -L${prefix}/lib"	\
				CPPFLAGS="-I${prefix}/include"		\
				CFLAGS="-O2 -fno-exceptions -finline-limit=1000 -I../include -I${prefix}/include"	\
				CXXFLAGS="-O2 -fno-exceptions -finline-limit=1000 -I../include -I${prefix}/include -L${prefix}/lib"
}


configure.args	--with-gmp				\
		--infodir=${prefix}/share/info		\
		--mandir=${prefix}/share/man

build		{ cd ${worksrcpath}
		  system "LDFLAGS=\"-lstdc++ -Wl,-read_only_relocs,warning -L${prefix}/lib\" make all"
		}

default_variants	+test
variant test	{ test.run	yes
		  test.cmd	make
		  test.target	check
		}

