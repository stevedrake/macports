# $Id: Portfile,v 1.1 2005/08/10 12:23:08 gwright Exp $

PortSystem 1.0
name		fftw-3-single
version		3.0.1-fma
categories	math
platforms	darwin
maintainers	gwright@opendarwin.org

description	Fast C routines to compute the Discrete Fourier Transform
long_description	\
		FFTW is a C subroutine library for computing the	\
		Discrete Fourier Transform (DFT) in one or more		\
		dimensions, of both real and complex data, and of	\
		arbitrary input size. We believe that FFTW, which is	\
		free software, should become the FFT library of choice	\
		for most applications. Our benchmarks, performed on a	\
		variety of platforms, show that FFTW's performance is	\
		typically superior to that of other publicly available	\
		FFT software. Moreover, FFTW's performance is portable:	\
		the program will perform well on most architectures	\
		without modification.					\
									\
		This port is of fftw version 3.x. It has many		\
		improvements relative to 2.x, but is not backwardly	\
		compatible.

homepage	http://www.fftw.org/
master_sites	${homepage} \
		ftp://ftp.fftw.org/pub/fftw/ \
		ftp://ftp.kusastro.kyoto-u.ac.jp/pub/src/GNU/fftw/

distname	fftw-${portversion}

checksums	md5 fe6d96580eaeda1035ecab54507b4092

depends_lib	port:fftw-3

configure.args	--enable-type-prefix		\
		--enable-threads		\
		--enable-fma			\
		--enable-float			\
		--enable-altivec		\
		--disable-fortran		\
		--mandir=${prefix}/share/man	\
		--infodir=${prefix}/share/info

variant fortran	{ depends_lib-append	port:gcc40
		  configure.args-delete	--disable-fortran
		  configure.args-append	--enable-fortran=gfortran-dp-4.0
		}

post-build	{ cd ${worksrcpath}
		  system "make check"
		}

post-destroot	{ file delete ${destroot}${prefix}/include/fftw3.f
		  file delete ${destroot}${prefix}/include/fftw3.h
		  file delete ${destroot}${prefix}/bin/fftw-wisdom-to-conf
		  file delete ${destroot}${prefix}/share/man/man1/fftw-wisdom-to-conf.1
		  file delete ${destroot}${prefix}/share/info/fftw3.info
		  file delete ${destroot}${prefix}/share/info/fftw3.info-1
		  file delete ${destroot}${prefix}/share/info/fftw3.info-2
		  file delete ${destroot}${prefix}/share/info/fftw3.info-3
		  file delete ${destroot}${prefix}/share/info/fftw3.info-4
		  file delete ${destroot}${prefix}/share/info/fftw3.info-5
		}

