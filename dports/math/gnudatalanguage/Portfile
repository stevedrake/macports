# $Id$
PortSystem 1.0
name            gnudatalanguage
version         0.9pre4
categories      math science
maintainers     takeshi@mac.com
platforms       darwin
description     a free IDL combatible icncremental compiler
long_description \
                A free IDL (Interactive Data Language) compatible \
                incremental compiler (ie. runs IDL programs).
homepage        http://gnudatalanguage.sourceforge.net/
master_sites    sourceforge
distname        gdl-${version}

checksums       md5 21f03676b44937b9cc855922618a73d2

depends_lib     port:bzip2 \
                port:freetype \
                port:gsl \
                port:hdf5 \
                port:ImageMagick \
                port:jpeg \
                port:ncurses \
                port:netcdf \
                port:plplot \
                port:python24 \
                port:py-numarray \
                port:readline \
                port:tiff \
                port:zlib
depends_build   port:g95 \
                port:odcctools

configure.env       LDFLAGS="-undefined dynamic_lookup"
configure.args      --with-plplotdir=${prefix} \
                    --with-ncursesdir=${prefix} \
                    --with-readlinedir=${prefix} \
                    --with-gsldir=${prefix} \
                    --with-netcdf=${prefix} \
                    --without-hdf --with-hdf5=${prefix} \
                    --with-python=${prefix} --enable-python_version=2.4 \
                    --with-Magick=${prefix}
 
destroot.destdir    prefix=${destroot}${prefix}
destroot.target     install-strip

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
    foreach f {AUTHORS COPYING ChangeLog HACKING INSTALL NEWS PYTHON.txt README TODO} {
        eval xinstall -m 644 [glob ${worksrcpath}/${f}] ${destroot}${prefix}/share/doc/${name}
    }
}

pre-activate {
    ui_msg "This port conflicts with antlr. If this port fails to"
    ui_msg "activate, uninstall or deactivate antlr and attempt to"
    ui_msg "activate this port again."
}