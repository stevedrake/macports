# $Id$

PortSystem        1.0
name              isabelle
version           2007
categories        math lang ml
maintainers       mww
description       Isabelle is a popular generic theorem proving environment.
long_description  Isabelle is a generic proof assistant. It allows mathematical \
                  formulas to be expressed in a formal language and provides \
                  tools for proving those formulas in a logical calculus. The \
                  main application is the formalization of mathematical proofs \
                  and in particular formal verification, which includes proving \
                  the correctness of computer hardware or software and proving \
                  properties of computer languages and protocols.

homepage          http://www.cl.cam.ac.uk/Research/HVG/Isabelle/
master_sites      http://isabelle.in.tum.de/dist/ \
                  http://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/ \
                  http://mirror.cse.unsw.edu.au/pub/isabelle/dist/

distname          Isabelle${version}
checksums         md5 088e56b79a4c8cd3e4de7dad62a35827 \
                  sha1 dd1312a1af296cb02754069691801a23e03c7e15

depends_lib       port:polyml

post-extract {
    file rename ${worksrcpath}/doc ${workpath}/doc
    system "cd ${worksrcpath} && mv ANNOUNCE CONTRIBUTORS COPYRIGHT NEWS README ${workpath}/doc"
}

use_configure     no

build {
    system "cd ${workpath}/${worksrcdir} && ./build -a -b"
}

destroot {
    file copy ${worksrcpath} ${destroot}${prefix}/lib/${name}
    foreach f {isabelle isabelle-interface isabelle-process isatool} {
        ln -sf ${prefix}/lib/isabelle/bin/${f} ${destroot}${prefix}/bin
    }
    xinstall -d ${destroot}${prefix}/share/doc/
    file copy ${workpath}/doc ${destroot}${prefix}/share/doc/${name}-${version}
}

livecheck.check regex
livecheck.url   http://www.cl.cam.ac.uk/research/hvg/Isabelle/download.html
livecheck.regex Isabelle(\[0-9\]+).tar.gz

