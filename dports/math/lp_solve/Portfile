# $Id$

PortSystem              1.0

name                    lp_solve
version                 5.5.0.13
revision                1
set branch              [join [lrange [split ${version} .] 0 1] .]
categories              math
platforms               darwin
maintainers             nomaintainer

description             Linear Programming Solver

long_description        Mixed Integer Linear Programming (MILP) solver. \
                        lp_solve solves pure linear, (mixed) integer/binary, \
                        semi-continuous and special ordered sets (SOS) models. \
                        lp_solve is written in ANSI C and can be compiled on \
                        many different platforms like Mac OS X, Linux and Windows.

homepage                http://lpsolve.sourceforge.net/${branch}/
master_sites            sourceforge:lpsolve
distname                ${name}_${version}_source
worksrcdir              ${name}_${branch}

checksums               md5     e8e71b1bf86267597d5776ab0f69721d \
                        sha1    ddad2f7aabfcc9c9998800c09b4a3d27fca7138f \
                        rmd160  63ffd2df25bde0c7ca5da4fba4140a8fb97b0495

post-extract {
    xinstall -m 644 ${filespath}/Makefile ${worksrcpath}
}

patchfiles              patch-Wno-long-double.diff \
                        patch-CC.diff

use_configure           no

build.args              CC=${configure.cc}

destroot {
    xinstall -m 755 -W ${worksrcpath}/lpsolve55 \
        liblpsolve55.a liblpsolve55.dylib ${destroot}${prefix}/lib
    xinstall -m 755 -W ${worksrcpath}/lp_solve \
        lp_solve ${destroot}${prefix}/bin
    xinstall -m 755 -d ${destroot}${prefix}/include/lpsolve
    eval xinstall -m 444 [glob ${worksrcpath}/*.h] \
        ${destroot}${prefix}/include/lpsolve/
}

