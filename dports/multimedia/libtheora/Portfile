# $Id$

PortSystem       1.0

name             libtheora
version          1.0alpha7
revision         2
categories       multimedia
platforms        darwin
maintainers      nomaintainer
description      Xiph.org Foundation's open video codec

long_description \
	Theora is an open video codec being developed by the \
	Xiph.org Foundation as part of their Ogg project (It is \
	a project that aims to integrate On2's VP3 video codec, \
	Ogg Vorbis audio codec and Ogg multimedia container \
	formats into a multimedia solution that can compete \
	with MPEG-4 format).

homepage         http://www.theora.org/
master_sites     http://downloads.xiph.org/releases/theora/
use_bzip2        yes

checksums        md5 1bc851e39e4b16977131d5e5f769f48b \
                 sha1 ee97d30e0818c27666477113c019d53f15449d3d \
                 rmd160 45a46c35cb1bd6f44a82a286940937e031edb14f

patchfiles       patch-configure

post-patch {
    if {! [variant_isset doc]} {
        reinplace -E "s/^(all|install):.*/\\1:/" \
            ${worksrcpath}/doc/Makefile.in
    }
}

depends_build    port:pkgconfig
depends_lib      port:libvorbis port:libogg

configure.args   --disable-oggtest --disable-vorbistest

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
	if {! [variant_isset doc]} {
		xinstall -d ${destroot}${docdir}
	}
    xinstall -m 0644 -W ${worksrcpath} AUTHORS CHANGES COPYING LICENSE README \
        ${destroot}${docdir}
}

test.run    yes
test.target check

variant doc description {Install extra documentation} {}

livecheck.check  regex
livecheck.url    ${master_sites}?C=M&O=D
livecheck.regex  ${name}-(\\d+(?:\\.\\d+)*(?:\\w+\\d*)?)

