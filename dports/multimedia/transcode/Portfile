# $Id$

PortSystem 1.0

name        transcode
version     1.1.0alpha7
revision    1
categories  multimedia
maintainers cremes@mac.com liontooth@cogweb.net
description Video and audio processing tools
long_description    transcode is a suite of tools, all of which are \
            command line utilities, for transcoding various \
            video, audio, and container formats, running on a \
            platform that supports shared libraries and threads.\
            \
            Decoding and encoding is done by modules that are \
            responsible for feeding transcode with raw video/ \
            audio streams (import modules) and encoding the frames \
            (export modules). \
            \
            It includes a variety of video and audio filters, \
            including (but not limited to) video de-interlacing, \
            audio resampling, framerate conversion, different \
            resizing algorithms, smoothing, sharpening, denoisifying, \
            and cutting.

homepage        http://www.transcoding.org

master_sites    http://fromani.exit1.org/
distname        ${name}-${version}
use_bzip2       yes

checksums       ${distname}${extract.suffix} \
                 md5 1f2f2df059c801038743f2a8210c2fb5 \
                 sha1 0f329d33cf1fcf5d16ea727087740c25a7664ed2

depends_lib     port:automake \
                port:autoconf \
                port:libtool \
                port:ffmpeg \
                port:libmpeg2 \
                port:libdvdread \
                port:jpeg \
                port:lame

pre-configure       { cd ${worksrcpath}
            system "LIBTOOLIZE=glibtoolize autoreconf -i -f"
            }

platforms       darwin

configure.args  --disable-mmx \
                --disable-altivec \
                --with-libavcodec-prefix=${prefix} \
                --with-libmpeg2-prefix=${prefix} \
                --with-libdvdread-prefix=${prefix} \
                --with-libjpeg-prefix=${prefix} \
                --with-lame-prefix=${prefix}

# Optional components

variant a52dec {
    depends_lib-append port:a52dec
    configure.args-append --enable-a52 --enable-a52-default-decoder --with-a52-prefix=${prefix}
}

variant faac {
    depends_lib-append port:faac
    configure.args-append --enable-faac --with-faac-prefix=${prefix}
}

variant faad2 {
    depends_lib-append port:faad2
    configure.args-append --enable-faad --with-faad-prefix=${prefix}
}

variant freetype {
    depends_lib-append port:freetype
    configure.args-append --enable-freetype2 --with-freetype2-prefix=${prefix}
}

variant imagemagick {
    depends_lib-append port:ImageMagick
    configure.args-append --enable-imagemagick --with-imagemagick-prefix=${prefix}
}

variant libdv {
    depends_lib-append port:libdv
    configure.args-append --enable-libdv --with-libdv-prefix=${prefix}
}

variant libogg {
    depends_lib-append port:libogg
    configure.args-append --enable-ogg --with-ogg-prefix=${prefix}
}

variant libsdl {
    depends_lib-append port:libsdl
    configure.args-append --enable-sdl --with-sdl-prefix=${prefix}
}

variant libtheora {
    depends_lib-append port:libtheora
    configure.args-append --enable-theora --with-theora-prefix=${prefix}
}

variant libvorbis {
    depends_lib-append port:libvorbis
    configure.args-append --enable-vorbis --with-vorbis-prefix=${prefix}
}

variant libxml2 {
    depends_lib-append port:libxml2
    configure.args-append --enable-libxml2 --with-libxml2-prefix=${prefix}
}

variant x264 {
    depends_lib-append port:x264
    configure.args-append --enable-x264 --with-x264-prefix=${prefix}
}

variant xvid {
    depends_lib-append port:XviD
    configure.args-append --enable-xvid --with-xvid-prefix=${prefix}
}

