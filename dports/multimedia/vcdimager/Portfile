# $Id: Portfile,v 1.7 2005/08/18 07:06:50 blb Exp $

PortSystem			1.0
name				vcdimager
version				0.7.22
revision			1
categories			multimedia
maintainers			darwinports@opendarwin.org
description			Free software (Super) video CD authoring solution
long_description \
	The GNU (Super)VideoCD authoring solution for mastering, extracting \
	and analyzing Video CDs and Super Video CDs.

platforms			darwin

homepage			http://www.vcdimager.org/
master_sites		${homepage}pub/vcdimager/vcdimager-0.7/

checksums			md5 d7ceca2631fb732ff1257c2d3a7df45d \
					sha1 f160f57afbb4f14f0c27b8f64801250e5c124aaf

depends_lib			lib:libcdio.0:libcdio lib:libpopt:popt \
					port:libxml2

post-patch {
	reinplace "s| -Wl,--version-script=libvcdinfo.la.ver||" \
		${worksrcpath}/lib/Makefile.in
}

configure.env		CPPFLAGS="-I${prefix}/include" \
					LDFLAGS="-L${prefix}/lib -framework CoreFoundation \
							-framework IOKit"
configure.args		--infodir=${prefix}/share/info \
					--mandir=${prefix}/share/man \
					--with-cli-frontend --with-xml-frontend \
					--with-xml-prefix=${prefix}

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHORS BUGS COPYING FAQ HACKING \
		NEWS README THANKS TODO ${destroot}/${prefix}/share/doc/${name}
	file delete -force ${destroot}/${prefix}/share/info/dir
}

