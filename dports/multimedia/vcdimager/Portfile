# $Id: Portfile,v 1.2 2004/04/06 08:04:08 blb Exp $

PortSystem			1.0
name				vcdimager
version				0.7.20
categories			multimedia
maintainers			blb@pobox.com
description			Free software (Super) video CD authoring solution
long_description \
	The GNU (Super)VideoCD authoring solution for mastering, extracting \
	and analyzing Video CDs and Super Video CDs.

platforms			darwin

homepage			http://www.vcdimager.org/
master_sites		${homepage}pub/vcdimager/vcdimager-0.7_UNSTABLE/ \
					ftp://ftp.vcdimager.org/pub/vcdimager/vcdimager-0.7_UNSTABLE/

checksums			md5 fc36c46e296671f2fc35b6811a1aeb52

depends_lib			lib:libcdio.0:libcdio

post-patch {
	reinplace "s| -Wl,--version-script=libvcdinfo.la.ver||" \
		${worksrcpath}/lib/Makefile.in
}

configure.env		CPPFLAGS="-I${prefix}/include" LDFLAGS="-L${prefix}/lib"
configure.args		--infodir=${prefix}/share/info \
					--mandir=${prefix}/share/man \
					--without-cli-frontend --without-xml-frontend

post-destroot {
	file delete -force ${destroot}/${prefix}/share/info/dir
}

variant cliFE {
	depends_lib-append		lib:libpopt:popt
	configure.args-delete	--without-cli-frontend
	configure.args-append	--with-cli-frontend
}

variant xmlFE {
	depends_lib-append		lib:libxml2:libxml2
	configure.args-delete	--without-xml-frontend
	configure.args-append	--with-xml-frontend
}

