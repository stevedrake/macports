# $Id$

PortSystem          1.0

name                x264transcode
version             0.2.4a
categories          multimedia
platforms           darwin
maintainers         gmail.com:stefan.van.der.eijk openmaintainer
supported_archs     noarch

description         Automated DVD/VOB/M2TS to MKV system
long_description    Script for automated backup of DVDs, SD vob and HD m2ts \
                    files for GNU/Linux and MacOS X. It works in _completely \
                    unattended mode_ and is designed to run in the \
                    background. It rips ALL subtitles and ALL audio tracks \
                    and transcodes video to x264, profile 3.1, crf mode, \
                    with b-frames. Video stream is cropped to get rid of \
                    black borders. Chapters work. The container is MKV.
                
homepage            http://go.warwick.ac.uk/grok/x264transcode
master_sites        https://files.warwick.ac.uk/grok/files/ \
                    https://files.warwick.ac.uk/grok/files/attic/
worksrcdir          ${name}
                    
depends_lib         port:crswallow \
                    port:giflib \
                    port:lsdvd \
                    port:mkvtoolnix \
                    port:mplayer-devel \
                    port:ogmtools

checksums           md5     5307a7d4531b706687e4c64b637307df \
                    sha1    19958babf726d1ad7f308d5bd110fd4aa2038ac2 \
                    rmd160  17b3c73441cc29d61f6fb9ee30b07d5a5c38b7cb

use_configure no
build {}

destroot {
    xinstall -m 444 ${worksrcpath}/autoripper.conf \
        ${destroot}${prefix}/etc/autoripper.conf.default
    xinstall -W ${worksrcpath} autorip.py crippler.sh  monitor.sh ripper.sh \
        x264transcode.sh ${destroot}${prefix}/bin
    file mkdir ${destroot}${prefix}/share/doc/${name}
    xinstall -m 444 -W ${worksrcpath} CHANGELOG COPYING README \
        ${destroot}${prefix}/share/doc/${name}
}

livecheck.type      regex
livecheck.regex     ${name}-(\[0-9a-z.\]+)\\.tar
