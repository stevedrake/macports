# $Id$

PortSystem 1.0

name		xine-lib
version		1.1.16.3
description	xine-lib is a free multimedia engine, released under the GPL.
long_description        ${description}
maintainers	nomaintainer
categories	multimedia
platforms	darwin
homepage	http://www.xine-project.org
master_sites    sourceforge:xine
use_bzip2   yes
checksums       md5     4f508abf088cf427a731f85634c8260d \
                sha1    64c57c5f55ff37023cc4c3d93d4df3c06950d235 \
                rmd160  279304a4e998472b2b5e79887e54c47765044ec6
depends_lib port:aalib	\
            port:esound \
            port:faad2 \
            path:lib/libavcodec.dylib:ffmpeg \
            port:flac \
            port:libogg \
            port:libvorbis \
            port:zlib \
            port:xorg-libXinerama \
            port:xorg-libXt \
            port:xorg-libXvMC \
            port:fontconfig \
            port:libpng \
            port:xorg-xcb-util

configure.env-append    LIBTOOL=glibtool
configure.args  --with-external-libfaad \
                --with-external-ffmpeg
post-configure {
    # See #17952
    reinplace "s|#define HAVE_FFMPEG_AVUTIL_H 1|#undef HAVE_FFMPEG_AVUTIL_H|" \
        ${worksrcpath}/include/configure.h
}

livecheck.distname	${name} (xine core)

platform macosx {
    configure.args-append   --enable-macosx-video \
                            --enable-coreaudio
}
