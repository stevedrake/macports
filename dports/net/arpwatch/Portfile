# $Id$

PortSystem        1.0

name              arpwatch
version           2.1a15
categories        net
platforms         darwin
maintainers       julien.touche@touche.fr.st pmq@macports.org

description       Monitor ARP & RARP requests
long_description  Arpwatch monitors ethernet activity and maintains a \
                  database of ethernet/ip address pairings. It also \
                  reports certain changes via email.

homepage          http://online.securityfocus.com/tools/142
master_sites      ftp://ftp.ee.lbl.gov

checksums         sha1 9dffaec0f132e5bb7aedfc840c5c67068bfbce69 \
		  rmd160 a27ee53275dcec3cafb85eb3df2451d42ec32b0c

livecheck.url	  "http://www.freebsd.org/cgi/ports.cgi?query=${name}&stype=all"
livecheck.regex	  ">${name}-(.*?)<"
livecheck.version 2.1.a15_3

configure.args    --quiet --mandir=${prefix}/share/man

post-configure {
    reinplace "s|-o bin -g bin||g" "${workdir}/${worksrcdir}/Makefile"
}

build.env         ARPDIR=${prefix}/var/arpwatch

destroot.target   install install-man
post-destroot {
	file mkdir ${destroot}${prefix}/share/examples/${name}-${version}

	xinstall ${build.dir}/ethercodes.dat \
		 ${destroot}${prefix}/share/examples/${name}-${version}
	xinstall ${build.dir}/d.awk \
		 ${destroot}${prefix}/share/examples/${name}-${version}
	xinstall ${build.dir}/e.awk \
		 ${destroot}${prefix}/share/examples/${name}-${version}
	xinstall ${build.dir}/p.awk \
		 ${destroot}${prefix}/share/examples/${name}-${version}
	xinstall ${build.dir}/arp2ethers \
		 ${destroot}${prefix}/share/examples/${name}-${version}
}

platform darwin { 
	configure.env       CFLAGS="-DBIND_8_COMPAT=1" 
}
