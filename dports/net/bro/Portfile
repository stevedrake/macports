# $Id$

PortSystem          1.0

name                bro
version             1.1c
categories          net security
platforms	    darwin
maintainers	    pmq@macports.org

description         BRO is a Network Intrusion Detection System
long_description    \
    Bro is an open-source, Unix-based Network Intrusion Detection System \
    (NIDS) that passively monitors network traffic and looks for suspicious \
    activity.

homepage            http://bro-ids.org
master_sites        ftp://bro-ids.org
distname	    bro-${version}
checksums	    sha1 84d21418fdc4f5089b1c221b3575197ba5962116 \
		    rmd160 51a8a8af45730ad6bfa995aa47c11b1ca0aa0f38

livecheck.check	    regex
livecheck.url	    ${homepage}/download.html
livecheck.regex	    "${master_sites}/bro-(\[0-9a-z.\]+)-stable${extract.suffix}"

# uses Apple's flex
depends_lib         port:libpcap port:bison port:openssl port:perl5.8

configure.env       CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
configure.pre_args  --prefix=${prefix}/share/bro
configure.args	    --infodir=${prefix}/share/info --mandir=${prefix}/share/man \
		    --bindir=${prefix}/bin --libdir=${prefix}/lib
#		    --enable-brov6

post-activate {
    ui_msg "Please set your BROPATH accordingly (something like \
    	   ${prefix}/share/bro/policy)."
}
