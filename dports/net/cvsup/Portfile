# $Id: Portfile,v 1.8 2006/02/23 14:45:58 mww Exp $

PortSystem 1.0
name			cvsup
version			16.1h
revision		1
categories		net devel
maintainers		yeled@opendarwin.org
description		General network file distribution system optimized for CVS
platforms		darwin
#depends_build		bin:cm3:cm3 path:${prefix}/lib/libz.a:zlib
depends_lib		bin:cm3:cm3
set cvsup-srcs		"/pub/FreeBSD/development/CVSup/sources/"
homepage		http://www.cvsup.org/
master_sites		freebsd
distname		cvsup-snap-${portversion}
checksums		sha1 976439eb09c9e929d3bb2837b5e4db14719393b2

# Mark destroot.target as .PHONY because HFS+ case insensitivity
# screws us over yet again.
patchfiles		patch-Makefile

configure		{}
post-patch		"reinplace s|/usr/local/lib|${prefix}/lib|g \
			${worksrcpath}/suplib/src/m3makefile"

# Disable static building until cm3 is fixed
#build.args		PREFIX=${prefix} M3=cm3 M3FLAGS=-DNOGUI\\ -DSTATIC
build.args		PREFIX=${prefix} M3=cm3 M3FLAGS=-DNOGUI

# Add ${prefix}/cm3/bin to our path
build.env		PATH=$env(PATH):${prefix}/cm3/bin
destroot.env		${build.env}
destroot.args		PREFIX=${destroot}/${prefix}/ M3=cm3 \
				MANDIR=${destroot}/${prefix}/share/man

