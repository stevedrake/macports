# $Id$

PortSystem 1.0
PortGroup python25 1.0

name		deluge
version		1.0.0
categories	net gnome python
maintainers nomaintainer
description	A GNOME BitTorrent client.
long_description \
	Deluge is a GNOME client for the BitTorrent network written in python.
homepage	http://www.deluge-torrent.org
platforms	darwin

master_sites	http://download.deluge-torrent.org/source/${version}/

checksums       md5 3fdb6838c1ec411d4f8ab5b1d8608f73 \
                sha1 3ca5a5609f8b956c2f80af3b5f7f8f77cfc49771 \
                rmd160 9151af0ccd95b0a9f8ed020559a9ae1e30916840

depends_lib-append	\
	port:dbus-python25 \
	port:gettext \
	port:librsvg \
	port:py25-gtk \
	port:py25-hashlib \
	port:py25-setuptools \
	port:py25-xdg \
	port:py25-zlib \
	port:boost

patchfiles  patch-setup.py.diff

configure.cflags-append	-I${prefix}/include/boost
configure.cppflags-append -I${prefix}/include/boost
build.env	\
	PYTHON_CFLAGS="-I${prefix}/include -I${prefix}/include/boost" \
	PYTHON_LDFLAGS=-L${prefix}/lib \
	CFLAGS="-I${prefix}/include -I${prefix}/include/boost" \
	PREFIX=${prefix}

pre-configure {
	if { ![file exists ${prefix}/lib/${prefix}/lib/libboost_python-mt.dylib] } {
		ui_error "You must build boost with a python variant (+python24 +python25 or +python26)"
		error "You must build boost with a python variant (+python24 +python25 or +python26)"
	}
}
