# $Id: Portfile,v 1.10 2006/03/13 18:33:43 markd Exp $

PortSystem      1.0
name            dnetc
version         2.9010.495
categories      net 
maintainers     yeled@opendarwin.org
description     distributed.net client
long_description  distributed.net believes in the capability and potential \
                of distributed computing. Their mission consists of three \
                interdependent goals: development, deployment, and \
                advocacy, to be pursued in the advancement of distributed \
                computing. \
                They advocate distributed computing, by encouraging global \
                participation and contributions of processing power, \
                bandwidth, and expertise\; by providing a forum for \
                discussion\; and by raising awareness on the Internet and \
                in the mainstream.

homepage        http://distributed.net/
platforms       darwin
distfiles       dnetc495-macosx-ppc.tar.gz
checksums       md5 a9ce95ebb986cdf3dcab04c4922688ad
master_sites    ftp://ftp.distributed.net/pub/dcti/v2.9010/ \
                http://http.distributed.net/pub/dcti/v2.9010/
worksrcdir      dnetc495-macosx-ppc

    startupitem.create    yes
    startupitem.start "${prefix}/share/${name}/dnetc.init start"
    startupitem.stop "${prefix}/share/${name}/dnetc.init stop"

configure {}
build     {}
destroot  { 
  xinstall -m 755 -d ${destroot}${prefix}/bin
  xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
  xinstall -m 755 -d ${destroot}${prefix}/share/${name}
  xinstall -m 755 -d ${destroot}${prefix}/var/db/${name}
  xinstall -m 755 ${worksrcpath}/dnetc ${destroot}${prefix}/bin

  eval xinstall -m 644 [glob ${worksrcpath}/docs/*] ${destroot}${prefix}/share/doc/${name}
  xinstall -m 755 ${portpath}/files/dnetc.init ${destroot}${prefix}/share/${name}

reinplace "s|__PREFIX__|${prefix}|g" \
    ${destroot}${prefix}/share/${name}/dnetc.init
}

# Maintain empty directories                
destroot.keepdirs ${destroot}${prefix}/var/db/${name}     

post-install {
ui_msg "===============================================================================\n"
ui_msg "Please Note! You _need_ to execute 'sudo dnetc -config' from within \n"
ui_msg ${prefix}/var/db/${name} to write the dnetc.ini file to that directory \n"
ui_msg before you can run dnetc.  Afterwards, dnetc will be started at system boot \n"
ui_msg or also manually via the startup script ${prefix}/share/${name}/dnetc.sh. \n"
ui_msg "===============================================================================\n"
}
