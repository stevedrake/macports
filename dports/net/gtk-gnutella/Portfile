# $Id: Portfile,v 1.7 2005/06/19 04:32:29 mij Exp $

PortSystem 1.0
name		gtk-gnutella
version		0.95.3
categories	net
maintainers	mij@opendarwin.org
description	GTK-based Gnutella client
homepage	http://gtk-gnutella.sourceforge.net/
platforms	darwin

long_description GTK-Gnutella is a Gnutella client that features search, \
		 download, file sharing, bandwidth limiting, host caching, \
		 and some basic statistics.

master_sites	sourceforge

checksums	md5 bde94b95622f895294bffac8cecbe67a

use_bzip2	yes

depends_lib	lib:libxml.2:libxml2 lib:libgtk.2:gtk2

depends_build	bin:gawk:gawk

configure.env	CPPFLAGS="-I${prefix}/include -no-cpp-precomp"

configure.args	-Oders \
		-D prefix=${prefix} \
		-D ccflags='-I/${prefix}/include' \
		-D sysman=${prefix}/share/man \
		-D libpth="${prefix}/lib /usr/lib" \
		-D remotectrl=true -D gtkversion=2

configure.pre_args-delete	--prefix=${prefix}

variant gtk1 {
	depends_lib-delete	lib:libgtk.2:gtk2
	depends_lib-append	lib:libgtk.1:gtk1
	configure.args-delete	'-D gtkversion=2'
	configure.args-append	'-D gtkversion=1'
}

destroot.destdir	INSTALL_PREFIX=${destroot}
