# $Id$

PortSystem          1.0

name                hdhomerun
version             20070512
categories          net multimedia
platforms           darwin

maintainers         ecronin@gizmolabs.org
description         HDHomeRun Software and Firmware
long_description    ${description}
homepage            http://www.silicondust.com

master_sites        http://download.silicondust.com/hdhomerun
distname            lib${name}_${version}
extract.suffix      .tgz
distfiles-append    ${name}_firmware_20070512.bin
extract.only        ${distname}${extract.suffix}
worksrcdir          lib${name}
checksums           ${distname}${extract.suffix} \
                        md5 9b53ec2c0391290ee25307ba345e1c05 \
                        sha1 f37c58bc49a83e9cb49cde57e28dc31519cef01c \
                        rmd160 0836472387a3350d136b294f41d781e0b95c89ad \
                    ${name}_firmware_20070512.bin \
                        md5 75995fa371021b9babe17c383244f713 \
                        sha1 58d63f1cff0ab7b930eebc9725c3d637640ac17a \
                        rmd160 b3b451a3a3dab3e1661b07b858b1f6b9bf05fc4a

livecheck.check     regex
livecheck.url       http://www.silicondust.com/wiki/downloads
livecheck.regex     libhdhomerun_(\[0-9\]+)\\.tgz
configure { }

build.target         hdhomerun_config

destroot {
    xinstall -m 0755 ${worksrcpath}/hdhomerun_config \
        ${destroot}${prefix}/bin/hdhomerun_config
    xinstall -d -m 0755 ${destroot}${prefix}/share/${name}/
    xinstall -m 0644 ${distpath}/${name}_firmware_20070512.bin \
        ${destroot}${prefix}/share/${name}/${name}_firmware_20070512.bin
}

post-activate {
    ui_msg "to upgrade device firmware run:"
    ui_msg "     hdhomerun_config <id> upgrade ${prefix}/share/${name}/${name}_firmware_20070512.bin"
}

