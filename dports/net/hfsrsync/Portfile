# $Id$

PortSystem              1.0

name                    hfsrsync
version                 2.5.5
revision                2
categories              net
maintainers             nomaintainer
description             implementation of rsync with HFS+ support
long_description        hfsrsync is an implementation of rsync with HFS+ \
                        support for support of HFS+ filesystems.
homepage                http://archive.macosxlabs.org/rsyncx/intro.html
master_sites            http://archive.macosxlabs.org/rsyncx/
distname                rsync-${version}.hfs
extract.suffix          .tgz
checksums               md5 f3a1d329c710d3c2f0183e77b3b8071e
platforms               darwin
configure.args          --mandir=${prefix}/share/man --with-rsync-path=hfsrsync --disable-ipv6
configure.cflags-append ${configure.cppflags}
depends_lib             port:popt

variant ipv6 {
    configure.args-delete  --disable-ipv6
    configure.args-append  --enable-ipv6
}

post-destroot {
    xinstall -m 0755 -s -W ${worksrcpath} rsync ${destroot}${prefix}/bin/hfsrsync
    file delete -force ${destroot}${prefix}/bin/rsync
    file rename ${destroot}${prefix}/share/man/man1/rsync.1 \
        ${destroot}${prefix}/share/man/man1/hfsrsync.1
    file rename ${destroot}${prefix}/share/man/man5/rsyncd.conf.5 \
        ${destroot}${prefix}/share/man/man5/hfsrsyncd.conf.5
}
