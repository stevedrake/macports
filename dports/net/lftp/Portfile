# $Id$

PortSystem 1.0
name                lftp
version             3.6.0
categories          net
maintainers         nomaintainer
description         Sophisticated file transfer program
long_description    LFTP is a shell-like command line ftp client. \
                    It is reliable: can retry operations and does reget \
                    automatically. It can do several transfers simultaneously \
                    in background. You can start a transfer in background and \
                    continue browsing the ftp site or another one. This all is \
                    done in one process. Background jobs will be completed in \
                    nohup mode if you exit or close modem connection. Lftp has \
                    reput, mirror, reverse mirror among its features.
homepage            http://lftp.yar.ru/
platforms           darwin 

depends_lib         port:expat port:libiconv port:ncurses port:openssl \
                    port:readline

master_sites        ftp://lftp.yar.ru/lftp/ \
                    ftp://lftp.yar.ru/lftp/old/ \
                    ftp://ftp.wiretapped.net/pub/mirrors/${name}/ \
                    ftp://ftp.wiretapped.net/pub/mirrors/${name}/old/ \
                    ftp://ftp.cs.tu-berlin.de/pub/net/ftp/${name}/ \
                    http://ftp.yars.free.net/pub/source/${name}/
use_bzip2           yes
checksums           md5 bb19dac3cd3f1b43b3074bfd2ca9785b \
                    sha1 6fbc979ac5a8fe677446229f867a58144096ac13 \
                    rmd160 590cf6d2eae5c4469996c2f44fae135be7e8ef7f

configure.args  --with-openssl --without-gnutls --disable-nls

pre-configure {
    # look for ncurses first
    reinplace "s|curses ncurses|ncurses curses|g" ${worksrcpath}/configure
}

post-destroot { set docdir ${destroot}${prefix}/share/doc/${name}-${version}
                xinstall -d ${docdir}
                xinstall -m 644 -v -W ${worksrcpath} \
                AUTHORS \
                BUGS ChangeLog COPYING FAQ FEATURES NEWS \
                README README.debug-levels README.modules \
                MIRRORS THANKS TODO \
                ${docdir}
}

variant tls {
    configure.args-append --without-openssl --with-gnutls
    configure.args-delete --with-openssl --without-gnutls
    depends_lib-append port:gnutls
    depends_lib-delete port:openssl
}

variant nls {
    patchfiles patch-po-Makefile.in.in
    configure.args-append --enable-nls
    configure.args-delete --disable-nls
    depends_lib-append port:gettext
}


livecheck.check regex
livecheck.url   ${homepage}
livecheck.regex ${name}-(\[0-9.\]+) released
