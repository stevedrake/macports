# $Id$

PortSystem 1.0

name                libpcap
version             0.9.8
revision            0
categories          net
maintainers         opendarwin.org@darkart.com
description         Packet Capture library
long_description    The Packet Capture library provides a high level \
                    interface to packet capture systems.  All packets \
                    on the network, even those destined for other hosts, \
                    are accessible through this mechanism.
homepage            http://www.tcpdump.org/
platforms           darwin
master_sites        ${homepage}release/ \
                    macports
checksums           md5 5208f24d0328ee7c20b52c43eaa9aa0e \
                    sha1 11dfe67cfc1c279c7346d626a99ad4ba90621028

configure.args             --mandir=${prefix}/share/man
# configure.env            CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
configure.cflags-append    -I. -dynamic -fno-common -DHAVE_CONFIG_H

patchfiles          patch-Makefile.in.diff

pre-configure {
    reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
    ${worksrcpath}/Makefile.in
}

variant ipv6 description { enable ipv6 support } {
    configure.args-append    --enable-ipv6
}

variant no_shared description { don't build libpcap.dylib } {
    # configure.env-delete      CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
    configure.cflags-delete     -I. -dynamic -fno-common -DHAVE_CONFIG_H
    patchfiles-delete           patch-Makefile.in
    pre-configure {
        reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
        Makefile.in
    }
}

# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
# vi: set fenc=utf-8 filetype=tcl et sw=4 ts=4 sts=4: #
