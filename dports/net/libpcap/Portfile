# $Id$

PortSystem 1.0

name                libpcap
version             0.9.5
revision            1
categories          net
maintainers         opendarwin.org@darkart.com
description         Packet Capture library
long_description    The Packet Capture library provides a high level \
                    interface to packet capture systems.  All packets \
                    on the network, even those destined for other hosts, \
                    are accessible through this mechanism.
homepage            http://www.tcpdump.org/
platforms           darwin
master_sites        macports \
                    ${homepage}release/
checksums           md5 b0626ad59004fe5767ddd2ce743a2271 \
                    sha1 3a3b0821f7201b4a72201c69ca2411a3db8a83c3

configure.args             --mandir=${prefix}/share/man
# configure.env            CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
configure.cflags-append    -I. -dynamic -fno-common -DHAVE_CONFIG_H

patchfiles          patch-Makefile.in \
                    patch-inet.c

pre-configure {
    reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
    ${worksrcpath}/Makefile.in
}

variant ipv6 {
    configure.args-append    --enable-ipv6
}

variant no_shared {
    # configure.env-delete      CFLAGS="-I. -dynamic -fno-common -DHAVE_CONFIG_H"
    configure.cflags-delete     -I. -dynamic -fno-common -DHAVE_CONFIG_H
    patchfiles-delete           patch-Makefile.in
    pre-configure {
        reinplace "s/COMPAT_INFO/-compatibility_version $version -current_version $version/" \
        Makefile.in
    }
}

