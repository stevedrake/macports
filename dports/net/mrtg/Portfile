# $Id: Portfile,v 1.5 2006/01/03 21:41:07 ricci Exp $

PortSystem	1.0

name				mrtg   
version				2.12.2

categories			net
maintainers			opendarwin.org@darkart.com jberry@opendarwin.org
platforms			darwin

description			The multi-router traffic grapher
long_description	MRTG is a tool to monitor the traffic load on network-links. \
					It can also be used to gather and display a wide variety of time-series data.
homepage			http://www.mrtg.org/
					
master_sites		http://people.ee.ethz.ch/~oetiker/webtools/mrtg/pub/ \
					ftp://ftp.chg.ru/pub/networking/monitoring/mrtg/
checksums			md5 dd74c4f28ac594938d15dc16b7f88bd2 \
					sha1 b968a8afca8bc12a5164de0f869422bb2d0156a5

depends_lib			port:gd2 \
					port:libpng \
					port:zlib

configure.env		LDFLAGS="-L${prefix}/lib" \
					CPPFLAGS="-I${prefix}/include"
configure.args		--mandir=${prefix}/share/man \
					--with-gd=${prefix} \
					--with-z=${prefix} \
					--with-png=${prefix}

post-destroot {
	destroot.keepdirs \
		${destroot}${prefix}/var/run \
		${destroot}${prefix}/var/log \
		${destroot}${prefix}/var/cache/mrtg
		
	reinplace s|"/var|"${prefix}/var| ${destroot}${prefix}/bin/mrtg
	reinplace s|"/etc|"${prefix}/etc| ${destroot}${prefix}/bin/mrtg
}

