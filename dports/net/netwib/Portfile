# $Id: Portfile,v 1.2 2004/10/28 22:05:32 mww Exp $

PortSystem 1.0

name			netwib
version			5.26.0
categories		net
platforms		darwin
maintainers		jmpalacios@ml1.net
description		A network library oriented towards developers.
long_description		Netwib is a network library providing network features \
				such as address conversion, udp/tcp clients/servers, packet \
				encoding/decoding/displaying, spoofing, sniffing, etc., and \
				general features such as data conversion, linked list and \
				hash, portable threads, etc. Using all these functions, a \
				network program can be quickly created.

homepage	http://www.laurentconstantin.com/
master_sites	${homepage}common/netw/${name}/download/v5/ \
		http://www.mirrors.wiretapped.net/security/packet-construction/${name}
extract.suffix	.tgz
distfiles	${distname}-src${extract.suffix} \
		${distname}-doc_html${extract.suffix}
checksums	${distname}-src${extract.suffix} md5 92016f4acc1817a835c02abaaf662488 \
		${distname}-doc_html${extract.suffix} md5 a942d236e6b31ed864914fa65c3076f9

depends_lib	lib:XXX:libpcap \
		lib:XXX:libnet11

worksrcdir	${distname}-src/src

pre-configure	{
		cd ${worksrcpath}
		reinplace "s|/usr/local|${prefix}|g" config.dat
		reinplace "s|/man|/share/man|g" config.dat
		reinplace "s|/share/man3|/man3|g" config.dat
		reinplace "s|/usr/local|${prefix}|g" genemake
		reinplace "s|/usr/include/pcap/|${prefix}/include/pcap/|g" genemake
}

configure.pre_args
configure.cmd		./genemake

post-destroot	{
		xinstall -d -m 755 ${destroot}${prefix}/share/doc/
		file copy ${workpath}/${distname}-doc_html ${destroot}${prefix}/share/doc/${name}
		xinstall -m 644 -v -W ${worksrcpath}/../doc/ changelog.txt credits.txt \
		guidestyle.txt todo.txt ${destroot}${prefix}/share/doc/${name}/
}

