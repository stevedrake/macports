# $Id: Portfile,v 1.1 2004/10/26 07:51:19 mww Exp $

PortSystem 1.0

name			netwib
version			5.25.0
categories		net
platforms		darwin
maintainers		jmpalacios@ml1.net
description		A network library oriented towards developers.
long_description	Netwib is a network library providing network features \
				such as address conversion, udp/tcp clients/servers, packet \
				encoding/decoding/displaying, spoofing, sniffing, etc., and \
				general features such as data conversion, linked list and \
				hash, portable threads, etc. Using all these functions, a \
				network program can be quickly created.

homepage		http://www.laurentconstantin.com/
master_sites	${homepage}/common/netw/${name}/download/v5/ \
				http://www.mirrors.wiretapped.net/security/packet-construction/${name}
extract.suffix	.tgz
distfiles		${distname}-src${extract.suffix} \
				${distname}-doc_html${extract.suffix}
checksums		${distname}-src${extract.suffix} \
					md5 96b830c0037db0aeca93fa9b36d6ecbb \
				${distname}-doc_html${extract.suffix} \
					md5 ec9b944c730e10ef9cb4734203603084

depends_lib		lib:XXX:libpcap \
				lib:XXX:libnet11

worksrcdir		${distname}-src/src

pre-configure	{
	cd ${worksrcpath}
	reinplace "s|/usr/local|${prefix}|g" config.dat
	reinplace "s|/man|/share/man|g" config.dat
	reinplace "s|/share/man3|/man3|g" config.dat
	reinplace "s|/usr/local|${prefix}|g" genemake
	reinplace "s|/usr/include/pcap/|${prefix}/include/pcap/|g" genemake
}

configure.cmd	./genemake
configure.pre_args

post-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/
	file copy ${workpath}/${distname}-doc_html \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -v -W ${worksrcpath}/../doc/ changelog.txt credits.txt \
		guidestyle.txt todo.txt ${destroot}${prefix}/share/doc/${name}/
}
