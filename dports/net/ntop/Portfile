# $Id: Portfile,v 1.13 2004/12/31 14:22:14 mww Exp $

PortSystem 1.0

name			ntop
version			3.1
categories		net
maintainers		mww@opendarwin.org
description		network traffic probe
platforms		darwin
long_description	ntop is a network traffic probe that shows the network \
				usage, similar to what the popular top Unix command does.

homepage		http://www.ntop.org/
master_sites	sourceforge
extract.suffix	.tgz
checksums		md5 1c9b4097c2e464b84f2fe8f6626d2b06

depends_build	bin:gawk:gawk
depends_lib		lib:libpcap.DP:libpcap \
				lib:libgd.1:gd \
				lib:libpng3:libpng \
				lib:libgdbm:gdbm

worksrcdir		ntop

platform darwin 6	{
	patchfiles		patch-darwin6-util.c
}

configure.env	CFLAGS=-I${prefix}/include \
				CPPFLAGS=-I${prefix}/include \
				LDFLAGS=-L${prefix}/lib
configure.args	--with-localedir=${prefix}/share/locale \
				--mandir=${prefix}/share/man

build.type		gnu

destroot.target	install install-data-as
post-destroot	{
	xinstall -m 755 -o nobody -d ${destroot}/${prefix}/var/ntop \
		${destroot}/${prefix}/var/ntop/rrd
	system "cd ${destroot}${prefix}/var/ntop && \
		touch addressQueue.db dnsCache.db macPrefix.db \
			ntop_pw.db prefsCache.db rrd/.turd"
	system "chown -R nobody ${destroot}${prefix}/var/ntop"
}
