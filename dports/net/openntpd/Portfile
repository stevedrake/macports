# $Id: Portfile,v 1.3 2004/11/03 18:27:52 mww Exp $

PortSystem 1.0

name			openntpd
version			3.6p1
categories		net
platforms		darwin
maintainers		mww@opendarwin.org
description		free, easy to use implementation of the Network Time Protocol
long_description	OpenNTPD is a free, easy to use implementation of the \
				Network Time Protocol. It provides the ability to sync the \
				local clock to remote NTP servers and can act as NTP server \
				itself, redistributing the local clock.

homepage		http://www.openntpd.org/
set subdir		pub/OpenBSD/OpenNTPD/
master_sites	ftp://ftp.openbsd.org/${subdir} \
				ftp://ftp.leo.org/${subdir} \
				ftp://ftp.groupbsd.org/${subdir} \
				ftp://ftp.jp.openbsd.org/${subdir} \
				http://ftp.chg.ru/${subdir}
checksums		md5 ba69427e83a9a8080410261af116cdbe

configure.args	--mandir=${prefix}/share/man

pre-destroot {
	addgroup _ntp gid=[nextgid] users="_ntp"
	set gid [existsgroup _ntp]
	adduser _ntp gid=${gid} password={\*} uid=[nextuid] \
		home=${prefix}/var/db/ntpd shell=/usr/bin/false \
		realname=OpenNTPD\ Server
}

post-destroot	{
	file rename ${destroot}${prefix}/etc/ntpd.conf \
		${destroot}${prefix}/etc/ntpd.conf.sample
}
