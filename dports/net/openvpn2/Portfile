# $Id: Portfile,v 1.8 2005/12/18 08:47:15 blb Exp $

PortSystem 1.0
name		openvpn2
version		2.0.5
distname	openvpn-${version}
categories	net security
maintainers	jordiyeh@gmail.com julien.touche@touche.fr.st pierre@queinnec.org
description	easy-to-use, robust, and highly configurable VPN
long_description	OpenVPN is an easy-to-use, robust, and highly \
			configurable VPN (Virtual Private Network) daemon \
			which can be used to securely link two or more \
			private networks using an encrypted tunnel over \
			the internet.
homepage	http://www.openvpn.net
master_sites	${homepage}/release/
platforms	darwin
distname	openvpn-${version}
checksums	md5 4bd7a42991c93db23842a0992debe53b

depends_lib	port:lzo \
		port:openssl

configure.args	--mandir=${prefix}/share/man \
		--with-lzo-headers=${prefix}/include \
		--with-lzo-lib=${prefix}/lib \
		--with-ssl-headers=${prefix}/include \
		--with-ssl-lib=${prefix}/lib \
		--program-suffix=2

variant no_lzo	{
	configure.args-append	--disable-lzo
	depends_lib-delete	port:lzo
}

post-destroot {
	set docdir ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 755 -d ${docdir}
	foreach dir "easy-rsa sample-config-files sample-scripts \
		contrib sample-keys management"  {
		file copy ${worksrcpath}/${dir} ${docdir}
	}
	foreach file "AUTHORS INSTALL NEWS PORTS README" {
		xinstall -m 644 -W ${worksrcpath} ${file} ${docdir}
	}
}

platform darwin 8 {
	configure.env	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

