# $Id$

PortSystem 1.0

name		pidgin
version		2.3.1
categories	net
maintainers	rsync@reifferscheid.org
homepage	http://www.pidgin.im/
description	Multi-protocol Instant Messaging client that allows you to use all of your IM accounts at once.

long_description Pidgin is an Open Source clone of America OnLine's \
		 Instant Messenger client that uses GTK+ version 2.  It \
		 features multiple groups, group chat, user information \
		 fetching and registration, time stamping, and more.  It \
		 also supports other IM protocols, including Yahoo!, \
		 MSN, ICQ, Jabber, Napster, IRC, and Zephyr via included \
		 plugins.
platforms	macosx
master_sites	sourceforge

checksums	md5 0a593c2c343d5b854bd2cd2be7542f40 \
		sha1 d247d085e89360c2a6bd8e4775b7814fd02d10c9 \
		rmd160 f7473efa72974610224ea622fcc02d4703552d2c

use_bzip2	yes

depends_lib	port:gtk2 port:libao port:audiofile port:p5-xml-parser port:libxml2 port:nspr port:nss

configure.ldflags-append	-bind_at_load
configure.cppflags-append	-no-cpp-precomp
configure.args	--disable-gtkspell --disable-screensaver --disable-sm \
		--mandir=${prefix}/share/man --disable-perl \
		--with-nss-libs=${prefix}/lib \
		--with-nss-includes=${prefix}/include/nss \
		--with-nspr-libs=${prefix}/lib \
		--with-nspr-includes=${prefix}/include/nspr \
		--enable-nss --disable-consoleui \
		--disable-screensaver

variant no_x11 description {Build port without-x} {
	configure.args-append --without-x
}
variant quartz requires no_x11 description {Build port with gtk2 quartz} {
		patchfiles-append gtkdocklet-quartz.diff
		configure.args-append	--disable-gestures \
					--enable-gtkstatusicon
		depends_build	port:automake port:libtool port:autoconf
		post-patch {
			reinplace "s|@INTLTOOL_ICONV@|${prefix}/bin/iconv|g" \
				intltool-merge.in
		}
}

