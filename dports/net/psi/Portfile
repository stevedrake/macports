# $Id$

PortSystem          1.0

name                psi
version             0.12
revision            2
categories          net chat
maintainers         rowue@macports.org
description         jabber-based instant messaging client
long_description \
    Psi is a capable Jabber client aimed at experienced users.  Its design \
    goals are simplicity and stability.

platforms           darwin

homepage            http://psi.affinix.com/
master_sites        sourceforge
use_bzip2           yes

checksums           psi-0.12.tar.bz2 md5 47b654c944ef8766b860fe0645615d18 \
                    psi-0.12.tar.bz2 sha1 2927497a53d1eb00720718ec41cf61a911914922 \
                    psi-0.12.tar.bz2 rmd160 be5922ef84040113b257aaf99ac9bd350b69349c

depends_lib         lib:libz:zlib \
                    port:qt4-mac


configure.args      --qtdir=${prefix}/libexec/qt4-mac

destroot {
    xinstall -m 755 -d ${destroot}/Applications/MacPorts
    file copy ${worksrcpath}/src/psi.app ${destroot}/Applications/MacPorts
    system "strip \
        ${destroot}/Applications/MacPorts/psi.app/Contents/MacOS/psi"
}

variant externalqca description {Use external qca} {

configure.args-append   --disable-bundled-qca
depends_lib-append      port:qca-ossl \
                        port:qca-gnupg \
                        port:qca
}


variant plugins description {Build with experimental Plugin Support} {

patchfiles              patch-configure.diff \
                        patch-src-about.ui.diff \
                        patch-src-main.cpp.diff \
                        patch-src-main.h.diff \
                        patch-src-options-opt_plugins.cpp.diff \
                        patch-src-options-opt_plugins.h.diff \
                        patch-src-pluginmanager.cpp.diff \
                        patch-src-pluginmanager.h.diff \
                        patch-src-psiaccount.cpp.diff \
                        patch-src-psichatdlg.cpp.diff \
                        patch-src-psichatdlg.h.diff \
                        patch-src-psiplugin.h.diff

configure.args-append   --enable-plugins
}
