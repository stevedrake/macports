# $Id$

PortSystem 1.0

name            rsync-devel
set date        20070529
set time        0423
version         ${date}-${time}
categories      net
platforms       darwin freebsd sunos
maintainers     rsync@reifferscheid.org
description     tool that provides fast incremental file transfer
long_description \
        rsync 3.0.0 is going to be a feature release that has a number  \
        of improvements. There has already been work done to lower      \
        rsync's memory use, and make recursive transfers start up more  \
        rapidly (due to an incremental recursive scan being added). This\
        version has just added xattr support (resource forks), and      \
        should also get: ACL support, filename charset-conversion       \
        support, renamed-file detection, improved performance for large \
        files, and other changes yet to be decided. \
        \
        Related pages:                                                  \
        http://samba.anu.edu.au/ftp/unpacked/rsync/NEWS                 \
        http://samba.anu.edu.au/ftp/rsync/nightly/rsync.html            \
        http://samba.anu.edu.au/ftp/rsync/nightly/rsyncd.conf.html      \
        http://samba.anu.edu.au/rsync/lists.html

homepage        http://samba.org/rsync/
master_sites    macports
checksums \
  md5 b0c39affee73c4e7d5b8968c6d532277 \
  sha1 c709b3c77ae6ce91ec8ec9ec50cdecb2fae3cb82 \
  rmd160 a9bb0858909798ff521304278497e0949f6496ae

distname        rsync-HEAD-${version}GMT

depends_lib     port:popt

configure.args  --mandir=${prefix}/share/man \
                --with-rsyncd-conf=${prefix}/etc/rsyncd.conf \
                --enable-ipv6 \
                --enable-xattr-support
configure.env   CFLAGS="-Os -I${prefix}/include" \
                CPPFLAGS="-I${prefix}/include" \
                LDFLAGS="-L${prefix}/lib"

post-destroot {
        xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
        xinstall -m 644 -W ${worksrcpath} COPYING INSTALL NEWS OLDNEWS  \
                TODO README doc/README-SGML doc/profile.txt             \
                doc/rsync.sgml \
                        ${destroot}${prefix}/share/doc/${name}
}

platform darwin 8 {
        configure.env-append    CC=/usr/bin/gcc-4.0 \
                                CPP=/usr/bin/cpp-4.0
}
