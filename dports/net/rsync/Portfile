# $Id$

PortSystem 1.0

name			rsync
version			2.6.9
categories		net
platforms		darwin freebsd sunos
maintainers		mww@opendarwin.org
description		tool that provides fast incremental file transfer
long_description	rsync is a file transfer program for Unix systems. \
				rsync uses the 'rsync algorithm' which provides a very fast \
				method for bringing remote files into sync. It does this by \
				sending just the differences in the files across the link, \
				without requiring that both sets of files are present at one \
				of the ends of the link beforehand. 

homepage		http://samba.org/rsync/
master_sites	http://samba.org/ftp/rsync/ \
				ftp://samba.anu.edu.au/pub/rsync/  \
				ftp://sunsite.auc.dk/pub/unix/rsync/  \
				ftp://ftp.sunet.se/pub/unix/admin/rsync/  \
				ftp://ftp.fu-berlin.de/pub/unix/network/rsync/
checksums		sha1 341618e230ea2e0e551d0ccf06f840d4f824c843

depends_lib		port:popt

configure.args	--mandir=${prefix}/share/man \
				--with-rsyncd-conf=${prefix}/etc/rsyncd.conf \
				--enable-ipv6
configure.env	CFLAGS="-Os -I${prefix}/include" \
				CPPFLAGS="-I${prefix}/include" \
				LDFLAGS="-L${prefix}/lib"

build.type		gnu

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} COPYING INSTALL NEWS OLDNEWS TODO \
		README doc/README-SGML doc/profile.txt doc/rsync.sgml \
		${destroot}${prefix}/share/doc/${name}
}

platform darwin 6 {
	patchfiles-append	patch-darwin6-configure.diff
}

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0
}

