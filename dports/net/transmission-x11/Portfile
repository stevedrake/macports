# $Id$

PortSystem      1.0

name            transmission-x11
version		1.71
categories      net gnome x11
maintainers     nomaintainer
description     Lightweight BitTorrent client
long_description Transmission is a free, lightweight BitTorrent client. \
                It features a simple, intuitive interface on top of an \
                efficient, cross-platform back-end. Transmission is open \
                source (MIT license) and runs on Mac OS X (Cocoa interface), \
                Linux/NetBSD/FreeBSD/OpenBSD (GTK+ interface) and BeOS \
                (native interface). This is the GTK+ version.
homepage        http://www.transmissionbt.com/
distname        transmission-${version}
master_sites    http://download.m0k.org/transmission/files/
checksums       md5     ed5f04b797862fa059347609eeca4761 \
                sha1    8555dcb8e7c85ca7c6d2e26ba00a1c89ad22ed80 \
                rmd160  318a5efd0fddce316d62d75647412822e0d20f9c
use_bzip2       yes
platforms       darwin freebsd

depends_lib     port:openssl \
		port:curl

depends_build	port:gsed

configure.args --enable-daemon --disable-wx --disable-darwin --disable-gtk --disable-libnotify

variant gtk description {Build Gtk front-end} {
	depends_lib-append	port:gtk2 \
				port:dbus-glib
	configure.args-delete	--disable-gtk
	configure.args-append	--enable-gtk
}

variant aqua description {Build Aqua front-end} {
	configure.args-delete	--disable-darwin
	configure.args-append	--enable-darwin
}

pre-fetch {
	if { [variant_isset aqua] } {
		set comparison [string  compare "${os.platform} ${os.major}" "darwin 9"]
		if {$comparison != 0} {
			return -code error "The aqua front-end only builds on Mac OS X Leopard (10.5.x). try the gtk variant"
		}
	}
}
