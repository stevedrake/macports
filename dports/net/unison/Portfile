# $Id: Portfile,v 1.5 2004/08/18 18:43:26 rshaw Exp $

PortSystem        1.0
name              unison
version           2.9.1
revision          3
distname          src
categories        net
maintainers       julien.touche@touche.fr.st
description       Unison File Synchronizer
long_description  Unison is a file-synchronization tool for Unix and \
                  Windows. It allows two replicas of a collection of \
                  files and directories to be stored on different hosts \
                  (or different disks on the same host), modified \
                  separately, and then brought up to date by propagating \
                  the changes in each replica to the other.
homepage          http://www.cis.upenn.edu/~bcpierce/unison/
master_sites      ${homepage}download/stable/latest/
platforms         darwin openbsd
checksums         md5 d8084fa87c13671de21ec1b701a4606c
patchfiles        patch-Makefile \
                  patch-ubase-uprintf.ml
dist_subdir       ${name}/${version}

set worksrcdir    ${name}-${version}

use_configure	no

build.args		UISTYLE=text NATIVE=true
depends_lib		bin:camlp4:ocaml

destroot.args	PREFIX=${prefix} UISTYLE=text NATIVE=true

variant x11 {
	depends_lib-append		bin:lablgtk:lablgtk

	build.args-delete		UISTYLE=text
	build.args-append		UISTYLE=gtk

	destroot.args-delete	UISTYLE=text
	destroot.args-append	UISTYLE=gtk
}

# Variant to get the recommended beta version (2.9.20, the same in FreeBSD).
variant beta {
    version         2.9.20
    checksums       md5 a0a1b734e11212623bc6ea996aace960
    master_sites    ${homepage}download/beta-test/latest/
    dist_subdir     ${name}/${version}
    set worksrcdir  ${name}-${version}
    patchfiles      patch-Makefile-beta \
                    patch-ubase-uprintf.ml
}
