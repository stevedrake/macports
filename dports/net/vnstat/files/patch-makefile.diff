--- Makefile.orig	2011-04-23 20:41:36.000000000 +0200
+++ Makefile	2011-04-23 20:42:09.000000000 +0200
@@ -4,9 +4,9 @@
 MAN = $(DESTDIR)/usr/share/man
 
 # bin and man dirs for *BSD
-BIN_BSD = $(DESTDIR)/usr/local/bin
-SBIN_BSD = $(DESTDIR)/usr/local/sbin
-MAN_BSD = $(DESTDIR)/usr/local/man
+BIN_BSD = $(DESTDIR)/opt/local/bin
+SBIN_BSD = $(DESTDIR)/opt/local/sbin
+MAN_BSD = $(DESTDIR)/opt/local/share/man
 
 default: vnstat
 
@@ -41,15 +41,15 @@
 	fi
 
 # remove some really old version binary if found
-	@if [ -x "$(DESTDIR)/usr/local/bin/vnstat" ]; \
+	@if [ -x "$(DESTDIR)/opt/local/bin/vnstat" ]; \
 	then echo "Removing old binary..."; \
-	rm -f $(DESTDIR)/usr/local/bin/vnstat; \
+	rm -f $(DESTDIR)/opt/local/bin/vnstat; \
 	fi
 
 # install default config if such doesn't exist
-	@if [ ! -f "$(DESTDIR)/etc/vnstat.conf" ]; \
-	then echo "Installing config to $(DESTDIR)/etc/vnstat.conf"; \
-	install -D -m 644 cfg/vnstat.conf $(DESTDIR)/etc/vnstat.conf; \
+	@if [ ! -f "$(DESTDIR)/opt/local/etc/vnstat.conf" ]; \
+	then echo "Installing config to $(DESTDIR)/opt/local/etc/vnstat.conf"; \
+	install -D -m 644 cfg/vnstat.conf $(DESTDIR)/opt/local/etc/vnstat.conf; \
 	fi
 
 # install everything else
@@ -106,7 +106,7 @@
 	rm -f $(MAN)/man1/vnstat*
 	rm -f $(MAN)/man5/vnstat*
 	rm -f $(DESTDIR)/etc/cron.d/vnstat
-	rm -f $(DESTDIR)/etc/vnstat.conf
+	rm -f $(DESTDIR)/opt/local/etc/vnstat.conf
 	rm -f $(DESTDIR)/etc/ppp/ip-up.d/vnstat
 	rm -f $(DESTDIR)/etc/ppp/ip-down.d/vnstat
 
@@ -136,16 +136,18 @@
 	fi
 
 # install default config if such doesn't exist
-	@if [ ! -f $(DESTDIR)/etc/vnstat.conf ]; \
-	then echo "Installing config to $(DESTDIR)/etc/vnstat.conf"; \
-	install -D -m 644 cfg/vnstat.conf $(DESTDIR)/etc/vnstat.conf; \
-	sed -e 's/lib/db/g' $(DESTDIR)/etc/vnstat.conf >$(DESTDIR)/etc/vnstat.conf.bsd; \
-	mv -f $(DESTDIR)/etc/vnstat.conf.bsd $(DESTDIR)/etc/vnstat.conf; \
+	@if [ ! -f $(DESTDIR)/opt/local/etc/vnstat.conf ]; \
+	then echo "Installing config to $(DESTDIR)/opt/local/etc/vnstat.conf"; \
+	install -d -m 644 cfg/vnstat.conf $(DESTDIR)/opt/local/etc/vnstat.conf; \
+	sed -e 's/lib/db/g' $(DESTDIR)/opt/local/etc/vnstat.conf >$(DESTDIR)/opt/local/etc/vnstat.conf.bsd; \
+	mv -f $(DESTDIR)/opt/local/etc/vnstat.conf.bsd $(DESTDIR)/opt/local/etc/vnstat.conf; \
 	fi
 
 # update man page	
+	install -d -m 644 $(MAN_BSD)/man1
 	install -m 644 man/vnstat.1 $(MAN_BSD)/man1
 	install -m 644 man/vnstatd.1 $(MAN_BSD)/man1
+	install -d -m 644 $(MAN_BSD)/man5
 	install -m 644 man/vnstat.conf.5 $(MAN_BSD)/man5
 	gzip -f9 $(MAN_BSD)/man1/vnstat.1
 	gzip -f9 $(MAN_BSD)/man1/vnstatd.1
@@ -183,5 +185,5 @@
 	rm -f $(SBIN_BSD)/vnstatd
 	rm -f $(MAN_BSD)/man1/vnstat*
 	rm -f $(MAN_BSD)/man5/vnstat*
-	rm -f $(DESTDIR)/etc/vnstat.conf
+	rm -f $(DESTDIR)/opt/local/etc/vnstat.conf
 	@echo "A possible cron entry needs to be removed manually if such exists."
