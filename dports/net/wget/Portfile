# $Id$

PortSystem              1.0

name                    wget
version                 1.11.4
categories              net www
maintainers             ryandesign
homepage                http://www.gnu.org/software/wget/
platforms               darwin freebsd
use_parallel_build      yes
master_sites            gnu

description \
    internet file retriever

long_description \
    GNU Wget is a free software package for retrieving files using HTTP, \
    HTTPS and FTP, the most widely-used Internet protocols. It is a \
    non-interactive commandline tool, so it may easily be called from \
    scripts, cron jobs, terminals without Xsupport, etc.

checksums \
    md5 69e8a7296c0e12c53bd9ffd786462e87 \
    sha1 a78a3b71fd59504df3ff3dbc0a2195a1410e9eac \
    rmd160 1cec99b073fcf64dd362977b0b88a55f8f47bbb8

configure.args \
    --with-libssl-prefix=${prefix}

depends_lib \
    port:openssl \
    port:gettext

# As of 1.11.3, the tests are known to be incomplete or even broken. See
# ${worksrcpath}/tests/README for the current status of the test suite.
test.run                no

variant no_ssl description {Build without SSL support} {
    depends_lib-delete      port:openssl
    configure.args-append   --without-ssl
    configure.args-delete   --with-libssl-prefix=${prefix}
}

post-destroot {
    set docdir ${destroot}${prefix}/share/doc/${name}-${version}
    xinstall -d ${docdir}
    foreach docfile {AUTHORS COPYING NEWS README} {
        xinstall -W ${worksrcpath} -m 0644 ${docfile} ${docdir}/${docfile}.txt
    }
    xinstall -W ${worksrcpath} -m 0644 ChangeLog ${docdir}/ChangeLog-main.txt
    foreach changelog {doc src} {
        xinstall -W ${worksrcpath} -m 0644 ${changelog}/ChangeLog ${docdir}/ChangeLog-${changelog}.txt
    }
}
