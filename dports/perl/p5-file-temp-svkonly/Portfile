# $Id: /local/dports/perl/p5-file-temp-svkonly/Portfile 20414 2006-11-02T20:17:00.028444Z dluke  $

PortSystem 1.0
name			p5-file-temp-svkonly
version			0.17
categories		perl
maintainers		dluke@geeklair.net
description		p5-file-temp port that overrides the perl-provided module
long_description	This p5-file-temp port exists only for svk support. It installs \
				over the perl distributed version of File::Temp so that svk \
				will use it instead of the older perl provided version.

platforms		darwin

master_sites		http://cpan.perl.org/authors/id/T/TJ/TJENNESS/
homepage		http://search.cpan.org/~tjenness/
distname		File-Temp-${version}
dist_subdir		perl5
depends_lib		path:${prefix}/bin/perl:perl5.8

checksums               md5 9c096b38cf45e579ce5b0f53bcb090b2

#- Perl searches vendor location last, so this won't
#- override the older version included with perl
#- if we install in the vendor location
configure.cmd       ${prefix}/bin/perl
configure.pre_args  Makefile.PL
test.run            yes
destroot.target     pure_install


post-destroot {
	set perl5.version [lindex [split [exec ${prefix}/bin/perl -V:version] {'}] 1]
	foreach packlist [exec find ${destroot}${prefix}/lib/perl5/${perl5.version} -name .packlist] {
		ui_info "Fixing packlist ${packlist}"
		reinplace "s|${destroot}||" ${packlist}
	}
	ui_msg "You must install or activate this package with '-f' (force) as it needs to overwrite files installed by the perl5.8 port"
}
