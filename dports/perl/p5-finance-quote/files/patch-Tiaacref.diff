--- lib/Finance/Quote/Tiaacref.pm	2006-04-08 15:25:39.000000000 -0400
+++ lib/Finance/Quote/Tiaacref.pm	2007-11-19 22:47:12.000000000 -0500
@@ -44,7 +44,7 @@
 
 # URLs of where to obtain information.
 # This used to be different for the CREF and TIAA annuities, but this changed.
-$CREF_URL = ("https://www3.tiaa-cref.org/ddata/DownloadData?");
+$CREF_URL = ("https://www3.tiaa-cref.org/ddata/DownloadData"); 
 
 sub methods { return (tiaacref=>\&tiaacref); }
 
@@ -256,10 +256,12 @@
     my($ua,$urlc,$urlt);   #useragent and target urls
     my($cntc,$cntt); #counters for each of the two url containers
     my($reply,$qdata);		#the reply from TIAA-CREF's cgi and a buffer for the data
+    my(@postc); #holds post vars
 
 #    $url = $TIAACREF_URL;
     $urlc = $CREF_URL;
     $urlt = $TIAA_URL;
+    @postc = ();
 #Initialize counters for the two types of URL. If either counter is zero, then
 # that URL will not be retrieved. This is less technically clever than testing
 #the URL string itself with m/yes/, but its faster.
@@ -269,7 +271,7 @@
 	if ($tiaacref_ids{$fund}) {
         	if ($tiaacref_locs{$fund} == 1) {
 			$cntc++;
-			$urlc .=  "f" . $cntc . "=" . $tiaacref_vals{$fund} . "&";
+			push(@postc, "f" . $cntc => $tiaacref_vals{$fund});
 		} else {
  			$urlt .= $fund . "=yes&";
 			$cntt++;
@@ -280,13 +282,13 @@
 		$info{$fund,"errormsg"} = "Bad symbol";
 	}
     }
-    $urlc .=  "days=1";
+    push(@postc, days => '1', dldformat => '1');
     $urlt .=  "selected=1";
     $qdata ="";
 
     $ua = $quoter->user_agent;
     if ($cntc) {
-    	$reply = $ua->request(GET $urlc);
+    	$reply = $ua->request(POST $urlc, [@postc]);
         if ($reply ->is_success) {
             $qdata .= $reply->content;
 	}
