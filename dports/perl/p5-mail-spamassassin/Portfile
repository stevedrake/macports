# $Id: Portfile,v 1.4 2004/09/08 00:45:48 rshaw Exp $
PortSystem 1.0
PortGroup perl5 1.0

perl5.setup		Mail-SpamAssassin 2.64
revision		1
maintainers		rshaw@opendarwin.org
categories-append	mail
description		mail filter to identify spam
long_description	SpamAssassin(tm) is a mail filter to identify spam. \
					Using its rule base, it uses a wide range of \
					heuristic tests on mail headers and body text to \
					identify spam, also known as unsolicited commercial \
					email.
homepage		http://www.spamassassin.org/
master_sites-append	${homepage}/released/
checksums		md5 a82a9dab95462d102e253edb99091fdd
platforms		darwin sunos

# Depends on these Perl modules
depends_lib-append		lib:XXX:p5-digest-sha1 \
				lib:XXX:p5-html-parser \
				lib:XXX:p5-mailtools \
				lib:XXX:p5-mail-audit \
				lib:XXX:p5-net-dns \
				lib:XXX:p5-net-ident

post-patch {
	reinplace "s|return ''|return 'PRIV'|" ${worksrcpath}/Makefile.PL
}

set datadir		${prefix}/share/spamassassin
set confdir		${prefix}/etc/mail/spamassassin

configure.args-append	CONTACT_ADDRESS=root@localhost \
						PREFIX=${prefix} \
						SYSCONFDIR=${prefix}/etc \
						DATADIR=${datadir} \
						CONFDIR=${confdir}

variant	razor {
	depends_lib-append		lib:XXX:p5-razor-agents
	configure.args-append	RUN_RAZOR_TESTS=yes
}

variant	ssl {
	depends_lib-append		lib:libssl.0.9:openssl \
							lib:XXX:p5-io-socket-ssl
	configure.args-append	ENABLE_SSL=yes
}

variant bayes {
	depends_lib-append		lib:XXX:p5-db_file
}

destroot.target-append	conf__install data__install

