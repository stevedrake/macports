# $Id: Portfile,v 1.2 2006/03/28 04:54:20 yves Exp $

PortSystem 1.0
name			denemo
version			2006-03-21
categories		print audio x11
platforms		darwin
maintainers		yves@opendarwin.org
description		Denemo is a unique score editor
long_description \
    Denemo is a unique score editor which exports notation \
    to LilyPond and ABC music formats. \
    It also acts as a frontend for Csound score files. \
    Denemo is different from most graphic music editors, \
    this is partly because it was created to help edit Lilypond notation \
    and partly because of its unique design philosophy. 

homepage		http://denemo.sourceforge.net/

fetch.type		cvs
cvs.root		:pserver:anonymous@cvs.sourceforge.net:/cvsroot/denemo
cvs.password	""
cvs.date		${version}
cvs.tag         rel_0_7_5_no_cpp
cvs.module      ${name}

worksrcdir      ${name}
depends_build   port:automake port:libtool
depends_lib     port:librsvg
depends_run     port:qtplay
                #port:csound

patchfiles      patch-denemo.conf patch-prefops.c
post-patch {
    reinplace "s|libtoolize|glibtoolize|g" ${worksrcpath}/autogen.sh
    system "touch ${worksrcpath}/src/malloc.h"
}

pre-configure {
    cd ${worksrcpath}
    system "aclocal &&
            glibtoolize --force &&
            ./autogen.sh"
}
configure.env   CFLAGS="-I${prefix}/include -DDEBUG" \
                LDFLAGS="-L${prefix}/lib"
configure.args  --disable-alsa \
                --with-plugins=analysis,midiinput,rumour
