# $Id: Portfile,v 1.13 2005/04/06 09:37:35 mww Exp $

PortSystem 1.0
name		ghostscript
version		8.14
revision	1
categories	print
platforms	darwin freebsd
maintainers	digdog@opendarwin.org
description	AFPL Ghostscript, An interpreter for PostScript and PDF

long_description	\
	Ghostscript is the well-known PostScript interpreter which \
	is available for all common and most esoteric platforms and \
	supports many different printers and some displays. \
	Versions entitled "AFPL Ghostscript" are distributed with \
	a licence different from the GPL. 
homepage	http://www.cs.wisc.edu/~ghost/

master_sites	sourceforge:${name}:source \
		sourceforge:gs-fonts:fonts \
                http://www.ijg.org/files/:jpeg \
		sourceforge:libpng:libpng

distfiles	${distname}${extract.suffix}:source \
		ghostscript-fonts-std-8.11${extract.suffix}:fonts \
		jpegsrc.v6b${extract.suffix}:jpeg \
		libpng-1.2.5${extract.suffix}:libpng \
		zlib-1.1.4${extract.suffix}:libpng

checksums	${distname}${extract.suffix} md5 \
			3872d34765492e2892fed04eeabc8b0f \
		ghostscript-fonts-std-8.11${extract.suffix} md5 \
			6865682b095f8c4500c54b285ff05ef6 \
		jpegsrc.v6b${extract.suffix} md5 \
			dbd5f3b47ed13132f04c685d608a7547 \
		libpng-1.2.5${extract.suffix} md5 \
			0cec860559f2f5f7145da3c6851bacb7 \
		zlib-1.1.4${extract.suffix} md5 \
			abc405d0bdd3ee22782d7aa20e440f08

# Should be depends_extract, but that isn't implemented
# To understand why doing this, please check official document:
# http://www.ghostscript.com/doc/AFPL/8.00/Make.htm#Third-party_libraries
post-extract	{
	cd ${workpath} 
	system "mv jpeg-6b ${distname}/jpeg"
	system "mv libpng-1.2.5 ${distname}/libpng"
	system "mv zlib-1.1.4 ${distname}/zlib"
}

configure.args		--mandir='\${prefix}/share/man'

build.target

destroot.destdir	prefix=${destroot}/${prefix}
post-destroot	{
	system "mkdir -p ${destroot}/${prefix}/share/ghostscript/"
	system "mv ${workpath}/fonts ${destroot}/${prefix}/share/ghostscript"
}
