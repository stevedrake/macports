# $Id: Portfile,v 1.15 2005/05/28 14:59:21 olegb Exp $

PortSystem 1.0
name		ghostscript
version		8.51
homepage	http://www.cs.wisc.edu/~ghost/
description	AFPL Ghostscript, An interpreter for PostScript and PDF
categories	print
platforms	darwin
maintainers	digdog@opendarwin.org

master_sites	sourceforge:${name}:source \
		sourceforge:gs-fonts:fonts \
		http://www.ijg.org/files/:jpeg \
		sourceforge:libpng:libpng \
		http://www.zlib.net/:zlib

distfiles	${distname}.tar.gz:source \
		ghostscript-fonts-std-8.11.tar.gz:fonts \
		jpegsrc.v6b.tar.gz:jpeg \
		libpng-1.2.8.tar.gz:libpng \
		zlib-1.2.2.tar.gz:zlib

checksums	${distname}.tar.gz md5 882a4cbe1704256f906e18e02c7b877b \
		ghostscript-fonts-std-8.11.tar.gz md5 6865682b095f8c4500c54b285ff05ef6 \
		jpegsrc.v6b.tar.gz md5 dbd5f3b47ed13132f04c685d608a7547 \
		libpng-1.2.8.tar.gz md5 cac1512878fb98f2456df6dc50bc9bc7 \
		zlib-1.2.2.tar.gz md5 68bd51aaa6558c3bc3fd4890e53413de

# Should be depends_extract, but that isn't implemented
# To understand why doing this, please check official document:
# http://www.ghostscript.com/doc/AFPL/8.00/Make.htm#Third-party_libraries
post-extract	{
		file copy ${workpath}/jpeg-6b ${workpath}/${distname}/jpeg
		file copy ${workpath}/libpng-1.2.8 ${workpath}/${distname}/libpng
		file copy ${workpath}/zlib-1.2.2 ${workpath}/${distname}/zlib
		}

build.target

destroot.destdir	prefix=${destroot}/${prefix}
post-destroot	{
		file copy ${workpath}/fonts ${destroot}/${prefix}/share/ghostscript
		}

long_description	Ghostscript is the well-known PostScript interpreter which \
		is available for all common and most esoteric platforms and \
		supports many different printers and some displays. Versions \
		entitled "AFPL Ghostscript" are distributed with a licence \
		different from the GPL. 
