# $Id$

PortSystem 1.0

name        gv
version     3.5.8
revision    3
categories  print
maintainers nomaintainer@macports.org
homepage    http://wwwthep.physik.uni-mainz.de/~plass/gv/
platforms   darwin

description PostScript and PDF previewer
long_description \
    gv is a X11 PostScript and PDF previewer based on Tim Theisen's \
    ghostview-1.5. It uses the Xaw3d widget set, thus providing a \
    much nicer look and it's said to be a bit faster.

master_sites    ftp://ftpthep.physik.uni-mainz.de/pub/gv/unix/
checksums       md5 8f2f0bd97395d6cea52926ddee736da8

depends_lib     port:Xaw3d
depends_run     bin:gs:ghostscript

patchfiles      patch-config.Unix patch-setenv.c
post-patch	{
    cd ${worksrcpath}
    reinplace "s|__PREFIX__|${prefix}|" config.Unix
    reinplace "s|##aaa##|aaa|" source/paths.h
    copy doc/gv.man source
}

use_xmkmf       yes

destroot.target install install.man
destroot.args   DOCHTMLDIR=${prefix}/share/doc/gv
post-destroot	{
    cd ${destroot}
    move etc/X11 ${destroot}${prefix}/etc
    delete usr
}

variant letter {
    post-patch {
        reinplace "s|a4|letter|" ${worksrcpath}/config.Unix
    }
}
