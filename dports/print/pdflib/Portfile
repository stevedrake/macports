# $Id$

PortSystem 1.0

name			pdflib
version			7.0.2
categories		print
platforms		darwin
maintainers		nomaintainer
description		library of C routines to programmatically generate PDF files
long_description	PDFlib is a library of C routines which allow you to \
				programmatically generate files in Adobe's Portable Document \
				format PDF.

homepage		http://www.pdflib.com/products/pdflib-family/pdflib-lite/
master_sites		http://www.pdflib.com/binaries/PDFlib/[string map {"." ""} ${version}]/
distname		PDFlib-Lite-${version}
checksums		sha1 23dd54e13cc19281ef3a50fa6ed2f616a5e7a949
patchfiles		patch-config-mkcommon.inc.in patch-libs__pdcore__pc_util.h \
			patch-libs_tiff_tiff.h.diff 

configure.args	--without-java --without-perl --without-py --without-tcl

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/
	file copy ${worksrcpath}/doc/pdflib ${destroot}${prefix}/share/doc/${name}
}

variant java {
	configure.args-delete	--without-java
	configure.args-append	--with-java=yes
}

variant perl {
	depends_lib				path:${prefix}/bin/perl:perl5.8
	configure.args-delete	--without-perl
	configure.args-append	--with-perl=${prefix}/bin/perl
}

variant python {
	depends_lib				path:${prefix}/bin/python:python24
	configure.args-delete	--without-py
	configure.args-append	--with-py=${prefix}
}

variant tcl {
	depends_lib				path:${prefix}/bin/tclsh:tcl
	configure.args-delete	--without-tcl
	configure.args-append	--with-tcl=${prefix}/bin/tclsh
}

platform darwin 8 {
	configure.cc	"/usr/bin/gcc-4.0 -DPDF_TARGET_API_MAC_CLASSIC"
	configure.cpp	"/usr/bin/cpp-4.0 -DPDF_TARGET_API_MAC_CLASSIC"
	configure.cxx	"/usr/bin/g++-4.0 -DPDF_TARGET_API_MAC_CLASSIC"
}

