# $Id$

PortSystem 1.0

name			pdflib
version			7.0.0p3
categories		print
platforms		darwin
maintainers		nomaintainer@macports.org
description		library of C routines to programmatically generate PDF files
long_description	PDFlib is a library of C routines which allow you to \
				programmatically generate files in Adobe's Portable Document \
				format PDF.

homepage		http://www.pdflib.com/products/pdflib-family/pdflib-lite/
master_sites		http://www.pdflib.com/binaries/PDFlib/700/
distname		PDFlib-Lite-${version}
checksums		sha1 ce1a511201f3be19dd780d32676e808c39a6e67e
patchfiles		patch-config-mkcommon.inc.in patch-libs__pdcore__pc_util.h

configure.args	--without-java --without-perl --without-py --without-tcl

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/
	file copy ${worksrcpath}/doc/pdflib ${destroot}${prefix}/share/doc/${name}
}

variant java {
	configure.args-delete	--without-java
	configure.args-append	--with-java=yes
}

variant perl {
	depends_lib				path:${prefix}/bin/perl:perl5.8
	configure.args-delete	--without-perl
	configure.args-append	--with-perl=${prefix}/bin/perl
}

variant python {
	depends_lib				path:${prefix}/bin/python:python24
	configure.args-delete	--without-py
	configure.args-append	--with-py=${prefix}
}

variant tcl {
	depends_lib				path:${prefix}/bin/tclsh:tcl
	configure.args-delete	--without-tcl
	configure.args-append	--with-tcl=${prefix}/bin/tclsh
}

platform darwin 8 {
	configure.env	CC="/usr/bin/gcc-4.0 -DPDF_TARGET_API_MAC_CLASSIC" CPP="/usr/bin/cpp-4.0 -DPDF_TARGET_API_MAC_CLASSIC" CXX="/usr/bin/g++-4.0 -DPDF_TARGET_API_MAC_CLASSIC"
}

