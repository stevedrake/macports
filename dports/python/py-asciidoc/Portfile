# $Id: Portfile,v 1.1 2004/04/29 06:27:20 blb Exp $

PortSystem			1.0
PortGroup			python 1.0
name				py-asciidoc
version				5.0.7
categories-append	textproc
maintainers			blb@pobox.com
description			Formatter/translator for text files to numerous formats
long_description \
	AsciiDoc is a text document format for writing short documents, \
	articles, books and UNIX man pages. AsciiDoc files can be translated to \
	HTML (with or without stylesheets), DocBook and LinuxDoc markup using \
	the asciidoc(1) command.  AsciiDoc is highly configurable: both the \
	AsciiDoc source file syntax and the backend output markups (which can be \
	almost any type of SGML/XML markup) can be customized and extended by \
	the user.

platforms			darwin

homepage			http://www.methods.co.nz/asciidoc/
master_sites		sourceforge:asciidoc
distname			asciidoc-${version}

checksums			md5 e1f21a1586b6c0b5a550da7e72d3abc4

post-patch {
	reinplace "s|^#!/usr/bin/env python|#!${prefix}/bin/python|" \
		${worksrcpath}/asciidoc.py ${worksrcpath}/filters/code-filter.py
}

build				{}

destroot {
	cd ${worksrcpath}
	xinstall -m 755 -d ${destroot}/${prefix}/share/${name}
	eval file copy asciidoc.py [glob *.conf] filters images stylesheets \
		${destroot}/${prefix}/share/${name}
	system "ln -s ${prefix}/share/${name}/asciidoc.py \
		${destroot}/${prefix}/bin/asciidoc.py"
	xinstall -m 644 CHANGELOG COPYING COPYRIGHT README \
		${destroot}/${prefix}/share/doc/${name}
	eval file copy [glob doc/*] ${destroot}/${prefix}/share/doc/${name}
	eval file copy [glob examples/*] \
		${destroot}/${prefix}/share/doc/${name}/examples
	xinstall -m 644 doc/asciidoc.1 ${destroot}/${prefix}/share/man/man1
}

