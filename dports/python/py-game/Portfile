# $Id: Portfile,v 1.7 2005/07/29 14:19:43 ben Exp $

PortSystem 1.0
PortGroup python24 1.0

name			py-game
version			1.6.2
categories		python devel multimedia graphics
maintainers		ben@opendarwin.org
description		set of Python modules designed for writing games
long_description	Pygame is a set of Python modules designed for writing \
				games. It is written on top of the excellent SDL \
				library. This allows you to create fully featured \
				games and multimedia programs in the python language. \
				Pygame is highly portable and runs on nearly every \
				platform and operating system.

homepage		http://www.pygame.org
master_sites	${homepage}/ftp/
distname		pygame-${version}
checksums		md5 89f72543dc541d7f5b1dae09b8e54722
use_bzip2		yes

depends_lib-append	port:libsdl-framework \
				port:libsdl_mixer-framework \
				port:libsdl_image-framework \
				port:libsdl_ttf-framework \
				bin:smpeg-config:smpeg \
				port:py-numeric
depends_run		port:py-pyobjc

patchfiles		patch-config_darwin.py \
				patch-lib___init__.py

post-patch {
	reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/config_darwin.py
}

use_configure	yes
configure.env	LDFLAGS='-L${prefix}/lib' \
				CFLAGS='-I${prefix}/include -I${prefix}/include/python2.4' \
				SDL_VIDEODRIVER=quartz
configure.cmd	${python.bin} config.py

build.env		${configure.env}

post-destroot	{
	file delete -force ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/docs ${destroot}${prefix}/share/doc/${name}
	file copy ${worksrcpath}/examples ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} install.html install.txt WHATSNEW \
		readme.html readme.txt ${destroot}${prefix}/share/doc/${name}
}
