# $Id: Portfile,v 1.1 2006/03/30 03:54:51 takanori Exp $

PortSystem      1.0
PortGroup       python24 1.0
name            py-hyperestraier
version         0.0.15

platforms       darwin
maintainers     rsky0711@gmail.com
description     a Python module for Hyper Estraier
long_description ${description}

homepage        http://hyperestraier.sourceforge.net/
master_sites    http://hyperestraier.sourceforge.net/binding/
distname        hyper_estraier_wrappers-${version}
dist_subdir     hyperestraier
checksums       md5 26f81dbc06954a6030f801b4d8b06fa9 \
                sha1 e348fd6c337ca2e41a322f210902a0d4aeaad056 \
                rmd160 d53a872587f370e39e193dfc3de1d1316db77695

patchfiles      patch-setup.py patch-examples-search.py
patch.pre_args  -p0

categories-append   textproc
depends_lib-append  port:hyperestraier
#depends_build      bin:swig:swig

post-extract {
    file copy ${filespath}/HyperEstraier.py ${worksrcpath}
    file copy ${filespath}/HyperEstraier_wrap.cxx ${worksrcpath}
}

#pre-build {
#    system "cd ${worksrcpath}; swig -python -c++ HyperEstraier.i"
#}

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples
    xinstall -m 644 -W ${worksrcpath}/examples \
        dbinfo.py gatherer.py iter.py oogatherer.py search.py \
        ${destroot}${prefix}/share/doc/${name}/examples

    reinplace s|'/tmp/casket'|'casket'| \
        ${destroot}${prefix}/share/doc/${name}/examples/dbinfo.py
    reinplace s|'/tmp/casket'|'casket'| \
        ${destroot}${prefix}/share/doc/${name}/examples/iter.py

    file copy ${worksrcpath}/examples/subway \
        ${destroot}${prefix}/share/doc/${name}/examples

    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/test
    xinstall -m 644 ${worksrcpath}/test/python.py \
        ${destroot}${prefix}/share/doc/${name}/test
}
