# $Id: Portfile,v 1.1 2004/10/25 02:43:15 blb Exp $

PortSystem			1.0
PortGroup			python 1.0
name				py-matplotlib
version				0.63.0
categories-append	graphics math
maintainers			blb@pobox.com
description			matlab-like syntax for creating plots in python
long_description \
	Matplotlib is a pure python plotting library with the goal of making \
	publication quality plots using a syntax familiar to matlab users.  The \
	library uses Numeric for handling large data sets and supports a variety \
	of output backends

platforms			darwin

homepage			http://matplotlib.sourceforge.net/
master_sites		sourceforge:matplotlib
distname			matplotlib-${version}

checksums			md5 dab7548c6f82269965d4edf6bc09736a

depends_lib-append	lib:XXX:freetype lib:libpng:libpng \
					lib:libagg.2:antigraingeometry lib:XXX:py-numarray \
					lib:XXX:py-numeric lib:XXX:py-dateutil lib:XXX:py-tz

post-extract {
	if {![variant_isset gtk2]} {
		reinplace "s|^BUILD_GTKAGG\[\[:space:\]\]*=\[\[:space:\]\]*'auto'|BUILD_GTKAGG=0|" \
			${worksrcpath}/setup.py
	} else {
		reinplace "s|^BUILD_GTKAGG\[\[:space:\]\]*=\[\[:space:\]\]*'auto'|BUILD_GTKAGG=1|" \
			${worksrcpath}/setup.py
	}
	reinplace "s|^BUILD_TKAGG\[\[:space:\]\]*=\[\[:space:\]\]*'auto'|BUILD_TKAGG=0|" \
		${worksrcpath}/setup.py
}

build.env			MPLIB_BASE="${prefix}"

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name} \
		${destroot}/${prefix}/share/matplotlib
	xinstall -m 644 -W ${worksrcpath} API_CHANGES CHANGELOG GOALS INSTALL \
		INTERACTIVE KNOWN_BUGS README TODO \
		${destroot}/${prefix}/share/doc/${name}
	file copy ${worksrcpath}/license \
		${destroot}/${prefix}/share/doc/${name}
	file copy ${worksrcpath}/examples \
		${destroot}/${prefix}/share/matplotlib
}

variant gtk2 {
	depends_lib-append	lib:XXX:py-gtk2
}

