--- test.py.orig	2012-01-14 22:31:19.000000000 +0900
+++ test.py	2012-01-14 22:36:40.000000000 +0900
@@ -1,4 +1,5 @@
 #!/usr/bin/python
+# -*- coding:utf-8 -*-
 
 import MeCab
 import sys
@@ -10,30 +11,41 @@
 
     print MeCab.VERSION
 
-    t = MeCab.Tagger (" ".join(sys.argv))
+    model = MeCab.Model(" ".join(sys.argv))
+    c = model.createTagger()
 
-    print t.parse (sentence)
+    print c.parse(sentence)
 
-    m = t.parseToNode (sentence)
+    m = c.parseToNode(sentence)
     while m:
 	print m.surface, "\t", m.feature
 	m = m.next
     print "EOS"
 
-    n = t.parseToNode(sentence)
-    len = n.sentence_length;
+    lattice = MeCab.Lattice()
+    lattice.set_sentence(sentence)
+
+    c.parse(lattice)
+    len = lattice.size()
     for i in range(len + 1):
-        b = n.begin_node_list(i)
-        e = n.end_node_list(i)
+        b = lattice.begin_nodes(i)
+        e = lattice.end_nodes(i)
         while b:
             print "B[%d] %s\t%s" % (i, b.surface, b.feature)
-            b = b.bnext 
+            b = b.bnext
         while e:
             print "E[%d] %s\t%s" % (i, e.surface, e.feature)
             e = e.bnext 
-    print "EOS";
+    print "EOS"
+
+    lattice.set_sentence(sentence)
+    lattice.set_request_type(MeCab.MECAB_NBEST)
+    c.parse(lattice)
+    for i in range(10):
+        lattice.next()
+        print lattice.toString()
 
-    d = t.dictionary_info()
+    d = c.dictionary_info()
     while d:
         print "filename: %s" % d.filename
         print "charset: %s" %  d.charset
