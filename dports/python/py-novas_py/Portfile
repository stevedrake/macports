# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem              1.0
PortGroup               python 1.0

name                    py-novas_py
version                 3.1
categories-append       science
platforms               darwin
maintainers             aronnax
description             Naval Observatory Vector Astrometry Software, \
                        Python Edition
long_description \
  Python ctypes wrapper for Naval Observatory Vector Astrometry Software \
  (NOVAS).  Provides extremely accurate astrometric coordinate conversions \
  and position of solar system objects.

homepage                http://aa.usno.navy.mil/software/novas/novas_py/
master_sites            ${homepage}
distname                NOVAS_Py-${version}
checksums               md5     c8e57e9c33d6475a4fb170e9dec46119 \
                        sha1    8366d2a69708d1bd1a989de48d92eb789cb9b3a2 \
                        rmd160  304837953cc1b9917585ba7dacf8c404c3c9a816

python.versions         25 26 27
python.default_version  27

if {${name} == ${subport}} {

livecheck.type          regex
livecheck.url           ${master_sites}
livecheck.regex         {NOVAS_Py-(\d+(?:\.\d+)*).tar.gz}

} else {

default_variants        +DE405

variant DE405 description \
{Download and prepare a JPL DE405 solar system ephemeris for use with NOVAS} {
    post-build {
        system "cd ${worksrcpath} && ${build.cmd} build_ephemeris"
    }
    post-destroot {
        xinstall -d ${destroot}${prefix}/share/${subport}
        xinstall ${worksrcpath}/DE405.bin ${destroot}${prefix}/share/${subport}/
    }
}

patchfiles              patch-compat.py.diff

livecheck.type  none

}
