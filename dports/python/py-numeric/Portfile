# $Id: Portfile,v 1.17 2005/10/25 13:39:07 mww Exp $

PortSystem 1.0
PortGroup python24 1.0

name			py-numeric
version			24.0
epoch			1
categories		python devel math
maintainers		mww@opendarwin.org
platforms		darwin
description		fast numerical array language for python
long_description	Numerical Python adds a fast, compact, \
				multidimensional array language facility to Python.

homepage		http://www.pfdubois.com/numpy/
master_sites	sourceforge:numpy
distname		Numeric-${version}
dist_subdir		python/${name}-${version}
checksums		md5 bb355ded3b97e867ece90f3c957109c3

platform darwin	8 {
	build.env	CC=/usr/bin/gcc-4.0
}

platform macosx {
	patch {
		file copy -force ${filespath}/customize.py-macosx ${worksrcpath}/customize.py
	}
}

platform puredarwin {
	patch {
		file copy -force ${filespath}/customize.py-puredarwin ${worksrcpath}/customize.py
	}
}

test.run		yes
test.env		PYTHONPATH=[glob -nocomplain ${worksrcpath}/build/lib*]
test.cmd		${python.bin} Test/test.py
test.target

set doc			${destroot}${prefix}/share/doc/${name}
post-destroot {
	xinstall -d -m 755 ${doc}/dotblas ${doc}/MA ${doc}/RNG
	xinstall -W ${worksrcpath} README changes.txt ${doc}
	xinstall -m 644 ${worksrcpath}/Packages/dotblas/doc/README.html \
		${doc}/dotblas
	xinstall -m 644 -W ${worksrcpath}/Packages/MA Legal.htm changes.txt \
		${doc}/MA
	xinstall -m 644 ${worksrcpath}/Packages/RNG/Legal.htm ${doc}/RNG
	file copy ${worksrcpath}/Demo ${doc}
	file copy ${worksrcpath}/Packages/MA/Demo ${doc}/MA
}
