# $Id: Portfile,v 1.14 2005/02/11 18:09:52 mww Exp $

PortSystem 1.0
PortGroup python24 1.0

name			py-numeric
version			23.7
categories		python devel math
maintainers		mww@opendarwin.org
platforms		darwin
description		fast numerical array language for python
long_description	Numerical Python adds a fast, compact, \
				multidimensional array language facility to Python.

homepage		http://www.pfdubois.com/numpy/
master_sites	sourceforge:numpy
distname		Numeric-${version}
checksums		md5 8054781c58ae9cf6fe498316860b5ea8

variant darwin	{
	patchfiles		patch-setup.py
}

variant x86	{
	post-patch	{
		reinplace "s|use_dotblas = 1|use_dotblas = 0|g" ${worksrcpath}/setup.py
	}
}

test.run		yes
test.env		PYTHONPATH==[glob -nocomplain ${worksrcpath}/build/lib*]
test.cmd		${python.bin} Test/test.py
test.target

set doc			${destroot}${prefix}/share/doc/${name}
post-destroot	{
	xinstall -d -m 755 ${doc}/dotblas ${doc}/MA ${doc}/RNG
	xinstall -W ${worksrcpath} README changes.txt ${doc}
	xinstall -m 644 ${worksrcpath}/Packages/dotblas/doc/README.html \
		${doc}/dotblas
	xinstall -m 644 -W ${worksrcpath}/Packages/MA Legal.htm changes.txt \
		${doc}/MA
	xinstall -m 644 ${worksrcpath}/Packages/RNG/Legal.htm ${doc}/RNG
	file copy ${worksrcpath}/Demo ${doc}
	file copy ${worksrcpath}/Packages/MA/Demo ${doc}/MA
}
