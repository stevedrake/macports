# $Id$

PortSystem              1.0
PortGroup               python24 1.0

name                    py-numpy
version                 1.0.4
revision                8
categories              python
platforms               darwin
maintainers             ram openmaintainer
description             The core utilities for the scientific library scipy for Python
long_description        ${description}

homepage                http://numpy.scipy.org/
master_sites            sourceforge:numpy
distname                numpy-${version}

checksums               md5 8f011e9d7697da570efaac61c51725e0 \
                        sha1 9a1f09358c3310cf990eecd06dc2eb54aec78321 \
                        rmd160 8ac192ad3f36a94a45c26e0c4028fdbb744881f5

patchfiles              patch-g95_link.diff \
                        patch-f2py_rules.py.diff

depends_lib-append      port:fftw-3

post-patch {
  reinplace "s|@@MPORTS_PREFIX@@|${prefix}|" ${worksrcpath}/numpy/distutils/fcompiler/g95.py
}

variant g95 conflicts gcc42 description "Use g95 as fortran compiler" {
  depends_lib-append    port:g95
  build.cmd-append      "config_fc --fcompiler g95 --f77exec ${prefix}/bin/g95 --f90exec ${prefix}/bin/g95"
}

variant gcc42 conflicts g95 description "Use gfortran-mp-4.2 as fortran compiler" {
  depends_lib-append    port:gcc42
  build.cmd-append      "config_fc --fcompiler gnu95 --f77exec ${prefix}/bin/gfortran-mp-4.2 --f90exec ${prefix}/bin/gfortran-mp-4.2"
}

if { ![variant_isset g95] && ![variant_isset gcc42] } {
  default_variants      +g95
}
