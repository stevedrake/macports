# $Id$
PortSystem        1.0
name              py-omniORBpy
version           3.4

categories        python devel
platforms         darwin
maintainers       stromnov openmaintainer
description       Python binding for omniORB
long_description  omniORB is a robust high performance CORBA ORB for C++ and \
                  Python. omniORB is largely CORBA 2.6 compliant.
homepage          http://omniorb.sourceforge.net/

distname          omniORBpy-${version}
master_sites      sourceforge:omniorb
checksums           md5     d054e99c89c20f86927c52010e9e7449 \
                    sha1    e598bd25289d0a2a09da4c7241513202c8b9adb4 \
                    rmd160  5b389a31907510800ef0913e2e3855038e6a4cf9

depends_lib       port:omniORB
patchfiles        patch-dir.mk

post-patch {
    reinplace "s|,prefix=\'\$PYTHON_PREFIX\'||g" ${worksrcpath}/configure
    reinplace "s|,prefix=\'\$PYTHON_EXEC_PREFIX\'||g" ${worksrcpath}/configure
}

variant ssl description {Enable SSL support} {
	configure.args-append --with-openssl
	depends_lib-append    port:openssl
}

if {![variant_isset python25] && ![variant_isset python26]} {
    default_variants        +python25
}

variant python25 description {Enable python support with python 2.5} {
    depends_lib-append      port:python25
    configure.python        ${prefix}/bin/python2.5
}

variant python26 description {Enable python support with python 2.6} {
    depends_lib-append      port:python26
    configure.python        ${prefix}/bin/python2.6
}
