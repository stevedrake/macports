# $Id: Portfile,v 1.9 2005/09/12 07:58:25 mww Exp $

PortSystem 1.0

name			py-sip
version			4.3.1
categories		python devel
platforms		darwin
maintainers		mww@opendarwin.org
description		create Python bindings for C and C++ libraries
long_description	SIP is a tool that makes it very easy to create Python \
				bindings for C and C++ libraries. It was originally \
				developed to create PyQt, the Python bindings for the \
				Qt toolkit, but can be used to create bindings for any \
				C or C++ library.

homepage		http://www.riverbankcomputing.co.uk/sip/
master_sites	http://www.river-bank.demon.co.uk/download/sip/
distname		sip-${version}
checksums		md5 c561d8dc19fbe3a8bffc4b10bd56910f
dist_subdir		python

depends_lib		port:python24

patchfiles		patch-siputils.py \
				patch-specs_macx-g++

configure.cmd	${prefix}/bin/python2.4 configure.py
configure.pre_args  -d ${prefix}/lib/python2.4/site-packages \
				-e ${prefix}/include/python2.4 \
				-v ${prefix}/share/sip
configure.post_args	LFLAGS="-L${prefix}/lib"

#variant qt3-x11 {
#	depends_lib-append			lib:libqt-mt:qt3
#	configure.env-append		QTDIR=${prefix}
#	configure.args-append		-l qt-mt
#	configure.post_args-append	INCDIR_QT=${prefix}/include/qt3
#}

#variant qt3-mac {
#	depends_lib-append			lib:libqt-mt:qt3-mac
#	configure.env-append		QTDIR=${prefix}
#	configure.args-append		-l qt-mt
#	configure.post_args-append	INCDIR_QT=${prefix}/include/qt3
#}

variant darwin {
	configure.args	-p macx-g++
}

platform darwin 8 {
	configure.post_args-append	CC=/usr/bin/gcc-4.0 CXX=/usr/bin/g++-4.0
}

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc
	file copy ${worksrcpath}/doc ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} LICENSE NEWS README THANKS TODO \
		${destroot}${prefix}/share/doc/${name}
}
