# $Id: Portfile,v 1.17 2005/09/12 07:56:10 mww Exp $

PortSystem 1.0
PortGroup python24 1.0

name			py-sqlite
version			2.0.4
categories		python databases
maintainers		mww@opendarwin.org
platforms		darwin freebsd
description		python database extension for sqlite
long_description	PySQLite is a Python extension for SQLite that \
				conforms to the Python Database API Specification 2.0.

homepage		http://www.pysqlite.org/
master_sites	http://initd.org/pub/software/pysqlite/releases/2.0/${version}/
distname		pysqlite-${version}
checksums		md5 8eecd39eb728f3af634ebc67e823b389

depends_lib-append	port:sqlite3

patch {
	reinplace "s|include_dirs=/usr/local|include_dirs=${prefix}/include|g" \
		${worksrcpath}/setup.cfg
	reinplace "s|/usr/local|${prefix}|g" ${worksrcpath}/setup.cfg
	reinplace "s|pysqlite2-doc|share/doc/${name}|g" ${worksrcpath}/setup.py
}

test.run		yes
test.cmd		${python.bin}
test.env		PYTHONPATH=\$(echo ${worksrcpath}/build/lib*/)
test.target		scripts/test-pysqlite
