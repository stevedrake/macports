# $Id: Portfile,v 1.5 2004/04/23 10:50:28 mww Exp $

PortSystem 1.0
PortGroup python 1.0

name		py-vorbis
version		1.3
categories	python audio
platforms	darwin
maintainers	mww@opendarwin.org
description	Python module for Ogg Vorbis audio encoding and decoding
long_description	${description}

homepage	http://www.vorbis.com
master_sites	${homepage}/files/1.0.1/unix/py/
distname	pyvorbis-${version}
checksums	md5 506ebbf2ea3040857ff2af5d09125ef8

depends_lib-append	lib:libvorbis:libvorbis \
		lib:XXX:py-ogg

use_configure	yes
pre-configure	{
	reinplace "s|/usr/|/opt/|g" ${worksrcpath}/config_unix.py
}
configure.cmd	${python.bin} config_unix.py
configure.pre_args

build.env	CFLAGS="-I${prefix}/include/python2.3" \
		LDFLAGS=" -logg -undefined dynamic_lookup -flat_namespace -fno-common" \
		MACOSX_DEPLOYMENT_TARGET="10.3"

post-destroot	{
	xinstall -m 644 -W ${worksrcpath} AUTHORS COPYING ChangeLog README \
		NEWS ${destroot}${prefix}/share/doc/${name}
}
