# $Id$

PortSystem 1.0

name            py25-gnome
set my_name     gnome-python
version         2.22.3
set branch      [join [lrange [split $version .] 0 1] .]
categories      python gnome
platforms       darwin
maintainers     pguyot@kallisys.net openmaintainer
description     gnome-python is a set of python interfaces to gnome-libs.
long_description    ${description}

homepage        http://www.pygtk.org/
master_sites    gnome:sources/$my_name/$branch/
use_bzip2       yes
distname        $my_name-$version

checksums       md5     ab12d94954a57de39b25eb7903d8429c \
                sha1    35eafe4f5ab9ee003a573dcf26699d3b03d52d5a \
                rmd160  81772db78abe864dcbf3c89b7f864dd3b8ba41d3

depends_build   port:pkgconfig

depends_lib     port:libgnomeui \
                port:py25-gtk \
                port:py25-orbit \
                port:libgnome \
                port:python25 \
                port:libgnomecanvas \
                port:gnome-vfs \
                port:gconf \
                port:libbonobo \
                port:libbonoboui

build.args      PYTHON_LDFLAGS= PYTHON_LIBS=

configure.python ${prefix}/bin/python2.5

use_parallel_build  yes

platform darwin 9 { 
    post-patch { 
        reinplace "s| -export-symbols-regex.*||g" \
            ${worksrcpath}/bonobo/Makefile.in \
            ${worksrcpath}/gconf/Makefile.in \
            ${worksrcpath}/gnome/Makefile.in \
            ${worksrcpath}/gnomecanvas/Makefile.in \
            ${worksrcpath}/gnomevfs/Makefile.in
    } 
}

livecheck.check regex
livecheck.url   http://ftp.gnome.org/pub/gnome/sources/$my_name/$branch/
livecheck.regex {LATEST-IS-(\d+(?:\.\d+)*)}
