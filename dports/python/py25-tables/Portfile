# $Id$

PortSystem         1.0
PortGroup          python25 1.0

name               py25-tables
version            2.0.3
categories-append  python science
platforms          darwin
maintainers        dal.ca:tom.duck openmaintainer

description		     Python package for HDF5 file access.
long_description   PyTables is a python package used to access \
  HDF5 files, and can efficiently manage extremely large hierarchical \
  data sets.

homepage           http://www.pytables.org/
master_sites       ${homepage}download/stable/
distname           pytables-${version}

checksums          md5 0afe29dd420bfdfbd2a4380b4ac7fbee \
                   sha1 54a147c2e42221bfd86e1c14358dba3cb2444fb0 \
                   rmd160 b8e7e7be7e82c2b2860260861b53c09fedda0b5d

depends_lib-append port:hdf5 \
                   port:py25-numpy \
                   port:zlib \
                   port:bzip2 \
                   port:py25-scientific

build.target       build_ext
build.args         --inplace \
                   --hdf5=${prefix} \
                   --bzip2=${prefix}

destroot.args      --hdf5=${prefix} \
                   --bzip2=${prefix}

post-destroot {
  xinstall -m 644 -W ${worksrcpath} ANNOUNCE.txt LICENSE.txt README.txt \
    MIGRATING_TO_2.x.txt RELEASE_NOTES.txt THANKS TODO.txt \
    ${destroot}${prefix}/share/doc/${name}

  foreach f {ptdump ptrepack nctoh5} {
    move ${destroot}${prefix}/bin/${f} ${destroot}${prefix}/bin/${f}-py25
  }
}

variant lzo description "Use lzo compression library" {
  depends_lib-append    port:lzo
  build.args-append     --lzo=${prefix}
  destroot.args-append  --lzo=${prefix}
}

livecheck.check    regex
livecheck.url      ${homepage}
livecheck.regex    {PyTables ([0-9]+\.[0-9]+\.[0-9]+) released}
