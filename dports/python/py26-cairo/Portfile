# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            py26-cairo
set my_name     pycairo
version         1.6.4
categories      python x11
platforms       darwin
maintainers     mcalhoun
description     Pycairo is set of Python bindings for the cairo graphics library

long_description \
    ${description}

homepage        http://cairographics.org/pycairo
master_sites    http://cairographics.org/releases
distname        ${my_name}-${version}

checksums \
    md5     2c3aa21e6e610321498f9f81f7b625df \
    sha1    d3b3ecb6e999cc7b4a6ebcad00ae8d82c253c21c \
    rmd160  6197427df3d10b708847503f975670e3d02d57e5

depends_build   port:pkgconfig
depends_lib     port:python26 \
                port:cairo \
                port:py26-numpy

configure.python    ${prefix}/bin/python2.6

# Can be removed once MacPorts 1.7.0 is released
if {![info exists frameworks_dir]} {
   set frameworks_dir ${prefix}/Library/Frameworks
}

configure.pre_args-delete  --prefix=${prefix}
set python_prefix  ${frameworks_dir}/Python.framework/Versions/2.6
configure.pre_args-append  --prefix=${python_prefix}
configure.args-append      --includedir=${python_prefix}/include/python2.6

platform darwin 9 {
    post-patch {
        reinplace "s| -export-symbols-regex.*||g" ${worksrcpath}/cairo/Makefile.in
    }
}

post-destroot {
    set docdir ${prefix}/share/doc/${name}
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath} AUTHORS COPYING NEWS doc/NOTES doc/FAQ README \
        ${destroot}${docdir}
}

livecheck.check  regex
livecheck.url    http://cairographics.org/releases/
livecheck.regex  LATEST-pycairo-(\\d+(?:\\.\\d+)*)
