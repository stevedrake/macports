# -*- Mode: Tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:et:sw=4:ts=4:sts=4
# $Id$

PortSystem 1.0

#######################################################################################################
# PortGroup python26 1.0
#######################################################################################################
# Can be removed once MacPorts 1.7.0 is released
if {![info exists frameworks_dir]} {
    set frameworks_dir ${prefix}/Library/Frameworks
}

set python.bin	    ${prefix}/bin/python2.6
set python.lib	    ${frameworks_dir}/Python.framework/Versions/2.6/Python
set python.pkgd	    ${frameworks_dir}/Python.framework/Versions/2.6/lib/python2.6/site-packages
set python.bindir	${frameworks_dir}/Python.framework/Versions/2.6/bin
set python.include	${frameworks_dir}/Python.framework/Versions/2.6/include/python2.6

categories		python

dist_subdir		python

depends_lib		port:python26

use_configure	no

build.cmd		${python.bin} setup.py --no-user-cfg
build.target	build

destroot.cmd	           ${python.bin} setup.py --no-user-cfg
destroot.destdir	       --prefix=${frameworks_dir}/Python.framework/Versions/2.6 --root=${destroot}
configure.pkg_config_path  ${frameworks_dir}/Python.framework/Versions/2.6/lib/pkgconfig

set env(PATH) "${python.bindir}:$env(PATH)"

pre-destroot	{
	xinstall -d -m 755 ${destroot}${prefix}/share/doc/${name}/examples
}
#######################################################################################################

name                    py26-libxml2
version                 2.6.21
categories              python textproc
platforms               darwin
maintainers             mcalhoun openmaintainer
description             Python bindings for libxml2
long_description        ${description}

homepage                http://xmlsoft.org/python.html
master_sites            ftp://xmlsoft.org/libxml2/python/
distname                libxml2-python-${version}

checksums               md5 229dd2b3d110a77defeeaa73af83f7f3 \
                        sha1 2d395e8a5e9accd68f4e78ac2391431ef884e9d5 \
                        rmd160 d4973576c33e0e65c4fc41b31ee3df5f803abfad

patchfiles              patch-setup.py.diff

depends_lib-append      port:libxml2 \
                        port:zlib

build.env               LDFLAGS=-L${prefix}/lib

post-patch {
  reinplace "s|@PREFIX@|$prefix|" ${worksrcpath}/setup.py
}

post-destroot {
  set docdir ${prefix}/share/doc/${name}-${version}
  xinstall -d ${destroot}${docdir}
  xinstall -m 0644 -W ${worksrcpath} README TODO \
    ${destroot}${docdir}
}

livecheck.check         md5
livecheck.url           ftp://xmlsoft.org/libxml2/python/
livecheck.md5           a2cc31311f1b3fb52a08cf1056efda11
