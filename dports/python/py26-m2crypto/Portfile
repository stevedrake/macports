# $Id$

PortSystem         1.0
PortGroup          python26 1.0

name               py26-m2crypto
version            0.20.2
categories-append  crypto devel
maintainers        ram openmaintainer
description        M2Crypto is a crypto and SSL toolkit for Python.
long_description   ${description}

platforms          darwin

homepage           http://chandlerproject.org/Projects/MeTooCrypto
master_sites       http://pypi.python.org/packages/source/M/M2Crypto/
distname           M2Crypto-${version}

checksums          md5 6c24410410d6eb1920ea43f77a93613a \
                   sha1 6e85d7035971c353db74a497fca0ec2eaea4dea0 \
                   rmd160 7376195fd586e7834d41229a4798f8810b86eed2

depends_lib-append bin:swig:swig-python \
                   port:openssl \
                   port:py26-setuptools

post-patch {
  reinplace "s|#extra_link_args|extra_link_args|g" ${worksrcpath}/setup.py
  reinplace "s|self.openssl = '/usr'|self.openssl = '${prefix}'|g" \
    ${worksrcpath}/setup.py
}

post-destroot {
  xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
  eval file copy [glob ${worksrcpath}/doc/*] \
    ${destroot}${prefix}/share/doc/${name}
}

livecheck.type     regex
livecheck.url      ${homepage}
livecheck.regex    M2Crypto-(\[0-9\\.\]+)\.tar\.gz
