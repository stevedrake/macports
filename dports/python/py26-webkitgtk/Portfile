# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem      1.0

name            py26-webkitgtk
version         1.1.7
categories      python www
description     Python bindings for the WebKit GTK+ port
long_description ${description}
maintainers     nodamage.com:nodamage openmaintainer
homepage        http://code.google.com/p/pywebkitgtk/

platforms       darwin
depends_lib     port:webkit-gtk port:python26 port:py26-gtk port:libffi

distname        pywebkitgtk-${version}
master_sites    http://pywebkitgtk.googlecode.com/files/

checksums           md5     4dbe0111c0b0ad2280052e4534903a9b \
                    sha1    e3416d9455fe7d9947b079c66f40008a01f80055 \
                    rmd160  c8f1d838d13bee68eb0299adadfbd9d1355c3798

set python_prefix ${frameworks_dir}/Python.framework/Versions/2.6

configure.pre_args-delete  --prefix=${prefix}
configure.pre_args-append  --prefix=${python_prefix}
configure.args-append      --includedir=${python_prefix}/include/python2.6
configure.pkg_config_path  ${python_prefix}/lib/pkgconfig

configure.python    ${prefix}/bin/python2.6

post-destroot {
	# Add a .pth file pointing to the proper location
	# See: http://code.google.com/p/pywebkitgtk/issues/detail?id=38
	system "echo webkit-1.0 > ${destroot}${python_prefix}/lib/python2.6/site-packages/webkit.pth"
}

livecheck.type  regex
livecheck.url   ${homepage}
livecheck.regex pywebkitgtk-(\\d+.\\d+\\.\\d+)
