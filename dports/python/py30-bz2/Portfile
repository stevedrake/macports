# $Id$

PortSystem 1.0
PortGroup python30 1.0

name			py30-bz2
version			3.0
categories		python
platforms		darwin
maintainers		mww
description		Python bindings to bzip2
long_description	${description}

homepage		http://www.python.org/doc/current/lib/module-bz2.html
master_sites	http://www.python.org/ftp/python/3.0/
distname		Python-${version}
dist_subdir		python30
checksums		md5 28021e4c542323b7544aace274a03bed
use_bzip2		yes

worksrcdir		${worksrcdir}/Modules

extract.post_args	"| tar -xf - ${distname}/Modules/bz2module.c"
post-extract {
	file copy	${filespath}/setup.py ${worksrcpath}
}

set libdir ${prefix}/lib/
set incdir ${prefix}/include/
depends_lib-append	port:bzip2

configure	{
	reinplace "s|__VERSION__|${version}|g" ${worksrcpath}/setup.py
	reinplace "s|__LIBDIR__|${libdir}|g" ${worksrcpath}/setup.py
	reinplace "s|__INCDIR__|${incdir}|g" ${worksrcpath}/setup.py
}

livecheck.check	regex
livecheck.url	http://www.python.org/download/releases/3.0/
livecheck.regex	/3.0/Python-(\[0-9a-z.\]+)\\.tgz

