# $Id: Portfile 24478 2007-04-25 09:02:48Z mww@macports.org $

PortSystem 1.0
#PortGroup python30 1.0
# begin group code (remove this when the python30 group code becomes available)
set python.bin  ${prefix}/bin/python3.0
categories              python
depends_lib             port:python30
use_configure   no
build.cmd               ${python.bin} setup.py
build.target    build
destroot.cmd    ${python.bin} setup.py
destroot.destdir        --prefix=${prefix} --root=${destroot}
# end group code

name			py30-gdbm
version			3.0a1
categories		python databases
platforms		darwin
maintainers		mww
description		Python bindings to the GNU dbm library
long_description	${description}

homepage		http://www.python.org/doc/current/lib/module-gdbm.html
master_sites	http://www.python.org/ftp/python/3.0/
distname		Python-${version}
dist_subdir		python30
checksums		md5 89356ece9bd276e78a9e63cfe4a83a23
extract.suffix		.tgz

depends_lib-append	port:gdbm

worksrcdir	${worksrcdir}/Modules

extract.post_args	"| tar -xf - ${distname}/Modules/gdbmmodule.c"
post-extract {
	file copy	${filespath}/setup.py ${worksrcpath}
}

patch {
	cd ${worksrcpath}
	reinplace "s|__VERSION__|${version}|g" setup.py
	reinplace "s|__PREFIX__|${prefix}|g" setup.py
}

livecheck.check	regex
livecheck.url	http://www.python.org/download/releases/3.0/
livecheck.regex	/3.0/Python-(\[0-9a-z.\]+)\\.tgz

