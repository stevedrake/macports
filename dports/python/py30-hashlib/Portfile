# $Id$

PortSystem 1.0
PortGroup python30 1.0

name			py30-hashlib
version			3.0b3
categories		python
platforms		darwin
maintainers		mww
description		Python secure hash and message digest module
long_description	Python secure hash and message digest module MD5, SHA1, \
				SHA224, SHA256, SHA384, SHA512

homepage		http://www.python.org/doc/current/lib/module-hashlib.html
master_sites	http://www.python.org/ftp/python/3.0/
distname		Python-${version}
dist_subdir		python30


checksums               md5 91d44362c73dcc423ec51973ed4082fe \
                        sha1 bcaf250904c5578acebed7289782ba8b29e0fe1a \
                        rmd160 a4e97e18d198a42d8ac3297815292bd2be3d6ee4
use_bzip2               yes

depends_lib-append	port:openssl

worksrcdir		${worksrcdir}/Modules

extract.post_args	"| tar -xf - ${distname}/Modules/_hashopenssl.c"
post-extract {
	file copy ${filespath}/setup.py ${worksrcpath}
}

configure {
	reinplace "s|__VERSION__|${version}|g" ${worksrcpath}/setup.py
	reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/setup.py
}

livecheck.check	regex
livecheck.url	http://www.python.org/download/releases/3.0/
livecheck.regex	/3.0/Python-(\[0-9a-z.\]+)\\.tgz
