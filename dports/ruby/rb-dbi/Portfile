# $Id: Portfile,v 1.2 2004/04/22 22:37:29 rshaw Exp $
PortSystem 1.0

name			rb-dbi
version			0.0.22
categories		ruby databases
maintainers		shu@rufuran.org
description		The Ruby port of DBI
long_description	A database independent interface for accessing \
					databases, similar to Perl's DBI. Drivers for it are \
					available as separate ports.
homepage		http://ruby-dbi.rubyforge.org/
master_sites	http://rubyforge.org/frs/download.php/557/
dist_subdir		ruby
distname		ruby-dbi-all-${version}
worksrcdir		ruby-dbi-all
checksums		md5 ba4097c5ccd0405701db5a6e2018f425
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build		path:${ruby}:ruby

configure.cmd		${ruby} -rvendor-specific setup.rb config
configure.pre_args
configure.args		--with=dbi
build.cmd			${ruby} -rvendor-specific setup.rb setup
build.target
destroot.cmd		${ruby} -rvendor-specific setup.rb
destroot.destdir

pre-destroot {
	reinplace "s|${prefix}|${destroot}${prefix}|g" ${worksrcpath}/config.save
}
post-destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	set cmd "cp -R contrib ${destroot}${prefix}/share/doc/${name}/contrib"
	ui_info ${cmd}; system ${cmd}
	set cmd "cp -R doc ${destroot}${prefix}/share/doc/${name}/doc"
	ui_info ${cmd}; system ${cmd}
	set cmd "cp -R examples ${destroot}${prefix}/share/doc/${name}/examples"
	ui_info ${cmd}; system ${cmd}
}

