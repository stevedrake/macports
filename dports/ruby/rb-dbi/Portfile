# $Id$
PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		{dbi ruby-dbi-all} 0.0.23 setup.rb \
				{README contrib doc examples} \
				rubyforge:655:ruby-dbi
maintainers		shu@rufuran.org
description		The Ruby port of DBI
long_description	A database independent interface for accessing \
					databases, similar to Perl's DBI. Drivers for it are \
					available as separate ports.
categories-append	databases
checksums		md5 7a713494d84bd4f5b877496970bcf13c
platforms		darwin

worksrcdir		${ruby.filename}

# The conjuring with the dbi_conf_args variable to set configure.args is to cope
# with the fact that setup.rb accepts a single "--with=<feature>,<feature>,..."
# argument, with the last one overriding the rest.  We must therefore append to
# the end of the string to get the desired variants, and for niceness we might
# as well delete the obsoleted "--with" argument.

set dbi_conf_args		--with=dbi
configure.args-append	${dbi_conf_args}

variant dbd_mysql {
	depends_lib-append	port:rb-mysql
	configure.args-delete	${dbi_conf_args}
	append dbi_conf_args	,dbd_mysql
	configure.args-append	${dbi_conf_args}
}

variant dbd_odbc {
	depends_lib-append	port:rb-odbc
	configure.args-delete	${dbi_conf_args}
	append dbi_conf_args	,dbd_odbc
	configure.args-append	${dbi_conf_args}
}

variant dbd_pg {
	depends_lib-append	port:rb-postgres
	configure.args-delete	${dbi_conf_args}
	append dbi_conf_args	,dbd_pg
	configure.args-append	${dbi_conf_args}
}
