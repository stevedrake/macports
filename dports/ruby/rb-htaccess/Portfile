# $Id: Portfile,v 1.1 2004/04/28 03:25:01 rshaw Exp $
PortSystem 1.0

name			rb-htaccess
version			0.1.2
categories		ruby www
maintainers		rshaw@opendarwin.org
description		Interface to Apache .htaccess and htpasswd files.
long_description	htaccess is a library which provide ruby interface \
					to Apache .htaccess and htpasswd files (basic auth).
homepage		http://rubyforge.org/projects/htaccess/
master_sites	http://rubyforge.org/frs/download.php/252/
distname		ruby-htaccess-${version}
dist_subdir		ruby
checksums		md5 a78be072081a9fbaa2605fa11b29d1d6
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby

configure.cmd		${ruby} -rvendor-specific install.rb
configure.pre_args	config

build.cmd			${ruby} -rvendor-specific install.rb
build.target		setup

test.run		yes
test.dir		${worksrcpath}/test
test.cmd		${ruby} -I../lib test-htaccess.rb \; \
				${ruby} -I../lib test-htpasswd.rb

destroot.cmd		${ruby} -rvendor-specific install.rb
destroot.target		install
destroot.destdir
pre-destroot {
	reinplace "s|${prefix}|${destroot}${prefix}|g" ${worksrcpath}/config.save
}
post-destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	system "cp -R doc/* ${destroot}${prefix}/share/doc/${name}"
}

