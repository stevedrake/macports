# $Id: Portfile,v 1.2 2006/04/10 15:17:00 takanori Exp $

PortSystem      1.0
PortGroup       ruby 1.0
name            rb-hyperestraier-rubynative
version         1.2.1
maintainers     rsky0711@gmail.com
platforms       darwin
description     Ruby binding of Hyper Estraier
long_description ${description}

homepage        http://hyperestraier.sourceforge.net/
master_sites    ${homepage}
dist_subdir     hyperestraier
distname        hyperestraier-${version}
worksrcdir      hyperestraier-${version}/rubynative
checksums       md5 91e2c859510a9e30fad8b49f6affe6f1 \
                sha1 e1aad3d5c1bdd758c2f118fa54450e8eccfa6129 \
                rmd160 2a157a685b1df8e4e8d1c9f093c447e3a188951c

categories      ruby textproc
depends_lib     port:ruby port:hyperestraier

post-extract {
    # configure
    reinplace "s|\$HOME|${prefix}|g" \
        ${worksrcpath}/configure
    reinplace "s|\"sitelibdir\"|\"sitearchdir\"|g" \
        ${worksrcpath}/configure
    # Makefile.in
    reinplace "s|\$(HOME)|${prefix}|g" \
        ${worksrcpath}/Makefile.in
    reinplace "s|MYRBLIBS = estraier\.so|MYRBLIBS = estraier.bundle|g" \
        ${worksrcpath}/Makefile.in
    # estcmd.rb
    reinplace "s|/usr/bin/ruby|${ruby.bin}|g" \
        ${worksrcpath}/estcmd.rb
}

post-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/examples
    xinstall -m 644 ${worksrcpath}/overview \
        ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath}/example \
        example001.rb example002.rb \
        ${destroot}${prefix}/share/doc/${name}/examples
}
