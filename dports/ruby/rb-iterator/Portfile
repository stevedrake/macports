# $Id: Portfile,v 1.1 2004/04/23 00:17:25 rshaw Exp $
PortSystem 1.0

name			rb-iterator
version			0.6
categories		ruby
maintainers		rshaw@opendarwin.org
description		bidirectional iterator classes inspired by GoF iterator pattern
long_description	If Ruby's native iterators (yield+each) ain't \
					flexible enough, you may want to try using this \
					collection of bidirectional iterator classes. \
					Building custom iterator classes are simple.  This \
					is a simple implementation of GoF iterator-pattern.
homepage		http://rubyforge.org/projects/aeditor/
master_sites	http://rubyforge.org/frs/download.php/480/
distname		iterator-${version}
dist_subdir		ruby
checksums		md5 8efcae64a955741b915c69e4b0e0963b
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby

configure.cmd		${ruby} -rvendor-specific install.rb
configure.pre_args	config

build.cmd			${ruby} -rvendor-specific install.rb
build.target		setup

test.run		yes
test.dir		${worksrcpath}/test
test.cmd		${ruby} -I../lib test_all.rb

destroot.cmd		${ruby} -rvendor-specific install.rb
destroot.target		install
destroot.destdir
pre-destroot {
	reinplace "s|${prefix}|${destroot}${prefix}|g" ${worksrcpath}/config.save
}
post-destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	set cmd "cp -R samples ${destroot}${prefix}/share/doc/${name}/samples"
	ui_info ${cmd}; system ${cmd}
}

