# $Id: Portfile,v 1.5 2004/04/02 08:05:37 rshaw Exp $
PortSystem 1.0

name			rb-jabber4r
version			0.4.0
revision		1
categories		ruby
maintainers		rshaw@opendarwin.org
description		Library allowing Ruby apps to talk to a Jabber IM system. 
long_description	This library was created to allow a Ruby application to \
					connect to (or create a) Jabber account as an additional \
					resource. Although it was not the original intent to serve \
					as the infrastructure of a complete UI-based IM client... \
					it supports everything except the groupchat protocol. \
					It currently supports: \
						Account registration \
						Connection to an account (digest and plain text) \
						Access to Roster (buddy list) \
						Tracking of presence of resources in the Roster \
							(including local account resources) \
						Sending and receiving messages \
						Managing subscriptions \
						XHTML messages \
						Pluggable XML Parsers \
					What can you do with this? You could write a ruby \
					application that allows you to query it by IM for status, \
					control, etc. You could use this as a communications \
					channel backbone for a Ruby application (which is my intent). 
homepage		http://jabber4r.rubyforge.org
platforms		darwin
master_sites	http://rubyforge.org/download.php/5/
dist_subdir		ruby
distfiles		jabber4r_ruby_1.8.0-${version}.tar.gz
worksrcdir		jabber4r
checksums		md5 59234ac5f900d43bc2e442e46be5ad61

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby
depends_lib		lib:XXX:rb-xmlparser

configure {
	cd ${worksrcpath}
	reinplace "s|site_ruby|vendor_ruby|" install.rb
	reinplace "s|\$:|'${destroot}'+&|" install.rb 
	reinplace "s|\\(USE_PARSER.*=\\).*\\(#.*\\)$|\\1 :xmlparser \\2|" \
		lib/jabber4r/protocol.rb
}

build			{}

destroot.cmd	${ruby} install.rb
destroot.target
destroot.destdir

