# $Id: Portfile,v 1.4 2004/04/28 02:57:34 rshaw Exp $
PortSystem 1.0

name			rb-kwartz
version			2004-04-27
categories		ruby textproc
maintainers		shu@rufuran.org
description		A fast, clean, multi-language template system
long_description	Kwartz is a template system designed for web designers \
					and programmers. It can separate presentation logic \
					from a template, runs very fast, generates templates \
					in multiple languages, does not break HTML design, \
					handle any kind of text, and can auto-sanitize text.
homepage		http://www.kuwata-lab.com/kwartz/
master_sites	${homepage}
dist_subdir		ruby
distname		kwartz_${version}
checksums		md5 2e88e670d1216828033be5bc993785dc
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby

configure.cmd	${ruby} -rvendor-specific setup.rb
configure.pre_args	config

build.cmd		${ruby} -rvendor-specific setup.rb
build.target	setup

test.run		yes
test.dir		${worksrcpath}/test
test.cmd		${ruby} test.rb \; ${ruby} test.cmd.rb

destroot.cmd	${ruby} -rvendor-specific setup.rb
destroot.target	install
destroot.destdir
pre-destroot {
	reinplace "s|${prefix}|${destroot}${prefix}|g" ${worksrcpath}/config.save
}
post-destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	system "cp -R doc ${destroot}${prefix}/share/doc/${name}/rdoc"
	system "cp -R util ${destroot}${prefix}/share/doc/${name}/util"
	system "cp -R users-guide ${destroot}${prefix}/share/doc/${name}/users-guide"
}
