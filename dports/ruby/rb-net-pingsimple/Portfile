# $Id: Portfile,v 1.1 2004/04/19 15:54:55 rshaw Exp $
PortSystem 1.0

name			rb-net-pingsimple
version			0.3.0
categories		ruby net
maintainers		rshaw@opendarwin.org
description		A simple Ruby interface to the 'ping' command
long_description	Wrapper for ping (TCP, UDP, External)
homepage		http://ruby-netutils.sourceforge.net/
master_sites	sourceforge:ruby-netutils
dist_subdir		ruby
distname		net-pingsimple-${version}
checksums		md5 2e127b0fb138ffab7da41abbf9dcda41
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby

patch {
	reinplace "s/bsd/&|darwin/" ${worksrcpath}/net/pingsimple.rb
}

use_configure	no
build			{}

test.run		yes
test.cmd		${ruby} test/test.rb

destroot {
	cd ${worksrcpath}
	set rubylibpath [exec ${ruby} -rrbconfig -e "print Config::CONFIG\['vendorlibdir'\]"]
	xinstall -d -m 0755 ${destroot}${rubylibpath}/net
	xinstall -m 0644 net/pingsimple.rb ${destroot}${rubylibpath}/net
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	set cmd "cp -R doc/* ${destroot}${prefix}/share/doc/${name}"
	ui_info ${cmd}; system ${cmd}
}

