# $Id$

PortSystem		1.0
PortGroup		ruby 1.0

ruby.setup		rabbit 0.9.2 setup.rb {README.en sample misc}
revision		1
maintainers		kimuraw
description		An application to do presentation with RD document.
long_description	This is an application to do presentation with RD document.\
					There are some features which are different from other\
					presentation tools:\
					  * To define slide look, use Ruby.\
					  * There are many keyboard interfaces.\
					  * This supports mouse gesture.\
					  * and more...

categories-append	graphics
platforms		darwin
homepage        {http://www.cozmixng.org/~rwiki/?cmd=view;name=Rabbit}
license			Ruby
supported_archs	noarch

depends_lib-append	port:rb-gtk2 port:rb-rsvg port:rb-poppler \
					port:rb-htree port:rb-div \
					port:rb-rdtool port:rb-rttool
# rabbiter requires tweetstream and password
depends_lib-append	port:rb-tweetstream port:rb-password

# disable source rwiki to avoid crash with openssl-1.0.0.
# port:glib2 is linking /usr/lib/libcrypto.0.9.8.dylib via Carbon.framework.
# ruby is a flat namespace program. We face problems wheh ruby loads both of
# libcrypto.0.9.8.dylib from MacOSX and libcrypto.1.0.0.dylib from MacPorts.
patchfiles			patch-lib-rabbit-source-rwiki.rb.diff

post-build {
	reinplace "s|^#!.*ruby|#!${ruby.bin}|" \
		${worksrcpath}/bin/rabbit \
		${worksrcpath}/bin/rabbit-command \
		${worksrcpath}/bin/rabbit-theme-manager \
		${worksrcpath}/bin/rabrick \
		${worksrcpath}/bin/rabbirc \
		${worksrcpath}/bin/rabbiter
}
post-destroot {
	delete "${destroot}${prefix}/bin/rabbit.bat"
}

master_sites    http://www.cozmixng.org/~kou/download/
checksums		md5 f7196ca079640bc78b08a43628964191 \
				rmd160 3d078b948524f2d1a13f754b1c67582d58b7b835 \
				sha1 caa1492e3ffb4aa2ef5513af1cd32827280b3da0

livecheck.type	regex
livecheck.url	http://raa.ruby-lang.org/project/rabbit/
livecheck.regex	{download/rabbit-(.*)\.tar\.gz\">http://}

