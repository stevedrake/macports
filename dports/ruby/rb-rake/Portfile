# $Id: Portfile,v 1.1 2004/04/28 06:21:53 rshaw Exp $
PortSystem		1.0

name			rb-rake
version			0.3.1
categories		ruby devel
maintainers		rshaw@opendarwin.org
description		Ruby make-like utility using standard Ruby syntax
long_description	This package contains Rake, a simple ruby build \
					program with capabilities similar to make. \
					Rake has the following features: \
					* Rakefiles (rake's version of Makefiles) are \
					completely defined in standard Ruby syntax.  No XML \
					files to edit.  No quirky Makefile syntax to worry \
					about (is that a tab or a space?) \
					* Users can specify tasks with prerequisites. \
					* Rake supports rule patterns to sythesize implicit \
					tasks. \
					* Rake is lightweight.  It can be distributed with \
					other projects as a single file.  Projects that \
					depend upon rake do not require that rake be \
					installed on target systems.
homepage		http://rubyforge.org/projects/rake/
master_sites	http://rubyforge.org/frs/download.php/226/
dist_subdir		ruby
distname		rake-${version}
extract.suffix	.tgz
checksums		md5 ef26fb54829dad77765a7d0d76f0b27f
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby
depends_lib		lib:XXX:rb-rubygems

use_configure	no
build			{}

test.run		yes
test.cmd		${ruby} -I./lib bin/rake
test.target		testall

destroot.env	DESTDIR=${destroot}
destroot.cmd	${ruby} -rvendor-specific install.rb
destroot.target
destroot.destdir
post-destroot {
	cd ${worksrcpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	xinstall -m 0644 README ${destroot}${prefix}/share/doc/${name}
	system "cp -R doc/* ${destroot}${prefix}/share/doc/${name}"
}

