# $Id$

PortSystem		1.0
PortGroup		ruby 1.0

name			rb-rubygems
version		1.1.1
revision		1

homepage		http://www.rubygems.org
master_sites		http://rubyforge.org/frs/download.php/35283/
distname                rubygems-${version}
dist_subdir             ruby

maintainers		mr_bond openmaintainer
description		a package management framework for Ruby
long_description	RubyGems is the Ruby standard for publishing and \
					managing third party libraries.
categories-append	devel
checksums		md5 	1a77c5b6b293a3ccd5261dc120641ccc \
			sha1	e1ead11fa2928fb4b7871c17fd1186198c97c11a


extract.suffix		.tgz
platforms		darwin

patchfiles		patch-setup.rb.diff
post-patch {
	reinplace "s|@@DESTROOT@@|${destroot}|" ${worksrcpath}/setup.rb
}


configure { }
build { }

destroot.cmd	${ruby.bin} setup.rb 
destroot.args	--prefix=${destroot}${prefix} 
destroot.env

set gems_libdir ${destroot}${prefix}/lib/ruby/gems/${ruby.version}
destroot.keepdirs \
        ${gems_libdir}/doc \
        ${gems_libdir}/gems \
        ${gems_libdir}/specifications


post-destroot {
	file mkdir ${destroot}${ruby.lib}
	file rename ${destroot}${prefix}/lib/rubygems ${destroot}${ruby.lib}
	file rename ${destroot}${prefix}/lib/rbconfig ${destroot}${ruby.lib}
	file rename ${destroot}${prefix}/lib/rubygems.rb ${destroot}${ruby.lib}
	file rename ${destroot}${prefix}/lib/ubygems.rb ${destroot}${ruby.lib}
}

depends_lib     port:ruby

