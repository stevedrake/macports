--- setup.rb.orig	2008-04-01 17:22:20.000000000 -0600
+++ setup.rb	2008-06-16 23:48:53.000000000 -0600
@@ -213,7 +213,8 @@
 
 # install RDoc
 
-gem_doc_dir = File.join Gem.dir, 'doc'
+gem_doc_dir = File.join '@@DESTROOT@@', Gem.dir, 'doc'
+mkdir_p gem_doc_dir
 rubygems_name = "rubygems-#{Gem::RubyGemsVersion}"
 rubygems_doc_dir = File.join gem_doc_dir, rubygems_name
 
@@ -221,7 +222,7 @@
    (not File.exist? rubygems_doc_dir or
     File.writable? rubygems_doc_dir) then
   puts "Removing old RubyGems RDoc and ri"
-  Dir[File.join(Gem.dir, 'doc', 'rubygems-[0-9]*')].each do |dir|
+  Dir[File.join(gem_doc_dir, 'rubygems-[0-9]*')].each do |dir|
     rm_rf dir
   end
 
