# $Id: Portfile,v 1.1 2004/04/19 05:41:43 rshaw Exp $
PortSystem 1.0

name			rb-session
version			2.1.6
categories		ruby shells
maintainers		rshaw@opendarwin.org
description		drive Sh, Bash, IDL easily from scripts
long_description	Session offers a set of class for driving external \
					progams via pipes.  It offers a significant \
					abstraction over Open3::popen since stdout/stderr \
					can be processed individually for each command. \
					Additionally the exit_status of each command is made \
					available.
homepage		http://raa.ruby-lang.org/list.rhtml?name=session
master_sites	http://www.codeforpeople.com/lib/ruby/session/
dist_subdir		ruby
distname		session-${version}
extract.suffix	.tgz
checksums		md5 431df90da9d549be7605abb57a466cc9
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby

use_configure	no
build			{}

test.run		yes
test.cmd		${ruby} test/session.rb

destroot {
	cd ${worksrcpath}
	set rubylibpath [exec ${ruby} -rrbconfig -e "print Config::CONFIG\['vendorlibdir'\]"]
	xinstall -d -m 0755 ${destroot}${rubylibpath}
	xinstall -m 0644 lib/session.rb ${destroot}${rubylibpath}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	set cmd "cp -R sample ${destroot}${prefix}/share/doc/${name}/sample"
	ui_info ${cmd}; system ${cmd}
}

