# $Id: Portfile,v 1.1 2004/04/19 05:23:36 rshaw Exp $
PortSystem 1.0

name			rb-zip
version			0.5.5
categories		ruby archivers
maintainers		rshaw@opendarwin.org
description		rubyzip is a ruby module for reading and writing zip files
long_description	rubyzip is a ruby library for reading and writing \
					zip (pkzip format) files, with the restriction that \
					only uncompressed and deflated zip entries are \
					supported. All this library does is handling of the \
					zip file format. the actual \
					compression/decompression is handled by zlib.
homepage		http://sourceforge.net/projects/rubyzip
master_sites	sourceforge:rubyzip
dist_subdir		ruby
distname		rubyzip-${version}
worksrcdir		rubyzip
checksums		md5 94dfce37a2067b17889f730a3f39ac42
platforms		darwin

set ruby ${prefix}/bin/ruby
depends_build	path:${ruby}:ruby
depends_lib		lib:libz.1:zlib

use_configure	no
build			{}

test.run		yes
test.dir		${worksrcpath}/test
test.cmd		${ruby} alltests.rb

destroot {
	cd ${worksrcpath}
	set rubylibpath [exec ${ruby} -rrbconfig -e "print Config::CONFIG\['vendorlibdir'\]"]
	xinstall -d -m 0755 ${destroot}${rubylibpath}
	set cmd "cp -R zip ${destroot}${rubylibpath}"
	ui_info ${cmd}; system ${cmd}
	xinstall -d -m 0755 ${destroot}${prefix}/share/doc/${name}
	set cmd "cp -R samples ${destroot}${prefix}/share/doc/${name}/samples"
	ui_info ${cmd}; system ${cmd}
}
