--- GL/glpng/glpng.c	2008-07-22 05:11:32.000000000 -0400
+++ GL/glpng/glpng.c	2011-02-12 22:24:54.000000000 -0500
@@ -270,15 +270,15 @@
     png_bytep  *row_p;
     double       fileGamma;
 
-    png_uint_32 width, height;
+    png_size_t width, height;
     int depth, color;
 
-    png_uint_32 i;
+    png_size_t i;
 
     if (pinfo == NULL) return 0;
 
     fread(header, 1, 8, fp);
-    if (!png_check_sig(header, 8)) return 0;
+    if (!png_sig_cmp(header, 0, 8)) return 0;
 
     png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
     info = png_create_info_struct(png);
@@ -377,13 +377,13 @@
     png_bytep  *row_p;
     double       fileGamma;
 
-    png_uint_32 width, height, rw, rh;
+    png_size_t width, height, rw, rh;
     int depth, color;
 
-    png_uint_32 i;
+    png_size_t i;
 
     fread(header, 1, 8, fp);
-    if (!png_check_sig(header, 8)) return 0;
+    if (!png_sig_cmp(header, 0, 8)) return 0;
 
     png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
     info = png_create_info_struct(png);
