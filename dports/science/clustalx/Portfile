# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                clustalx
version             2.0.12
categories          science
maintainers         snc openmaintainer
description         An interface for the ClustalW multiple sequence alignment\
                    program.
long_description    ${name} provides an integrated environment for performing\
                    multiple sequence and profile alignments and analysing the\
                    results. The sequence alignment is displayed in a window on\
                    the screen. A versatile coloring scheme has been\
                    incorporated allowing you to highlight conserved features\
                    in the alignment. The pull-down menus at the top of the\
                    window allow you to select all the options required for\
                    traditional multiple sequence and profile alignment.
homepage            http://www.clustal.org/

platforms           darwin
depends_build       port:qt4-x11

master_sites        http://www.clustal.org/download/current/ \
                    ftp://ftp.ebi.ac.uk/pub/software/clustalw2/${version}/

checksums           md5     98abaca7056b5f88003f88831129606c \
                    sha1    f2c5e3450769f384ff6d1725c124d48ba54b975e \
                    rmd160  8496a865acf7dbf935052bcdc0377bb2ce32baed

configure.cmd       ${prefix}/libexec/qt4-x11/bin/qmake
configure.pre_args  PREFIX=${prefix}
configure.args      -macx

destroot {
    xinstall -d ${destroot}${prefix}/libexec/${name}/
    xinstall -m 644 -W ${worksrcpath} \
        colprot.xml coldna.xml colprint.xml clustalx.hlp \
        ${destroot}${prefix}/libexec/${name}/
    xinstall -m 755 ${worksrcpath}/${name} ${destroot}${prefix}/libexec/${name}/

    xinstall -m 755 ${filespath}/clustalx.in ${destroot}${prefix}/bin/${name}
    reinplace s|@PREFIX@|${prefix}|g ${destroot}${prefix}/bin/${name}
    reinplace s|@NAME@|${name}|g ${destroot}${prefix}/bin/${name}
}

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     "currently (\\d+\\.\\d+\\.\\d+)"
