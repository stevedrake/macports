# $Id$

PortSystem 1.0
PortGroup cmake 1.0
name                flann
version             1.7.0
categories          science devel
maintainers         mmoll
description         Fast Library for Approximate Nearest Neighbors
long_description    FLANN is a library for performing fast approximate \
                    nearest neighbor searches in high dimensional spaces. \
                    It contains a collection of algorithms we found to \
                    work best for nearest neighbor search and a system \
                    for automatically choosing the best algorithm and \
                    optimum parameters depending on the dataset.
homepage            http://people.cs.ubc.ca/~mariusm/index.php/FLANN/FLANN
platforms           darwin
license             BSD
master_sites        http://people.cs.ubc.ca/~mariusm/uploads/FLANN/
distname            ${name}-${version}-src
use_zip             yes
extract.mkdir       yes
checksums           md5     d002d1c82a862a8258e826a53b0b1a1e \
                    sha1    45cc0b683af88ed1729750ae257b607868232bf5 \
                    rmd160  a8a56b5f4cbb63c1fc4a5f5453f272b07759e283
depends_lib         port:hdf5-18
# MPI support is automatically disabled if hdf5-18 is installed without the +openmpi variant
configure.args-append ${distname} -DBUILD_MATLAB_BINDINGS=OFF -DUSE_MPI=ON \
                    -DMPIEXEC=${prefix}/lib/openmpi/bin/mpiexec \
                    -DMPI_COMPILER=${prefix}/lib/openmpi/bin/mpic++

variant python26 description {Use python2.6 for python bindings} conflicts python27 python31 python32 {
    depends_lib-append      port:python26
    configure.args-append   -DPYTHON_EXECUTABLE=${prefix}/bin/python2.6
}
variant python27 description {Use python2.7 for python bindings} conflicts python26 python31 python32 {
    depends_lib-append      port:python27
    configure.args-append   -DPYTHON_EXECUTABLE=${prefix}/bin/python2.7
}
variant python31 description {Use python3.1 for python bindings} conflicts python26 python27 python32 {
    depends_lib-append      port:python31
    configure.args-append   -DPYTHON_EXECUTABLE=${prefix}/bin/python3.1
}
variant python32 description {Use python3.2 for python bindings} conflicts python26 python27 python31 {
    depends_lib-append      port:python32
    configure.args-append   -DPYTHON_EXECUTABLE=${prefix}/bin/python3.2
}

livecheck.type      regex
livecheck.url       ${homepage}
livecheck.regex     Version (\[0-9.\]+)
