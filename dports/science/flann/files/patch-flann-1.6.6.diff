diff -rubw flann-1.6.6-src.orig/cmake/UseLATEX.cmake flann-1.6.6-src/cmake/UseLATEX.cmake
--- flann-1.6.6-src.orig/cmake/UseLATEX.cmake	2010-12-20 18:52:47.000000000 -0600
+++ flann-1.6.6-src/cmake/UseLATEX.cmake	2010-12-21 09:40:56.000000000 -0600
@@ -342,9 +342,6 @@
   FIND_PROGRAM(IMAGEMAGICK_CONVERT convert
     DOC "The convert program that comes with ImageMagick (available at http://www.imagemagick.org)."
     )
-  IF (NOT IMAGEMAGICK_CONVERT)
-    MESSAGE(SEND_ERROR "Could not find convert program.  Please download ImageMagick from http://www.imagemagick.org and install.")
-  ENDIF (NOT IMAGEMAGICK_CONVERT)
 
   OPTION(LATEX_SMALL_IMAGES
     "If on, the raster images will be converted to 1/6 the original size.  This is because papers usually require 600 dpi images whereas most monitors only require at most 96 dpi.  Thus, smaller images make smaller files for web distributation and can make it faster to read dvi files."
diff -rubw flann-1.6.6-src.orig/cmake/flann_utils.cmake flann-1.6.6-src/cmake/flann_utils.cmake
--- flann-1.6.6-src.orig/cmake/flann_utils.cmake	2010-12-20 18:52:47.000000000 -0600
+++ flann-1.6.6-src/cmake/flann_utils.cmake	2010-12-21 09:51:11.000000000 -0600
@@ -52,7 +52,7 @@
 macro(flann_add_gtest exe)
     # add build target
     add_executable(${exe} EXCLUDE_FROM_ALL ${ARGN})
-    target_link_libraries(${exe} gtest)
+    target_link_libraries(${exe} ${GTEST_LIBRARIES})
     # add dependency to 'tests' target
     add_dependencies(tests ${exe})
 
diff -rubw flann-1.6.6-src.orig/src/python/pyflann/io/dat_dataset.py flann-1.6.6-src/src/python/pyflann/io/dat_dataset.py
--- flann-1.6.6-src.orig/src/python/pyflann/io/dat_dataset.py	2010-12-20 18:52:47.000000000 -0600
+++ flann-1.6.6-src/src/python/pyflann/io/dat_dataset.py	2010-12-21 09:54:14.000000000 -0600
@@ -28,7 +28,6 @@
 
 from pyflann.exceptions import FLANNException
 import numpy
-from scipy.io.numpyio import fwrite
 
 
 def is_number(s):
diff -rubw flann-1.6.6-src.orig/test/CMakeLists.txt flann-1.6.6-src/test/CMakeLists.txt
--- flann-1.6.6-src.orig/test/CMakeLists.txt	2010-12-20 18:52:48.000000000 -0600
+++ flann-1.6.6-src/test/CMakeLists.txt	2010-12-21 09:51:12.000000000 -0600
@@ -9,8 +9,8 @@
 #find_package(Boost COMPONENTS system thread REQUIRED)
 #target_link_libraries(flann_mt_test ${Boost_SYSTEM_LIBRARY} ${Boost_THREAD_LIBRARY} flann)
 
-find_library(GTEST gtest)
-if (NOT GTEST)
+find_package(GTest)
+if (NOT GTEST_FOUND)
 	message("gtest library not found, some tests will not be run")
 endif()
 
@@ -23,7 +23,7 @@
 flann_download_test_data(sift100K.h5 ae2b08f93f3d9f89f5d68566b0406102)
 flann_download_test_data(sift100K_byte.h5 b772255fd2044e9d2a5a0183953e4705)
 
-if (GTEST AND HDF5_FOUND)
+if (GTEST_FOUND AND HDF5_FOUND)
     include_directories(${HDF5_INCLUDE_DIR})
 	flann_add_gtest(flann_simple_test flann_simple_test.cpp)
 	    target_link_libraries(flann_simple_test flann_cpp ${HDF5_LIBRARIES})
