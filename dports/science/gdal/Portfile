# $Id$

PortSystem 1.0
name		gdal
version		1.4.1
maintainers	seanasy@gmail.com
platforms	darwin
description	GDAL - Geospatial Data Abstraction Library
long_description	GDAL is a translator library for raster geospatial \
			data formats that is released under an X/MIT style \
			Open Source license. As a library, it presents a \
			single abstract data model to the calling application \
			for all supported formats. The related OGR library \
			(which lives within the GDAL source tree) provides a \
			similar capability for simple features vector data. 
homepage	http://www.gdal.org/
master_sites	http://www.gdal.org/dl/
categories		science
checksums		md5 688cf651c6f6efc2851b12f2e9c2e0d1

depends_lib	port:zlib port:libpng port:tiff port:libgeotiff port:jpeg \
			port:giflib port:proj

configure.args	--without-python --with-libz=${prefix} --with-png=${prefix} \
	--with-libtiff=${prefix} --with-geotiff=${prefix} --with-jpeg=${prefix} \
	--with-gif=${prefix} --without-pg --without-mysql --without-sqlite \
	--mandir=${prefix}/share/man --with-static-proj4=${prefix}


# Python bindings have issues and aren't working in this port yet
#variant python {
#	depends_lib-append		port:python24
#	configure.args-delete	--without-python
#	configure.args-append	--with-ngpython PYTHON=${prefix}/bin/python
#											PYTHON_LIBS="-L${prefix}/lib/python2.4/config -lpython2.4" \
#											PYTHON_INCLUDES="-I${prefix}/include/python2.4"
#}

variant geos {
	depends_lib-append		port:geos
	configure.args-append	--with-geos=${prefix}/bin/geos-config
}

variant hdf5 {
	depends_lib-append		port:hdf5
	configure.args-append	--with-hdf5=${prefix}
}

variant postgresql81 {
	depends_lib-append		port:postgresql81
	configure.args-delete	--without-pg
	configure.args-append	--with-pg=${prefix}/lib/postgresql81/bin/pg_config
}

variant sqlite3 {
	depends_lib-append		port:sqlite3
	configure.args-delete	--without-sqlite
	configure.args-append	--with-sqlite=${prefix}
}

platform darwin 8 {
	configure.env	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

build.target

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} HOWTO-RELEASE NEWS VERSION \
		${destroot}${prefix}/share/doc/${name}
}
