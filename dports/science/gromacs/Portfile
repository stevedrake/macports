# $Id$

# Important: keep in sync with the 'gromacs-double' port!

PortSystem  1.0
name		gromacs
version		4.0.5
revision	2
categories	science math
maintainers	adfernandes openmaintainer
description	The World's fastest Molecular Dynamics package
long_description	GROMACS is a versatile package to perform molecular \
	dynamics, i.e. simulate the Newtonian equations of motion for \
	systems with hundreds to millions of particles. It is primarily \
	designed for biochemical molecules like proteins and lipids that \
	have a lot of complicated bonded interactions, but since GROMACS is \
	extremely fast at calculating the nonbonded interactions (that \
	usually dominate simulations) many groups are also using it for \
	research on non-biological systems, e.g. polymers.
platforms	darwin

distname        gromacs-${version}
dist_subdir     gromacs
homepage	    http://www.gromacs.org/
master_sites	ftp://ftp.gromacs.org/pub/gromacs \
                http://cluster.earlham.edu/detail/home/charliep/packages

checksums       sha1 9969aae6f77e2216add22a7b29805c4de8df649f

patchfiles      ffG53aX_rtp.diff
                # Fixes a typo in the .rtp file for ffG53a6 and ffG53a5 in Gromacs versions up to (and including) version 4.0.5.
                # See http://www.bevanlab.biochem.vt.edu/Pages/Personal/justin/gmx-tutorials/membrane_protein/01_pdb2gmx.html

depends_lib 	port:fftw-3-single port:libxml2 port:openmotif

configure.args  --bindir=${prefix}/lib/${name}/bin --enable-shared --with-x

variant no_x11 {
    depends_lib-delete      port:openmotif
    configure.args-delete   --with-x
    configure.args-append   --without-x
}

variant gsl description {enable extra analyses via the GNU scientific library} {
    depends_lib-append      port:gsl
    configure.args-append   --with-gsl
}

if { ![variant_isset gcc42] && ![variant_isset gcc43] && ![variant_isset gcc44] } {
    default_variants-append     +gcc44
}

variant gcc42 conflicts gcc43 gcc44 description {build with macports-gcc-4.2} {
    depends_lib         port:gcc42
    configure.compiler  macports-gcc-4.2
}

variant gcc43 conflicts gcc42 gcc44 description {build with macports-gcc-4.3} {
    depends_lib         port:gcc43
    configure.compiler  macports-gcc-4.3
}

variant gcc44 conflicts gcc42 gcc43 description {build with macports-gcc-4.4} {
    depends_lib         port:gcc44
    configure.compiler  macports-gcc-4.4
}
