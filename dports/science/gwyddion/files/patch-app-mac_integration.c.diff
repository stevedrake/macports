--- app/mac_integration.c.orig	2009-10-20 20:34:18.000000000 +0200
+++ app/mac_integration.c	2009-10-20 20:35:45.000000000 +0200
@@ -22,7 +22,9 @@
 #include <Carbon/Carbon.h>
 #include <CoreFoundation/CoreFoundation.h>
 #include <file.h>
+#ifdef GDK_WINDOWING_QUARTZ
 #include "ige-mac-menu.h"
+#endif
 #define USE_MAC_INTEGRATION
 #define USED_ON_MAC /* */
 #else
@@ -39,6 +41,7 @@
 void
 gwy_osx_get_menu_from_widget(USED_ON_MAC GtkWidget *container)
 {
+#ifdef GDK_WINDOWING_QUARTZ	
 #ifdef USE_MAC_INTEGRATION
     GList *children;            //,*subchildren,*subsubchildren;
     GList *l, *ll, *lll;
@@ -77,6 +80,7 @@
     gtk_widget_hide(menubar);
     ige_mac_menu_set_menu_bar(GTK_MENU_SHELL(menubar));
 #endif
+#endif	
 }
 
 
