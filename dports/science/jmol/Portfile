# $Id$

PortSystem          1.0

name                jmol
version             11.2.14
categories          science
platforms           darwin
maintainers         simon
description         An open-source Java viewer for chemical structures in 3D
long_description    Jmol is a free, open source molecule viewer for \
                    students, educators, and researchers in chemistry and \
                    biochemistry. \
                    \
                    This port only installs the Jmol application, not the \
                    applet or developer version. If you want to use it, \
                    please download it from the Jmol homepage.

homepage            http://jmol.sourceforge.net/
master_sites        sourceforge

distname            ${name}-${version}-binary
checksums           md5 18464a0587b2d41bb509fa69e222829f \
                    sha1 07734fcd99517ae96b4e215701bf34ef6a56452b \
                    rmd160 d2e31719a09555ec38f77008fd3066c7031623c4
worksrcdir          ${name}-${version}

depends_run         bin:java:kaffe

use_configure       no

post-patch {
  reinplace "s|/usr/share/jmol/|${prefix}/share/java/jmol/|g" \
    ${worksrcpath}/jmol
}

build {}

destroot {
    # install the jmol script:
    xinstall ${worksrcpath}/jmol ${destroot}${prefix}/bin
    # install the jmol java files:
    xinstall -d ${destroot}${prefix}/share/java/jmol
    foreach img [glob ${worksrcpath}/*.jar] {
        xinstall $img ${destroot}${prefix}/share/java/jmol
    }
}

livecheck.check     regex
livecheck.url       http://sourceforge.net/project/showfiles.php?group_id=23629
livecheck.regex     "version (\\d+(?:\\.\\d+)*)"
