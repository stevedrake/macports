# $Id$

PortSystem          1.0

name                liboglappth
version             0.98
categories          science
platforms           darwin
maintainers         simon openmaintainer
description         Library for the ghemical port.
long_description    $description

homepage            http://www.bioinformatics.org/
master_sites        ${homepage}ghemical/download/current/
checksums           md5 dd280286a51fcba6a47264a383a2f1fe \
                    sha1 bf532427bfa97ef01c3161a9a13418ee7134229c \
                    rmd160 72f10fb085275485ac30cd56e931b29693f7d445

depends_lib         port:glut

pre-configure {
    # If gl.h and glu.h don't exist in ${prefix}/include/GL then symlink the
    # OpenGL files there. Doesn't really fit in pre-configure but I don't know
    # where to put it.
    set gl ${prefix}/include/GL
    set opengl /System/Library/Frameworks/OpenGL.framework/Headers
    if {![file exists ${gl}/gl.h]} {
        file link -symbolic ${gl}/gl.h ${opengl}/gl.h
    }
    if {![file exists ${gl}/glu.h]} {
        file link -symbolic ${gl}/glu.h ${opengl}/glu.h
    }
}

livecheck.check     regex
livecheck.url       "${master_sites}?C=M;O=D"
livecheck.regex     "${name}-(\\d+(?:\\.\\d+)*)${extract.suffix}"

platform darwin 9 {
    configure.ldflags-append   "-L${prefix}/lib -L/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries"
}
