# $Id$

PortSystem 1.0

name			mpich2
version			1.0.7
categories		science parallel net
platforms		darwin
maintainers		nomaintainer
description		Message Passing Interface (MPI) Library
long_description	MPICH2 is an implementation of the Message-Passing \
				Interface (MPI). The goals of MPICH2 are to provide an MPI \
				implementation for important platforms, including clusters, \
				SMPs, and massively parallel processors. It also provides a \
				vehicle for MPI implementation research and for developing new \
				and better parallel programming environments.

homepage		http://www-unix.mcs.anl.gov/mpi/mpich2/
master_sites	http://www.mcs.anl.gov/research/projects/mpich2/downloads/tarballs/${version}/
checksums		md5     c3beb9430d45347078a80cf1c6780509 \
				sha1    39d2734f2504b7c3a5e5ea79fa447913c5fcd177 \
				rmd160  d818cd2b3daf173a3e754d9805fdf20d74335122
patchfiles		patch-Makefile.in patch-src-util-createshlib.in

depends_lib port:python24

# the default include-dir conflicts with openmpi!
configure.args	--with-thread-package=posix \
				--enable-timer-type=gettimeofday \
				--enable-cxx \
				--mandir=${prefix}/share/man \
				--with-htmldir=${prefix}/share/doc/${name} \
				--includedir=${prefix}/include/${name} \
				--with-docdir=${prefix}/share/doc/${name}

variant g95 {
	depends_lib-append port:g95
	configure.f77	"${prefix}/bin/g95"
	configure.fflags	"-i4"
	configure.f90	"${prefix}/bin/g95"
	configure.f90flags	"-i4"
	configure.args-append --enable-f77 --enable-f90
}

variant romio {
	configure.args-append --enable-romio
}

variant gforker {
	configure.args-append --with-pm=gforker
}

platform darwin {
	configure.args-append	--enable-sharedlibs=osx-gcc
}

