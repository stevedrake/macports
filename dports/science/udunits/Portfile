# $Id$
PortSystem 1.0
name            udunits
version         1.12.4
revision        0
maintainers     takeshi@macports.org
platforms       darwin
categories      science

description     Unidata unit conversion libraray
long_description \
                The Unidata units library supports \
                conversion of unit specifications between \
                formatted and binary forms, arithmetic manipulation \
                of unit specifications, and conversion of values \
                between compatible scales of measurement.

homepage        http://unidata.ucar.edu/packages/udunits/

master_sites    ftp://ftp.unidata.ucar.edu/pub/udunits/ \
                ftp://www.gfd-dennou.org/arch/netcdf/unidata-mirror/
distfiles       ${name}.tar.Z
checksums       sha1 ca8d591fd0fa400136be882d13c7c0fcd3ec8404
worksrcdir      ${distname}/src
depends_lib     port:perl5.8

configure.cppflags	"-DNDEBUG -Df2cFortran"
configure.cc	/usr/bin/cc
configure.cflags	"-O2 -fno-common"
configure.env	MANDIR=${prefix}/share/man

destroot.destdir    DESTDIR=${destroot} \
                    prefix=${destroot}${prefix} exec_prefix=${destroot}${prefix} MANDIR=\\\${prefix}/share/man

#post-destroot {
#    delete ${destroot}${prefix}/share/man/whatis.db
#}

variant g95 { 
    depends_build-append    port:g95
    configure.fc	${prefix}/bin/g95
    configure.env-append	FFLAGS="-O2 -fno-common"
}
