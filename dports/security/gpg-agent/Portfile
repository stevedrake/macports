# $Id: Portfile,v 1.4 2005/10/01 17:32:26 yeled Exp $

PortSystem	1.0
name		gpg-agent
version		1.9.18
revision	1
categories	security
maintainers	yeled@opendarwin.org
description	GPG key agent
long_description	gpg-agent is a key management agent similar \
			in function to ssh-agent.
homepage	http://www.gnupg.org/
platforms	darwin
distname	gnupg-${version}
master_sites	ftp://ftp.gnupg.org/gcrypt/alpha/gnupg/ \
		ftp://ftp.freenet.de/pub/ftp.gnupg.org/gcrypt/alpha/gnupg/
checksums	md5 221d843dc23b4f33cdb8a91788a00e4d
use_bzip2	yes

configure.args	--mandir=${prefix}/share/man \
		--infodir=${prefix}/share/info \
		--with-pinentry-pgm=${prefix}/bin/pinentry \
		--enable-agent-only

depends_lib     lib:libgpg-error.0:libgpg-error lib:libassuan:libassuan \
		lib:libgcrypt.11:libgcrypt lib:libksba.8:libksba \
		lib:libpth.a:pth bin:pinentry-curses:pinentry

destroot.dir	${worksrcpath}/agent

test.run	yes
test.dir	${worksrcpath}/checks
test.target 	check

variant darwin {
	configure.args-append --disable-asm --disable-dynload
}

variant sunos {
	configure.args-append --disable-asm --disable-dynload
}

post-destroot   {
	file delete -force ${destroot}${prefix}/share/info/dir
}
