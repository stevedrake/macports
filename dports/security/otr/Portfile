# $Id: Portfile,v 1.1 2005/01/03 10:15:17 toby Exp $

PortSystem 1.0
name             otr
version          1.0.2
categories       security
maintainers      toby@opendarwin.org
description      Off-the-Record Messaging Library
long_description \
	Off-the-Record (OTR) Messaging allows you to have \
	private conversations over instant messaging.
homepage         http://www.xelerance.com/mirror/otr/
platforms        darwin

master_sites     ${homepage}
distname         gaim-otr-${version}
checksums        md5 f82eb7d8b1a373c4631602a3202ed870

depends_lib      lib:XXX:libgcrypt

patchfiles       patch-Makefile \
                 patch-libotr__dh.c \
                 patch-tools__sesskeys.c

post-patch {
	reinplace "s|-lgcrypt|-L${prefix}/lib -lgcrypt|" \
		${worksrcpath}/tools/Makefile
	reinplace "s|/usr|${prefix}|" \
		${worksrcpath}/tools/Makefile
}

configure        {}

build.env        CPPFLAGS=-I${prefix}/include

post-destroot {
	xinstall -m 444 ${worksrcpath}/libotr/libotr.a \
		${destroot}${prefix}/lib
}
