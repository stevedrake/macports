# $Id$

PortSystem  1.0
name        pinentry
version     0.7.2
categories  security
maintainers yeled@macports.org
description Passphrase entry dialog utilizing the Assuan protocol
long_description \
        This is a collection of simple PIN or passphrase entry \
        dialogs which utilize the Assuan protocol as described by \
        the aegypten project.

homepage    http://www.gnupg.org/aegypten2
platforms   darwin
master_sites    http://mirrors.rootmode.com/ftp.gnupg.org/${name}/ \
        ftp://ftp.freenet.de/pub/ftp.gnupg.org/gcrypt/${name}/ \
        ftp://ftp.gnupg.org/gcrypt/${name}/
        
checksums   md5 55626ce13ed76d82ec5330d19bdf3ab4 \
            sha1 aa113b08e315d22b6f70a634f459fdfbaa4dcaba \
            rmd160 db667256801545ef065d9d47cafe5e67137fa6ce

configure.args  --mandir=${prefix}/share/man \
        --infodir=${prefix}/share/info \
        --with-libiconv-prefix=${prefix} \
        --with-ncurses-include-dir=${prefix}/include/ncurses \
        --enable-pinentry-curses \
        --disable-pinentry-gtk2 \
        --disable-pinentry-gtk \
        --disable-pinentry-qt

depends_lib     port:libiconv port:ncurses

variant gtk1 {
        depends_lib port:gtk1
        configure.args-append --enable-pinentry-gtk --enable-fallback-curses
}

variant gtk2 {
        depends_lib lib:libgtk-x11-2.0:gtk2
        configure.args-append --enable-pinentry-gtk2 --enable-fallback-curses
}

variant qt3 {
        depends_lib lib:libqt-mt.3:qt3
        configure.env-append QTDIR=${prefix}/lib MOC=${prefix}/bin/moc
        configure.args-append --enable-pinentry-qt --enable-fallback-curses \
                --with-qt-includes=${prefix}/include/qt3 \
                --with-qt-libraries=${prefix}/lib
}

platform darwin {
        configure.args-append --disable-rpath
}
