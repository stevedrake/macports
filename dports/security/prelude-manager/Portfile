# $Id$
PortSystem        1.0
name              prelude-manager
version           0.9.4.1
categories        security
maintainers       julien.touche@touche.fr.st

description       Prelude Network Intrusion Detection System central logging point

long_description  Prelude is an Hybrid IDS framework that relies on the IDMEF (Intrusion \
                  Detection Message Exchange Format) IETF standard.  It enables security \
                  sensors such as Snort, honeyd, Nessus Vulnerability Scanner, Samhain, \
                  over 30 types of system logs, and many others to verify an attack \
                  by performing automatic correlation between events.

homepage          http://www.prelude-ids.org
master_sites      http://www.prelude-ids.org/download/releases/
platforms         darwin
checksums         md5 4641da26473496b2bc43647753ff0499
patchfiles	  patch-src-server-generic.c patch-src-server-logic.c
build.type        gnu
configure.args    --mandir=${prefix}/share/man \
                  --with-html-dir=${prefix}/share/doc \
		  --localstatedir=${prefix}/var \
		  --enable-ssl \
		  --disable-mysql \
		  --disable-pgsql
depends_lib       port:libxml2 \
                  port:libprelude

post-destroot {
	system "touch ${destroot}/${prefix}/var/spool/prelude-manager/.turd"
	reinplace "s|= /var|= ${prefix}/var|g" ${destroot}${prefix}/etc/prelude-manager/prelude-manager.conf
}
variant no_ssl {
	configure.args-delete --enable-ssl
	configure.args-append --disable-ssl
}

variant mysql {
	configure.args-delete --disable-mysql
	configure.args-append --enable-mysql
	depends_lib-append lib:libmysqlclient:mysql
}

#variant pgsql {
#	configure.args-delete --disable-pgsql
#	configure.args-append --enable-pgsql
#	depends_lib-append lib::postgresql
#}

