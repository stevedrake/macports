# $Id: Portfile,v 1.2 2004/09/26 15:40:34 olegb Exp $
PortSystem        1.0

name              racoon
version           20040818a
categories        security net
maintainers       a_rankine@yahoo.co.uk arsptr@swiftdsl.com.au

description       an IKE (IPSec) daemon
long_description  Racoon is the daemon which negotiates and configures IPsec security associations
homepage          http://www.kame.net/racoon
master_sites      ftp://ftp.kame.net/pub/kame/misc/

checksums         md5 c983587afc2772c11e4b81c3b4b9dfc4

worksrcdir        ${name}-${version}/${name}

patchfiles        patch-Makefile.in

configure.env-append LDFLAGS="-L../libipsec"

destroot.destdir  mandir=${destroot}${prefix}/share/man prefix=${destroot}${prefix}

post-patch {
    file copy -force /usr/share/libtool/config.guess ${worksrcpath}/config.guess
    file copy -force /usr/share/libtool/config.sub ${worksrcpath}/config.sub
}

pre-build {
    cd ${worksrcpath}/../libipsec
    system "bsdmake OPSYS=FreeBSD CFLAGS=\"-isystem ../../../files/includes\""
}

platform darwin 7 {
    configure.env-append CFLAGS="-DBIND_8_COMPAT=1  -isystem ../../../files/includes"
}

variant gssapi {
    configure.args --enable-gssapi
    configure.env-append LIBS="-lgssapi_krb5"
}

