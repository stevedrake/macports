# $Id: Portfile,v 1.2 2004/12/11 15:36:59 matt Exp $

PortSystem			1.0
name				scponly
version				4.0
categories			security net sysutils
maintainers			blb@pobox.com
description			Limited shell which wraps scp/sftp
long_description \
	"scponly" is an alternative 'shell' (of sorts) for system administrators \
	who would like to provide access to remote users to both read and write \
	local files without providing any remote execution priviledges.  \
	Functionally, it is best described as a wrapper to the mostly trusted \
	suite of ssh applications.

platforms			darwin

homepage			http://www.sublimation.org/scponly/
master_sites		${homepage}
extract.suffix		.tgz

checksums			md5 1706732945996865ed0cccd440b64fc1

depends_lib			bin:ssh:openssh

patchfiles			patch-Makefile.in

configure.args		--mandir=${prefix}/share/man

variant noWildcards {
	configure.args-append	--disable-wildcards
}

variant noWinscpCompat {
	configure.args-append	--disable-winscp-compat
}

variant rsyncCompat {
	depends_run				bin:rsync:rsync
	configure.args-append	--enable-rsync-compat
}

post-destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} AUTHOR CHANGELOG CONTRIB COPYING \
		INSTALL README TODO ${destroot}/${prefix}/share/doc/${name}
}

post-install {
	ui_msg "For proper functionality, you need to add ${prefix}/bin/scponly"
	ui_msg "to /etc/shells"
}

