--- pam_yubico.c.orig	2012-01-27 23:38:37.000000000 +0100
+++ pam_yubico.c	2012-01-27 23:39:03.000000000 +0100
@@ -37,6 +37,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
+#include <fcntl.h>
 #include <errno.h>
 #include <string.h>

@@ -616,6 +616,8 @@
   }
 
   DBG(("Challenge-response success!"));
+  // sometimes this apparently is still set
+  yk_errno = 0;
   errstr = NULL;
 
  out:
