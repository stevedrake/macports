--- shell.c.orig	2010-08-26 04:03:02.000000000 +0200
+++ shell.c	2010-08-26 04:04:15.000000000 +0200
@@ -537,7 +537,7 @@
   if (login_shell && interactive_shell)
     {
       for (i = 3; i < 20; i++)
-	close (i);
+	SET_CLOSE_ON_EXEC (i);
     }
 #endif /* CLOSE_FDS_AT_LOGIN */
 
