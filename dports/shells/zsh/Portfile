# $Id: Portfile,v 1.20 2006/08/08 07:08:00 yeled Exp $

PortSystem 1.0
name        zsh
version     4.2.6
categories  shells
maintainers yeled@opendarwin.org
description Zsh is a UNIX command interpreter (shell)
long_description    Zsh is a UNIX command interpreter (shell) which of \
            the standard shells most resembles the Korn shell \
            (ksh), although it is not completely compatible. \
            It includes enhancements of many types, notably in \
            the command-line editor, options for customising its \
            behaviour, filename globbing, features to make \
            C-shell (csh) users feel more at home and extra \
            features drawn from tcsh (another `custom' shell).
homepage    http://www.zsh.org
platforms   darwin
use_bzip2   yes
master_sites    http://www.zsh.org/pub/ ftp://ftp.zsh.org/zsh/ \
        ftp://ftp.sterling.com/zsh/ \
        ftp://ftp.rge.com/pub/shells/zsh/ \
        ftp://ftp.fu-berlin.de/pub/unix/shells/zsh \
        ftp://ftp.ips.oz.au/pub/packages/zsh/ \
        ftp://ftp.uit.no/pub/unix/shells/zsh/ \
        ftp://ftp.iij.ad.jp/pub/misc/zsh/ \
        ftp://ftp.icm.edu.pl/vol/wojsyl/zsh/\
        ftp://ftp.sunsite.auc.dk/disk1/zsh/
checksums   md5 2cefebf742c190cbc611baded825db64
depends_lib lib:libiconv.2:libiconv
configure.args  --mandir=${prefix}/share/man --infodir=${prefix}/share/info \
        --enable-libs=-liconv

platform darwin 8 {
    configure.env CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
    post-configure {
        reinplace "s|#define HAVE_POLL 1|#undef HAVE_POLL|" ${worksrcpath}/config.h
    }
}

variant dp_completion {
    post-destroot   {
            file copy -force ${filespath}/_port \
            ${destroot}${prefix}/share/${name}/${version}/functions
    }   
}

