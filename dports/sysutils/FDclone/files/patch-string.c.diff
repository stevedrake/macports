--- ./string.c.orig	2008-05-31 00:00:00.000000000 +0900
+++ ./string.c	2008-06-03 03:23:20.000000000 +0900
@@ -13,34 +13,32 @@
 CONST char *s;
 int c;
 {
-	int i;
-
-	for (i = 0; s[i]; i++) {
-		if (s[i] == c) return((char *)&(s[i]));
-		if (iskanji1(s, i)) i++;
+	for (; *s != c; s++) {
+		if (!*s) return(NULL);
+		if (iskanji1(s, 0)) s++;
 #ifdef	CODEEUC
-		else if (isekana(s, i)) i++;
+		else if (isekana(s, 0)) s++;
 #endif
 	}
 
-	return(NULL);
+	return((char *)s);
 }
 
 char *strrchr2(s, c)
 CONST char *s;
 int c;
 {
-	int i;
 	char *cp;
 
 	cp = NULL;
-	for (i = 0; s[i]; i++) {
-		if (s[i] == c) cp = (char *)&(s[i]);
-		if (iskanji1(s, i)) i++;
+	for (; *s; s++) {
+		if (*s == c) cp = (char *)s;
+		if (iskanji1(s, 0)) s++;
 #ifdef	CODEEUC
-		else if (isekana(s, i)) i++;
+		else if (isekana(s, 0)) s++;
 #endif
 	}
+	if (!c) cp = (char *)s;
 
 	return(cp);
 }
