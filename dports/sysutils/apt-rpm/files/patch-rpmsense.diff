--- ./apt-pkg/rpm/rpmhandler.cc.orig	2007-06-04 22:02:52.000000000 +0200
+++ ./apt-pkg/rpm/rpmhandler.cc	2007-06-20 10:58:35.000000000 +0200
@@ -48,6 +48,11 @@
 #define rpmxxInitIterator(a,b,c,d) rpmdbInitIterator(a,b,c,d)
 #endif
 
+#ifndef _RPMEVR_INTERNAL
+// rpmevr.h/evrFlags_e
+#define RPMSENSE_ANY 0
+#endif
+
 // An attempt to deal with false zero epochs from repomd. With older rpm's we
 // can only blindly trust the repo admin created the repository with options
 // suitable for those versions. For rpm >= 4.2.1 this is linked with
@@ -231,7 +236,7 @@
    if (Type == pkgCache::Dep::Depends) {
       if (flags & RPMSENSE_PREREQ)
 	 Type = pkgCache::Dep::PreDepends;
-#if RPM_VERSION >= 0x040403
+#if RPM_VERSION >= 0x040403 && defined(_RPMEVR_INTERNAL)
       else if (flags & RPMSENSE_MISSINGOK)
 	 Type = pkgCache::Dep::Suggests;
 #endif
@@ -308,7 +313,7 @@
       case pkgCache::Dep::Provides:
 	 deptype = RPMTAG_PROVIDENAME;
 	 break;
-#if RPM_VERSION >= 0x040403
+#if RPM_VERSION >= 0x040403 && defined(_RPMEVR_INTERNAL)
       case pkgCache::Dep::Suggests:
 	 deptype = RPMTAG_SUGGESTNAME;
 	 break;
--- ./apt-pkg/rpm/rpmversion.cc.orig	2007-05-29 20:59:09.000000000 +0200
+++ ./apt-pkg/rpm/rpmversion.cc	2007-06-20 13:42:04.000000000 +0200
@@ -32,6 +32,11 @@
 #include <rpm/rpmds.h>
 #endif
 
+#ifndef _RPMEVR_INTERNAL
+// rpmevr.h/evrFlags_e
+#define RPMSENSE_ANY 0
+#endif
+
 rpmVersioningSystem rpmVS;
 
 // rpmVS::rpmVersioningSystem - Constructor				/*{{{*/
