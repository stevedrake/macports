# $Id: Portfile,v 1.8 2005/10/10 09:36:11 yeled Exp $

PortSystem      1.0
name            bash-completion
version         20050721
categories      sysutils
maintainers     yeled@opendarwin.org
description	Programmable bash{2,3} completions.
long_description	\
	Brings programmable completion to bash like those pesky \
        zsh users have had for years.
homepage	http://www.caliban.org/bash/index.shtml
platforms	darwin
master_sites    http://www.caliban.org/files/bash/
checksums       md5 08e5321ead7079c84822368d7a41deda
use_configure   no
default_variants	+dp_completion
build           {}
destroot {
    reinplace "s|\/etc\/bash_completion|${prefix}\/etc\/bash_completion|g" \
				${workpath}/bash_completion/bash_completion
	xinstall -d ${destroot}${prefix}/etc/bash_completion.d
	xinstall -c ${workpath}/bash_completion/bash_completion ${destroot}${prefix}/etc/
}
destroot.keepdirs	${destroot}${prefix}/etc/
post-install {
    ui_msg  "Set this at the *end* your .bash_profile:"
    ui_msg  ""
    ui_msg  "    if \[ -f ${prefix}/etc/bash_completion ]; then"
    ui_msg  "        . ${prefix}/etc/bash_completion"
    ui_msg  "    fi"
    ui_msg  ""
}

variant dp_completion {
	post-destroot {
			xinstall -m 644 -c ${filesdir}/port.cmd ${destroot}${prefix}/etc/bash_completion.d/port
	}
}
