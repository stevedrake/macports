# $Id$

PortSystem 1.0

name	    	cdrtools
version		2.01.01a69
categories  	sysutils
platforms		darwin
description     ISO 9660 filesystem and CD creation tools
long_description	The cdrtools software includes programs to create \
		 	and/or extract ISO 9660 filesystems, verify their \
			integrity, and write them to a disc. \
			Note, this port conflicts with the dvdrtools port.
homepage	http://cdrecord.berlios.de/old/private/cdrecord.html
maintainers	gmail.com:bytestorm openmaintainer
master_sites    ftp://ftp.berlios.de/pub/cdrecord/alpha/ \
		ftp://ftp.cs.tu-berlin.de/pub/misc/cdrecord/alpha/
checksums           md5     c5c298ac14ac9269e5157814b5c56805 \
                    sha1    5da138f393b14b478e3df4f95324f3ea1b7a3cc2 \
                    rmd160  1006076aecdf0bc2f467a675b2116c5d51c3c59b

use_bzip2	yes

worksrcdir	cdrtools-2.01.01

depends_build	port:smake

post-patch {
	reinplace "s|/opt/schily|${prefix}|g" \
		${worksrcpath}/DEFAULTS/Defaults.darwin \
		${worksrcpath}/DEFAULTS/Defaults.mac-os10 \
		${worksrcpath}/DEFAULTS_ENG/Defaults.darwin \
		${worksrcpath}/DEFAULTS_ENG/Defaults.mac-os10 \
		${worksrcpath}/libfind/find.c \
		${worksrcpath}/libfind/find_main.c \
		${worksrcpath}/librscg/scsi-remote.c \
		${worksrcpath}/TEMPLATES/Defaults.gcc
}

use_configure	no

build.cmd	smake

use_parallel_build no

destroot.args   DEFINSUSR=root DEFINSGRP=wheel INS_BASE=${prefix} MANDIR=share/man

livecheck.url   ftp://ftp.berlios.de/pub/cdrecord/alpha/
livecheck.regex "${name}-((\\d+(?:\\.\\d+)*)a(\\d+))${extract.suffix}"
