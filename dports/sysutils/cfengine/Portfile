# $Id: Portfile,v 1.7 2004/06/13 20:54:20 rshaw Exp $
PortSystem		1.0

name			cfengine
version			2.1.6
categories		sysutils
maintainers		rshaw@opendarwin.org
description		a tool for setting up and maintaining computer systems
long_description	Cfengine, or the configuration engine is an \
					autonomous agent and a middle to high level \
					policy language for building expert systems \
					which administrate and configure large computer \
					networks. 
homepage		http://www.cfengine.org/
master_sites	ftp://ftp.iu.hio.no/pub/cfengine/ \
				ftp://sunsite.uio.no/pub/cfengine/ \
				http://ftp.us.xemacs.org/ftp/pub/cfengine/cfengine-ftp/
checksums		md5 7b6ca6339d0dd6bdcaa3dd2765dd3d08
platforms		darwin

depends_lib		lib:libdb-4:db4 \
				lib:libssl.0.9:openssl

patchfiles		patch-configure \
				patch-conf.h.in \
				patch-cf.defs.h

configure.args	--mandir='\${prefix}/share/man' \
				--infodir='\${prefix}/share/info' \
				--with-workdir="${prefix}/var/cfengine" \
				--with-berkeleydb=yes --with-openssl=yes \
				--with-docs

build.args		ps_DATA=
destroot.args	ps_DATA=

post-destroot {
	file delete ${destroot}${prefix}/share/info/dir
	xinstall -d -m 0755 ${destroot}${prefix}/var/cfengine
	system "touch ${destroot}${prefix}/var/cfengine/.turd"
}

variant psdocs {
	depends_build			bin:tex:teTex \
							bin:texinfo:texinfo
	build.args-delete		ps_DATA=
	destroot.args-delete	ps_DATA=
}

