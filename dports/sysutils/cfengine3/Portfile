# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
# $Id$

PortSystem 1.0

PortGroup xcodeversion 1.0

name				cfengine3
conflicts			cfengine
version				3.0.5
revision			3
categories			sysutils
maintainers			ged
description			network configuration-management tool
long_description	a suite of programs for integrated autonomic \
					management of either individual or networked \
					computers. Cfengine 3 is a significant rewrite \
					of underlying cfengine technology which \
					preserves the core principles and methodology \
					of cfengine2â€™s approach.
homepage			http://www.cfengine.org/
distname			cfengine-${version}
master_sites		http://www.cfengine.org/tarballs/
checksums           md5     41a76533251709c6a261430c1e1b5762 \
                    sha1    3d014c410ad0479040b33f82d85fd737a28372bd \
                    rmd160  a8ad67570dd382c13dcecd3b80e6d029c2efd1e3
platforms			darwin
                    
depends_lib			port:db46 \
					port:openssl \
					port:pcre \
					port:gd2

patchfiles          patch-src-files_operators.c.diff

post-patch {
	foreach manfile [glob ${worksrcpath}/docs/*.8] {
		reinplace "s|/usr/local|${prefix}|g" $manfile
		reinplace "s|/var/cfengine|${prefix}&|g" $manfile
	}
}

set cfworkdir		${prefix}/var/cfengine

configure.cflags	-I${prefix}/include/db46 -I${prefix}/include
configure.ldflags	-L${prefix}/lib/db46 -L${prefix}/lib
configure.args		--mandir='\${prefix}/share/man' \
					--infodir='\${prefix}/share/info' \
					--with-workdir="${cfworkdir}" \
					--with-berkeleydb=default \
					--with-openssl=${prefix} \
					--with-pcre=${prefix}

# vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
