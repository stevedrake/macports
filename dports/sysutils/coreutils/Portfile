# $Id$

PortSystem 1.0
name            coreutils
version         6.9
categories      sysutils
maintainers     pipping@macports.org openmaintainer@macports.org
description     GNU File, Shell, and Text utilities
long_description \
    The GNU Core Utilities are the basic file, shell, and text          \
    manipulation utilities of the GNU operating system. These are the   \
    core utilities which are expected to exist on every operating       \
    system. Previously these utilities were offered as three individual \
    sets of GNU utilities, fileutils, shellutils, and textutils. Those  \
    three have been combined into a single set of utilities called the  \
    coreutils.

homepage        http://www.gnu.org/software/coreutils/
platforms       darwin

master_sites    gnu
use_bzip2       yes
checksums       md5 c9607d8495f16e98906e7ed2d9751a06 \
                sha1 10310a78c4e1d9f742f3815ac28e9bf1086a5885 \
                rmd160 c6ae65204b2e9c234a1140f39a8be1ee5cdcaab7

configure.args  --program-prefix=g \
                --infodir=${prefix}/share/info \
                --mandir=${prefix}/share/man \
                --disable-nls

depends_lib     port:libiconv

post-destroot {
    delete ${destroot}${prefix}/share/info/dir \
      ${destroot}${prefix}/lib/charset.alias
    if {[variant_isset with_default_names]} {
        foreach d {bin share/man/man1} {
            cd ${destroot}${prefix}/$d
            foreach a [glob g*] {
                regexp g(.+) $a dummy b
                file link -hard $b g$b
            }
        }
    }
}

# Set the RUN_EXPENSIVE_TESTS environmental variable to 'yes' to run more
# expensive tests.  Set the RUN_VERY_EXPENSIVE_TESTS environmental variable
# to 'yes' to run even more expensive tests.
test.run        yes
test.target     check

variant with_default_names {}

variant nls {
    configure.args-delete   --disable-nls
    depends_lib-append      port:gettext
}

livecheck.check regex
livecheck.url   http://ftp.gnu.org/gnu/${name}/?M=D
livecheck.regex ${name}-(\\d+\\.\\d+)
