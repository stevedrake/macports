# $Id$

PortSystem 1.0
name            coreutils
version         6.7
revision        1
categories      sysutils
maintainers     toby@opendarwin.org
description     GNU File, Shell, and Text utilities
long_description \
    The GNU Core Utilities are the basic file, shell, and text          \
    manipulation utilities of the GNU operating system. These are the   \
    core utilities which are expected to exist on every operating       \
    system. Previously these utilities were offered as three individual \
    sets of GNU utilities, fileutils, shellutils, and textutils. Those  \
    three have been combined into a single set of utilities called the  \
    coreutils.

homepage        http://www.gnu.org/software/coreutils/
platforms       darwin

master_sites    gnu
use_bzip2       yes
checksums       md5 a16465d0856cd011a1acc1c21040b7f4 \
                sha1 55a6037365f749a4ebb9e88a92132a4f938ac90e \
                rmd160 593acd266431db1777505bd181a7ffe095774beb

configure.args  --program-prefix=g \
                --infodir=${prefix}/share/info \
                --mandir=${prefix}/share/man \
                --disable-nls

# Set the RUN_EXPENSIVE_TESTS environmental variable to 'yes' to run
# more expensive tests.  Set the RUN_VERY_EXPENSIVE_TESTS
# environmental variable to 'yes' to run even more expensive tests.
test.run        yes
test.target     check

post-destroot {
    delete ${destroot}${prefix}/share/info/dir \
      ${destroot}${prefix}/lib/charset.alias
}

variant with_default_names {
    post-destroot {
        cd ${destroot}${prefix}/bin
        foreach a [glob g*] {
            regexp g(.+) $a crap b
            file link -hard $b g$b
        }
    }
}
