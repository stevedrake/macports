# $Id$

PortSystem 1.0

name			createrepo
version			0.4.8
categories		sysutils
platforms		darwin
maintainers		nomaintainer@macports.org
description		generates metadata for package repositories for yum, etc.
long_description	createrepo generates the metadata necessary for a package \
			repository. This repository format is supported by yum, up2date, \
			smart, red-carpet(xen) and YaST.

homepage		http://linux.duke.edu/metadata/
master_sites	http://linux.duke.edu/projects/metadata/generate/
checksums		md5 49bab91ec050316352b6d8f0f450f060 \
				sha1 cf46085a3efdb9f1075793e2a3e882c628fa029e \
				rmd160 01ac2be482c591ba9e4013a42b72b424a583e0ed
patchfiles		patch-createrepo patch-dumpMetadata.py patch-genpkgmetadata.py

depends_run		port:python24 port:rpm port:yum

post-patch {
	reinplace "s|__PREFIX__|${prefix}|g" ${worksrcpath}/bin/createrepo
	reinplace "s|__PYTHON__|${prefix}/bin/python2.4|g" \
		${worksrcpath}/dumpMetadata.py ${worksrcpath}/genpkgmetadata.py
}

use_configure	no

build.args		prefix=${prefix}

destroot.args	prefix=${prefix} INSTALL=/usr/bin/install INSTALL_MODULES="/usr/bin/install -m 755"
