# $Id$

PortSystem          1.0
name                diffutils
version             2.8.1
revision            2
categories          sysutils textproc devel
maintainers         pipping@macports.org openmaintainer@macports.org
description         GNU diff utilities
long_description \
    diffutils contains the GNU diff, diff3, sdiff, and cmp utilities.   \
    Their features are a superset of the Unix features and they are     \
    significantly faster.

platforms           darwin sunos
homepage            http://www.gnu.org/software/diffutils/
master_sites        gnu
checksums           md5 71f9c5ae19b60608f6c7f162da86a428
patchfiles          patch-src_system.h
configure.args      --program-prefix=g \
                    --infodir=${prefix}/share/info \
                    --mandir=${prefix}/share/man
                    
post-destroot {
    cd ${destroot}${prefix}/share/info
    file rename diff.info gdiff.info
    if {[variant_isset with_default_names]} {
        foreach d {bin share/info share/man/man1} {
            cd ${destroot}${prefix}/$d
            foreach a [glob g*] {
                regexp g(.+) $a dummy b
                file link -hard $b g$b
            }
        }
    }
}

test.run        yes
test.target     check

variant with_default_names {}

variant nls {
    configure.args-append   gt_cv_func_gnugettext1_libintl=yes
    depends_lib-append      port:gettext
}

livecheck.check regex
livecheck.url   http://ftp.gnu.org/gnu/${name}/?M=D
livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)
