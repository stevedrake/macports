# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           python26 1.0

name                duplicity
categories          sysutils
version             0.6.08b
set stable_series   [join [lrange [split ${version} .] 0 1] .]-series
platforms           darwin
maintainers         singingwolfboy openmaintainer

description   Encrypted bandwidth-efficient backup.
long_description  Duplicity backs directories by producing encrypted \
      tar-format volumes and uploading them to a remote or local file \
      server. Because duplicity uses librsync, the incremental archives \
      are space efficient and only record the parts of files that have \
      changed since the last backup. Because duplicity uses GnuPG to \
      encrypt and/or sign these archives, they will be safe from spying \
      and/or modification by the server.

distname            duplicity-${version}
homepage            http://duplicity.nongnu.org/
master_sites        https://launchpad.net/duplicity/${stable_series}/${version}/+download

checksums           md5     f4f4182ab71aa1de80c047bf1e4c7a04 \
                    sha1    5346a1799c15939862b3a402a44c27b32c8fee77 \
                    rmd160  350b311702251d4f6f8562d460f27deecdef8606

build.args          --librsync-dir=${prefix}
universal_variant   no
python.link_binaries yes
post-destroot {
    ln -s ${name}-${python.branch} ${destroot}${prefix}/bin/${name}
}

depends_run-append  port:py26-gnupg \
                    port:py26-boto \
                    port:ncftp

depends_lib-append  port:librsync \
                    port:gnupg

livecheck.type    regex
livecheck.url     https://launchpad.net/duplicity/+download
livecheck.regex   {duplicity-(\d+(?:\.\d+)*).tar.gz}
