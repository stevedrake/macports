# $Id$

PortSystem 1.0

name                file
version             4.25
categories          sysutils
maintainers         nomaintainer
description         File - determine file type
long_description \
    File tests each argument in an attempt to classify it. There are three  \
    sets of tests, performed in this order: filesystem tests, magic number  \
    tests, and language tests. The first test that succeeds causes the file \
    type to be printed.

homepage            ftp://ftp.astron.com/pub/${name}/
platforms           darwin
master_sites        ftp://ftp.fu-berlin.de/unix/tools/${name}/ \
                    ftp://ftp.astron.com/pub/${name}/ \
                    ftp://ftp.gw.com/mirrors/pub/unix/${name}/
checksums           md5 cdf1f90d2704e71118353c16c19898ba \
                    sha1 0d4a0b678a4c13fbc38cd0ea633ef4df60d74f22 \
                    rmd160  c877a223a1dbdfd38c6f5ac385b533e8c5223fe1

patchfiles          patch-lzma.diff

configure.args      --mandir=${prefix}/share/man \
                    --enable-fsect-man5 \
                    --program-prefix=g
depends_lib         port:zlib

variant with_default_names description {don't prefix names with a 'g'} {
    post-destroot {
        foreach d {bin share/man/man1 share/man/man3 share/man/man5} {
            foreach a [glob -directory ${destroot}${prefix}/$d g*] {
                regexp /g(.+)\$ $a dummy b
                file link -hard ${destroot}${prefix}/$d/$b $a
            }
        }
    }
}

livecheck.check     md5
livecheck.url       ftp://ftp.fu-berlin.de/unix/tools/${name}/
livecheck.md5       600d214efae30987572951c14fa31863
