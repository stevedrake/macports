# $Id$

PortSystem      1.0

name            findutils
version         4.3.12
categories      sysutils
platforms       darwin
maintainers     nox
description     findutils contains GNU find, xargs, and locate

long_description \
    ${description}

homepage        http://www.gnu.org/software/findutils/
master_sites    http://alpha.gnu.org/gnu/${name}/ \
                ftp://alpha.gnu.org/gnu/${name}/

checksums       md5 c0be1d1d376b3a13813a230aa74af9b5 \
                sha1 82e2e55603cbff1e9159ec006f075ac3385b3c3e \
                rmd160 0d418e4f161d148464cc74d9eac687f61ce90664

depends_lib     port:gettext \
                port:libiconv

configure.env   SORT=/usr/bin/sort

configure.args  -program-prefix=g

test.run        yes
test.target     check

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README \
        THANKS TODO ${destroot}${docdir}
}

variant with_default_names description {Install files without 'g' prefix} {
    post-destroot {
        foreach {d} {bin libexec share/info share/man/man1 share/man/man5} {
            foreach {a} [glob -directory ${destroot}${prefix}/${d} g*] {
                regexp g(.+) [file tail ${a}] _ b
                file link -hard ${destroot}${prefix}/${d}/${b} ${a}
            }
        }
    }
}

livecheck.url   "[lindex ${master_sites} 0]?C=M&O=D"
