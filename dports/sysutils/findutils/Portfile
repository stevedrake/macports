# $Id$

PortSystem 1.0

name                findutils
version             4.3.6
categories          sysutils
platforms           darwin
maintainers         pipping@macports.org openmaintainer@macports.org
description         findutils contains GNU find, xargs, and locate
long_description    ${description}
homepage            http://www.gnu.org/software/findutils/
master_sites        http://alpha.gnu.org/gnu/${name} \
                    ftp://alpha.gnu.org/gnu/${name}
checksums           md5 21c054db0812a48b8f79f6449f55f77d \
                    sha1 054b2d5ea72f2467b1e59981d7b7172216e94523 \
                    rmd160 c133485a18654054fb8f5bf715173e94bd3e250a

configure.env       SORT=/usr/bin/sort
configure.args      --mandir=${prefix}/share/man \
                    --infodir=${prefix}/share/info \
                    --program-prefix=g \
                    --disable-nls

post-destroot {
    cd ${destroot}${prefix}/share/info
    file rename find.info gfind.info
    delete ${destroot}${prefix}/lib/charset.alias
    if {[variant_isset with_default_names]} {
        foreach d {bin libexec share/info share/man/man1 share/man/man5} {
            cd ${destroot}${prefix}/$d
            foreach a [glob g*] {
                regexp g(.+) $a dummy b
                file link -hard $b g$b
            }
        }
    }
}

test.run            yes
test.target         check

variant nls {
    configure.args-delete   --disable-nls
    depends_lib-append      port:gettext
}

variant with_default_names {}

# livecheck disabled for the time being
livecheck.check   none
# livecheck.check regex
# livecheck.url   http://ftp.gnu.org/gnu/${name}/?M=D
# livecheck.regex ${name}-(\\d+\\.\\d+\\.\\d+)
