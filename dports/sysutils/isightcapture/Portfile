# $Id$

PortSystem              1.0

name                    isightcapture
set major_version       1
set minor_version       1
version                 ${major_version}.${minor_version}
categories              sysutils graphics
maintainers             ryandesign
homepage                http://www.intergalactic.de/hacks.html
master_sites            http://www.intergalactic.de/
distname                ${name}${major_version}_${minor_version}
extract.suffix          .dmg

description \
	captures a frame from an iSight camera and saves it to a file

long_description \
	iSightCapture captures a single frame from an attached iSight camera \
	and saves it to a file. It works even when no graphical user is logged \
	in, unlike many other applications. iSightCapture has only been tested \
	with Mac OS X Tiger and iSight.

checksums \
	md5 b0adf800e285ca0bc46f20d2450d45fa \
	sha1 038cc8852641c4ca10f4960eb30d508a0e9b99c1 \
	rmd160 fcbfc6bf0dd08d3b8a4a268378a57b54a5bfd82e

set dmg_mount /tmp/${name}-${version}

extract {
	file mkdir ${dmg_mount}
	system "hdiutil attach ${distpath}/${distname}${extract.suffix} -private -nobrowse -mountpoint ${dmg_mount}"
}

use_configure no

build {}

destroot {
	xinstall -m 755 ${dmg_mount}/${name} ${destroot}${prefix}/bin
}

post-destroot {
	system "hdiutil detach ${dmg_mount}"
	file delete -force ${dmg_mount}
}

# iSightCapture is already universal, so let's advertise that.
default_variants +universal
variant universal {}

livecheck.check     regex
livecheck.version   ${major_version}_${minor_version}
livecheck.regex     ${name}(\[0-9._\]+)\\.dmg
