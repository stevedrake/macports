# $Id: Portfile,v 1.14 2004/12/17 01:39:20 landonf Exp $

PortSystem 1.0
name		john
version		1.6
revision	2
categories	sysutils security
maintainers	yeled@opendarwin.org
description	Featureful Unix password cracker
long_description	\
	John the Ripper is a UNIX password cracker, currently available for \
	UNIX (tested with Linux x86, FreeBSD x86, Solaris 2.x SPARC, OSF/1 \
	Alpha), DOS, WinNT/Win95.
homepage	http://www.openwall.com/john/
platforms	darwin
master_sites	\
	http://www.openwall.com/john/ \
	ftp://ftp.ca.openwall.com/pub/projects/john/ \
	ftp://ftp.openwall.com/pub/projects/john/ \
	ftp://ftp1.ru.openwall.com/pub/projects/john/ \
	ftp://ftp2.ru.openwall.com/pub/projects/john/ \
	ftp://ftp.pl.openwall.com/pub/projects/john/ \
	ftp://ftp.ua.openwall.com/pub/projects/john/ \
	ftp://ftp.cz.openwall.com/pub/projects/john/
checksums	md5 aae782f160041b2bdc624b0a84054e32
patchfiles 	patch-Makefile
worksrcdir	${distname}/src
configure	{}
build.args	macosx-ppc-cc
build.target
destroot {
	file mkdir ${destroot}${prefix}/share/john
	file mkdir ${destroot}${prefix}/bin
	system "cp -fR ${portpath}/${workdir}/${distname}/run ${destroot}${prefix}/share/john/"
	#file copy -force ${portpath}/${workdir}/${distname}/run ${destroot}${prefix}/share/john/
	system "chmod -R ugo+rx ${destroot}${prefix}/share/john/run/"
	system "ln -s ${prefix}/share/john/run/john ${destroot}${prefix}/bin/john"
	
	file mkdir ${destroot}${prefix}/share/doc/john
	system "cp -fR ${portpath}/${workdir}/${distname}/doc/* ${destroot}${prefix}/share/doc/john/"
	#file copy -force ${portpath}/${workdir}/${distname}/doc/* ${destroot}${prefix}/share/doc/john/
	system "chmod -R ugo+rx ${destroot}${prefix}/share/doc/john/"
}


variant unstable {
	version		1.6.37
	checksums	md5 9403233b640927295c05b0564ff1f678
	patchfiles-delete	patch-Makefile
	worksrcdir	${distname}/src
}	
