# $Id$

PortSystem  1.0

name        moreutils
version     0.24
categories  sysutils
maintainers milosh
platforms   darwin
description a collection of the unix tools that nobody thought to write thirty years ago.
long_description    \
    moreutils includes the following utilities: \
 - isutf8: check if a file or standard input is utf-8, \
 - sponge: soak up standard input and write to a file, \
 - ts: timestamp standard input, \
 - vidir: edit a directory in your text editor, \
 - vipe: insert a text editor into a pipe, \
 - combine: combine the lines in two files using boolean operations, \
 - pee: tee standard input to pipes, \
 - zrun: automatically uncompress arguments to command, \
 - mispipe: pipe two commands, returning the exit status of the first, \
 - lckdo: run a program with a lock held.

homepage    http://packages.debian.org/unstable/utils/moreutils
master_sites    http://ftp.debian.org/debian/pool/main/m/moreutils/
distname        ${name}_${version}
worksrcdir      ${name}
extract.suffix  .tar.gz
checksums       md5 f0dbbded6a685976102c2884e6c32feb
use_configure   no
depends_run     port:perl5.8
patchfiles      patch-Makefile.diff
use_configure   no
pre-build   {
        reinplace "s|/usr/bin/perl|${prefix}/bin/perl|" \
        ${worksrcpath}/vidir ${worksrcpath}/vipe \
        ${worksrcpath}/ts ${worksrcpath}/combine \
        ${worksrcpath}/zrun
        }
destroot.env    PREFIX=${destroot}${prefix}

variant doc description {Install man pages} {
        depends_build-append    port:docbook-xml-4.4 port:docbook2X
        destroot.target         install install-doc
        build.target            all doc
        post-configure  {
            reinplace "s|/usr/share/xml/docbook/schema/dtd/4.4|${prefix}/share/xml/docbook/4.4|" \
            ${worksrcpath}/ifdata.docbook ${worksrcpath}/isutf8.docbook \
            ${worksrcpath}/mispipe.docbook ${worksrcpath}/pee.docbook \
            ${worksrcpath}/sponge.docbook ${worksrcpath}/lckdo.docbook
        }
}

livecheck.check regex
livecheck.url   http://packages.debian.org/unstable/utils/${name}
livecheck.regex ${name} .(\[0-9.\]+)

