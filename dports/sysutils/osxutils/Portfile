# $Id: Portfile,v 1.11 2004/03/15 18:24:09 waqar Exp $

PortSystem 1.0
name		osxutils
version		1.3
categories	sysutils
maintainers	waqar@opendarwin.org
description	Command line utilities for Finder commands
long_description	\
	osxutils is a package of potentially useful Mac-oriented command \
	line utilities for MacOS X version 10.0 or later. These tools \
	represent an effort in bringing command line control over certain \
	aspects of the MacOS, in particular file meta-data such as Finder \
	flags, heritage file Type and Creator codes, comments and \
	suffixes/file extensions.
homepage        http://sourceforge.net/projects/osxutils/
platforms	macosx
master_sites    sourceforge
extract.suffix	.tgz
distname	${name}-${version}-src
checksums	md5 03120e6f11133850c96ce9bbf7ffa3cd
use_configure   no
build.type	pbx
build.target	{}
set b_progs	"lsmac setfcomment setfctypes setfflags setlabel setsuffix"
set i_progs	"cpath google trash"
configure	{
	reinplace "s|main.c|setfcomment.c|g"	\
		${worksrcpath}/setfcomment/setfcomment.pbproj/project.pbxproj
	reinplace "s|main.c|setlabel.c|g"	\
		${worksrcpath}/setlabel/setlabel.xcode/project.pbxproj
}
build		{
	foreach prog ${b_progs} {
		cd ${worksrcpath}/${prog}
		system "${build.cmd} build"
	}
}	
destroot.destdir
destroot	{
	foreach prog ${i_progs} {
		system "cd ${worksrcpath}/${prog} && install -m 755 \
			${prog} ${destroot}${prefix}/bin/" 
		system "cd ${worksrcpath}/${prog} && install -m 644 \
			${prog}.1 ${destroot}/${prefix}/share/man/man1/"
	}
	foreach prog ${b_progs} {
		system "cd ${worksrcpath}/${prog} && ${build.cmd} install \
			INSTALL_PATH=${prefix}/bin DSTROOT=${destroot}"
		system "cd ${worksrcpath}/${prog} && install -m 644 \
			${prog}.1 ${destroot}/${prefix}/share/man/man1/"
	}
}
