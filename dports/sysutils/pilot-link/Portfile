# $Id: Portfile,v 1.6 2005/12/03 13:42:58 mww Exp $

PortSystem 1.0
name		pilot-link
version		0.11.7
revision	1
categories	sysutils
maintainers	darwinports@opendarwin.org
description	palm-pilot libraries and tools

platforms	darwin
homepage	http://pilot-link.org/
master_sites	http://pilot-link.org/source/
patchfiles	patch-${name}.darwin
depends_lib	lib:libiconv:libiconv lib:libreadline:readline

checksums	md5 f51ad0900548a6600de7513cc8f606e6

patch {
		foreach patch $patchfiles {
			system "cd '${workpath}/${distname}' && \
			sed -e 's#@PREFIX@#${prefix}#g' '${portpath}/${filesdir}/${patch}' | patch -p1"
		}
}

configure.env	CPPFLAGS='-I${prefix}/include -no-cpp-precomp -fno-common' \
		LIBS='-L${prefix}/lib' DYLD_LIBRARY_PATH='${prefix}/lib' \
		JAVA_HOME=/Library/Java/Home
configure.args	--prefix='${prefix}' --with-pic --enable-shared \
		--enable-static --without-python --libexecdir='${prefix}/lib'

build.env	${configure.env}

platform darwin 8 {
	configure.env-append CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

