--- misc.c.orig	2007-07-02 20:30:48.000000000 +0200
+++ misc.c	2007-08-29 22:11:51.000000000 +0200
@@ -530,7 +530,10 @@
 #ifdef HAVE_CANONICALIZE_FILE_NAME /* have safe GNU ext? */
     return realpath(path, NULL);
 #else
-# error "missing safe realpath()"
+	{
+		char *buf = malloc(PATH_MAX);
+		if (buf) return realpath(path, buf);
+	}
 #endif
     return NULL;
 }
