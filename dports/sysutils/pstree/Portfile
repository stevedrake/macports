# $Id$

PortSystem 1.0

name			pstree
version			2.31
revision		1
categories		sysutils
maintainers		mww
description		pstree shows the output of the ps command as a tree
platforms		darwin freebsd
long_description	${description}

homepage		http://freshmeat.net/projects/pstree/
master_sites		ftp://ftp.thp.uni-duisburg.de/pub/source/ \
			http://fresh.t-systems-sfr.com/unix/src/misc/
checksums		sha1 fca0b2c373fd81efe38d5f8d166f2e14c3d73389

pre-extract {
	file mkdir ${worksrcpath}
}
extract.dir	${worksrcpath}

use_configure	no

build.cmd	cc
build.args	pstree.c ${configure.cflags}
build.target	-o pstree

destroot	{
	xinstall -s ${worksrcpath}/pstree ${destroot}${prefix}/bin
	set docdir ${prefix}/share/doc/${name}-${version}
	xinstall -d ${destroot}${docdir}
	xinstall -m 0644 ${worksrcpath}/README \
		${destroot}${docdir}
}

variant universal {
    build.args-append  ${configure.universal_cflags}
}

platform darwin 8 { build.cmd	/usr/bin/gcc-4.0 }
platform darwin 9 { build.cmd	/usr/bin/gcc-4.0 }

livecheck.check	regex
livecheck.url	ftp://ftp.thp.uni-duisburg.de/pub/source/
livecheck.regex	pstree.tar.gz -> pstree-(\[0-9\]+\\.\[0-9\]+)

