# $Id$

PortSystem 1.0

name			repoview
version			0.6.0
categories		sysutils
platforms		darwin
maintainers		afb@macports.org
description		make Yum repositories browseable
long_description	RepoView allows one to easily create a set of static HTML pages \
			in a YUM repository, allowing simple browsing of available packages. \
			It uses kid templating engine to create the pages and is therefore \
			easily customizeable.

homepage		http://linux.duke.edu/projects/mini/repoview/
master_sites		http://mricon.com/downloads/repoview/
checksums		md5 2513a5be6eccdd303474939e828da79f \
				sha1 567c7bb8da10ad6ba4081e797bc68df1a9f27f0e \
				rmd160 1a74935a107fdc85bab32b82401599ab3d4fc734
patchfiles		patch-repoview.py

depends_run		port:python24 port:yum port:py-kid

post-patch {
	reinplace "s|/usr/bin/python|${prefix}/bin/python2.4|g" ${worksrcpath}/repoview.py
	reinplace "s|/usr/share/repoview|${prefix}/share/repoview|g" ${worksrcpath}/repoview.py
}

use_configure	no
build {}

destroot {
	xinstall -m 755 ${worksrcpath}/repoview.py ${destroot}${prefix}/bin/repoview
	xinstall -m 644 ${worksrcpath}/repoview.8 ${destroot}${prefix}/share/man/man8
	xinstall -d -m 755 ${destroot}${prefix}/share/repoview
	copy ${worksrcpath}/templates ${destroot}${prefix}/share/repoview/templates
}
