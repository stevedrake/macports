# $Id$

PortSystem 1.0

name			repoview
version			0.6.2
categories		sysutils
platforms		darwin
maintainers		afb@macports.org
description		make common metadata package repositories browseable
long_description	RepoView allows one to easily create a set of static HTML pages \
			in a repodata repository, allowing simple browsing of available packages. \
			It uses kid templating engine to create the pages and is therefore \
			easily customizeable.

homepage		https://fedorahosted.org/repoview/
master_sites		http://icon.fedorapeople.org/repoview/
checksums		md5 e6d1abf7db974da2f0dfac4072f6718c \
				sha1 667e1c5d9568576ae3bc925a48ebbad405bc682f \
				rmd160 070eb5682f99da5bd66026a7a5d730f12e2da571
patchfiles		patch-repoview.py

depends_run		port:python24 port:yum port:py-kid

post-patch {
	reinplace "s|/usr/bin/python|${prefix}/bin/python2.4|g" ${worksrcpath}/repoview.py
	reinplace "s|/usr/share/repoview|${prefix}/share/repoview|g" ${worksrcpath}/repoview.py
}

use_configure	no
build {}

destroot {
	xinstall -m 755 ${worksrcpath}/repoview.py ${destroot}${prefix}/bin/repoview
	xinstall -m 644 ${worksrcpath}/repoview.8 ${destroot}${prefix}/share/man/man8
	xinstall -d -m 755 ${destroot}${prefix}/share/repoview
	copy ${worksrcpath}/templates ${destroot}${prefix}/share/repoview/templates
}

livecheck.check	regex
livecheck.url	${homepage}
livecheck.regex	Latest version is \[a-zA-Z\]*-(\[0-9.\]*)
