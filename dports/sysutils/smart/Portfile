# $Id: Portfile,v 1.1 2005/09/20 22:06:08 mww Exp $

PortSystem 1.0
name		smart
version		0.38
platforms	darwin
categories	sysutils archivers
maintainers	n3npq@mac.com
description	Automatic updater and package installer/remover
long_description	The Smart Package Manager project has the ambitious \
			objective of creating smart and portable algorithms \
			for solving adequately the problem of managing software \
			upgrading and installation. This tool works in all \
			major distributions, and will bring notable advantages \
			over native tools currently in use (APT, APT-RPM, YUM, \
			URPMI, etc).
homepage	http://smartpm.org
master_sites	http://linux-br.conectiva.com.br/~niemeyer/smart/files/
checksums	md5 ee300e078d0fe15336569d03f95a1b76

use_bzip2	yes
patchfiles	patch-prefix.diff

depends_lib	lib:librpm:rpm	port:python24

patch {
		foreach patch $patchfiles {
			system "cd '${workpath}/${distname}' && \
			sed -e 's#@@PREFIX@@#${prefix}#g' '${portpath}/${filesdir}/${patch}' | patch -p0"
		}
		system "echo 'exit 0' > '${workpath}/${distname}/configure' && chmod +x '${workpath}/${distname}/configure'"
}

build.env	PYTHON="${prefix}/bin/python2.4"
