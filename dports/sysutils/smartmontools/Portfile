# $Id$

PortSystem 1.0

name            smartmontools
version         5.39
revision        1
categories      sysutils
maintainers     toby
description     SMART hard drive monitoring
long_description \
    Two utility programs (smartctl and smartd) to control and monitor \
    storage systems using the Self-Monitoring, Analysis and Reporting \
    Technology System (SMART) built into most modern ATA and SCSI hard \
    disks. In many cases, these utilities will provide advanced warning \
    of disk degradation and failure.
homepage        http://smartmontools.sourceforge.net/
platforms       darwin
license         GPLv2
master_sites    sourceforge
checksums       md5 63c1b5373a9ef91e9c9becb16e147571 \
                sha1 d295e7a4e87de6d12629d5b5ae2578b4541db648 \
                rmd160 832a699760afc52225fd587cbf2783857f957354
configure.args  --mandir=${prefix}/share/man \
                --enable-drivedb \
                --enable-savestates \
                --enable-attributelog \
                --enable-sample

platform darwin {
    post-destroot {
        file delete -force ${destroot}${prefix}/etc/rc.d

        set launchd_path ${destroot}/Library/LaunchDaemons
        set launchd_plist net.sourceforge.smartmontools.smartd.plist

        xinstall -d ${launchd_path}
        xinstall -m 0644 ${filespath}/${launchd_plist} ${launchd_path}
        reinplace s|__PREFIX__|${prefix}| ${launchd_path}/${launchd_plist}
    }
}
