# $Id$

PortSystem 1.0
name            socat
version         1.6.0.1
categories      sysutils net
maintainers     md@hudora.de
platforms       darwin
description     netcat on steroids
long_description        \
 socat is a relay for bidirectional data transfer between two independent data \
 channels. Each of these data channels may be a file, pipe, device (serial line \
 etc. or a pseudo terminal), a socket (UNIX, IP4, IP6 - raw, UDP, TCP), an \
 SSL socket, proxy CONNECT connection, a file descriptor (stdin etc.), the \
 GNU line editor (readline), a program, or a combination of two of these. 
master_sites    http://www.dest-unreach.org/socat/download/
checksums       md5     5a6a1d1e398d5c4d32fa6515baf477af \
                sha1    39ed55df397cdf7d8adaa26a60c22ebe3a6c0f0e \
                rmd160  b45bcfeb46009b89167bcce4a0d69cca1238f921
depends_lib		port:readline
configure.ldflags-append	"-L${prefix}/lib -lreadline"

# This patch should not be necessary for later versions
# taken from <http://www.dest-unreach.org/socat/contrib/socat-macos.html>
# patches configure.in, requires autoconf
patchfiles      socat-1.6.0.1-mac-CL.diff
patch.pre_args  -p1
use_autoconf    yes

post-configure {
    reinplace "s|\$(INSTALL) -m 644 socat.1 \$(DESTDIR)\$(MANDEST)/man1/|\$(INSTALL) -d -m 755 \$(DESTDIR)\$(MANDEST)/man1/\\\n\\\t\$(INSTALL) -m 644 socat.1 \$(DESTDIR)\$(MANDEST)/man1/|g" \
              ${worksrcpath}/Makefile
}

platform darwin 9 {
    configure.args-append --disable-termios
}
