# $Id: Portfile,v 1.4 2006/05/29 22:30:34 markd Exp $

PortSystem 1.0

name			synergy
version			1.3.1
categories		sysutils
platforms		darwin
maintainers		ascarter@gmail.com
description		a client/server for sharing a single mouse and keyboard
long_description	Synergy lets you easily share a single mouse and keyboard \
				between multiple computers with different operating systems \
				without special hardware. It is intended for users with \
				multiple computers on their desk since each system uses its \
				own display.
master_sites	sourceforge
master_sites.mirror_subdir	synergy2

checksums		md5 a6e09d6b71cb217f23069980060abf27

configure.args	--sysconfdir=${prefix}/etc/${name}
patchfiles		patch-CArchFileUnix.cpp.diff patch-configure.diff

post-patch {
	cd ${worksrcpath}/lib/arch
	reinplace "s|__SYSCONFDIR|${prefix}/etc/${name}|g" CArchFileUnix.cpp
}

variant server {
	startupitem.create	yes
	startupitem.name	Synergy
	startupitem.start	"${prefix}/bin/synergys --daemon &"
	startupitem.stop	"/usr/bin/killall synergys"
}

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/etc/${name}
	xinstall -m 644 -c ${worksrcpath}/examples/synergy.conf \
		${destroot}${prefix}/etc/${name}/synergy.conf.sample
}
