# $Id: Portfile,v 1.3 2005/10/20 19:16:49 blb Exp $

PortSystem 1.0

name			synergy
version			1.2.5
categories		sysutils
platforms		darwin
maintainers		anoop@ranganath.com
description		a client/server for sharing a single mouse and keyboard
long_description	Synergy lets you easily share a single mouse and keyboard \
				between multiple computers with different operating systems \
				without special hardware. It is intended for users with \
				multiple computers on their desk since each system uses its \
				own display.
master_sites	sourceforge
master_sites.mirror_subdir	synergy2

checksums		md5 cf1b981acd317c003357f4ecba42448b

configure.args	--sysconfdir=${prefix}/etc/${name}
patchfiles		patch-CArchFileUnix.cpp.diff patch-configure.diff

post-patch {
	cd ${worksrcpath}/lib/arch
	reinplace "s|__SYSCONFDIR|${prefix}/etc/${name}|g" CArchFileUnix.cpp
}

startupitem.create	yes
startupitem.name	Synergy
startupitem.start	"${prefix}/bin/synergys --daemon &"
startupitem.stop	"/usr/bin/killall synergys"

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/etc/${name}
	xinstall -m 644 -c ${worksrcpath}/examples/synergy.conf \
		${destroot}${prefix}/etc/${name}/synergy.conf.sample
}
