# $Id: Portfile,v 1.1 2005/02/19 14:21:50 mww Exp $

PortSystem 1.0

name			synergy
version			1.2.2
categories		sysutils
platforms		darwin
maintainers		anoop@ranganath.com
description		a client/server for sharing a single mouse and keyboard
long_description	Synergy lets you easily share a single mouse and keyboard \
				between multiple computers with different operating systems \
				without special hardware. It is intended for users with \
				multiple computers on their desk since each system uses its \
				own display.
master_sites	sourceforge
master_sites.mirror_subdir	synergy2

checksums		md5 d43fe74fc3aeb541bb38f0dceaffebb4

configure.args	--sysconfdir=${prefix}/etc/${name}
patchfiles		patch-CArchFileUnix.cpp.diff

post-patch {
	cd ${worksrcpath}/lib/arch
	reinplace "s|__SYSCONFDIR|${prefix}/etc/${name}|g" CArchFileUnix.cpp
}

startupitem.create	yes
startupitem.name	Synergy
startupitem.start	"${prefix}/bin/synergys --daemon &"
startupitem.stop	"/usr/bin/killall synergys"

post-destroot {
	xinstall -m 755 -d ${destroot}${prefix}/etc/${name}
	xinstall -m 644 -c ${worksrcpath}/examples/synergy.conf \
		${destroot}${prefix}/etc/${name}/synergy.conf.sample
}
