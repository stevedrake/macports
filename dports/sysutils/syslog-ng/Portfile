# $Id$

PortSystem 1.0

name			syslog-ng
version			2.0.3
categories		sysutils
platforms		darwin
maintainers		markd@macports.org
description		Highly configurable syslog replacement.
long_description	syslog-ng is the world's most flexible and scalable audit \
					trail processing tool for organizations of any size. It \
					provides a centralised, securely stored log of all devices \
					on your network, whatever platform they run on. And \
					syslog-ng also incorporates a host of powerful features, \
					including filtering based on message content, as well as \
					customisable data mining and analysis capabilities. 

homepage			http://www.balabit.com/products/syslog_ng/
master_sites			http://www.balabit.com/downloads/files/syslog-ng/stable/src/
checksums			md5 01cafcfebf1c05f9253c3f3c9a987434

depends_lib			port:libol \
				port:eventlog \
				port:libnet11 \
				port:glib2 \
				port:pkgconfig

startupitem.create      yes
startupitem.name        syslog-ng
startupitem.executable  "${prefix}/sbin/syslog-ng"

configure.args		--mandir=${prefix}/share/man \
			--enable-dynamic-linking \
			--sysconfdir=${prefix}/etc

variant powerpc	{
	configure.args-append		--host=powerpc
}

post-destroot	{
	xinstall -m 644 ${worksrcpath}/doc/examples/syslog-ng.conf.sample \
		${destroot}${prefix}/etc
	xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath} ChangeLog README AUTHORS COPYING NEWS \
		${destroot}${prefix}/share/doc/${name}
	reinplace "s|/dev/log|/var/run/syslog|g" \
		${destroot}${prefix}/etc/syslog-ng.conf.sample
}
