# $Id: Portfile,v 1.3 2005/06/08 17:18:58 mww Exp $

PortSystem 1.0

name		uptimed
version		0.3.3
categories	sysutils
platforms	darwin
maintainers	mww@opendarwin.org
description	uptime record daemon
long_description	uptimed is an uptime record daemon keeping track of \
			the highest uptimes a computer system ever had.

homepage	http://www.robertjohnkaper.com/software/uptimed/
master_sites	http://www.robertjohnkaper.com/downloads/uptimed/
checksums	md5 ea9aeab03e75661986abe682fd209f3d
use_bzip2	yes

configure.args	--mandir=${prefix}/share/man
post-configure	{
	reinplace "s|/var/spool/uptimed||g" ${worksrcpath}/Makefile
	reinplace "s|/var/spool/uptimed|${prefix}/var/spool/uptimed|g" \
		${worksrcpath}/libuptimed/urec.h
	reinplace "s|var/run/uptimed|${prefix}/var/run/uptimed|g" \
		${worksrcpath}/etc/uptimed.conf-dist
}

destroot.args	INSTALL=/usr/bin/install
post-destroot	{
	xinstall -m 755 -d ${destroot}${prefix}/var/spool/uptimed
	system "touch ${destroot}${prefix}/var/spool/uptimed/bootid"
}
