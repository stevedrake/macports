# $Id$

PortSystem 1.0

name		zeroinstall-injector
version		0.30
platforms	darwin freebsd linux
categories	sysutils
maintainers	afb@macports.org
description	The Zero Install Injector (0launch)
long_description \
The Zero Install Injector makes it easy for users to install software without \
needing root privileges. It takes the URL of a program and runs it (downloading \
it first if necessary). Any dependencies of the program are fetched in the same \
way. The user controls which version of the program and its dependencies to \
use.

homepage	http://0install.net
master_sites	sourceforge
master_sites.mirror_subdir	zero-install
extract.suffix	.tar.gz.gpg
checksums	md5 c539dc6ffa39f18700220f5565d8eac3 \
		sha1 c3cdc1bec37f62f9dbd8e938590a6097a259904a \
		rmd160 eff6aee9b81ce8aa9a92272de6526ac6753f3fd0

depends_lib	port:python25 bin:gpg:gnupg
depends_run	port:py25-gtk port:py25-xml bin:sudo:sudo

extract	{ system "mkdir ${worksrcpath} && cd ${workpath};
gpg --decrypt ${distpath}/${distname}${extract.suffix} |
${extract.cmd} ${extract.pre_args} - ${extract.post_args}" }

patchfiles	patch-setup.py patch-arch.py patch-unpack.py

use_configure	no

build.cmd	${prefix}/bin/python2.5 setup.py
build.target		build

destroot.cmd	${prefix}/bin/python2.5 setup.py
destroot.destdir	--prefix=${prefix} --skip-build --root=${destroot}

livecheck.name	zero-install
livecheck.distname	injector
