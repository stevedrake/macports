# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           kde4 1.1

name                kde4-kile
version             2.1
categories          tex kde kde4
license             GPL-2+
maintainers         nicos openmaintainer

description         KDE Integrated LaTeX Environment
long_description    Kile is a user friendly TeX/LaTeX editor for the KDE \
                    desktop environment. KDE is available for many \
                    architectures such as PC, PowerPC (Mac for example) and \
                    SPARC.

conflicts           kile-devel

homepage            http://kile.sourceforge.net/
platforms           darwin
master_sites        sourceforge:kile
distname            kile-${version}

checksums           sha1    860ac96b68b6026f48b8a9c401c6024ba78e3cdf \
                    rmd160  75592d6ccbd70d6d51de9313cb2812be12db6497

use_bzip2           yes

depends_lib-append  port:kdelibs4

depends_run-append  port:okular \
                    port:kate \
                    port:ImageMagick \
                    port:ghostscript \
                    port:texlive-basic \
                    port:texlive-latex

patchfiles          patch-kilestdtools.rc.macports.diff \
                    patch-runTests.sh.macports.diff

build.asroot        yes

pre-configure {
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/src/data/kilestdtools.rc
    reinplace "s|@APPLICATIONS_DIR@|${applications_dir}|g" ${worksrcpath}/src/data/kilestdtools.rc
    reinplace "s|@PREFIX@|${prefix}|g" ${worksrcpath}/src/test/runTests.sh
    reinplace "s|@APPLICATIONS_DIR@|${applications_dir}|g" ${worksrcpath}/src/test/runTests.sh
}