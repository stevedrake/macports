--- cuneiform_src/Kern/rstr/src/perc.c.orig	2010-10-12 08:39:11.000000000 +0200
+++ cuneiform_src/Kern/rstr/src/perc.c	2010-10-12 08:42:14.000000000 +0200
@@ -109,6 +109,7 @@
 #include <string.h>
 #include <assert.h>
 
+#include "config.h"
 #include "struct.h"
 #include "func.h"
 #include "ligas.h"
@@ -778,7 +779,12 @@
  * Since it was only used on Windows (not Mac) I'm assuming it means
  * "swap 32 bytes between big endian and current byte order".
  */
-#if defined(WIN32) && defined(_MSC_VER) && (_MSC_VER > 800)
+#if defined(HAVE_ENDIAN_H)
+
+#include <machine/endian.h>
+#define swapbytes(a) do { (a) = htonl(a); } while (0)
+
+#elif defined(WIN32) && defined(_MSC_VER) && (_MSC_VER > 800)
   #define   swapbytes(a) __asm {                      \
                                  __asm   mov   EAX,a  \
                                  __asm   bswap EAX    \
