# $Id$

PortSystem 1.0

name		dos2unix
version		4.1.2
license     FreeBSD
categories	textproc
platforms	darwin
maintainers	waqar
description	Convert text between dos, unix, and mac formats
long_description ${description}
master_sites	http://www.xs4all.nl/~waterlan/dos2unix/ sourceforge
homepage	http://www.xs4all.nl/~waterlan/dos2unix.html

checksums       md5     2849bf7b8ec51884e61d12ec98cb1b16 \
                sha1    75301f996afe0d7864dedbf9b842dce862ed4815 \
                rmd160  f6e9d88b72b5f305e166d706fb12b9bb49a40efc

depends_lib     port:gettext

use_configure	no

build.args      prefix=${prefix}

set CFLAGS_OS "${configure.cflags} ${configure.cppflags}"
set LDFLAGS_EXTRA "${configure.ldflags} -lintl"

pre-build {
    if {![variant_isset universal]} {
        append CFLAGS_OS " ${configure.cc_archflags}"
        append LDFLAGS_EXTRA " ${configure.cc_archflags}"
    }
    build.args-append \
        CFLAGS_OS="${CFLAGS_OS}" \
        LDFLAGS_EXTRA="${LDFLAGS_EXTRA}"
}

destroot.args   prefix=${prefix} \
                DOCDIR=${destroot}${prefix}/share/doc/${name}

variant universal {
    append CFLAGS_OS " ${configure.universal_cflags}"
    append LDFLAGS_EXTRA " ${configure.universal_ldflags}"
}

livecheck.type  regex
livecheck.regex {Stable version: (\d+(?:\.\d+)*)}
