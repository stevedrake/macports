# $Id$

PortSystem 1.0

name			help2man
version			1.39.2
categories		textproc
platforms		darwin
license			GPL-3+
maintainers		nomaintainer
description		automatically generate simple man pages

long_description	help2man is a tool for automatically generating simple \
			manual pages from program output.

homepage		http://www.gnu.org/software/help2man/
master_sites	gnu

checksums           md5     36659da3ba7a9a51813e1c4848900a28 \
                    sha1    a2b03eeb6034b85ac202ec93328bc5b17d9a337c \
                    rmd160  9ee8eae52c766f0e14a631eda7dad29f3ccae97e

depends_lib		path:bin/perl:perl5 port:p5-locale-gettext \
				port:gettext port:libiconv

configure.perl	${prefix}/bin/perl

configure.args  --enable-nls

configure.universal_args-delete --disable-dependency-tracking

post-patch {
	if {[variant_isset universal]} {
		reinplace "s|-shared|-bundle ${configure.ldflags} ${configure.universal_ldflags}|" ${worksrcpath}/Makefile.in
	} else {
	    reinplace "s|-shared|-bundle ${configure.ldflags} ${configure.ld_archflags}|" ${worksrcpath}/Makefile.in
	}
}

post-destroot {
	set docdir ${prefix}/share/doc/${name}
	xinstall -d ${destroot}${docdir}
	xinstall -m 0644 -W ${worksrcpath} COPYING debian/changelog NEWS README THANKS \
		${destroot}${docdir}
}
