# $Id: Portfile,v 1.7 2006/05/25 17:27:42 takanori Exp $

PortSystem		1.0
name			hyperestraier
version         1.2.7
categories		textproc
maintainers     rsky0711@gmail.com pelopor@nifty.com

platforms       darwin
description		Hyper Estraier is a full-text search system.
long_description	\
	Hyper Estraier is a full-text search system. You can search lots of\
	documents for some documents including specified words. If you run a web\
	site, it is useful as your own search engine for pages in your site. Also,\
	it is useful as search utilities of mail boxes and file servers.\
	\
	The characteristic of Hyper Estraier is the following.\
	\
    	* High performance of search\
    	* High scalability of target documents\
    	* Perfect recall ratio by N-gram method\
        * High precision by hybrid mechanism of N-gram and morphological analyzer\
        * Phrase search, regular expressions, attribute search, and similarity search\
    	* Multilingualism with Unicode\
    	* Independent of file format and repository\
        * Intelligent web crawler\
    	* Simple and powerful API\
        * Supporting P2P architecture\
	\
	Hyper Estraier is an open-source software released under the terms of the\
    GNU Lesser General Public License.
homepage	 	http://hyperestraier.sourceforge.net/
master_sites    ${homepage}
checksums       md5	   9ca74a6eacbbe5593d4e61d20c1e9f8f \
                sha1   3754922bb2ba5be0e7cf3d014528680974d92612 \
                rmd160 7ef95096e14f435fc15a7ea92283418473a2df72

depends_build	bin:pkg-config:pkgconfig
depends_lib		port:qdbm port:libiconv port:zlib 

configure.args  --mandir=${prefix}/share/man \
                --datadir=${prefix}/share/doc

post-extract {
    # configure
    reinplace "s|\$HOME|\${prefix}|g" \
        ${worksrcpath}/configure
    # Makefile.in
    reinplace "s|\$(HOME)|\$(prefix)|g" \
        ${worksrcpath}/Makefile.in
    # myconf.h
    reinplace "s|lzo/|lzo2/|g" \
        ${worksrcpath}/myconf.h
}

test.run         yes

platform  macosx {
		  build.target	mac
		  test.target      check-mac
		  destroot.target	install-mac
}

variant mecab {
    depends_lib-append      port:mecab
    configure.args-append   --enable-mecab
}
variant no-zlib {
    depends_lib-delete      lib:libz:zlib
    configure.args-append   --disable-zlib
}
variant lzo {
    depends_lib-append      lib:liblzo2:lzo2
    configure.args-append   --enable-lzo
}
variant bzip2 {
    depends_lib-append      lib:libbz2:bzip2
    configure.args-append   --enable-bzip
}
