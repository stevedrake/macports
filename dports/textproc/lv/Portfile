# $Id: Portfile,v 1.2 2006/01/29 19:18:48 olegb Exp $

PortSystem        1.0
name              lv
version           4.51
categories        textproc
maintainers       tatyana-dports@miko.org
description       Powerful Multilingual File Viewer / Grep
long_description  ${description}
homepage          http://www.ff.iij4u.or.jp/~nrt/lv/index.html
master_sites      http://www.ff.iij4u.or.jp/~nrt/freeware/
distfiles         ${name}451.tar.gz
checksums	  md5 85b70ae797f935741ec9a1cbe92f00e9 \
		  sha1 1a70299c27aa317a436976a557853858db4dcb5f \
		  rmd160 ae0d58b52dbf714f8b371f51ac87490ecba1c994

worksrcdir        ${name}451
patch.pre_args	  -p1
configure	  {
	  	  system "cd ${worksrcpath}/build && ../src/configure --prefix=${prefix}"
}
build		  {
		  system "cd ${worksrcpath}/build && make"
}
destroot	  {
		  xinstall -m 755 -d ${destroot}/${prefix}/bin
	   	  xinstall -m 755 -d ${destroot}/${prefix}/lib/lv
	   	  xinstall -m 755 -d ${destroot}/${prefix}/share/man/man1

	   	  xinstall -m 755 ${worksrcpath}/build/lv ${destroot}/${prefix}/bin
	   	  system "ln ${destroot}/${prefix}/bin/lv ${destroot}/${prefix}/bin/lgrep"
	   	  xinstall -m 644 ${worksrcpath}/lv.hlp ${destroot}/${prefix}/lib/lv
	   	  xinstall -m 644 ${worksrcpath}/lv.1 ${destroot}/${prefix}/share/man/man1
}

post-destroot     {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/GPL.txt ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/README ${destroot}/${prefix}/share/doc/${name}
	eval xinstall -m 644 [glob ${worksrcpath}/hello*] ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/index.html ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 ${worksrcpath}/relnote.html ${destroot}/${prefix}/share/doc/${name}
}

variant lesslikeslash {
	patchfiles-append        lv451_lesslikeslash.patch
}
