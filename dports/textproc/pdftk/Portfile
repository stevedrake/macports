# $Id: Portfile,v 1.4 2005/02/25 07:40:40 blb Exp $

PortSystem			1.0
name				pdftk
version				1.12
revision			1
categories			textproc graphics pdf
maintainers			blb@pobox.com
description			pdftk - PDF Toolkit, for various operations on PDF files
long_description \
	pdftk is a simple tool for doing everyday things with PDF documents: \
	Merge PDF Documents \
	Split PDF Pages into a New Document \
	Decrypt Input as Necessary (Password Required) \
	Encrypt Output as Desired \
	Fill PDF Forms with FDF Data and/or Flatten Forms \
	Apply a Background Watermark \
	Report on PDF Metrics such as Metadata, Bookmarks, and Page Labels \
	Update PDF Metadata \
	Attach Files to PDF Pages or the PDF Document \
	Unpack PDF Attachments \
	Burst a PDF Document into Single Pages \
	Uncompress and Re-Compress Page Streams \
	Repair Corrupted PDF (Where Possible)

platforms			darwin

homepage			http://www.pdfhacks.com/pdftk/
master_sites		${homepage}
use_bzip2			yes

checksums			md5 ec1b6d9e06109c6f05e19033f1d91d8a \
					sha1 caab4ae9ede56b12b007e9b5c9a78c6a4873dc44

depends_lib			bin:gcj:gcj34

worksrcdir			${distname}/${name}

use_configure		no

# Yes, that is a question mark; if we use a glob here (as once we did), that
# glob is run prior to the dependency being installed, which would mean that
# the glob would not see gcj yet, and think TOOLPATH should be /bin/.  Using
# the question mark lets the shell deal with it later, after the dependency
# has been handled if necessary.
build.args			-f Makefile.MacOSX TOOLPATH=${prefix}/gcj34-3.4.?/bin/

destroot {
	xinstall -m 755 -d ${destroot}/${prefix}/share/doc/${name}
	xinstall -m 755 -W ${worksrcpath} pdftk ${destroot}/${prefix}/bin
	xinstall -m 644 -W ${worksrcpath}/.. pdftk.1.html pdftk.1.txt \
		${destroot}/${prefix}/share/doc/${name}
	xinstall -m 644 -W ${worksrcpath}/../debian pdftk.1 \
		${destroot}/${prefix}/share/man/man1
}

