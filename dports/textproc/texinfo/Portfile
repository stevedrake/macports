# $Id$

PortSystem 1.0

name            texinfo
version         4.12
categories      textproc
platforms       darwin
maintainers     vincent-opdarw@vinc17.org
description     Texinfo is the official documentation format of the GNU project
long_description        Texinfo is the official documentation format of the \
                GNU project. It uses a single source file to produce output \
                in a number of formats, both online and printed (dvi, info, \
                html, xml, etc.). This means that instead of writing \
                different documents for online information and another for \
                a printed manual, you need write only one document.
homepage        http://www.gnu.org/software/texinfo/
master_sites    gnu

# Replace the following by "use_lzma yes" when MacPorts 1.6.1 is released.
# The unlzma command is provided by lzmautils.
extract.suffix  .tar.lzma
extract.cmd     unlzma

# The following message is useful because MacPorts doesn't test whether
# the extract target fails, and unless the -v option has been used, the
# error message "sh: line 1: unlzma: command not found" is filtered out
# and the user doesn't know the cause of the problem.
pre-extract {
    ui_msg "If you get an error with configure, please install/activate lzmautils."
}

depends_build   bin:unlzma:lzmautils

checksums       md5 81bcbc7b647f2741e7d84a842e47eeb5 \
                sha1 7fee7f9c9c98e0d69b4b00090708b02ed75e42f5 \
                rmd160 b72d1994480acd217d0a7cff648d0bbc78ad9010

depends_lib     port:gettext \
                port:libiconv \
                port:ncurses

pre-destroot {
    xinstall -d "${destroot}${prefix}/share/doc/${name}"
    xinstall -m 644 -v -W "${worksrcpath}" AUTHORS INTRODUCTION NEWS TODO \
      "${destroot}${prefix}/share/doc/${name}"
}

post-destroot {
    file delete -force ${destroot}${prefix}/lib/charset.alias
}

# We need to support names like 'texinfo-4.8a.tar.bz2'.
livecheck.check     regex
livecheck.url       http://ftp.gnu.org/gnu/texinfo/?C=M\;O=D
livecheck.regex     ${name}-(\[0-9.a-s\]+)\\.tar
