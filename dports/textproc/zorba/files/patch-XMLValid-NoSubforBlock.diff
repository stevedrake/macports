See http://svn.apache.org/viewvc?view=revision&revision=803624

--- src/types/schema/XercSchemaValidator.cpp.orig	2010-03-13 18:14:51.000000000 +0100
+++ src/types/schema/XercSchemaValidator.cpp	2010-03-13 18:24:42.000000000 +0100
@@ -597,7 +597,11 @@
                         else {
                             // the type is derived from ancestor
                             if (((SchemaElementDecl*)elemDef)->getBlockSet() == SchemaSymbols::XSD_RESTRICTION) {
+#if _XERCES_VERSION < 30100
                                 emitError(XMLValid::NoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#else
+                                emitError(XMLValid::ElemNoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#endif
                                 fErrorOccurred = true;
                             }
                             if (elemDef->hasAttDefs()) {
@@ -659,7 +663,11 @@
                                 else {
                                     int derivationMethod = typeInfo->getDerivedBy();
                                     if ((((SchemaElementDecl*)elemDef)->getBlockSet() & derivationMethod) != 0) {
+#if _XERCES_VERSION < 30100
                                         emitError(XMLValid::NoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#else
+                                        emitError(XMLValid::ElemNoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#endif
                                         fErrorOccurred = true;
                                     }
                                 }
@@ -700,7 +708,11 @@
                             else {
                                 // the type is derived from ancestor
                                 if (((SchemaElementDecl*)elemDef)->getBlockSet() == SchemaSymbols::XSD_RESTRICTION) {
+#if _XERCES_VERSION < 30100
                                     emitError(XMLValid::NoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#else
+                                    emitError(XMLValid::ElemNoSubforBlock, fXsiType->getRawName(), elemDef->getFullName());
+#endif
                                     fErrorOccurred = true;
                                 }
                                 if (elemDef->hasAttDefs()) {
