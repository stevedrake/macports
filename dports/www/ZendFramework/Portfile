# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                ZendFramework
version             1.8.4PL1
categories          www lang
maintainers         snc openmaintainer
description         A framework for developing PHP web applications
long_description    This is a port of the Zend Framework. The Zend Framework \
                    aims to provide an architecture for developing entire \
                    applications with no other library dependencies. This code \
                    will always be actively developed, tested, and supported \
                    by Zend and the PHP Collaboration Project.
                  
homepage            http://framework.zend.com/

platforms           darwin freebsd
depends_run         path:bin/php:php5

master_sites        http://framework.zend.com/releases/${name}-${version}/

checksums           md5     d7374bf9b1741e2f925e8d2443475f9d \
                    sha1    0bd6ac355959afc245b8166aea5108a98625c1a8 \
                    rmd160  e3b60d490c116f5b66ded51be291921ede10cb2c

set zf_doc_dir      ${prefix}/share/doc/${name}
set zf_lib_dir      ${prefix}/lib/${name}

use_configure       no

build               {}

destroot {
    # create paths
    xinstall -d -m 755 ${destroot}${zf_lib_dir}
    xinstall -d -m 755 ${destroot}${zf_doc_dir}

    # most files stay in doc -- this is our first target
    eval file copy [glob ${worksrcpath}/*] ${destroot}${zf_doc_dir}
       
    # now move real lib paths to lib
    file rename ${destroot}${zf_doc_dir}/library ${destroot}${zf_lib_dir}
    file rename ${destroot}${zf_doc_dir}/extras ${destroot}${zf_lib_dir}
}

post-install {
    ui_msg "\nIf this is your first install, you might want to add"
    ui_msg "'${zf_lib_dir}/library' to include_path in your php.ini."
    ui_msg "i.e.: include_path = \".:${zf_lib_dir}/library\""
    ui_msg "\nIf you want to use extra components you'd have to"
    ui_msg "add '${zf_lib_dir}/extras', too."
    ui_msg "\nFinally, if you wish to use Zend_Tool, add bin/zf.sh to"
    ui_msg "your \$PATH variable."
}

livecheck.check     regex
livecheck.url       http://framework.zend.com/download/current/
livecheck.regex     {releases/ZendFramework-(\d+\.\d+\.\d+[^a\/]*)\/}
