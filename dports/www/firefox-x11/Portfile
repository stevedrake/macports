# $Id: Portfile,v 1.1 2006/02/20 00:48:26 rhwood Exp $

PortSystem		1.0

name				firefox-x11
categories		www x11
version			1.5.0.1
platforms		darwin
maintainers		gnome-darwinports@opendarwin.org rhwood@opendarwin.org
description		Mozilla.org's popular stand-alone browser
long_description	\
				Firefox empowers you to browse faster, more safely and more \
				efficiently than with any other browser. Join more than 44 \ 					million others and make the switch today. Firefox imports \
				your Favorites, settings and other information, so you have \ 					nothing to lose.

homepage			http://www.mozilla.org/products/firefox/
master_sites		http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${version}/source/
distname			firefox-${version}-source
checksums		rmd160 6e332fb1a7e80ab56d3d6e3de3d203c8c58217bf
use_bzip2		yes
worksrcdir		mozilla

depends_lib		port:libidl1 port:glib2 \
				port:pkgconfig port:zip port:gtk2

patchfiles		patch-browser-app-mozilla.in \
				patch-browser-components-build-Makefile.in

configure.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib 
configure.args	--enable-application=browser \
				--enable-optimize \
				--disable-static \
				--enable-shared \
				--disable-tests \
				--enable-default-toolkit=gtk2 \
				--enable-xft \
				--disable-freetype2 \
				--enable-xinerama \
				--with-pthreads \
				--disable-gnomevfs \
				--enable-postscript \
				--disable-prebinding \
				--enable-debug \
				--disable-tests \
				--with-default-mozilla-five-home=${prefix}/lib/firefox \
				--with-system-jpeg=${prefix} \
				--with-system-zlib=${prefix} \
				--with-system-png=${prefix}

variant without-debug {
	configure.args-append	--disable-debug \
							--enable-strip \
							--enable-optimize='-O2'
	configure.args-delete	--enable-debug
}
	
variant with-gnome {
	configure.args-delete	--disable-gnomevfs
	configure.args-append	--enable-gnomevfs
	depends_lib-append		port:gnome-vfs
}

variant use-sys-deps {
depends_lib		lib:libIDL.a:libidl1 lib:libglib.2:glib2 \
				bin:unzip:zip lib:libgtk+-2.0:gtk2
}
