--- xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h.bak	2007-04-09 22:01:13.000000000 +0200
+++ xpcom/reflect/xptcall/src/md/unix/xptc_platforms_unixish_x86.h	2007-10-10 09:45:43.000000000 +0200
@@ -173,7 +173,7 @@
 /* Define KEEP_STACK_16_BYTE_ALIGNED if the stack needs to maintain alignment
  * in a CALL for some good reason (like ABI compliance). */
 
-#if defined(XP_MACOSX) || defined(__QNXNTO__)
+#if defined(__APPLE__) || defined(__QNXNTO__)
 /* http://developer.apple.com/documentation/DeveloperTools/Conceptual/LowLevelABI/Articles/IA32.html */
 #define KEEP_STACK_16_BYTE_ALIGNED
 #endif
--- xpcom/reflect/xptcall/src/md/unix/xptcstubs_unixish_x86.cpp.bak	2005-10-24 07:42:28.000000000 +0200
+++ xpcom/reflect/xptcall/src/md/unix/xptcstubs_unixish_x86.cpp	2007-10-10 09:45:43.000000000 +0200
@@ -104,7 +104,7 @@ PrepareAndDispatch(nsXPTCStubBase* self,
 
 #ifdef __GNUC__         /* Gnu Compiler. */
 
-#ifdef XP_MACOSX
+#ifdef __APPLE__
 /* Make sure the stack is 16-byte aligned.  Do that by aligning to 16 bytes and
  * then subtracting 4 so the three subsequent pushes result in a 16-byte aligned
  * stack. */
