# $Id: Portfile,v 1.2 2005/10/20 05:51:27 mww Exp $

PortSystem 1.0

name			gallery
version			2.0.1
categories		www
maintainers		joe@netmusician.org

description		Gallery is a web based photo album written using PHP
long_description	Gallery is a web based software product that lets you manage your \
			photos on your own website. You must have your own website with PHP \
			support in order to install and use it. With Gallery you can easily \
			create and maintain albums of photos via an intuitive interface. Photo \
			management includes automatic thumbnail creation, image resizing, \
			rotation, ordering, captioning, searching and more. Albums can have \
			read, write and caption permissions per individual authenticated user \
			for an additional level of privacy. Give accounts to your friends and \
			family and let them upload and manage their own photos on your \
			website!

homepage		http://gallery.menalto.com
master_sites		sourceforge
distname		gallery-${version}-full
checksums		md5 e2601ba687acd3a43560041988a3b2a5
platforms		darwin freebsd

depends_run		port:jhead \
			port:netpbm \
			port:unzip \
			port:ImageMagick
			
default_variants	+apache +php4 +mysql4

variant apache conflicts apache2 {
	depends_lib-append	port:apache
}

variant apache2 conflicts apache {
	depends_lib-append	port:apache2
}

variant php4 conflicts php5 {
	depends_lib-append	port:php4
}

variant php5 conflicts php4 {
	depends_lib-append	port:php5
}

variant mysql conflicts mysql4 postgresql {
	depends_lib-append	port:mysql
}

variant mysql4 conflicts mysql postgresql {
	depends_lib-append	port:mysql4
}

variant postgresql conflicts mysql mysql4 {
	depends_lib-append	port:postgresql
}

use_configure   no
build 		{}

set docpath ${destroot}${prefix}/www/data/gallery
     
destroot {
	xinstall -m 755 -d ${destroot}${prefix}/www/data/gallery
	eval file copy [glob ${workpath}/gallery2/*] ${docpath} 
}
