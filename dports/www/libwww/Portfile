# $Id$

PortSystem      1.0

name            libwww
version         5.4.0
revision        1
categories      www
platforms       darwin
maintainers     nomaintainer
description     The W3C WWW Reference Library
homepage	http://w3.org/
long_description \
    Libwww is a general-purpose Web API written in C for Unix and Windows (Win32). \
    With a highly extensible and layered API, it can accommodate many different types \
    of applications including clients, robots, etc.

master_sites    http://www.w3.org/Library/Distribution/ \
                macports:lt:lt
distname        w3c-${distname}
extract.suffix  .tgz
extract.only    ${distfiles}

depends_lib	port:openssl
distfiles-append    ltconfig13:lt \
                    ltmain13:lt

checksums       [suffix ${distname}] \
                    md5 c3734ca6caa405707e134cc8c6d7e422 \
                ltconfig13 \
                    md5 ea53f42a550c9f9e653758a8ed91574e \
                ltmain13 \
                    md5 e094ae92724c4015dbab97de151c2525

patchfiles      patch-configure.diff

post-patch {
    system "cp ${distpath}/ltconfig13 ${worksrcpath}/config/ltconfig"
    system "cp ${distpath}/ltmain13 ${worksrcpath}/config/ltmain.sh"
	reinplace "s|@@PREFIX@@|${prefix}|g" \
		configure
}

configure.args  --enable-shared \
                --enable-static \
                --with-zlib \
                --with-ssl

variant expat description {builds against expat} {
    depends_build-append    lib:libexpat.0:expat
    configure.args-append   --with-expat
}

