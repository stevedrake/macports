# $Id: Portfile,v 1.4 2005/09/20 21:01:05 toby Exp $

PortSystem 1.0
name              lighttpd
version           1.4.4
categories        www
maintainers       jstetser@icongarden.com
description       A secure, fast, compliant and flexible web-server
long_description  lighttpd is a secure, fast, compliant and very flexible\
                  web-server which has been optimized for high-performance\
                  environments. It has a very low memory footprint\
                  compared to other webservers and takes care of cpu-load.
homepage          http://www.lighttpd.net/
master_sites      ${homepage}/download/
checksums         md5 0142f34549cf326d1ee3631be665482f
depends_lib       lib:libpcre:pcre \
                  lib:libz.1:zlib

configure.args    --mandir=${prefix}/share/man

variant mysql {
   depends_lib-append    lib:libmysqlclient:mysql4
   configure.args-append --with-mysql=${prefix}/bin/mysql_config

   post-configure {
       reinplace "s|<mysql/mysql.h>|\"${prefix}/include/mysql/mysql.h\"|g" \
                 "${worksrcpath}/src/mod_mysql_vhost.c"
   }

}

variant ssl {
   depends_lib-append   bin:openssl:openssl
   configure.args-append --with-openssl=${prefix}/include/openssl
}
