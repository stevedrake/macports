# $Id: Portfile,v 1.6 2005/12/10 22:54:44 joe Exp $
PortSystem 1.0

name			mediawiki
version			1.5.2
categories		www
maintainers		joe@opendarwin.org
description		The wiki engine used by Wikipedia
long_description	MediaWiki is the collaborative editing software that runs Wikipedia, \
				the free encyclopedia, and other projects. It's designed to \
				handle a large number of users and pages without imposing too \
				rigid a structure or workflow.

homepage		http://www.mediawiki.org
master_sites		sourceforge:wikipedia
distname		mediawiki-${version}
checksums		md5 3aedde46937494bc21a5e493ea6a8ffd
platforms		darwin freebsd

depends_run		port:libiconv \
			port:jpeg \
			port:jasper \
			port:tiff \
			port:lcms \
			port:libpng \
			port:freetype \
			port:libxml2 \
			port:jbigkit \
			port:expat \
			port:fontconfig \
			port:gnughostscript \
			port:ImageMagick \
			port:pkgconfig \
			port:aspell

default_variants	+mysql4 +apache +php4
			
variant apache conflicts apache2 {
	depends_lib-append	port:apache
}

variant apache2 conflicts apache {
	depends_lib-append	port:apache2
}

variant php4 conflicts php5 {
	depends_lib-append      port:php4
}

variant php5 conflicts php4 {
	depends_lib-append	port:php5
}

variant mysql conflicts mysql4 {
	depends_lib-append	port:mysql
}

variant mysql4 conflicts mysql {
	depends_lib-append	port:mysql4
}

use_configure   no
build			{}

set docpath ${destroot}${prefix}/www/data

destroot {
	xinstall -d -m 0755 ${docpath}/mediawiki
	eval file copy [glob ${worksrcpath}/*] ${docpath}/mediawiki
}
