# $Id$

PortSystem 1.0

name			mediawiki
version			1.6.3
categories		www php
maintainers		nomaintainer@macports.org
description		The wiki engine used by Wikipedia
long_description	MediaWiki is the collaborative editing software that runs Wikipedia, \
				the free encyclopedia, and other projects. It's designed to \
				handle a large number of users and pages without imposing too \
				rigid a structure or workflow.

homepage		http://www.mediawiki.org
master_sites		sourceforge:wikipedia
distname		mediawiki-${version}
checksums		md5 89d0d6a588dce6453fb00a70598c632e
platforms		darwin freebsd

depends_run \
	port:libiconv \
	port:jpeg \
	port:jasper \
	port:tiff \
	port:lcms \
	port:libpng \
	port:freetype \
	port:libxml2 \
	port:jbigkit \
	port:expat \
	port:fontconfig \
	port:ghostscript \
	port:ImageMagick \
	port:pkgconfig \
	port:aspell

depends_lib \
	port:php5 \
	port:mysql5

variant php4 {
	depends_lib-append      port:php4
	depends_lib-delete	port:php5
}

variant mysql4 conflicts mysql3 {
	depends_lib-append	port:mysql4
	depends_lib-delete	port:mysql5
}

use_configure   no
build			{}

set docpath ${destroot}${prefix}/www/data

destroot {
	xinstall -d -m 0755 ${docpath}/mediawiki
	eval file copy [glob ${worksrcpath}/*] ${docpath}/mediawiki
}
