# $Id: Portfile,v 1.4 2005/10/14 09:22:49 mww Exp $

PortSystem 1.0
name		mod_mono
version		1.1.9.2
categories	www
platforms	darwin
maintainers	darwinports@opendarwin.org
description	an Apache plug-in for hosting the Mono System.Web classes
long_description	An Apache web server plug-in that hosts the Mono System.Web classes for running what is commonly known as ASP.NET

homepage	http://www.go-mono.com
master_sites	${homepage}/sources/mod_mono/
checksums	md5 5dd65a43b455bb0a7f33994dbf1057df
depends_lib	port:mono port:apache2
depends_run	port:xsp

configure.args	--with-mono-prefix=${prefix} \
		--with-apxs=${prefix}/apache2/bin/apxs \
		--with-apr=${prefix}/bin/apr-config \
		--with-apr-config=${prefix}/bin/apr-config \
		--mandir=${prefix}/share/man

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 CXX=/usr/bin/g++-4.0
}

post-install {
	ui_msg ""
	ui_msg "To finish the configuration of this Apache module, you must add"
	ui_msg "the following (modulo site variations) to your httpd.conf file:"
	ui_msg ""
	ui_msg "AddType application/x-asp-net .aspx .ashx .asmx .ascx .asax .config .ascx"
	ui_msg "LoadModule mono_module libexec/httpd/mod_mono.so"
	ui_msg "MonoUnixSocket /tmp/mod_mono_server"
	ui_msg {Alias /mono "/usr/share/doc/xsp/test"}
	ui_msg ""
	ui_msg "Then do the following:"
	ui_msg ""
	ui_msg "cd ${prefix}/share/doc/xsp/test"
	ui_msg "mono ${prefix}/bin/mod-mono-server.exe --root . --applications /mono:."
	ui_msg ""
	ui_msg "Finally, restart apache (if running) and point a browser at:"
	ui_msg "http://127.0.0.1/mono/index.aspx to test ASP page-serving ability"
	ui_msg ""
}
