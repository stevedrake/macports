# $Id: Portfile,v 1.1 2004/04/12 12:42:33 mww Exp $
PortSystem 1.0
name		mod_security
version		1.7.6
categories	www security
maintainers	julien.touche@touche.fr.st
description	intrusion detection and prevention engine for web applications
long_description	ModSecurity is an open source intrusion detection and \
			prevention engine for web applications. It operates \
			embedded into the web server, acting as a powerful \
			umbrella - shielding applications from attacks. \
			It supports both branches of the Apache web server.
homepage	http://www.modsecurity.org
master_sites	${homepage}/download/
platforms	darwin 
checksums	md5 2be3a3a4ac98a95580e5c01d2d5b3b88

use_configure	no

#variant apache1 {
	depends_lib	path:${prefix}/etc/apache:apache
	build.cmd	${prefix}/sbin/apxs
	set apachedir	apache
	set apachever	apache1
#}

variant apache2	{
	depends_lib	path:${prefix}/etc/apache2:apache2
	build.cmd	${prefix}/sbin/apxs
	set apachedir	apache2
	set apachever	apache2
}

build.args	-c -o ${name}.so ${apachever}/${name}.c
build.target

destroot {
	xinstall -d -m 755 ${destroot}${prefix}/libexec/${apachedir} \
		${destroot}${prefix}/share/doc/${name}
	xinstall -m 755 ${worksrcpath}/${name}.so \
		${destroot}${prefix}/libexec/${apachedir}/
	xinstall -m 644 -W ${worksrcpath} CHANGES INSTALL LICENSE README \
		${destroot}${prefix}/share/doc/${name}
}
