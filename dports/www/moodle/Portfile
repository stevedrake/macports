# $Id: Portfile,v 1.1 2005/12/22 04:44:35 joe Exp $
PortSystem		1.0

name			moodle
version			1.5.2
categories		www
maintainers		joe@opendarwin.org
description		Course management system based on social constructionism
long_description	Moodle is a course management system (CMS) - a free, Open Source software \
			package designed using sound pedagogical principles, to help educators \
			create effective online learning communities. You can use it on any \
			computer you have handy (including webhosts), yet it can scale from a \
			single-teacher site to a 40,000-student University. \
homepage		http://moodle.org
set branch		15
master_sites		http://download.moodle.org/stable${branch}
distname		moodle-latest-${branch}
extract.suffix		.tgz
checksums		md5 a6b0fa21c15ecb6d064efdb31783d92d
platforms		darwin freebsd

use_configure		no
build			{}

default_variants	+apache +mysql4 +php4

variant apache conflicts apache2 {
	depends_lib-append	port:apache
}

variant apache2 conflicts apache {
	depends_lib-append	port:apache2
}

variant php4 conflicts php5 {
	depends_lib-append 	port:php4
}

variant php5 conflicts php4 {
	depends_lib-append	port:php5
}

variant mysql conflicts mysql4 {
	depends_lib-append	port:mysql
}

variant mysql4 conflicts mysql {
	depends_lib-append	port:mysql4
}

set docpath ${destroot}${prefix}/www/data
             
destroot {
	xinstall -d -m 0755 ${docpath}/moodle
	eval file copy [glob ${workpath}/moodle/*] ${docpath}/moodle
}


