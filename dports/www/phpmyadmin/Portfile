# $Id$

PortSystem          1.0

name                phpmyadmin
set my_name         phpMyAdmin
version             3.1.3.1
categories          www php databases
maintainers         alakazam
description         A tool written in PHP intended to handle the \
                    administration of MySQL over the Web.
long_description    phpMyAdmin is a tool written in PHP intended to handle \
                    the administration of MySQL over the Web. phpMyAdmin \
                    supports a wide range of operations with MySQL. The most \
                    frequently used operations are supported by the user \
                    interface (managing databases, tables, fields, relations, \
                    indexes, users, permissions, etc), while you still have \
                    the ability to directly execute any SQL statement.
homepage            http://www.phpmyadmin.net
master_sites        sourceforge
distname            ${my_name}-${version}-all-languages
use_bzip2           yes

checksums           md5     34fe1a16cb77bb3bc1e3e4288b5bbd43 \
                    sha1    dcd42dbe889da898994589558ec99ac3bd33c89c \
                    rmd160  bc4444da65275d33467c00b381863949a8e72551

platforms           darwin freebsd

set myglob [glob -directory ${prefix}/lib -nocomplain -tails mysql*]
if {[llength ${myglob}]} {
    set mysql [lindex ${myglob} end]
} else {
    set mysql mysql5
}

depends_run         path:lib/${mysql}:${mysql} \
                    path:bin/php:php5

set docpath ${destroot}${prefix}/www

use_configure       no
build               {}

destroot {
    xinstall -d -m 0755 ${docpath}/phpmyadmin
    eval copy [glob ${worksrcpath}/*] ${docpath}/phpmyadmin
}

livecheck.distname  ${my_name}
livecheck.regex     "<title>${livecheck.distname} (\\d+(?:\\.\\d+)*) .*</title>"
