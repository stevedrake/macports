# $Id$

PortSystem          1.0

name                phpmyadmin
set my_name         phpMyAdmin
version             3.1.5
categories          www php databases
maintainers         alakazam
description         A tool written in PHP intended to handle the \
                    administration of MySQL over the Web.
long_description    phpMyAdmin is a tool written in PHP intended to handle \
                    the administration of MySQL over the Web. phpMyAdmin \
                    supports a wide range of operations with MySQL. The most \
                    frequently used operations are supported by the user \
                    interface (managing databases, tables, fields, relations, \
                    indexes, users, permissions, etc), while you still have \
                    the ability to directly execute any SQL statement.
homepage            http://www.phpmyadmin.net
master_sites        sourceforge
distname            ${my_name}-${version}-all-languages
use_bzip2           yes

checksums           md5     3f8fa9f5013f24bd31a6d7d752d90d53 \
                    sha1    e7d3964c152ba6e9b8f40e2fce2a230e7a23444c \
                    rmd160  3abdbd95c013682f69135797477a9899a36430ca

platforms           darwin freebsd

# Automatically depend on the latest mysql installed, fallback on mysql5 (r27781)
set myglob [glob -directory ${prefix}/lib -nocomplain -tails mysql*]
if {[llength ${myglob}]} {
    set mysql [lindex ${myglob} end]
} else {
    set mysql mysql5
}

depends_run         path:lib/${mysql}:${mysql} \
                    path:bin/php:php5

set docpath ${destroot}${prefix}/www

use_configure       no
build               {}

destroot {
    xinstall -d -m 0755 ${docpath}/phpmyadmin
    eval copy [glob ${worksrcpath}/*] ${docpath}/phpmyadmin
}

livecheck.distname  ${my_name}
livecheck.regex     "<title>${livecheck.distname} (\\d+(?:\\.\\d+)*) .*</title>"
