# $Id$

PortSystem          1.0

name                phpmyadmin
set my_name         phpMyAdmin
version             3.2.0.1
categories          www php databases
maintainers         alakazam
description         A tool written in PHP intended to handle the \
                    administration of MySQL over the Web.
long_description    phpMyAdmin is a tool written in PHP intended to handle \
                    the administration of MySQL over the Web. phpMyAdmin \
                    supports a wide range of operations with MySQL. The most \
                    frequently used operations are supported by the user \
                    interface (managing databases, tables, fields, relations, \
                    indexes, users, permissions, etc), while you still have \
                    the ability to directly execute any SQL statement.
homepage            http://www.phpmyadmin.net
master_sites        sourceforge
distname            ${my_name}-${version}-all-languages
use_bzip2           yes

checksums           md5     e6f19a8c286697c4dccfae574cd41826 \
                    sha1    7b1e9444fcb332b792999ac2f4bd57f3722e8531 \
                    rmd160  5f255e23849e909fecc23cc5ca92071178c1b613

platforms           darwin freebsd

# Automatically depend on the latest mysql installed, fallback on mysql5 (r27781)
set myglob [glob -directory ${prefix}/lib -nocomplain -tails mysql*]
if {[llength ${myglob}]} {
    set mysql [lindex ${myglob} end]
} else {
    set mysql mysql5
}

depends_run         path:lib/${mysql}:${mysql} \
                    path:bin/php:php5

set docpath ${destroot}${prefix}/www

use_configure       no
build               {}

destroot {
    xinstall -d -m 0755 ${docpath}/phpmyadmin
    eval copy [glob ${worksrcpath}/*] ${docpath}/phpmyadmin
}

livecheck.distname  ${my_name}
livecheck.regex     "<title>${livecheck.distname} (\\d+(?:\\.\\d+)*) .*</title>"
