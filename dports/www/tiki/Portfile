# -*- coding: utf-8; mode: tcl; tab-width: 4; truncate-lines: t; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

name                tiki
version             3.3
categories          www
maintainers         snc openmaintainer
description         php based wiki with lots of extra features
long_description    \
    TikiWiki is an open source web application which provides a     \
    full Wiki environment as well as Articles, Sections, User/Group \
    Management (including optinal LDAP interaction), Polls and      \
    Quizzes, File and Image Galleries, Forums, Comments on many     \
    areas, Weblogs, and much more.
homepage            http://tikiwiki.org

platforms           darwin
depends_run         port:php5-web port:php5-mysql

master_sites        sourceforge:tikiwiki
distname            tikiwiki-${version}
use_bzip2           yes

checksums           md5     8f567b5ab6a8cb26a330c1a8ee99e1fc \
                    sha1    623b7ce5793a3e20f8cf6392d64fbd1fb46cbb71 \
                    rmd160  9842068472a33f29e2e2c36018b6142eee9be0fb

use_configure       no

build {}

destroot    { 
    set dname tikiwiki-${version}
    file mkdir -p ${destroot}${prefix}/www
    file copy ${worksrcpath} \
        ${destroot}${prefix}/www/${name}
    system "cd ${destroot}${prefix}/www/${name} && sudo sh ./setup.sh www www && chown -R www:www *"
}

livecheck.url       http://sourceforge.net/api/file/index/project-id/64258/rss?path=%2FTikiWiki%203.x%20-Betelgeuse-
livecheck.regex     tikiwiki-(\\d+\\.\\d+)${extract.suffix}
