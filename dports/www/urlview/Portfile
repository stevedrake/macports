# $Id$

PortSystem 1.0
name                urlview
version             0.9
revision            1
categories          www
maintainers         vincent-opdarw@vinc17.org
description         URL extractor/launcher
homepage            ftp://ftp.mutt.org/mutt/contrib/
platforms           darwin

long_description    Urlview is a screen-oriented program for extracting \
                    URLs from text files.  It displays a menu from which \
                    you can launch a command to view a specific item.

master_sites        ftp://ftp.mutt.org/mutt/contrib/

checksums           md5 67731f73e69297ffd106b65c8aebb2ab \
                    sha1 e366312a7dd04eb38909a36f854c502fbe81f4be

depends_lib         port:ncurses

# ${destroot} must be used as Makefile.am doesn't take DESTDIR
# into account for the man page installation (this is a bug).
configure.args      --mandir=${destroot}${prefix}/share/man

# There are 3 problems with the url_handler.sh script:
#   * The provided script is out-of-date.
#   * It was not designed for Mac OS X.
#   * Installing it leads to a conflict with another port (tin).
# As the Mac OS X "open" command (which doesn't exist under Linux) does
# exactly what url_handler.sh is supposed to do, let's use it instead.
patch {
    cd ${workpath}/${name}-${version}
    reinplace "s|url_handler.sh|open|g" urlview.c urlview.man
}

pre-destroot {
    file mkdir "${destroot}${prefix}/share/doc/${name}"
    xinstall -m 644 AUTHORS COPYING ChangeLog README sample.urlview \
      "${destroot}${prefix}/share/doc/${name}"
}
