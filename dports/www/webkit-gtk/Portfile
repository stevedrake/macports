# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:filetype=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem	1.0

name		webkit-gtk
version		r30667
description	Apple's WebKit HTML rendering library for GTK+
long_description ${description}
maintainers	nomaintainer
categories	www gnome
platforms	darwin freebsd
homepage	http://webkit.org
master_sites    http://nightly.webkit.org/files/trunk/src/
distname	WebKit-${version}
use_bzip2	yes
checksums	\
	md5     d5047727add37bdbba6a4642b0a9c0f4 \
	sha1    262d56d842fb4a574b585b4cd6014c17bae5b491 \
	rmd160  cffbb868e2fe4c53bdf60ef695fde284b940ec4e

depends_lib	\
	port:curl \
	port:gnome-vfs \
	port:gstreamer \
	port:gtk2 \
	port:icu \
	port:libxslt \
	port:sqlite3 
depends_build	\
	port:libtool \
	port:pkgconfig

# Patches proposed in http://bugs.webkit.org/show_bug.cgi?id=17415
patchfiles	\
	patch-GNUmakefile.am.diff \
	patch-JavaScriptCore-GNUmakefile.am.diff

post-patch	{
	reinplace "s|aclocal |aclocal -I ${prefix}/share/aclocal |" ${worksrcpath}/autogen.sh
}

configure.cmd	./autogen.sh
configure.args	--enable-svg \
                --enable-video
