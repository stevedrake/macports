--- WebCore/plugins/gtk/PluginViewGtk.cpp.orig	2010-05-04 20:17:41.000000000 +0200
+++ WebCore/plugins/gtk/PluginViewGtk.cpp	2010-05-04 20:22:10.000000000 +0200
@@ -59,10 +59,13 @@
 #include "runtime_root.h"
 #include <runtime/JSLock.h>
 #include <runtime/JSValue.h>
+#include "NotImplemented.h"
 
 #include <gdkconfig.h>
 #include <gtk/gtk.h>
 
+#undef XP_UNIX
+
 #if defined(XP_UNIX)
 #include "gtk2xtbin.h"
 #define Bool int // this got undefined somewhere
@@ -440,9 +443,9 @@
         event->setDefaultHandled();
 }
 
-#if defined(XP_UNIX)
 void PluginView::handleFocusInEvent()
 {
+#if defined(XP_UNIX)
     XEvent npEvent;
     initXEvent(&npEvent);
 
@@ -452,10 +455,12 @@
     event.detail = NotifyDetailNone;
 
     dispatchNPEvent(npEvent);
+#endif
 }
 
 void PluginView::handleFocusOutEvent()
 {
+#if defined(XP_UNIX)
     XEvent npEvent;
     initXEvent(&npEvent);
 
@@ -465,8 +470,8 @@
     event.detail = NotifyDetailNone;
 
     dispatchNPEvent(npEvent);
-}
 #endif
+}
 
 void PluginView::setParent(ScrollView* parent)
 {
@@ -794,8 +799,8 @@
     }
 
     if (m_isWindowed) {
-#if defined(XP_UNIX)
         GtkWidget* pageClient = m_parentFrame->view()->hostWindow()->platformPageClient();
+#if defined(XP_UNIX)
 
         if (m_needsXEmbed) {
             // If our parent is not anchored the startup process will
