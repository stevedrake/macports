# $Id: Portfile,v 1.4 2004/04/24 16:08:22 rshaw Exp $
PortSystem 1.0

name			zopeedit
version			0.7.2
categories		www zope python
maintainers		rshaw@opendarwin.org
description		Client helper application for Zope ExternalEditor support
long_description	Configurable helper application that allows you \
					to drop into your favorite editor(s) directly from \
					the ZMI to modify Zope objects.
platforms		darwin freebsd
homepage		http://www.zope.org/Members/Caseman/ExternalEditor
master_sites	http://zope.org/Members/Caseman/ExternalEditor/${version}
distname		${name}-${version}-src
extract.suffix	.tgz
checksums		md5 e2e9be6e50a67b401e346a5097fcb7fa

# Use Python 2.3 from DarwinPorts explicitly 
set python		${prefix}/bin/python2.3

# Depends on Python
depends_build	path:${python}:python23

platform freebsd {
	extract.post_args	| gtar -xf -
}

configure {
	cd ${worksrcpath}
	reinplace "s|/usr/bin/${name}|${prefix}/bin/${name}|g" man/${name}.1
}

build.cmd		${python} setup.py
build.target	build

destroot.cmd	${python} setup.py
destroot.destdir
destroot.args	--prefix=${destroot}${prefix}
post-destroot {
	file rename ${destroot}${prefix}/bin/${name}.py \
		${destroot}${prefix}/bin/${name}
	xinstall -m 0644 ${worksrcpath}/man/${name}.1 \
		${destroot}${prefix}/share/man/man1/
}

