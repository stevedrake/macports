From bc0db762873b564d50faac4ab1bf1c85ea586d36 Mon Sep 17 00:00:00 2001
From: Markus Steinborn <gnugv_maintainer@yahoo.de>
Date: Thu, 1 Mar 2012 18:09:26 +0100
Subject: [PATCH 5/9] Add XawTextGetSink for compatibility with libXaw

Patch found at http://gitorious.org/xaw3d/xaw3d/commit/ccb1ffde090006f5a715c1e3d4da5f4d6fae05d3

Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>
---
 include/X11/Xaw3d/Text.h |    4 ++++
 src/Command.c            |    2 ++
 src/Label.c              |    2 ++
 src/Text.c               |    6 ++++++
 4 files changed, 14 insertions(+)

diff --git libXaw3d-1.6.1/include/X11/Xaw3d/Text.h libXaw3d-1.6.1/include/X11/Xaw3d/Text.h
index 42699a7..beef8ab 100644
--- libXaw3d-1.6.1/include/X11/Xaw3d/Text.h
+++ libXaw3d-1.6.1/include/X11/Xaw3d/Text.h
@@ -242,6 +242,10 @@ extern Widget XawTextGetSource(
     Widget		/* w */
 );
 
+extern Widget XawTextGetSink(
+    Widget		/* w */
+);
+
 extern XawTextPosition XawTextSearch(
     Widget			/* w */,
 #if NeedWidePrototypes
diff --git libXaw3d-1.6.1/src/Command.c libXaw3d-1.6.1/src/Command.c
index 26a40fa..18efb9a 100644
--- libXaw3d-1.6.1/src/Command.c
+++ libXaw3d-1.6.1/src/Command.c
@@ -92,6 +92,8 @@ static XtResource resources[] = {
    {XtNcornerRoundPercent, XtCCornerRoundPercent, XtRDimension,
         sizeof(Dimension), offset(command.corner_round), XtRImmediate,
 	(XtPointer) 25},
+   {XtNshadowWidth, XtCShadowWidth, XtRDimension, sizeof(Dimension),
+	offset(threeD.shadow_width), XtRImmediate, (XtPointer) 2},
    {XtNborderWidth, XtCBorderWidth, XtRDimension, sizeof(Dimension),
       XtOffsetOf(RectObjRec,rectangle.border_width), XtRImmediate,
       (XtPointer) 0}
diff --git libXaw3d-1.6.1/src/Label.c libXaw3d-1.6.1/src/Label.c
index 46b0465..e8743c5 100644
--- libXaw3d-1.6.1/src/Label.c
+++ libXaw3d-1.6.1/src/Label.c
@@ -115,6 +115,8 @@ static XtResource resources[] = {
 	offset(label.pixmap), XtRImmediate, (XtPointer)None},
     {XtNresize, XtCResize, XtRBoolean, sizeof(Boolean),
 	offset(label.resize), XtRImmediate, (XtPointer)True},
+    {XtNshadowWidth, XtCShadowWidth, XtRDimension, sizeof(Dimension),
+	offset(threeD.shadow_width), XtRImmediate, (XtPointer) 0},
     {XtNborderWidth, XtCBorderWidth, XtRDimension, sizeof(Dimension),
          XtOffsetOf(RectObjRec,rectangle.border_width), XtRImmediate,
          (XtPointer)1}
diff --git libXaw3d-1.6.1/src/Text.c libXaw3d-1.6.1/src/Text.c
index be4d592..b0e7a2c 100644
--- libXaw3d-1.6.1/src/Text.c
+++ libXaw3d-1.6.1/src/Text.c
@@ -3312,6 +3312,12 @@ XawTextGetSource(Widget w)
   return ((TextWidget)w)->text.source;
 }
 
+Widget
+XawTextGetSink(Widget w)
+{
+  return (((TextWidget)w)->text.sink);
+}
+
 void
 XawTextDisplayCaret (Widget w,
 #if NeedWidePrototypes
-- 
1.7.9.4

