# $Id$

PortSystem      1.0

name            gtk-sharp
version         1.0.10
revision        1
categories      x11 devel
platforms       darwin
maintainers     nox openmaintainer
description     Gtk bindings for the Mono .NET Development Framework

long_description \
    This is the Gtk# toolkit for Mono, an implementation \
	of the .NET Development Framework.

homepage        http://go-mono.com/
master_sites    ${homepage}sources/${name}/

checksums       md5 e21fb3c5a39374f86ba70b926311a6d0 \
                sha1 6965559e2e3b741f587a41d286935c73a2c2c437 \
                rmd160 53db7e93424b2429cf825390633ede4d7c511564

patchfiles      patch-configure-disable-gnomedb.diff

depends_lib     port:mono \
                port:glib2 \
                port:gtk2 \
                port:libxml2 \
                port:libart_lgpl \
                port:libgnomecanvas \
                port:libgnomeui \
                port:libgda \
                port:librsvg \
                port:libgtkhtml3 \
                port:vte

post-configure {
    # TODO This shouldn't be needed, we need to fix Mono dllmap library path.
    fs-traverse {f} ${worksrcpath} {
        if {[string match *.dll.config ${f}]} {
            reinplace -E "s|(target=\")|\\1${prefix}/lib/|" ${f}
        }
    }
}

destroot.args   GACUTIL_FLAGS="/package gtk-sharp /root ${destroot}${prefix}/lib"

variant gnomedb description {Enable gnomedb support} {
    patchfiles-delete   patch-configure-disable-gnomedb.diff
    depends_lib-append  port:libgnomedb
}
