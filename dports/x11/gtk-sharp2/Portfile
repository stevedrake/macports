# $Id$

PortSystem      1.0

name            gtk-sharp2
set my_name     gtk-sharp
version         2.10.3
set branch      [join [lrange [split ${version} .] 0 1] ""]
categories      x11 devel
platforms       darwin
maintainers     nox openmaintainer
description     Gtk bindings for the Mono .NET Development Framework

long_description \
    This is the Gtk# toolkit for Mono, an implementation \
	of the .NET Development Framework.

homepage        http://gtk-sharp.sourceforge.net/
master_sites    http://go-mono.com/sources/${my_name}${branch}/
distname        ${my_name}-${version}

checksums       md5 e336ea00421958413ba10859866886f3 \
                sha1 635fa6c4cde37c68a188180a2a7bee8d09945e3c \
                rmd160 d198cd160d15a554eaef76cc9f4276f311ad5526

patchfiles      patch-gdk-sharp.dll.config.in.diff \
                patch-glade-sharp.dll.config.in.diff \
                patch-glib-sharp.dll.config.in.diff \
                patch-gtk-sharp.dll.config.in.diff \
                patch-pango-sharp.dll.config.in.diff

depends_build   port:monodoc

depends_lib     port:mono \
                path:${prefix}/lib/pkgconfig/glib-2.0.pc:glib2 \
                port:atk \
                path:${prefix}/lib/pkgconfig/pango.pc:pango \
                port:gtk2

post-configure {
    # TODO This shouldn't be needed, we need to fix Mono dllmap library path.
    fs-traverse {f} ${worksrcpath} {
        if {[string match *.dll.config ${f}]} {
            reinplace -E "s|(target=\")|\\1${prefix}/lib/|" ${f}
        }
    }
}

variant debug {
    configure.args-append   --enable-debug
}

livecheck.check regex
livecheck.url   http://go-mono.com/sources-stable/
livecheck.regex ${my_name}-(2\\.10(?:\\.\\d+)*)
