# $Id$

PortSystem        1.0

name              ion3
version           3rc-20070708
categories        x11 x11-wm
maintainers       pmq@macports.org openmaintainer@macports.org

description       A tiling window manager for keyboard users
long_description  Ion is a tiling tabbed window manager designed \
                  with keyboard users in mind. It tries to address \
                  the navigation problem by dividing the screen into \
		  mutually non-overlapping frames. As in PWM, the \
		  frames may have multiple clients attached.

homepage          http://modeemi.cs.tut.fi/~tuomov/ion/
master_sites      http://iki.fi/~tuomov/dl/
distname          ion-${version}
checksums         sha1 84bc9871d9f3c6f37d614d7e9eb54021d3e866e5 \
		  rmd160 85947dc1b1dd7abd4304a42e2e946a7641cda8c4

depends_lib       lib:libX11.6:XFree86 lib:libXext.6:XFree86 \
		  port:lua port:gettext

livecheck.url	  "http://www.freebsd.org/cgi/ports.cgi?query=ion-3&stype=all"
livecheck.regex	  ">ion-(.*?)<"

configure {
    # don't put these in a patch because it changes w/ every release
    reinplace "s|/usr/local|${prefix}|g" ${worksrcpath}/system.mk
    reinplace "s|/var/cache/ion3|${prefix}/var/cache/ion3|g" ${worksrcpath}/system.mk
    reinplace "s|#PRELOAD_MODULES|PRELOAD_MODULES|g" ${worksrcpath}/system.mk
    reinplace "s|#HAS_SYSTEM_ASPRINTF|HAS_SYSTEM_ASPRINTF|g" ${worksrcpath}/system.mk
    reinplace "s|#EXTRA_LIBS|EXTRA_LIBS|g" ${worksrcpath}/system.mk
    reinplace "s|EXTRA_LIBS += -lrt||g" ${worksrcpath}/system.mk
}

build.env         INCLUDES="-I${prefix}/include" LIBS="-L${prefix}/lib"
destroot.destdir  PREFIX=${destroot}${prefix}
