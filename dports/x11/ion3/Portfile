# $Id: Portfile,v 1.3 2006/03/12 19:43:58 markd Exp $
PortSystem        1.0
name              ion3
version           3ds-20060305
categories        x11-wm x11
maintainers       darwinports@opendarwin.org
description       a tiling window manager for keyboard users
long_description  Ion is a tiling tabbed window manager designed \
                  with keyboard users in mind. It tries to address \
                  the navigation problem by dividing the screen into \
		  mutually non-overlapping frames. As in PWM, the \
		  frames may have multiple clients attached.
homepage          http://modeemi.cs.tut.fi/~tuomov/ion/
master_sites      http://modeemi.cs.tut.fi/~tuomov/ion/dl/
distname          ion-${version}
checksums         md5 b2ab5225460a106dbe17a170219e594c
depends_lib       lib:libX11.6:XFree86 \
                  lib:libXext.6:XFree86 \
                  port:lua

configure.args    --disable-shared
configure.env     CFLAGS=-I${prefix}/include \
                  LDFLAGS="-L${prefix}/lib -lintl" \
                  EXTRA_LIBS=-lintl
destroot.destdir  VARDIR=${destroot}/var/cache/ion3 \
                  LOCALEDIR=${destroot}${prefix}/share/locale \
                  prefix=${destroot}${prefix}

pre-configure {
	system "cd ${worksrcpath} && autoconf"
}

pre-build {
    set predirs { libextl libmainloop libtu
                  mod_dock mod_floatws mod_ionws
                  mod_menu mod_mgmtmode mod_panews
                  mod_query mod_sm mod_sp mod_statusbar
                  de }
    foreach x ${predirs} {
        system "cd ${worksrcpath}/${x}; make"
    }
}
