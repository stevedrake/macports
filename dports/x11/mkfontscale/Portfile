# $Id$

PortSystem          1.0

name                mkfontscale
version             1.0.5
categories          x11
platforms           darwin
maintainers         jeremyhu
description         X11 mkfontscale
long_description    	Create an index of scalable font files for X

homepage            http://www.x.org
master_sites        ${homepage}/pub/individual/app/

checksums           md5     5e6e210b70adfef1264b0212aab1f758 \
                    sha1    ad0d57b9ad7b6626cb6ab4c2c137ca052708f973 \
                    rmd160  18423c211b516c612db8e3ea598df37b6a0cf8aa
use_bzip2	    yes
use_parallel_build  yes

depends_build \
	port:pkgconfig \
	port:xorg-xproto

depends_lib \
	lib:libfontenc.1:xorg-libfontenc \
	port:freetype \
	port:zlib

livecheck.check regex
livecheck.url   [lindex ${master_sites} 0]?C=M&O=D
livecheck.regex ${name}-(\\d+(?:\\.\\d+)*)

platform macosx {
	if {${os.major} < 9 && ![file exists ${prefix}/lib/pkgconfig/fontenc.pc]} {
		configure.env-append \
			MKFONTSCALE_CFLAGS="-I${x11prefix}/include `pkg-config --cflags freetype2`" \
			MKFONTSCALE_LIBS="-L${x11prefix}/lib -lfontenc `pkg-config --libs freetype2`"
	}
}

