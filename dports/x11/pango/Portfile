# $Id$

PortSystem      1.0
name            pango
version         1.16.5
categories      x11
maintainers     ryandesign
homepage        http://www.pango.org/
master_sites    gnome:sources/pango/[strsed ${version} {/\.[0-9]*$//}]
platforms       darwin
use_bzip2       yes

description \
	Framework for the layout and rendering of i18n text

long_description \
	The goal of the Pango project is to provide an \
	open-source framework for the layout and rendering \
	of internationalized text.

checksums \
	md5 d8d7da2ab854f6e257ec06bf552a6114 \
	sha1 a23899b16a95294dfa739825c81f3858787127e8 \
	rmd160 98f38b2f8062e8f11e95a22824fa8c89664ffbb3

depends_lib \
	port:glib2 \
	lib:libX11.6:XFree86 \
	port:Xft2 \
	port:cairo \
	port:fontconfig

patchfiles \
	patch-ltmain.sh

configure.cppflags-append \
	-no-cpp-precomp

configure.ldflags-append \
	-no-undefined \
	-bind_at_load

configure.args \
	--mandir=${prefix}/share/man \
	--enable-cairo

post-destroot {
	system "install -o root -m 755 -d \
		${destroot}${prefix}/etc/pango"
	system "cp ${worksrcpath}/modules/pangorc \
		${destroot}${prefix}/etc/pango"
	system "cp ${worksrcpath}/pango/pangox.aliases \
		${destroot}${prefix}/etc/pango" 
	reinplace "s|\\.\\./modules/|${prefix}/etc/pango/|g" \
		${destroot}/${prefix}/etc/pango/pangorc
	system "env LANG=C DYLD_LIBRARY_PATH=${destroot}${prefix}/lib \
		${destroot}${prefix}/bin/pango-querymodules ${destroot}${prefix}/lib/pango/1.6.0/modules/*.so \
		>${destroot}${prefix}/etc/pango/pango.modules"
	reinplace s|${destroot}||g ${destroot}${prefix}/etc/pango/pango.modules
}

livecheck.check     freshmeat
