# $Id$

PortSystem 1.0
name		pango
version		1.16.1
revision	1
categories	x11
maintainers	nomaintainer@macports.org
description	Framework for the layout and rendering of i18n text
platforms	darwin

long_description The goal of the Pango project is to provide an \
		 open-source framework for the layout and rendering \
		 of internationalized text.

master_sites	gnome:sources/pango/1.16

checksums	md5 4aa720633e53701a652f27700a7946dd \
		sha1 75b48b1fbcf07f5d264c706477d7dfb7cb1b2583 \
		rmd160 c97315a5685fc6fa3fc70638de6ef24e9d2739b9

use_bzip2	yes

depends_lib	port:glib2 lib:libX11.6:XFree86 port:Xft2 port:cairo port:fontconfig

patchfiles	patch-ltmain.sh

configure.env	CPPFLAGS="-no-cpp-precomp" \
		LDFLAGS="-no-undefined -bind_at_load -L${prefix}/lib"

configure.args	--mandir=${prefix}/share/man --enable-cairo

post-destroot	{ system "install -o root -m 755 -d \
		    ${destroot}${prefix}/etc/pango"
		  system "cp ${worksrcpath}/modules/pangorc \
		    ${destroot}${prefix}/etc/pango"
		  system "cp ${worksrcpath}/pango/pangox.aliases \
		    ${destroot}${prefix}/etc/pango" 
		  reinplace "s|\\.\\./modules/|${prefix}/etc/pango/|g" \
		    ${destroot}/${prefix}/etc/pango/pangorc
		  system "env LANG=C DYLD_LIBRARY_PATH=${destroot}${prefix}/lib \
		    ${destroot}${prefix}/bin/pango-querymodules ${destroot}${prefix}/lib/pango/1.6.0/modules/*.so >${destroot}${prefix}/etc/pango/pango.modules"
		  reinplace s|${destroot}||g ${destroot}${prefix}/etc/pango/pango.modules }
