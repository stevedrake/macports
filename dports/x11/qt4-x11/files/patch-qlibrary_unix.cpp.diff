--- src/corelib/plugin/qlibrary_unix.cpp.orig	2008-02-20 19:25:57.000000000 -0700
+++ src/corelib/plugin/qlibrary_unix.cpp	2008-02-20 19:26:36.000000000 -0700
@@ -43,7 +43,7 @@
 
 #ifndef QT_NO_LIBRARY
 
-#ifdef Q_OS_MAC
+#ifdef Q_WS_MAC
 #  include <private/qcore_mac_p.h>
 #endif
 
@@ -190,7 +190,7 @@
             pHnd = dlopen(QFile::encodeName(attempt), dlFlags);
         }
     }
-#ifdef Q_OS_MAC
+#ifdef Q_WS_MAC
     if (!pHnd) {
         if (CFBundleRef bundle = CFBundleGetBundleWithIdentifier(QCFString(fileName))) {
             QCFType<CFURLRef> url = CFBundleCopyExecutableURL(bundle);
@@ -220,7 +220,7 @@
     return true;
 }
 
-#ifdef Q_OS_MAC
+#ifdef Q_WS_MAC
 Q_CORE_EXPORT void *qt_mac_resolve_sys(void *handle, const char *symbol)
 {
     return dlsym(handle, symbol);
