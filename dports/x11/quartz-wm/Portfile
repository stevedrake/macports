# $Id: Portfile 46927 2009-02-17 23:02:35Z jeremyhu@macports.org $

PortSystem 1.0

name		quartz-wm
version		1.0.2
categories	x11
maintainers	jeremyhu openmaintainer
description     Apple's Window Manager for X11
homepage	http://xquartz.macosforge.org
platforms	macosx
long_description quartz-wm is Apple's closed source window-manager.
master_sites	${homepage}/downloads

distfiles	quartz-wm-${version}-Tiger.bz2 quartz-wm-${version}-Leopard.bz2

checksums           quartz-wm-1.0.2-Tiger.bz2 \
                    md5     543aa7ee5a6f99de0acf957c22d8bc18 \
                    sha1    874158c214ceb6a67d2a37aac72ea1469dceed40 \
                    rmd160  80753403afa5805ed901b3ce8d381e211c97546b \
                    quartz-wm-1.0.2-Leopard.bz2 \
                    md5     89fecc32d1dc9c1fa53d8d27d98c85b6 \
                    sha1    101b8ffb8a5aa4dd6774b49c28b1f54f4ccf1592 \
                    rmd160  8b707ec6a60229e9a939ff33851c18534aca2fa0

use_bzip2	yes

depends_lib     port:xorg-libXinerama \
                port:xorg-libAppleWM

use_configure no
extract         { 
	system "mkdir -p ${worksrcpath}"
	file copy ${distpath}/quartz-wm-${version}-Tiger.bz2 ${worksrcpath}
	file copy ${distpath}/quartz-wm-${version}-Leopard.bz2 ${worksrcpath}
	system "cd ${worksrcpath} && bunzip2 quartz-wm-${version}-Tiger.bz2 && bunzip2 quartz-wm-${version}-Leopard.bz2"
}

build           { }

destroot        {
	xinstall -d -m 755 ${destroot}${prefix}/bin
	if {[rpm-vercomp ${os.version} 9] < 0} {
		xinstall -m 755 ${worksrcpath}/quartz-wm-${version}-Tiger ${destroot}${prefix}/bin/quartz-wm
	} else {
		xinstall -m 755 ${worksrcpath}/quartz-wm-${version}-Leopard ${destroot}${prefix}/bin/quartz-wm
	}
}
