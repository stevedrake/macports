# $Id$

PortSystem 1.0

name            rox-filer
version		2.6.1
categories	x11 rox
platforms	darwin freebsd linux
maintainers     afb@macports.org
description     fast and powerful file manager
long_description \
ROX-Filer is a fast and powerful graphical file manager. It has full \
drag-and-drop support and background file operations, and is highly \
configurable. It can also act as a pinboard, allowing you to pin \
frequently used files to the desktop background.
homepage        http://rox.sourceforge.net/desktop/ROX-Filer
master_sites    sourceforge:rox
use_bzip2	yes
checksums       md5 e7f7b0b8afbbdf3132ff3af043ee213c \
		sha1 5364ac260970ecafa58f92892becf8104db025a3 \
		rmd160 94a3320883c49066072d44f25f417e20739711ca

depends_lib	port:shared-mime-info port:libxml2 port:glib2 port:gtk2

use_configure		no
universal_variant	no

build.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
build		{ system "cd ${worksrcpath}; ./ROX-Filer/AppRun --compile" }

destroot {
	xinstall -d ${destroot}${prefix}/etc/xdg/rox.sourceforge.net
	copy ${worksrcpath}/Choices/MIME-types ${destroot}${prefix}/etc/xdg/rox.sourceforge.net
	xinstall -d ${destroot}${prefix}/share/mime/packages
	copy ${worksrcpath}/rox.xml ${destroot}${prefix}/share/mime/packages
	xinstall -d ${destroot}${prefix}/apps
	copy ${worksrcpath}/ROX-Filer ${destroot}${prefix}/apps
	xinstall -m 755 ${filespath}/rox.sh.in ${destroot}${prefix}/bin/rox
	reinplace "s,@@APPDIR@@,${prefix}/apps," ${destroot}${prefix}/bin/rox
	xinstall ${worksrcpath}/rox.1 ${destroot}${prefix}/share/man/man1
	ln -s rox.1 ${destroot}${prefix}/share/man/man1/ROX-Filer.1
}

# not in mtree: ${prefix}/apps
destroot.violate_mtree	yes
