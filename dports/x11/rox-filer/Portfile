# $Id$

PortSystem 1.0

name            rox-filer
version         2.7.1
categories      x11 rox
platforms       darwin freebsd linux
maintainers     afb@macports.org
description     fast and powerful file manager
long_description \
ROX-Filer is a fast and powerful graphical file manager. It has full \
drag-and-drop support and background file operations, and is highly \
configurable. It can also act as a pinboard, allowing you to pin \
frequently used files to the desktop background.
homepage        http://rox.sourceforge.net/desktop/ROX-Filer
master_sites    sourceforge:rox
use_bzip2       yes
checksums       md5 6302280f57d1f02c07da5637a2609a4f \
                sha1 f79acf776d2e3eb757aed1c2aa6cffa7fb901f20 \
                rmd160 f1face1871d641b7bea4b66a5de9a9a78ea7a25a

depends_lib     port:shared-mime-info port:libxml2 port:glib2 port:gtk2

use_configure		no
universal_variant	no

build.env	CPPFLAGS=-I${prefix}/include LDFLAGS=-L${prefix}/lib
build		{ system "cd ${worksrcpath}; ./ROX-Filer/AppRun --compile" }

destroot {
	xinstall -d ${destroot}${prefix}/etc/xdg/rox.sourceforge.net
	copy ${worksrcpath}/Choices/MIME-types ${destroot}${prefix}/etc/xdg/rox.sourceforge.net
	xinstall -d ${destroot}${prefix}/share/mime/packages
	copy ${worksrcpath}/rox.xml ${destroot}${prefix}/share/mime/packages
	xinstall -d ${destroot}${prefix}/apps
	copy ${worksrcpath}/ROX-Filer ${destroot}${prefix}/apps
	xinstall -m 755 ${filespath}/rox.sh.in ${destroot}${prefix}/bin/rox
	reinplace "s,@@APPDIR@@,${prefix}/apps," ${destroot}${prefix}/bin/rox
	xinstall ${worksrcpath}/rox.1 ${destroot}${prefix}/share/man/man1
	ln -s rox.1 ${destroot}${prefix}/share/man/man1/ROX-Filer.1
}

# not in mtree: ${prefix}/apps
destroot.violate_mtree	yes
