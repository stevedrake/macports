# $Id$

PortSystem      1.0
name            rxvt-unicode
version         8.4
categories      x11
maintainers     pesco@gmx.de
description     Unicode-aware rxvt clone.
long_description \
                rxvt-unicode is a clone of the well-known terminal \
                emulator rxvt. Some of it's main features over rxvt are \
                use of UCS-2 or UCS-4 to store text internally, \
                locale-correct in- and output, stability, \
                completely flicker-free \
                display, support for Xft and core fonts in any \
                combination, etc.
homepage        http://software.schmorp.de/pkg/rxvt-unicode.html

master_sites    http://dist.schmorp.de/rxvt-unicode/ \
                http://dist.schmorp.de/rxvt-unicode/Attic/
depends_lib     lib:libX11.6:XFree86 \
                port:expat \
                port:fontconfig \
                port:freetype \
                port:ncursesw \
                port:perl5.8 \
                port:pkgconfig \
                port:render \
                port:Xft2 \
                port:xrender \
                port:zlib
use_bzip2       yes
checksums       md5 d15ba0ea7cb54ce7a2a41650e2a5e6ab \
                sha1 f07171283af57cd615b0a43a30641e4658aa7e28 \
                rmd160 1fa40357a1ecacade007aad231c2e9be85b883a9

configure.args  --enable-everything --with-codeset=all \
                --disable-utmp --disable-afterimage \
                --mandir=${prefix}/share/man

destroot.env    TERMINFO=${destroot}${prefix}/share/terminfo
destroot.violate_mtree  yes
pre-destroot {
    file mkdir ${destroot}${prefix}/share/terminfo
    move ${worksrcpath}/INSTALL ${worksrcpath}/INSTALL_
}
post-destroot {
    move ${worksrcpath}/INSTALL_ ${worksrcpath}/INSTALL
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/etc
    xinstall -m 644 -W ${worksrcpath} COPYING Changes INSTALL README.FAQ README.configure ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath}/doc/etc rxvt-unicode.termcap rxvt-unicode.terminfo ${destroot}${prefix}/share/doc/${name}/etc
}

platform darwin {
    post-destroot {
        file mkdir ${destroot}/usr/share/terminfo
        system "TERMINFO=${destroot}/usr/share/terminfo /usr/bin/tic ${worksrcpath}/doc/etc/rxvt-unicode.terminfo"
    }
}
