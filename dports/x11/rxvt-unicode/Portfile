# $Id$

PortSystem      1.0

name            rxvt-unicode
version         9.05
categories      x11
maintainers     nomaintainer
description     Unicode-aware rxvt clone.
long_description \
                rxvt-unicode is a clone of the well-known terminal \
                emulator rxvt. Some of it's main features over rxvt are \
                use of UCS-2 or UCS-4 to store text internally, \
                locale-correct in- and output, stability, \
                completely flicker-free \
                display, support for Xft and core fonts in any \
                combination, etc.
platforms       darwin
homepage        http://software.schmorp.de/pkg/rxvt-unicode.html
master_sites    http://dist.schmorp.de/rxvt-unicode/ \
                http://dist.schmorp.de/rxvt-unicode/Attic/
use_bzip2       yes
checksums       md5 bf7cbc6440346425c9e9773d213c304f \
                sha1 758d57a88c3521f780bcd21c70d3995f53a2f6e3 \
                rmd160 0f4343a9aa0a8b26d10c6049c1afca2cc7569fc3

depends_lib     lib:libX11.6:XFree86 \
                port:expat \
                port:fontconfig \
                port:freetype \
                port:ncursesw \
                port:perl5.8 \
                port:pkgconfig \
                port:render \
                port:Xft2 \
                port:xrender \
                port:zlib

configure.args  --enable-everything --with-codeset=all \
                --disable-utmp --disable-afterimage \
                --mandir=${prefix}/share/man

use_parallel_build  yes

destroot.env    TERMINFO=${destroot}${prefix}/share/terminfo
destroot.violate_mtree  yes
pre-destroot {
    xinstall -m 755 -d ${destroot}${prefix}/share/terminfo
    move ${worksrcpath}/INSTALL ${worksrcpath}/INSTALL_
}
post-destroot {
    move ${worksrcpath}/INSTALL_ ${worksrcpath}/INSTALL
    xinstall -m 755 -d ${destroot}${prefix}/share/doc/${name}/etc
    xinstall -m 644 -W ${worksrcpath} COPYING Changes INSTALL README.FAQ README.configure ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 -W ${worksrcpath}/doc/etc rxvt-unicode.termcap rxvt-unicode.terminfo ${destroot}${prefix}/share/doc/${name}/etc
}

platform darwin {
    post-destroot {
        xinstall -m 755 -d ${destroot}/usr/share/terminfo
        system "TERMINFO=${destroot}/usr/share/terminfo /usr/bin/tic ${worksrcpath}/doc/etc/rxvt-unicode.terminfo"
    }
}
