# $Id$

PortSystem              1.0

name                    winetricks
version                 20080328
categories              x11
maintainers             ryandesign
homepage                http://www.kegel.com/wine/
master_sites            ${homepage}
platforms               darwin
distname                ${name}
dist_subdir             ${name}/${version}
extract.suffix
extract.mkdir           yes
use_configure           no
universal_variant       no

description \
    downloads and installs various redistributable runtime libraries

long_description \
    ${name} can help you prepare your system for Windows applications \
    that mistakenly assume all users' systems have all the needed \
    redistributable runtime libraries or fonts.

checksums \
    md5 1369ebf1129c3315ec5e1fa491a8a2a3 \
    sha1 f2568ab497fd1d0b61f6dceb8a3feac547836d83 \
    rmd160 d1ea0b7e07d1aebe92f6ab02e46df394d154f66c

patchfiles \
    patch-x11prefix.diff

# wget is required until we write and submit upstream a patch to allow it to use curl instead of wget
depends_run \
    port:cabextract \
    port:wget \
    port:wine

# coreutils is required until we write and submit upstream a patch to let it use openssl dgst -sha1 instead of sha1sum
platform darwin {
    depends_run-append \
        port:coreutils
    patchfiles-append \
        patch-gsha1sum.diff
}

extract {
    copy ${distpath}/${name} ${worksrcpath}
}

build {
    reinplace "s%@X11PREFIX@%${x11prefix}%" ${worksrcpath}/${name}
}

destroot {
    xinstall -m 755 ${worksrcpath}/${name} ${destroot}${prefix}/bin/${name}
}


livecheck.check         regex
livecheck.url           [lindex ${master_sites} 0]${name}
livecheck.regex         {Winetricks version (\d+)}
