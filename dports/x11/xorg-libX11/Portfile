# $Id$

PortSystem 1.0
PortGroup archcheck 1.0

name		xorg-libX11
version		1.3.4
categories	x11 devel
maintainers	jeremyhu openmaintainer
description	X.org libX11
homepage	http://www.x.org
platforms	darwin macosx
long_description libX11 is the main library used by X Window System applications to communicate with the X server.
master_sites	 http://xorg.freedesktop.org/archive/individual/lib/

distname	libX11-${version}
checksums           md5     f65c9c7ecbfb64c19dbd7927160d63fd \
                    sha1    5aab6dc8ed5ec0e86419626715efc3edd34d1db4 \
                    rmd160  7a4971e40c608862cf2a2b726868ff7c87d6589b
use_bzip2	yes
use_parallel_build      yes

depends_build   port:pkgconfig \
		port:xorg-util-macros \
                port:xorg-xtrans \
                port:xorg-bigreqsproto \
                port:xorg-xcmiscproto \
                port:xorg-xextproto \
                port:xorg-xf86bigfontproto \
                port:xorg-inputproto

depends_lib     port:xorg-libXdmcp \
                port:xorg-libXau \
                port:xorg-xproto \
                port:xorg-kbproto

archcheck.files lib/libXdmcp.dylib \
                lib/libXau.dylib

configure.env-append RAWCPP=${configure.cpp}

# Depending on ghostscript for the PDF documentation creates a dependency
# loop, so we just don't build the specs. #23413
configure.args  --without-xcb --disable-specs
variant x11_xcb description "use XCB for low-level protocol implementation" {
	depends_lib-append port:xorg-libxcb
	configure.args-delete --without-xcb
	configure.args-append --with-xcb
}

build.args V=1

livecheck.type  regex
livecheck.url   [lindex ${master_sites} 0]?C=M&O=D
livecheck.regex libX11-(\\d+(?:\\.\\d+)*)
