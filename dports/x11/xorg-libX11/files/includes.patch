diff --git a/modules/im/ximcp/Makefile.am b/modules/im/ximcp/Makefile.am
index 914ca3e..0dc8dfb 100644
--- a/modules/im/ximcp/Makefile.am
+++ b/modules/im/ximcp/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE -DXIM_t -DTRANS_CLIENT
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE -DXIM_t -DTRANS_CLIENT \
 	$(MALLOC_ZERO_CFLAGS)
 
 if XLIB_LOADABLE_I18N
diff --git a/modules/lc/Utf8/Makefile.am b/modules/lc/Utf8/Makefile.am
index d7b096b..422b5dc 100644
--- a/modules/lc/Utf8/Makefile.am
+++ b/modules/lc/Utf8/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE \
 	$(MALLOC_ZERO_CFLAGS)
 
 if XLIB_LOADABLE_I18N
diff --git a/modules/lc/def/Makefile.am b/modules/lc/def/Makefile.am
index 9e9a1a6..fab191e 100644
--- a/modules/lc/def/Makefile.am
+++ b/modules/lc/def/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
-	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE
+	$(XDMCP_CFLAGS)
 
 if XLIB_LOADABLE_I18N
 
diff --git a/modules/lc/gen/Makefile.am b/modules/lc/gen/Makefile.am
index 2937cb1..be64972 100644
--- a/modules/lc/gen/Makefile.am
+++ b/modules/lc/gen/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
-	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE
+	$(XDMCP_CFLAGS)
 
 if XLIB_LOADABLE_I18N
 
diff --git a/modules/lc/xlocale/Makefile.am b/modules/lc/xlocale/Makefile.am
index be8dd41..d48d2e9 100644
--- a/modules/lc/xlocale/Makefile.am
+++ b/modules/lc/xlocale/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
-	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE
+	$(XDMCP_CFLAGS)
 
 if XLIB_LOADABLE_I18N
 
diff --git a/modules/om/generic/Makefile.am b/modules/om/generic/Makefile.am
index 043ee60..f153b8b 100644
--- a/modules/om/generic/Makefile.am
+++ b/modules/om/generic/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -7,10 +7,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
 	-I$(top_srcdir)/src \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE \
 	$(MALLOC_ZERO_CFLAGS)
 
 if XLIB_LOADABLE_I18N
diff --git a/src/Makefile.am b/src/Makefile.am
index 26d8e27..51e1e06 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -8,7 +8,7 @@ lib_LTLIBRARIES=libX11.la
 BUILT_SOURCES=ks_tables.h
 CLEANFILES=ks_tables.h ks_tables_h
 
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -16,10 +16,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE -DX11_t -DTRANS_CLIENT
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE -DX11_t -DTRANS_CLIENT \
 	$(XMALLOC_ZERO_CFLAGS)
 
 #
diff --git a/src/xcms/Makefile.am b/src/xcms/Makefile.am
index dac620e..1f1b51d 100644
--- a/src/xcms/Makefile.am
+++ b/src/xcms/Makefile.am
@@ -1,6 +1,6 @@
 noinst_LTLIBRARIES = libxcms.la
 
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -9,10 +9,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
 	-I$(top_srcdir)/src \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE \
 	$(XMALLOC_ZERO_CFLAGS)
 
 libxcms_la_SOURCES = \
diff --git a/src/xkb/Makefile.am b/src/xkb/Makefile.am
index d543154..0141836 100644
--- a/src/xkb/Makefile.am
+++ b/src/xkb/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -6,10 +6,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xcms \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE \
 	$(XMALLOC_ZERO_CFLAGS)
 
 noinst_LTLIBRARIES = libxkb.la
diff --git a/src/xlibi18n/Makefile.am b/src/xlibi18n/Makefile.am
index 9582a65..fa5a1c0 100644
--- a/src/xlibi18n/Makefile.am
+++ b/src/xlibi18n/Makefile.am
@@ -1,4 +1,4 @@
-AM_CFLAGS= \
+AM_CPPFLAGS= \
 	-I$(top_srcdir)/include \
 	-I$(top_srcdir)/include/X11 \
 	-I$(top_builddir)/include \
@@ -7,10 +7,12 @@ AM_CFLAGS= \
 	-I$(top_srcdir)/src/xkb \
 	-I$(top_srcdir)/src/xlibi18n \
 	-I$(top_srcdir)/src \
+	-D_BSD_SOURCE
+
+AM_CFLAGS= \
 	$(X11_CFLAGS) \
 	$(BIGFONT_CFLAGS) \
 	$(XDMCP_CFLAGS) \
-	-D_BSD_SOURCE \
 	$(XMALLOC_ZERO_CFLAGS)
 
 noinst_LTLIBRARIES = libi18n.la
