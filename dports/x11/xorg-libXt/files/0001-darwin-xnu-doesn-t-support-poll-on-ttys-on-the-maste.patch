From b798093fc6cbcf35c095f3401586d2741adcd2cd Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston <jeremyhu@freedesktop.org>
Date: Fri, 11 Dec 2009 17:04:23 -0800
Subject: [PATCH] darwin: xnu doesn't support poll on ttys on the master side.

<rdar://problem/7360546>

Signed-off-by: Jeremy Huddleston <jeremyhu@freedesktop.org>
---
 configure.ac |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/configure.ac b/configure.ac
index 077cd4c..5fdef59 100755
--- a/configure.ac
+++ b/configure.ac
@@ -61,9 +61,8 @@ AC_CHECK_HEADER([alloca.h], AC_DEFINE(INCLUDE_ALLOCA_H, 1, [Define to 1 if Xallo
 
 # Map function checks to old Imake #defines
 case $host_os in
-	# darwin has poll() but can't be used to poll character devices
-	# darwin10 (SnowLeopard) should be tested as well once released
-	darwin7*) ;; darwin8*) ;; darwin9*) ;;
+	# darwin has poll() but can't be used to poll character devices (atleast through SnowLeopard)
+	darwin*) ;;
 	*)
 		AC_CHECK_FUNC(poll, AC_DEFINE(USE_POLL,1,
 	        	[Define to 1 if you have the "poll" function.]))
-- 
1.6.5.3

