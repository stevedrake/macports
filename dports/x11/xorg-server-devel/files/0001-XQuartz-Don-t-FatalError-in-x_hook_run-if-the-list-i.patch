From 6f6a99abc12ddee82898fdabfb50c17e90e094b9 Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston <jeremyhu@freedesktop.org>
Date: Wed, 13 Jan 2010 14:39:54 -0800
Subject: [PATCH] XQuartz: Don't FatalError in x_hook_run if the list is empty

Signed-off-by: Jeremy Huddleston <jeremyhu@freedesktop.org>
---
 hw/xquartz/xpr/x-hook.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/hw/xquartz/xpr/x-hook.c b/hw/xquartz/xpr/x-hook.c
index 03e7f85..5b850fe 100644
--- a/hw/xquartz/xpr/x-hook.c
+++ b/hw/xquartz/xpr/x-hook.c
@@ -79,6 +79,9 @@ X_PFX (hook_run) (x_list *lst, void *arg)
     void **data;
     int length, i;
 
+    if(!lst)
+        return;
+
     length = X_PFX (list_length) (lst);
     fun = xalloc (sizeof (x_hook_function *) * length);
     data = xalloc (sizeof (void *) * length);
-- 
1.6.6.1

