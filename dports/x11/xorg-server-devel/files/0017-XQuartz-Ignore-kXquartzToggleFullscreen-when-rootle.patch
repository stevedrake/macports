From 247debfb2118f1fb61bea2bfe7df780f5bc5da9a Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston <jeremyhu@apple.com>
Date: Sun, 25 Jul 2010 22:29:11 -0700
Subject: [PATCH] XQuartz: Ignore kXquartzToggleFullscreen when rootless

Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>
---
 hw/xquartz/darwinEvents.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git xorg-server-1.8.99.905/hw/xquartz/darwinEvents.c xorg-server-1.8.99.905/hw/xquartz/darwinEvents.c
index 147b32a..7b34b8a 100644
--- xorg-server-1.8.99.905/hw/xquartz/darwinEvents.c
+++ xorg-server-1.8.99.905/hw/xquartz/darwinEvents.c
@@ -238,8 +238,8 @@ static void DarwinEventHandler(int screenNum, InternalEvent *ie, DeviceIntPtr de
             
         case kXquartzToggleFullscreen:
             DEBUG_LOG("kXquartzToggleFullscreen\n");
-            if (quartzEnableRootless) 
-                QuartzSetFullscreen(!quartzHasRoot);
+            if(quartzEnableRootless) 
+                ErrorF("Ignoring kXquartzToggleFullscreen because of rootless mode.");
             else if (quartzHasRoot)
                 QuartzHide();
             else
-- 
1.5.6.6

