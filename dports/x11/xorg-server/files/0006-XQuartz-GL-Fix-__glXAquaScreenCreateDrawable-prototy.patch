From c7846bf1b2cc78a7181dab3fb712c48c6684a29d Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston <jeremyhu@apple.com>
Date: Tue, 11 May 2010 09:49:34 -0700
Subject: [PATCH 06/11] XQuartz GL: Fix __glXAquaScreenCreateDrawable prototype

Fixes regression introduced in 9de0e31746d5f0d9d39d11c94ec3cbc04a9935fc

Signed-off-by: Jeremy Huddleston <jeremyhu@apple.com>
Reviewed-by: Keith Packard <keithp@keithp.com>
Signed-off-by: Keith Packard <keithp@keithp.com>
(cherry picked from commit ba1f1f9d9e48226f1ef6b3222a8d92fc969d6560)
---
 hw/xquartz/GL/indirect.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

diff --git xorg-server-1.8.2/hw/xquartz/GL/indirect.c xorg-server-1.8.2/hw/xquartz/GL/indirect.c
index ad9ebbd..8092cfa 100644
--- xorg-server-1.8.2/hw/xquartz/GL/indirect.c
+++ xorg-server-1.8.2/hw/xquartz/GL/indirect.c
@@ -169,7 +169,7 @@ void warn_func(void * p1, char *format, ...);
 
 // some prototypes
 static __GLXscreen * __glXAquaScreenProbe(ScreenPtr pScreen);
-static __GLXdrawable * __glXAquaScreenCreateDrawable(__GLXscreen *screen, DrawablePtr pDraw, int type, XID drawId, __GLXconfig *conf);
+static __GLXdrawable * __glXAquaScreenCreateDrawable(ClientPtr client, __GLXscreen *screen, DrawablePtr pDraw, XID drawId, int type, XID glxDrawId, __GLXconfig *conf);
 
 static void __glXAquaContextDestroy(__GLXcontext *baseContext);
 static int __glXAquaContextMakeCurrent(__GLXcontext *baseContext);
@@ -639,10 +639,12 @@ static void __glXAquaDrawableDestroy(__GLXdrawable *base) {
 }
 
 static __GLXdrawable *
-__glXAquaScreenCreateDrawable(__GLXscreen *screen,
+__glXAquaScreenCreateDrawable(ClientPtr client,
+                              __GLXscreen *screen,
 			      DrawablePtr pDraw,
-			      int type,
 			      XID drawId,
+			      int type,
+			      XID glxDrawId,
 			      __GLXconfig *conf) {
   __GLXAquaDrawable *glxPriv;
 
@@ -653,7 +655,7 @@ __glXAquaScreenCreateDrawable(__GLXscreen *screen,
 
   memset(glxPriv, 0, sizeof *glxPriv);
 
-  if(!__glXDrawableInit(&glxPriv->base, screen, pDraw, type, drawId, conf)) {
+  if(!__glXDrawableInit(&glxPriv->base, screen, pDraw, type, glxDrawId, conf)) {
     xfree(glxPriv);
     return NULL;
   }
-- 
1.7.2.1

