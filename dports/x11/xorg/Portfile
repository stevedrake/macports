# $Id: Portfile,v 1.3 2004/10/12 08:47:23 jkh Exp $

PortSystem 1.0
name		xorg
version		X11R6.8.1
categories	x11
maintainers	waqar@opendarwin.org
description	The X Window System
long_description	\
	X11, or X, is a vendor-neutral, system-architecture neutral 	\
	network-transparent window system and user interface standard. 	\
	In other words, it's a GUI for UNIX. X can use your network -- 	\
	you may run CPU-intensive programs on high powered workstations \
	and display the user interface (the windows) on inexpensive 	\
	desktop machines.

platforms	darwin
homepage	http://www.x.org
master_sites    http://freedesktop.org/~xorg/${version}/src/

distfiles
checksums

array set checksum { \
	1 e352319d423391ff2c03bb7f81fe8d2b \
	2 6ba36becf1133c61a88c92e1d60c19ed \
	3 8578e566e909e7c40300f44b6f0e88d3 \
	4 2316b7c7f6fd28f2d579d84205f5ea1b \
	5 d96a6ea1fc46f5ba22ee801dc68967ca \
	6 13d9a1ebf811261434eb8a771d826c3c \
	7 2418e7d0fb3267ea53ae4e17a108eeb6 \
}

for {set i 1} {$i <= 7} {incr i} {
	set filename ${version}-src${i}${extract.suffix}
	distfiles-append ${filename}
	checksums-append ${filename} md5 $checksum($i)
}

worksrcdir 	xc

configure	{
	set cfpath ${worksrcpath}/config/cf
	file copy -force ${cfpath}/xorgsite.def ${cfpath}/host.def
}

build.target	World
destroot.target install install.man

variant darwin 	{
	pre-configure {
		set hw ${worksrcpath}/programs/Xserver/hw
	  	reinplace "s|/Applications|/Applications/DarwinPorts|g"	\
	    		${hw}/darwin/quartz/Imakefile 	\
	    		${hw}/darwin/quartz/XDarwinStartup.man \
	    		${hw}/xfree86/doc/README.Darwin	\
	    		${hw}/xfree86/doc/sgml/Darwin.sgml \
	    		${hw}/xfree86/etc/bindist/Darwin-ppc/quartz-list \
			${worksrcpath}/programs/Xserver/Imakefile \
	}
}
