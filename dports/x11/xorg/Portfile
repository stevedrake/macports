# $Id: Portfile,v 1.2 2004/09/13 17:40:36 waqar Exp $

PortSystem 1.0
name		xorg
version		X11R6.8.0
categories	x11
maintainers	waqar@opendarwin.org
description	The X Window System
long_description	\
	X11, or X, is a vendor-neutral, system-architecture neutral 	\
	network-transparent window system and user interface standard. 	\
	In other words, it's a GUI for UNIX. X can use your network -- 	\
	you may run CPU-intensive programs on high powered workstations \
	and display the user interface (the windows) on inexpensive 	\
	desktop machines.

platforms	darwin
homepage	http://www.x.org
master_sites    http://freedesktop.org/~xorg/${version}/src/

distfiles
checksums

array set checksum { \
	1 c31a2e1c226e659c2ff29abfe55386e3 \
	2 4089bb6efb6c5bc73fbcfc23fafcb0c8 \
	3 488a5ebbbdf48d974efbc3a0bde92bf4 \
	4 0ffaef789784ae16ca263e7ae60db656 \
	5 af129720efbe82a1a82505c23227f70b \
	6 4be7648c1512d5da7e738e500dd5ba30 \
	7 888ced8bc85fbd2bd4880dba23a7f44a \
}

for {set i 1} {$i <= 7} {incr i} {
	set filename ${version}-src${i}${extract.suffix}
	distfiles-append ${filename}
	checksums-append ${filename} md5 $checksum($i)
}

worksrcdir 	xc

configure	{
	set cfpath ${worksrcpath}/config/cf
	file copy -force ${cfpath}/xorgsite.def ${cfpath}/host.def
}

build.target	World
destroot.target install install.man

variant darwin 	{
	pre-configure {
		set hw ${worksrcpath}/programs/Xserver/hw
	  	reinplace "s|/Applications|/Applications/DarwinPorts|g"	\
	    		${hw}/darwin/quartz/Imakefile 	\
	    		${hw}/darwin/quartz/XDarwinStartup.man \
	    		${hw}/xfree86/doc/README.Darwin	\
	    		${hw}/xfree86/doc/sgml/Darwin.sgml \
	    		${hw}/xfree86/etc/bindist/Darwin-ppc/quartz-list \
			${worksrcpath}/programs/Xserver/Imakefile \
	}
}
