# $Id$

PortSystem			1.0

name				xrender
set my_name         libXrender
version				0.9.0
revision            3
categories			x11
platforms			darwin
maintainers			nomaintainer
description			X Render Extension library

long_description	${description}

homepage			http://fontconfig.org/
master_sites		http://xlibs.freedesktop.org/release/
distname			${my_name}-${version}
use_bzip2			yes

checksums           md5 ce7cda009aa0b10a73637941d44ae789 \
                    sha1 98437c8eadf6caa78ceed2b748d72da97b154359 \
                    rmd160 4d1bf4aa5fd24b35094773d4bdb3b2834ce971c2

depends_lib			lib:libX11.6:XFree86 \
					port:xorg-renderproto

post-patch {
    # Brute-force things into building with the universal LDFLAGS
    if {[variant_isset universal]} {
        reinplace "s|-dynamiclib|-dynamiclib ${configure.universal_ldflags}|g" \
            ${worksrcpath}/configure \
            ${worksrcpath}/ltmain.sh
    }
}

configure.args \
    --x-includes=${x11prefix}/include \
    --x-libraries=${x11prefix}/lib \

configure.env \
    RENDER_CFLAGS=-I${prefix}/include \
    RENDER_LIBS=-L${prefix}/lib

configure.universal_ldflags-append  -isysroot ${sysroot}

use_parallel_build  yes

post-destroot {
    set docdir ${prefix}/share/doc/${name}-${version}
    xinstall -d ${destroot}${docdir}
    xinstall -m 0644 -W ${worksrcpath} AUTHORS COPYING ChangeLog NEWS README \
        ${destroot}${docdir}
}

livecheck.check regex
livecheck.url   ${master_sites}?C=M&O=D
livecheck.regex ${my_name}-(\\d+(?:\\.\\d+)*)
