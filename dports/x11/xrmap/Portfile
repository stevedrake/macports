# $Id: Portfile,v 1.1 2004/11/10 12:30:41 mww Exp $

PortSystem 1.0

name			xrmap
version			2.29
categories		x11
platforms		darwin
maintainers		mww@opendarwin.org
description		X11 client for the CIA World data bank
long_description	The Xrmap program provides a user-friendly X client for \
				generating images of the Earth and manipulating the CIA World \
				data bank II global vector information.

homepage		http://frmas.free.fr/li_1.htm
master_sites	ftp://ftp.ac-grenoble.fr/ge/geosciences/xrmap/:src \
				ftp://ftp.ac-grenoble.fr/ge/geosciences/xrmap/data:data
distfiles		${distname}.tar.bz2:src \
				CIA_WDB2.jpd.gz:data \
				anthems-1.1.tar.bz2:data \
				flags-1.1.tar.bz2:data \
				hymns-1.2.tar.bz2:data \
				factbook_text_2002.tar.bz2:data
checksums		${distname}.tar.bz2 md5 8e0ef89c17aca958d855e8c75dff6ab0 \
				CIA_WDB2.jpd.gz md5 5a08415115ef4555aa6ba5e8a19791ec \
				anthems-1.1.tar.bz2 md5 4d63e6a61e9197f3c382e518de6503db \
				flags-1.1.tar.bz2 md5 e15fbfb1f1c8a313573ac499fb0ea090 \
				hymns-1.2.tar.bz2 md5 b5c1c26e1d5c842c53c9a5460cb02864 \
				factbook_text_2002.tar.bz2 md5 d28fc69a9fd48d9d39a1fda8099cfb1b

depends_lib		lib:libX11.6:XFree86

use_bzip2		yes
extract.only	${distname}.tar.bz2 \
				anthems-1.1.tar.bz2 \
				flags-1.1.tar.bz2 \
				hymns-1.2.tar.bz2 \
				factbook_text_2002.tar.bz2
post-extract	{
	file copy ${distpath}/CIA_WDB2.jpd.gz ${workpath}
	system "cd ${workpath} && gunzip CIA_WDB2.jpd.gz"
}

configure	{
	system "cd ${worksrcpath} && xmkmf"
}

build.args		DESTDIR=${prefix} \
				BINDIR=/bin \
				MANDIR=/share/man/man1 \
				SHAREDIR=/share/${name}

destroot.destdir	DESTDIR=${destroot}${prefix} \
				BINDIR=/bin \
				MANDIR=/share/man/man1 \
				SHAREDIR=/share/${name} \
				DOCHTMLDIR=/share/doc/${name} \
				INSTALLFLAGS=-c

post-destroot	{
	xinstall -m 644 ${workpath}/CIA_WDB2.jpd ${destroot}${prefix}/share/${name}
	file copy ${workpath}/anthems ${destroot}${prefix}/share/${name}/
	file copy ${workpath}/factbook ${destroot}${prefix}/share/${name}/
	file delete -force ${destroot}${prefix}/share/${name}/flags
	file copy ${workpath}/flags ${destroot}${prefix}/share/${name}/
	file copy ${workpath}/hymns ${destroot}${prefix}/share/${name}
}
