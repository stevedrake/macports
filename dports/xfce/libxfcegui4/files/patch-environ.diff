--- libxfcegui4/dialogs.c.orig	2007-01-25 21:48:59.000000000 +0100
+++ libxfcegui4/dialogs.c	2007-09-20 14:26:18.000000000 +0200
@@ -60,7 +60,15 @@
 /* max. length of a message */
 #define MAXMESSAGELEN   2048
 
+/* Darwin does not have a variable named environ
+   but has a function which you can get the environ
+   variable with.  */
+#if defined(__APPLE__) && defined(__MACH__)
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#else
 extern char **environ;
+#endif
 
 /* create a header with optional icon (may be NULL) in larger bold font;
  * background and foreground colors are taken from gtk */
--- libxfcegui4/xfce-exec.c.orig	2007-01-25 21:48:59.000000000 +0100
+++ libxfcegui4/xfce-exec.c	2007-09-20 14:35:04.000000000 +0200
@@ -55,7 +55,15 @@
 #include "xfce-exec.h"
 #include "xfce-startup-notification.h"
 
+/* Darwin does not have a variable named environ
+   but has a function which you can get the environ
+   variable with.  */
+#if defined(__APPLE__) && defined(__MACH__)
+#include <crt_externs.h>
+#define environ (*_NSGetEnviron())
+#else
 extern char **environ;
+#endif
 
 static void
 child_setup_async(gpointer user_data)
