--- ./configure.in.orig	2008-10-26 23:48:40.000000000 +0100
+++ ./configure.in	2008-10-31 13:34:23.000000000 +0100
@@ -57,6 +57,7 @@ AC_AIX()
 AC_ISC_POSIX()
 AC_MINIX()
 AM_CONDITIONAL([HAVE_CYGWIN], [test "`uname | grep \"CYGWIN\"`" != ""])
+AM_CONDITIONAL([HAVE_DARWIN], [test "`uname`" == "Darwin"])
 
 dnl ********************************
 dnl *** Check for basic programs ***
--- ./configure.orig	2008-10-26 23:48:50.000000000 +0100
+++ ./configure	2008-10-31 13:34:34.000000000 +0100
@@ -906,6 +906,8 @@ INTLTOOL_EXTRACT
 INTLTOOL_MERGE
 INTLTOOL_UPDATE
 USE_NLS
+HAVE_DARWIN_FALSE
+HAVE_DARWIN_TRUE
 HAVE_CYGWIN_FALSE
 HAVE_CYGWIN_TRUE
 EGREP
@@ -4980,6 +4982,14 @@ else
   HAVE_CYGWIN_FALSE=
 fi
 
+ if test "`uname`" == "Darwin"; then
+  HAVE_DARWIN_TRUE=
+  HAVE_DARWIN_FALSE='#'
+else
+  HAVE_DARWIN_TRUE='#'
+  HAVE_DARWIN_FALSE=
+fi
+
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@@ -7114,7 +7124,7 @@ ia64-*-hpux*)
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 7117 "configure"' > conftest.$ac_ext
+  echo '#line 7127 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
@@ -9712,11 +9722,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9715: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9725: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9719: \$? = $ac_status" >&5
+   echo "$as_me:9729: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -10002,11 +10012,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:10005: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:10015: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:10009: \$? = $ac_status" >&5
+   echo "$as_me:10019: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -10106,11 +10116,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:10109: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:10119: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:10113: \$? = $ac_status" >&5
+   echo "$as_me:10123: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -12508,7 +12518,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 12511 "configure"
+#line 12521 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -12608,7 +12618,7 @@ else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 12611 "configure"
+#line 12621 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
@@ -15017,11 +15027,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15020: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15030: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:15024: \$? = $ac_status" >&5
+   echo "$as_me:15034: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -15121,11 +15131,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15124: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15134: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:15128: \$? = $ac_status" >&5
+   echo "$as_me:15138: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -16706,11 +16716,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16709: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16719: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:16713: \$? = $ac_status" >&5
+   echo "$as_me:16723: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -16810,11 +16820,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16813: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16823: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:16817: \$? = $ac_status" >&5
+   echo "$as_me:16827: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -19027,11 +19037,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:19030: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:19040: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:19034: \$? = $ac_status" >&5
+   echo "$as_me:19044: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -19317,11 +19327,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:19320: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:19330: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:19324: \$? = $ac_status" >&5
+   echo "$as_me:19334: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
@@ -19421,11 +19431,11 @@ else
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:19424: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:19434: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:19428: \$? = $ac_status" >&5
+   echo "$as_me:19438: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
@@ -27073,6 +27083,13 @@ $as_echo "$as_me: error: conditional \"H
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${HAVE_DARWIN_TRUE}" && test -z "${HAVE_DARWIN_FALSE}"; then
+  { { $as_echo "$as_me:$LINENO: error: conditional \"HAVE_DARWIN\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+$as_echo "$as_me: error: conditional \"HAVE_DARWIN\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
   { { $as_echo "$as_me:$LINENO: error: conditional \"am__fastdepCC\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
--- ./plugins/display_plugin/Makefile.am.orig	2008-10-26 23:03:59.000000000 +0100
+++ ./plugins/display_plugin/Makefile.am	2008-10-31 13:51:49.000000000 +0100
@@ -41,6 +41,11 @@ display_plugin_la_LIBADD +=						\
 	$(LIBX11_LIBS)
 endif
 
+if HAVE_DARWIN
+display_plugin_la_LIBADD +=						\
+	$(XFCE_MCS_MANAGER_LIBS)
+endif
+
 desktopdir = $(datadir)/applications
 desktop_in_files = xfce-display-settings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
--- ./plugins/display_plugin/Makefile.in.orig	2008-10-26 23:48:48.000000000 +0100
+++ ./plugins/display_plugin/Makefile.in	2008-10-31 13:52:38.000000000 +0100
@@ -42,6 +42,9 @@ host_triplet = @host@
 @HAVE_CYGWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)					\
 @HAVE_CYGWIN_TRUE@	$(LIBX11_LIBS)
 
+@HAVE_DARWIN_TRUE@am__append_2 = \
+@HAVE_DARWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)
+
 subdir = plugins/display_plugin
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
--- ./plugins/keyboard_plugin/Makefile.am.orig	2008-10-26 23:03:59.000000000 +0100
+++ ./plugins/keyboard_plugin/Makefile.am	2008-10-31 13:43:29.000000000 +0100
@@ -49,6 +49,11 @@ keyboard_plugin_la_LIBADD +=						\
 	$(LIBX11_LIBS)
 endif
 
+if HAVE_DARWIN
+keyboard_plugin_la_LIBADD +=						\
+	$(XFCE_MCS_MANAGER_LIBS)
+endif
+
 desktopdir = $(datadir)/applications
 desktop_in_files = xfce-keyboard-settings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
--- ./plugins/keyboard_plugin/Makefile.in.orig	2008-10-26 23:48:48.000000000 +0100
+++ ./plugins/keyboard_plugin/Makefile.in	2008-10-31 13:44:36.000000000 +0100
@@ -42,6 +42,9 @@ host_triplet = @host@
 @HAVE_CYGWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)					\
 @HAVE_CYGWIN_TRUE@	$(LIBX11_LIBS)
 
+@HAVE_DARWIN_TRUE@am__append_2 = \
+@HAVE_DARWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)
+
 subdir = plugins/keyboard_plugin
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
--- ./plugins/mouse_plugin/Makefile.am.orig	2008-10-26 23:03:59.000000000 +0100
+++ ./plugins/mouse_plugin/Makefile.am	2008-10-31 13:47:05.000000000 +0100
@@ -46,6 +46,11 @@ mouse_plugin_la_LIBADD +=						\
 	$(LIBX11_LIBS)
 endif
 
+if HAVE_DARWIN
+mouse_plugin_la_LIBADD +=						\
+	$(XFCE_MCS_MANAGER_LIBS)
+endif
+
 desktopdir = $(datadir)/applications
 desktop_in_files = xfce-mouse-settings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
--- ./plugins/mouse_plugin/Makefile.in.orig	2008-10-26 23:48:48.000000000 +0100
+++ ./plugins/mouse_plugin/Makefile.in	2008-10-31 13:48:33.000000000 +0100
@@ -43,6 +43,9 @@ host_triplet = @host@
 @HAVE_CYGWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)					\
 @HAVE_CYGWIN_TRUE@	$(LIBX11_LIBS)
 
+@HAVE_DARWIN_TRUE@am__append_2 = \
+@HAVE_DARWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)
+
 subdir = plugins/mouse_plugin
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
--- ./plugins/ui_plugin/Makefile.am.orig	2008-10-26 23:03:59.000000000 +0100
+++ ./plugins/ui_plugin/Makefile.am	2008-10-31 13:38:56.000000000 +0100
@@ -38,6 +38,11 @@ ui_plugin_la_LIBADD +=							\
 	$(XFCE_MCS_MANAGER_LIBS)
 endif
 
+if HAVE_DARWIN
+ui_plugin_la_LIBADD +=							\
+	$(XFCE_MCS_MANAGER_LIBS)
+endif
+
 desktopdir = $(datadir)/applications
 desktop_in_files = xfce-ui-settings.desktop.in
 desktop_DATA = $(desktop_in_files:.desktop.in=.desktop)
--- ./plugins/ui_plugin/Makefile.in.orig	2008-10-26 23:48:49.000000000 +0100
+++ ./plugins/ui_plugin/Makefile.in	2008-10-31 13:41:00.000000000 +0100
@@ -42,6 +42,9 @@ host_triplet = @host@
 @HAVE_CYGWIN_TRUE@am__append_2 = \
 @HAVE_CYGWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)
 
+@HAVE_DARWIN_TRUE@am__append_2 = \
+@HAVE_DARWIN_TRUE@	$(XFCE_MCS_MANAGER_LIBS)
+
 subdir = plugins/ui_plugin
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
